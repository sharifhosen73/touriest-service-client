/*

Copyright 2010-2017 Mike Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

 Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

 Neither the name of the author nor the names of contributors may be used to
  endorse or promote products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var d3=d3||{};
(function(){function se(a){return function(){return this.matches(a)}}function I(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function H(a){1===a.length&&(a=D(a));return{left:function(b,c,f,l){null==f&&(f=0);null==l&&(l=b.length);for(;f<l;){var t=f+l>>>1;0>a(b[t],c)?f=t+1:l=t}return f},right:function(b,c,f,l){null==f&&(f=0);null==l&&(l=b.length);for(;f<l;){var t=f+l>>>1;0<a(b[t],c)?l=t:f=t+1}return f}}}function D(a){return function(b,c){return I(a(b),c)}}function J(a,b){return[a,b]}function w(a){return null===a?
NaN:+a}function p(a,b){var c=a.length,f=0,l=-1,t=0,x,A=0;if(null==b)for(;++l<c;){if(!isNaN(x=w(a[l]))){var F=x-t;t+=F/++f;A+=F*(x-t)}}else for(;++l<c;)isNaN(x=w(b(a[l],l,a)))||(F=x-t,t+=F/++f,A+=F*(x-t));if(1<f)return A/(f-1)}function k(a,b){return(a=p(a,b))?Math.sqrt(a):a}function e(a,b){var c=a.length,f=-1,l,t,x;if(null==b)for(;++f<c;){if(null!=(l=a[f])&&l>=l)for(t=x=l;++f<c;)null!=(l=a[f])&&(t>l&&(t=l),x<l&&(x=l))}else for(;++f<c;)if(null!=(l=b(a[f],f,a))&&l>=l)for(t=x=l;++f<c;)null!=(l=b(a[f],
f,a))&&(t>l&&(t=l),x<l&&(x=l));return[t,x]}function d(a){return function(){return a}}function h(a){return a}function g(a,b,c){a=+a;b=+b;c=2>(l=arguments.length)?(b=a,a=0,1):3>l?1:+c;for(var f=-1,l=Math.max(0,Math.ceil((b-a)/c))|0,t=Array(l);++f<l;)t[f]=a+f*c;return t}function n(a,b,c){var f,l=-1,t;b=+b;a=+a;c=+c;if(a===b&&0<c)return[a];if(f=b<a){var x=a;a=b;b=x}if(0===(t=r(a,b,c))||!isFinite(t))return[];if(0<t)for(a=Math.ceil(a/t),b=Math.floor(b/t),b=Array(x=Math.ceil(b-a+1));++l<x;)b[l]=(a+l)*t;
else for(a=Math.floor(a*t),b=Math.ceil(b*t),b=Array(x=Math.ceil(a-b+1));++l<x;)b[l]=(a-l)/t;f&&b.reverse();return b}function r(a,b,c){b=(b-a)/Math.max(0,c);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=bg?10:b>=cg?5:b>=dg?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=bg?10:b>=cg?5:b>=dg?2:1)}function q(a,b,c){var f=Math.abs(b-a)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(f)/Math.LN10));f/=c;f>=bg?c*=10:f>=cg?c*=5:f>=dg&&(c*=2);return b<a?-c:c}function v(a){return Math.ceil(Math.log(a.length)/
Math.LN2)+1}function B(a,b,c){null==c&&(c=w);if(f=a.length){if(0>=(b=+b)||2>f)return+c(a[0],0,a);if(1<=b)return+c(a[f-1],f-1,a);var f;b*=f-1;f=Math.floor(b);var l=+c(a[f],f,a);a=+c(a[f+1],f+1,a);return l+(a-l)*(b-f)}}function K(a,b){var c=a.length,f=-1,l,t;if(null==b)for(;++f<c;){if(null!=(l=a[f])&&l>=l)for(t=l;++f<c;)null!=(l=a[f])&&l>t&&(t=l)}else for(;++f<c;)if(null!=(l=b(a[f],f,a))&&l>=l)for(t=l;++f<c;)null!=(l=b(a[f],f,a))&&l>t&&(t=l);return t}function C(a){var b=a.length;var c=-1;for(var f=
0,l,t;++c<b;)f+=a[c].length;for(l=Array(f);0<=--b;)for(t=a[b],c=t.length;0<=--c;)l[--f]=t[c];return l}function y(a,b){var c=a.length,f=-1,l,t;if(null==b)for(;++f<c;){if(null!=(l=a[f])&&l>=l)for(t=l;++f<c;)null!=(l=a[f])&&t>l&&(t=l)}else for(;++f<c;)if(null!=(l=b(a[f],f,a))&&l>=l)for(t=l;++f<c;)null!=(l=b(a[f],f,a))&&t>l&&(t=l);return t}function L(a){if(!(t=a.length))return[];for(var b=-1,c=y(a,U),f=Array(c);++b<c;)for(var l=-1,t,x=f[b]=Array(t);++l<t;)x[l]=a[l][b];return f}function U(a){return a.length}
function X(a){return a}function S(a){return"translate("+(a+.5)+",0)"}function Y(a){return"translate(0,"+(a+.5)+")"}function ha(a){return function(b){return+a(b)}}function ia(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return+a(c)+b}}function wa(){return!this.__axis}function Ba(a,b){function c(G){var Q=null==l?b.ticks?b.ticks.apply(b,f):b.domain():l,Z=null==t?b.tickFormat?b.tickFormat.apply(b,f):X:t,da=Math.max(x,0)+F,ka=b.range(),qa=+ka[0]+.5;ka=+ka[ka.length-
1]+.5;var R=(b.bandwidth?ia:ha)(b.copy()),T=G.selection?G.selection():G,ja=T.selectAll(".domain").data([null]);Q=T.selectAll(".tick").data(Q,b).order();var ra=Q.exit(),xa=Q.enter().append("g").attr("class","tick"),oa=Q.select("line"),ua=Q.select("text");ja=ja.merge(ja.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));Q=Q.merge(xa);oa=oa.merge(xa.append("line").attr("stroke","currentColor").attr(u+"2",P*x));ua=ua.merge(xa.append("text").attr("fill","currentColor").attr(u,
P*da).attr("dy",1===a?"0em":3===a?"0.71em":"0.32em"));G!==T&&(ja=ja.transition(G),Q=Q.transition(G),oa=oa.transition(G),ua=ua.transition(G),ra=ra.transition(G).attr("opacity",1E-6).attr("transform",function(m){return isFinite(m=R(m))?z(m):this.getAttribute("transform")}),xa.attr("opacity",1E-6).attr("transform",function(m){var E=this.parentNode.__axis;return z(E&&isFinite(E=E(m))?E:R(m))}));ra.remove();ja.attr("d",4===a||2==a?A?"M"+P*A+","+qa+"H0.5V"+ka+"H"+P*A:"M0.5,"+qa+"V"+ka:A?"M"+qa+","+P*A+
"V0.5H"+ka+"V"+P*A:"M"+qa+",0.5H"+ka);Q.attr("opacity",1).attr("transform",function(m){return z(R(m))});oa.attr(u+"2",P*x);ua.attr(u,P*da).text(Z);T.filter(wa).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===a?"start":4===a?"end":"middle");T.each(function(){this.__axis=R})}var f=[],l=null,t=null,x=6,A=6,F=3,P=1===a||4===a?-1:1,u=4===a||2===a?"x":"y",z=1===a||3===a?S:Y;c.scale=function(G){return arguments.length?(b=G,c):b};c.ticks=function(){return f=
eg.call(arguments),c};c.tickArguments=function(G){return arguments.length?(f=null==G?[]:eg.call(G),c):f.slice()};c.tickValues=function(G){return arguments.length?(l=null==G?null:eg.call(G),c):l&&l.slice()};c.tickFormat=function(G){return arguments.length?(t=G,c):t};c.tickSize=function(G){return arguments.length?(x=A=+G,c):x};c.tickSizeInner=function(G){return arguments.length?(x=+G,c):x};c.tickSizeOuter=function(G){return arguments.length?(A=+G,c):A};c.tickPadding=function(G){return arguments.length?
(F=+G,c):F};return c}function Ea(){for(var a=0,b=arguments.length,c={},f;a<b;++a){if(!(f=arguments[a]+"")||f in c)throw Error("illegal type: "+f);c[f]=[]}return new Da(c)}function Da(a){this._=a}function ya(a,b){return a.trim().split(/^|\s+/).map(function(c){var f="",l=c.indexOf(".");0<=l&&(f=c.slice(l+1),c=c.slice(0,l));if(c&&!b.hasOwnProperty(c))throw Error("unknown type: "+c);return{type:c,name:f}})}function Ja(a,b,c){for(var f=0,l=a.length;f<l;++f)if(a[f].name===b){a[f]=Pn;a=a.slice(0,f).concat(a.slice(f+
1));break}null!=c&&a.push({name:b,value:c});return a}function La(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return Eb.hasOwnProperty(b)?{space:Eb[b],local:a}:a}function Ra(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function Pa(a){return function(){return this.ownerDocument.createElementNS(a.space,
a.local)}}function Ma(a){a=La(a);return(a.local?Pa:Ra)(a)}function fb(){}function pb(a){return null==a?fb:function(){return this.querySelector(a)}}function vc(){return[]}function fg(a){return null==a?vc:function(){return this.querySelectorAll(a)}}function zi(a){return Array(a.length)}function te(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function Qn(a){return function(){return a}}function Rn(a,b,c,f,l,t){for(var x=0,A,F=
b.length,P=t.length;x<P;++x)(A=b[x])?(A.__data__=t[x],f[x]=A):c[x]=new te(a,t[x]);for(;x<F;++x)if(A=b[x])l[x]=A}function Sn(a,b,c,f,l,t,x){var A,F,P={},u=b.length,z=t.length,G=Array(u),Q;for(A=0;A<u;++A)if(F=b[A])G[A]=Q="$"+x.call(F,F.__data__,A,b),Q in P?l[A]=F:P[Q]=F;for(A=0;A<z;++A)Q="$"+x.call(a,t[A],A,t),(F=P[Q])?(f[A]=F,F.__data__=t[A],P[Q]=null):c[A]=new te(a,t[A]);for(A=0;A<u;++A)(F=b[A])&&P[G[A]]===F&&(l[A]=F)}function Tn(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Un(a){return function(){this.removeAttribute(a)}}
function Vn(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Wn(a,b){return function(){this.setAttribute(a,b)}}function Xn(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function Yn(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function Zn(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function gg(a){return a.ownerDocument&&
a.ownerDocument.defaultView||a.document&&a||a.defaultView}function $n(a){return function(){this.style.removeProperty(a)}}function ao(a,b,c){return function(){this.style.setProperty(a,b,c)}}function bo(a,b,c){return function(){var f=b.apply(this,arguments);null==f?this.style.removeProperty(a):this.style.setProperty(a,f,c)}}function wc(a,b){return a.style.getPropertyValue(b)||gg(a).getComputedStyle(a,null).getPropertyValue(b)}function co(a){return function(){delete this[a]}}function eo(a,b){return function(){this[a]=
b}}function fo(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function hg(a){return a.classList||new Ai(a)}function Ai(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function Bi(a,b){a=hg(a);for(var c=-1,f=b.length;++c<f;)a.add(b[c])}function Ci(a,b){a=hg(a);for(var c=-1,f=b.length;++c<f;)a.remove(b[c])}function go(a){return function(){Bi(this,a)}}function ho(a){return function(){Ci(this,a)}}function io(a,b){return function(){(b.apply(this,
arguments)?Bi:Ci)(this,a)}}function jo(){this.textContent=""}function ko(a){return function(){this.textContent=a}}function lo(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function mo(){this.innerHTML=""}function no(a){return function(){this.innerHTML=a}}function oo(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function po(){this.nextSibling&&this.parentNode.appendChild(this)}function qo(){this.previousSibling&&this.parentNode.insertBefore(this,
this.parentNode.firstChild)}function ro(){return null}function so(){var a=this.parentNode;a&&a.removeChild(this)}function to(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function uo(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function vo(a,b,c){a=Di(a,b,c);return function(f){var l=f.relatedTarget;l&&(l===this||l.compareDocumentPosition(this)&8)||a.call(this,f)}}function Di(a,b,c){return function(f){var l=d3.event;d3.event=f;try{a.call(this,
this.__data__,b,c)}finally{d3.event=l}}}function wo(a){return a.trim().split(/^|\s+/).map(function(b){var c="",f=b.indexOf(".");0<=f&&(c=b.slice(f+1),b=b.slice(0,f));return{type:b,name:c}})}function xo(a){return function(){var b=this.__on;if(b){for(var c=0,f=-1,l=b.length,t;c<l;++c)(t=b[c],a.type&&t.type!==a.type||t.name!==a.name)?b[++f]=t:this.removeEventListener(t.type,t.listener,t.capture);++f?b.length=f:delete this.__on}}}function yo(a,b,c){var f=Ei.hasOwnProperty(a.type)?vo:Di;return function(l,
t,x){l=this.__on;var A;t=f(b,t,x);if(l){x=0;for(var F=l.length;x<F;++x)if((A=l[x]).type===a.type&&A.name===a.name){this.removeEventListener(A.type,A.listener,A.capture);this.addEventListener(A.type,A.listener=t,A.capture=c);A.value=b;return}}this.addEventListener(a.type,t,c);A={type:a.type,name:a.name,value:b,listener:t,capture:c};l?l.push(A):this.__on=[A]}}function ud(a,b,c,f){var l=d3.event;a.sourceEvent=d3.event;d3.event=a;try{return b.apply(c,f)}finally{d3.event=l}}function Fi(a,b,c){var f=gg(a),
l=f.CustomEvent;"function"===typeof l?l=new l(b,c):(l=f.document.createEvent("Event"),c?(l.initEvent(b,c.bubbles,c.cancelable),l.detail=c.detail):l.initEvent(b,!1,!1));a.dispatchEvent(l)}function zo(a,b){return function(){return Fi(this,a,b)}}function Ao(a,b){return function(){return Fi(this,a,b.apply(this,arguments))}}function ub(a,b){this._groups=a;this._parents=b}function xc(){return new ub([[document.documentElement]],ig)}function Cb(a){return"string"===typeof a?new ub([[document.querySelector(a)]],
[document.documentElement]):new ub([[a]],ig)}function Gi(){return new jg}function jg(){this._="@"+(++Bo).toString(36)}function kg(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function ue(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function kc(a){var b=kg();b.changedTouches&&(b=
b.changedTouches[0]);return ue(a,b)}function ve(a,b,c){3>arguments.length&&(c=b,b=kg().changedTouches);for(var f=0,l=b?b.length:0,t;f<l;++f)if((t=b[f]).identifier===c)return ue(a,t);return null}function Nc(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function we(a){var b=a.document.documentElement;a=Cb(a).on("dragstart.drag",Nc,!0);if("onselectstart"in b)a.on("selectstart.drag",Nc,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function xe(a,b){var c=a.document.documentElement,
f=Cb(a).on("dragstart.drag",null);b&&(f.on("click.drag",Nc,!0),setTimeout(function(){f.on("click.drag",null)},0));if("onselectstart"in c)f.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function ye(a){return function(){return a}}function lg(a,b,c,f,l,t,x,A,F,P){this.target=a;this.type=b;this.subject=c;this.identifier=f;this.active=l;this.x=t;this.y=x;this.dx=A;this.dy=F;this._=P}function Co(){return!d3.event.button}function Do(){return this.parentNode}function Eo(a){return null==
a?{x:d3.event.x,y:d3.event.y}:a}function Fo(){return"ontouchstart"in this}function Oc(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function vd(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function lc(){}function mc(a){var b;a=(a+"").trim().toLowerCase();return(b=Go.exec(a))?(b=parseInt(b[1],16),new qb(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=Ho.exec(a))?Hi(parseInt(b[1],16)):(b=Io.exec(a))?new qb(b[1],b[2],b[3],1):(b=Jo.exec(a))?new qb(255*b[1]/100,255*b[2]/
100,255*b[3]/100,1):(b=Ko.exec(a))?Ii(b[1],b[2],b[3],b[4]):(b=Lo.exec(a))?Ii(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Mo.exec(a))?Ji(b[1],b[2]/100,b[3]/100,1):(b=No.exec(a))?Ji(b[1],b[2]/100,b[3]/100,b[4]):Ki.hasOwnProperty(a)?Hi(Ki[a]):"transparent"===a?new qb(NaN,NaN,NaN,0):null}function Hi(a){return new qb(a>>16&255,a>>8&255,a&255,1)}function Ii(a,b,c,f){0>=f&&(a=b=c=NaN);return new qb(a,b,c,f)}function mg(a){a instanceof lc||(a=mc(a));if(!a)return new qb;a=a.rgb();return new qb(a.r,a.g,
a.b,a.opacity)}function Pc(a,b,c,f){return 1===arguments.length?mg(a):new qb(a,b,c,null==f?1:f)}function qb(a,b,c,f){this.r=+a;this.g=+b;this.b=+c;this.opacity=+f}function ng(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function Ji(a,b,c,f){0>=f?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new Tb(a,b,c,f)}function Oo(a){if(a instanceof Tb)return new Tb(a.h,a.s,a.l,a.opacity);a instanceof lc||(a=mc(a));if(!a)return new Tb;if(a instanceof Tb)return a;a=a.rgb();
var b=a.r/255,c=a.g/255,f=a.b/255,l=Math.min(b,c,f),t=Math.max(b,c,f),x=NaN,A=t-l,F=(t+l)/2;A?(x=b===t?(c-f)/A+6*(c<f):c===t?(f-b)/A+2:(b-c)/A+4,A/=.5>F?t+l:2-t-l,x*=60):A=0<F&&1>F?0:x;return new Tb(x,A,F,a.opacity)}function ze(a,b,c,f){return 1===arguments.length?Oo(a):new Tb(a,b,c,null==f?1:f)}function Tb(a,b,c,f){this.h=+a;this.s=+b;this.l=+c;this.opacity=+f}function og(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function pg(a){if(a instanceof Nb)return new Nb(a.l,
a.a,a.b,a.opacity);if(a instanceof Ub){if(isNaN(a.h))return new Nb(a.l,0,0,a.opacity);var b=a.h*Li;return new Nb(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof qb||(a=mg(a));var c=qg(a.r),f=qg(a.g),l=qg(a.b);b=rg(.2225045*c+.7168786*f+.0606169*l);if(c===f&&f===l)var t=c=b;else t=rg((.4360747*c+.3850649*f+.1430804*l)/.96422),c=rg((.0139322*c+.0971045*f+.7141733*l)/.82521);return new Nb(116*b-16,500*(t-b),200*(b-c),a.opacity)}function Ae(a,b,c,f){return 1===arguments.length?pg(a):new Nb(a,
b,c,null==f?1:f)}function Nb(a,b,c,f){this.l=+a;this.a=+b;this.b=+c;this.opacity=+f}function rg(a){return a>Po?Math.pow(a,1/3):a/Mi+Ni}function sg(a){return a>Qc?a*a*a:Mi*(a-Ni)}function tg(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function qg(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Oi(a){if(a instanceof Ub)return new Ub(a.h,a.c,a.l,a.opacity);a instanceof Nb||(a=pg(a));if(0===a.a&&0===a.b)return new Ub(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,
a.a)*Pi;return new Ub(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function Be(a,b,c,f){return 1===arguments.length?Oi(a):new Ub(a,b,c,null==f?1:f)}function Ub(a,b,c,f){this.h=+a;this.c=+b;this.l=+c;this.opacity=+f}function Ob(a,b,c,f){if(1===arguments.length){var l=a;if(l instanceof yc)l=new yc(l.h,l.s,l.l,l.opacity);else{l instanceof qb||(l=mg(l));var t=l.g/255,x=l.b/255,A=(Qi*x+l.r/255*-1.7884503806-3.5172982438*t)/(Qi+-1.7884503806-3.5172982438);x-=A;var F=(1.97294*(t-A)- -.29227*x)/
-.90649;x=(t=Math.sqrt(F*F+x*x)/(1.97294*A*(1-A)))?Math.atan2(F,x)*Pi-120:NaN;l=new yc(0>x?x+360:x,t,A,l.opacity)}}else l=new yc(a,b,c,null==f?1:f);return l}function yc(a,b,c,f){this.h=+a;this.s=+b;this.l=+c;this.opacity=+f}function Ri(a,b,c,f,l){var t=a*a,x=t*a;return((1-3*a+3*t-x)*b+(4-6*t+3*x)*c+(1+3*a+3*t-3*x)*f+x*l)/6}function Si(a){var b=a.length-1;return function(c){var f=0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),l=a[f],t=a[f+1];return Ri((c-f/b)*b,0<f?a[f-1]:2*l-t,l,t,f<b-1?a[f+2]:2*t-l)}}function Ti(a){var b=
a.length;return function(c){var f=Math.floor((0>(c%=1)?++c:c)*b);return Ri((c-f/b)*b,a[(f+b-1)%b],a[f%b],a[(f+1)%b],a[(f+2)%b])}}function Ce(a){return function(){return a}}function Ui(a,b){return function(c){return a+c*b}}function Qo(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(f){return Math.pow(a+f*b,c)}}function De(a,b){var c=b-a;return c?Ui(a,180<c||-180>c?c-360*Math.round(c/360):c):Ce(isNaN(a)?b:a)}function Ro(a){return 1===(a=+a)?ob:function(b,c){return c-b?Qo(b,c,a):Ce(isNaN(b)?
c:b)}}function ob(a,b){var c=b-a;return c?Ui(a,c):Ce(isNaN(a)?b:a)}function Vi(a){return function(b){var c=b.length,f=Array(c),l=Array(c),t=Array(c),x;for(x=0;x<c;++x){var A=Pc(b[x]);f[x]=A.r||0;l[x]=A.g||0;t[x]=A.b||0}f=a(f);l=a(l);t=a(t);A.opacity=1;return function(F){A.r=f(F);A.g=l(F);A.b=t(F);return A+""}}}function Wi(a,b){var c=b?b.length:0,f=a?Math.min(c,a.length):0,l=Array(f),t=Array(c),x;for(x=0;x<f;++x)l[x]=wd(a[x],b[x]);for(;x<c;++x)t[x]=b[x];return function(A){for(x=0;x<f;++x)t[x]=l[x](A);
return t}}function Xi(a,b){var c=new Date;return a=+a,b-=a,function(f){return c.setTime(a+b*f),c}}function Fb(a,b){return a=+a,b-=a,function(c){return a+b*c}}function Yi(a,b){var c={},f={},l;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(l in b)l in a?c[l]=wd(a[l],b[l]):f[l]=b[l];return function(t){for(l in c)f[l]=c[l](t);return f}}function So(a){return function(){return a}}function To(a){return function(b){return a(b)+""}}function ug(a,b){var c=vg.lastIndex=wg.lastIndex=
0,f,l,t,x=-1,A=[],F=[];a+="";for(b+="";(f=vg.exec(a))&&(l=wg.exec(b));)(t=l.index)>c&&(t=b.slice(c,t),A[x]?A[x]+=t:A[++x]=t),(f=f[0])===(l=l[0])?A[x]?A[x]+=l:A[++x]=l:(A[++x]=null,F.push({i:x,x:Fb(f,l)})),c=wg.lastIndex;c<b.length&&(t=b.slice(c),A[x]?A[x]+=t:A[++x]=t);return 2>A.length?F[0]?To(F[0].x):So(b):(b=F.length,function(P){for(var u=0,z;u<b;++u)A[(z=F[u]).i]=z.x(P);return A.join("")})}function wd(a,b){var c=typeof b,f;return null==b||"boolean"===c?Ce(b):("number"===c?Fb:"string"===c?(f=mc(b))?
(b=f,xd):ug:b instanceof mc?xd:b instanceof Date?Xi:Array.isArray(b)?Wi:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||isNaN(b)?Yi:Fb)(a,b)}function Zi(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}}function $i(a,b,c,f,l,t){var x,A,F;if(x=Math.sqrt(a*a+b*b))a/=x,b/=x;if(F=a*c+b*f)c-=a*F,f-=b*F;if(A=Math.sqrt(c*c+f*f))c/=A,f/=A,F/=A;a*f<b*c&&(a=-a,b=-b,F=-F,x=-x);return{translateX:l,translateY:t,rotate:Math.atan2(b,a)*aj,skewX:Math.atan(F)*aj,scaleX:x,scaleY:A}}function bj(a,
b,c,f){function l(P){return P.length?P.pop()+" ":""}function t(P,u,z,G,Q,Z){P!==z||u!==G?(Q=Q.push("translate(",null,b,null,c),Z.push({i:Q-4,x:Fb(P,z)},{i:Q-2,x:Fb(u,G)})):(z||G)&&Q.push("translate("+z+b+G+c)}function x(P,u,z,G){P!==u?(180<P-u?u+=360:180<u-P&&(P+=360),G.push({i:z.push(l(z)+"rotate(",null,f)-2,x:Fb(P,u)})):u&&z.push(l(z)+"rotate("+u+f)}function A(P,u,z,G){P!==u?G.push({i:z.push(l(z)+"skewX(",null,f)-2,x:Fb(P,u)}):u&&z.push(l(z)+"skewX("+u+f)}function F(P,u,z,G,Q,Z){P!==z||u!==G?(Q=
Q.push(l(Q)+"scale(",null,",",null,")"),Z.push({i:Q-4,x:Fb(P,z)},{i:Q-2,x:Fb(u,G)})):1===z&&1===G||Q.push(l(Q)+"scale("+z+","+G+")")}return function(P,u){var z=[],G=[];P=a(P);u=a(u);t(P.translateX,P.translateY,u.translateX,u.translateY,z,G);x(P.rotate,u.rotate,z,G);A(P.skewX,u.skewX,z,G);F(P.scaleX,P.scaleY,u.scaleX,u.scaleY,z,G);P=u=null;return function(Q){for(var Z=-1,da=G.length,ka;++Z<da;)z[(ka=G[Z]).i]=ka.x(Q);return z.join("")}}}function cj(a){return((a=Math.exp(a))+1/a)/2}function dj(a,b){var c=
a[0],f=a[1],l=a[2];a=b[2];var t=b[0]-c,x=b[1]-f,A=t*t+x*x;if(1E-12>A){var F=Math.log(a/l)/yd;a=function(z){return[c+z*t,f+z*x,l*Math.exp(yd*z*F)]}}else{var P=Math.sqrt(A);b=(a*a-l*l+4*A)/(4*l*P);a=(a*a-l*l-4*A)/(4*a*P);var u=Math.log(Math.sqrt(b*b+1)-b);F=(Math.log(Math.sqrt(a*a+1)-a)-u)/yd;a=function(z){z*=F;var G=cj(u),Q=yd*z+u;var Z=((Q=Math.exp(2*Q))-1)/(Q+1);var da=u;Q=((da=Math.exp(da))-1/da)/2;Z=l/(2*P)*(G*Z-Q);return[c+Z*t,f+Z*x,l*G/cj(yd*z+u)]}}a.duration=1E3*F;return a}function ej(a){return function(b,
c){var f=a((b=ze(b)).h,(c=ze(c)).h),l=ob(b.s,c.s),t=ob(b.l,c.l),x=ob(b.opacity,c.opacity);return function(A){b.h=f(A);b.s=l(A);b.l=t(A);b.opacity=x(A);return b+""}}}function fj(a){return function(b,c){var f=a((b=Be(b)).h,(c=Be(c)).h),l=ob(b.c,c.c),t=ob(b.l,c.l),x=ob(b.opacity,c.opacity);return function(A){b.h=f(A);b.c=l(A);b.l=t(A);b.opacity=x(A);return b+""}}}function gj(a){return function f(c){function l(t,x){var A=a((t=Ob(t)).h,(x=Ob(x)).h),F=ob(t.s,x.s),P=ob(t.l,x.l),u=ob(t.opacity,x.opacity);
return function(z){t.h=A(z);t.s=F(z);t.l=P(Math.pow(z,c));t.opacity=u(z);return t+""}}c=+c;l.gamma=f;return l}(1)}function Rc(){return zc||(hj(Uo),zc=zd.now()+Ee)}function Uo(){zc=0}function Ad(){this._call=this._time=this._next=null}function Fe(a,b,c){var f=new Ad;f.restart(a,b,c);return f}function ij(){Rc();++Sc;for(var a=Ge,b;a;)0<=(b=zc-a._time)&&a._call.call(null,b),a=a._next;--Sc}function jj(){zc=(He=zd.now())+Ee;Sc=Bd=0;try{ij()}finally{Sc=0;for(var a,b=Ge,c,f=Infinity;b;)b._call?(f>b._time&&
(f=b._time),a=b,b=b._next):(c=b._next,b._next=null,b=a?a._next=c:Ge=c);Cd=a;xg(f);zc=0}}function Vo(){var a=zd.now(),b=a-He;1E3<b&&(Ee-=b,He=a)}function xg(a){Sc||(Bd&&(Bd=clearTimeout(Bd)),24<a-zc?(Infinity>a&&(Bd=setTimeout(jj,a-zd.now()-Ee)),Dd&&(Dd=clearInterval(Dd))):(Dd||(He=zd.now(),Dd=setInterval(Vo,1E3)),Sc=1,hj(jj)))}function yg(a,b,c){var f=new Ad;b=null==b?0:+b;f.restart(function(l){f.stop();a(l+b)},b,c);return f}function Ie(a,b,c,f,l,t){var x=a.__transition;if(!x)a.__transition={};else if(c in
x)return;Wo(a,c,{name:b,index:f,group:l,on:Xo,tween:Yo,time:t.time,delay:t.delay,duration:t.duration,ease:t.ease,timer:null,state:0})}function zg(a,b){a=Pb(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function Ac(a,b){a=Pb(a,b);if(2<a.state)throw Error("too late; already started");return a}function Pb(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function Wo(a,b,c){function f(F){var P,u;if(1!==c.state)return t();for(G in x){var z=x[G];
if(z.name===c.name){if(3===z.state)return yg(f);4===z.state?(z.state=6,z.timer.stop(),z.on.call("interrupt",a,a.__data__,z.index,z.group),delete x[G]):+G<b&&(z.state=6,z.timer.stop(),delete x[G])}}yg(function(){3===c.state&&(c.state=4,c.timer.restart(l,c.delay,c.time),l(F))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;A=Array(u=c.tween.length);var G=0;for(P=-1;G<u;++G)if(z=c.tween[G].value.call(a,a.__data__,c.index,c.group))A[++P]=z;A.length=P+1}}function l(F){F=
F<c.duration?c.ease.call(null,F/c.duration):(c.timer.restart(t),c.state=5,1);for(var P=-1,u=A.length;++P<u;)A[P].call(null,F);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),t())}function t(){c.state=6;c.timer.stop();delete x[b];for(var F in x)return;delete a.__transition}var x=a.__transition,A;x[b]=c;c.timer=Fe(function(F){c.state=1;c.timer.restart(f,c.delay,c.time);c.delay<=F&&f(F-c.delay)},0,c.time)}function Bc(a,b){var c=a.__transition,f,l=!0,t;if(c){b=null==b?null:b+"";for(t in c)if((f=
c[t]).name!==b)l=!1;else{var x=2<f.state&&5>f.state;f.state=6;f.timer.stop();x&&f.on.call("interrupt",a,a.__data__,f.index,f.group);delete c[t]}l&&delete a.__transition}}function Zo(a,b){var c,f;return function(){var l=Ac(this,a),t=l.tween;if(t!==c){f=c=t;t=0;for(var x=f.length;t<x;++t)if(f[t].name===b){f=f.slice();f.splice(t,1);break}}l.tween=f}}function $o(a,b,c){var f,l;if("function"!==typeof c)throw Error();return function(){var t=Ac(this,a),x=t.tween;if(x!==f){l=(f=x).slice();x={name:b,value:c};
for(var A=0,F=l.length;A<F;++A)if(l[A].name===b){l[A]=x;break}A===F&&l.push(x)}t.tween=l}}function Ag(a,b,c){var f=a._id;a.each(function(){var l=Ac(this,f);(l.value||(l.value={}))[b]=c.apply(this,arguments)});return function(l){return Pb(l,f).value[b]}}function kj(a,b){var c;return("number"===typeof b?Fb:b instanceof mc?xd:(c=mc(b))?(b=c,xd):ug)(a,b)}function ap(a){return function(){this.removeAttribute(a)}}function bp(a){return function(){this.removeAttributeNS(a.space,a.local)}}function cp(a,b,
c){var f,l;return function(){var t=this.getAttribute(a);return t===c?null:t===f?l:l=b(f=t,c)}}function dp(a,b,c){var f,l;return function(){var t=this.getAttributeNS(a.space,a.local);return t===c?null:t===f?l:l=b(f=t,c)}}function ep(a,b,c){var f,l,t;return function(){var x=c(this);if(null==x)return void this.removeAttribute(a);var A=this.getAttribute(a);return A===x?null:A===f&&x===l?t:t=b(f=A,l=x)}}function fp(a,b,c){var f,l,t;return function(){var x=c(this);if(null==x)return void this.removeAttributeNS(a.space,
a.local);var A=this.getAttributeNS(a.space,a.local);return A===x?null:A===f&&x===l?t:t=b(f=A,l=x)}}function gp(a,b){function c(){var f=this,l=b.apply(f,arguments);return l&&function(t){f.setAttributeNS(a.space,a.local,l(t))}}c._value=b;return c}function hp(a,b){function c(){var f=this,l=b.apply(f,arguments);return l&&function(t){f.setAttribute(a,l(t))}}c._value=b;return c}function ip(a,b){return function(){zg(this,a).delay=+b.apply(this,arguments)}}function jp(a,b){return b=+b,function(){zg(this,
a).delay=b}}function kp(a,b){return function(){Ac(this,a).duration=+b.apply(this,arguments)}}function lp(a,b){return b=+b,function(){Ac(this,a).duration=b}}function mp(a,b){if("function"!==typeof b)throw Error();return function(){Ac(this,a).ease=b}}function np(a){return(a+"").trim().split(/^|\s+/).every(function(b){var c=b.indexOf(".");0<=c&&(b=b.slice(0,c));return!b||"start"===b})}function op(a,b,c){var f,l,t=np(b)?zg:Ac;return function(){var x=t(this,a),A=x.on;if(A!==f)(l=(f=A).copy()).on(b,c);
x.on=l}}function pp(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function qp(a,b){var c,f,l;return function(){var t=wc(this,a),x=(this.style.removeProperty(a),wc(this,a));return t===x?null:t===c&&x===f?l:l=b(c=t,f=x)}}function rp(a){return function(){this.style.removeProperty(a)}}function sp(a,b,c){var f,l;return function(){var t=wc(this,a);return t===c?null:t===f?l:l=b(f=t,c)}}function tp(a,b,c){var f,l,t;return function(){var x=
wc(this,a),A=c(this);null==A&&(A=(this.style.removeProperty(a),wc(this,a)));return x===A?null:x===f&&A===l?t:t=b(f=x,l=A)}}function up(a,b,c){function f(){var l=this,t=b.apply(l,arguments);return t&&function(x){l.style.setProperty(a,t(x),c)}}f._value=b;return f}function vp(a){return function(){this.textContent=a}}function wp(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function Vb(a,b,c,f){this._groups=a;this._parents=b;this._name=c;this._id=f}function lj(a){return xc().transition(a)}
function mj(a){return(1>=(a*=2)?a*a:--a*(2-a)+1)/2}function Bg(a){return(1>=(a*=2)?a*a*a:(a-=2)*a*a+2)/2}function nj(a){return(1-Math.cos(oj*a))/2}function pj(a){return(1>=(a*=2)?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function qj(a){return(1>=(a*=2)?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function Ed(a){return(a=+a)<Cg?Je*a*a:a<xp?Je*(a-=yp)*a+.75:a<zp?Je*(a-=Ap)*a+.9375:Je*(a-=Bp)*a+.984375}function rj(a){return function(){return a}}function Cp(a,b,c){this.target=a;this.type=b;this.selection=
c}function Ke(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Fd(a){return{type:a}}function Dp(){return!d3.event.button}function Ep(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function Dg(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function Eg(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function Fg(a){function b(G){var Q=G.property("__brush",x).selectAll(".overlay").data([Fd("overlay")]);Q.enter().append("rect").attr("class",
"overlay").attr("pointer-events","all").attr("cursor",ac.overlay).merge(Q).each(function(){var Z=Dg(this).extent;Cb(this).attr("x",Z[0][0]).attr("y",Z[0][1]).attr("width",Z[1][0]-Z[0][0]).attr("height",Z[1][1]-Z[0][1])});G.selectAll(".selection").data([Fd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ac.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");Q=G.selectAll(".handle").data(a.handles,function(Z){return Z.type});
Q.exit().remove();Q.enter().append("rect").attr("class",function(Z){return"handle handle--"+Z.type}).attr("cursor",function(Z){return ac[Z.type]});G.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",t)}function c(){var G=Cb(this),Q=Dg(this).selection;Q?(G.selectAll(".selection").style("display",null).attr("x",Q[0][0]).attr("y",Q[0][1]).attr("width",Q[1][0]-Q[0][0]).attr("height",Q[1][1]-Q[0][1]),G.selectAll(".handle").style("display",
null).attr("x",function(Z){return"e"===Z.type[Z.type.length-1]?Q[1][0]-u/2:Q[0][0]-u/2}).attr("y",function(Z){return"s"===Z.type[0]?Q[1][1]-u/2:Q[0][1]-u/2}).attr("width",function(Z){return"n"===Z.type||"s"===Z.type?Q[1][0]-Q[0][0]+u:u}).attr("height",function(Z){return"e"===Z.type||"w"===Z.type?Q[1][1]-Q[0][1]+u:u})):G.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(G,Q){return G.__brush.emitter||new l(G,Q)}function l(G,
Q){this.that=G;this.args=Q;this.state=G.__brush;this.active=0}function t(){function G(){var Na=kc(qa);!ta||ca||la||(Math.abs(Na[0]-ma[0])>Math.abs(Na[1]-ma[1])?la=!0:ca=!0);ma=Na;pa=!0;Ke();Q()}function Q(){aa=ma[0]-fa[0];ea=ma[1]-fa[1];switch(T){case Gg:case sj:ja&&(aa=Math.max(m-E,Math.min(N-V,aa)),na=E+aa,Ca=V+aa);ra&&(ea=Math.max(O-M,Math.min(ba-W,ea)),Aa=M+ea,za=W+ea);break;case Tc:0>ja?(aa=Math.max(m-E,Math.min(N-E,aa)),na=E+aa,Ca=V):0<ja&&(aa=Math.max(m-V,Math.min(N-V,aa)),na=E,Ca=V+aa);0>
ra?(ea=Math.max(O-M,Math.min(ba-M,ea)),Aa=M+ea,za=W):0<ra&&(ea=Math.max(O-W,Math.min(ba-W,ea)),Aa=M,za=W+ea);break;case Uc:ja&&(na=Math.max(m,Math.min(N,E-aa*ja)),Ca=Math.max(m,Math.min(N,V+aa*ja))),ra&&(Aa=Math.max(O,Math.min(ba,M-ea*ra)),za=Math.max(O,Math.min(ba,W+ea*ra)))}if(Ca<na){ja*=-1;var Na=E;E=V;V=Na;Na=na;na=Ca;Ca=Na;R in tj&&Ga.attr("cursor",ac[R=tj[R]])}za<Aa&&(ra*=-1,Na=M,M=W,W=Na,Na=Aa,Aa=za,za=Na,R in uj&&Ga.attr("cursor",ac[R=uj[R]]));xa.selection&&(ua=xa.selection);ca&&(na=ua[0][0],
Ca=ua[1][0]);la&&(Aa=ua[0][1],za=ua[1][1]);if(ua[0][0]!==na||ua[0][1]!==Aa||ua[1][0]!==Ca||ua[1][1]!==za)xa.selection=[[na,Aa],[Ca,za]],c.call(qa),va.brush()}function Z(){d3.event.stopImmediatePropagation();if(d3.event.touches){if(d3.event.touches.length)return;z&&clearTimeout(z);z=setTimeout(function(){z=null},500);Ha.on("touchmove.brush touchend.brush touchcancel.brush",null)}else xe(d3.event.view,pa),Qa.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ha.attr("pointer-events",
"all");Ga.attr("cursor",ac.overlay);xa.selection&&(ua=xa.selection);Eg(ua)&&(xa.selection=null,c.call(qa));va.end()}function da(){switch(d3.event.keyCode){case 16:ta=ja&&ra;break;case 18:T===Tc&&(ja&&(V=Ca-aa*ja,E=na+aa*ja),ra&&(W=za-ea*ra,M=Aa+ea*ra),T=Uc,Q());break;case 32:if(T===Tc||T===Uc)0>ja?V=Ca-aa:0<ja&&(E=na-aa),0>ra?W=za-ea:0<ra&&(M=Aa-ea),T=Gg,Ga.attr("cursor",ac.selection),Q();break;default:return}Ke()}function ka(){switch(d3.event.keyCode){case 16:ta&&(ca=la=ta=!1,Q());break;case 18:T===
Uc&&(0>ja?V=Ca:0<ja&&(E=na),0>ra?W=za:0<ra&&(M=Aa),T=Tc,Q());break;case 32:T===Gg&&(d3.event.altKey?(ja&&(V=Ca-aa*ja,E=na+aa*ja),ra&&(W=za-ea*ra,M=Aa+ea*ra),T=Uc):(0>ja?V=Ca:0<ja&&(E=na),0>ra?W=za:0<ra&&(M=Aa),T=Tc),Ga.attr("cursor",ac[R]),Q());break;default:return}Ke()}if(d3.event.touches){if(d3.event.changedTouches.length<d3.event.touches.length)return Ke()}else if(z)return;if(F.apply(this,arguments)){var qa=this,R=d3.event.target.__data__.type,T="selection"===(d3.event.metaKey?R="overlay":R)?sj:
d3.event.altKey?Uc:Tc,ja=a===Le?null:Fp[R],ra=a===Me?null:Gp[R],xa=Dg(qa),oa=xa.extent,ua=xa.selection,m=oa[0][0],E,O=oa[0][1],M,N=oa[1][0],V,ba=oa[1][1],W,aa,ea,pa,ta=ja&&ra&&d3.event.shiftKey,ca,la,fa=kc(qa),ma=fa,va=f(qa,arguments).beforestart();"overlay"===R?xa.selection=ua=[[E=a===Le?m:fa[0],M=a===Me?O:fa[1]],[V=a===Le?N:E,W=a===Me?ba:M]]:(E=ua[0][0],M=ua[0][1],V=ua[1][0],W=ua[1][1]);var na=E;var Aa=M;var Ca=V;var za=W;var Ha=Cb(qa).attr("pointer-events","none"),Ga=Ha.selectAll(".overlay").attr("cursor",
ac[R]);if(d3.event.touches)Ha.on("touchmove.brush",G,!0).on("touchend.brush touchcancel.brush",Z,!0);else{var Qa=Cb(d3.event.view).on("keydown.brush",da,!0).on("keyup.brush",ka,!0).on("mousemove.brush",G,!0).on("mouseup.brush",Z,!0);we(d3.event.view)}d3.event.stopImmediatePropagation();Bc(qa);c.call(qa);va.start()}}function x(){var G=this.__brush||{selection:null};G.extent=A.apply(this,arguments);G.dim=a;return G}var A=Ep,F=Dp,P=Ea(b,"start","brush","end"),u=6,z;b.move=function(G,Q){G.selection?G.on("start.brush",
function(){f(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){f(this,arguments).end()}).tween("brush",function(){function Z(ra){ka.selection=1===ra&&Eg(T)?null:ja(ra);c.call(da);qa.brush()}var da=this,ka=da.__brush,qa=f(da,arguments),R=ka.selection,T=a.input("function"===typeof Q?Q.apply(this,arguments):Q,ka.extent),ja=wd(R,T);return R&&T?Z:Z(1)}):G.each(function(){var Z=arguments,da=this.__brush,ka=a.input("function"===typeof Q?Q.apply(this,Z):Q,da.extent);Z=f(this,
Z).beforestart();Bc(this);da.selection=null==ka||Eg(ka)?null:ka;c.call(this);Z.start().brush().end()})};l.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(){this.starting&&(this.starting=!1,this.emit("start"));return this},brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&(delete this.state.emitter,this.emit("end"));return this},emit:function(G){ud(new Cp(b,G,a.output(this.state.selection)),
P.apply,P,[G,this.that,this.args])}};b.extent=function(G){return arguments.length?(A="function"===typeof G?G:rj([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),b):A};b.filter=function(G){return arguments.length?(F="function"===typeof G?G:rj(!!G),b):F};b.handleSize=function(G){return arguments.length?(u=+G,b):u};b.on=function(){var G=P.on.apply(P,arguments);return G===P?b:G};return b}function Hp(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}function Hg(a){return function(){return a}}
function Ig(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function nc(){return new Ig}function Ip(a){return a.source}function Jp(a){return a.target}function Kp(a){return a.radius}function Lp(a){return a.startAngle}function Mp(a){return a.endAngle}function Ne(){}function bc(a,b){var c=new Ne;if(a instanceof Ne)a.each(function(x,A){c.set(A,x)});else if(Array.isArray(a)){var f=-1,l=a.length,t;if(null==b)for(;++f<l;)c.set(f,a[f]);else for(;++f<l;)c.set(b(t=a[f],f,a),t)}else if(a)for(f in a)c.set(f,
a[f]);return c}function Np(){return{}}function Op(a,b,c){a[b]=c}function vj(){return bc()}function wj(a,b,c){a.set(b,c)}function Oe(){}function xj(a,b){var c=new Oe;if(a instanceof Oe)a.each(function(t){c.add(t)});else if(a){var f=-1,l=a.length;if(null==b)for(;++f<l;)c.add(a[f]);else for(;++f<l;)c.add(b(a[f],f,a))}return c}function Pp(a,b){return a-b}function oc(a){return function(){return a}}function Qp(){}function yj(){function a(F){var P=x(F);if(Array.isArray(P))P=P.slice().sort(Pp);else{var u=
e(F),z=u[0];u=u[1];P=q(z,u,P);P=g(Math.floor(z/P)*P,Math.floor(u/P)*P,P)}return P.map(function(G){return b(F,G)})}function b(F,P){var u=[],z=[];c(F,P,function(G){A(G,F,P);for(var Q=0,Z=G.length,da=G[Z-1][1]*G[0][0]-G[Z-1][0]*G[0][1];++Q<Z;)da+=G[Q-1][1]*G[Q][0]-G[Q-1][0]*G[Q][1];0<da?u.push([G]):z.push(G)});z.forEach(function(G){for(var Q=0,Z=u.length,da;Q<Z;++Q){a:{var ka=(da=u[Q])[0];for(var qa=G,R=-1,T=qa.length;++R<T;){b:{var ja=ka;for(var ra=qa[R],xa=ra[0],oa=ra[1],ua=-1,m=0,E=ja.length,O=E-
1;m<E;O=m++){var M=ja[m],N=M[0],V=M[1],ba=ja[O];O=ba[0];var W=ba[1],aa,ea=M;M=ba;ba=ra;if(aa=(M[0]-ea[0])*(ba[1]-ea[1])===(ba[0]-ea[0])*(M[1]-ea[1]))ea=ea[aa=+(ea[0]===M[0])],ba=ba[aa],M=M[aa],aa=ea<=ba&&ba<=M||M<=ba&&ba<=ea;if(aa){ja=0;break b}V>oa!==W>oa&&xa<(O-N)*(oa-V)/(W-V)+N&&(ua=-ua)}ja=ua}if(ja){ka=ja;break a}}ka=0}if(-1!==ka){da.push(G);break}}});return{type:"MultiPolygon",value:P,coordinates:u}}function c(F,P,u){function z(ja){var ra=[ja[0][0]+da,ja[0][1]+Z];ja=[ja[1][0]+da,ja[1][1]+Z];
var xa=2*ra[0]+ra[1]*(l+1)*4,oa=2*ja[0]+ja[1]*(l+1)*4,ua,m;(ua=Q[xa])?(m=G[oa])?(delete Q[ua.end],delete G[m.start],ua===m?(ua.ring.push(ja),u(ua.ring)):G[ua.start]=Q[m.end]={start:ua.start,end:m.end,ring:ua.ring.concat(m.ring)}):(delete Q[ua.end],ua.ring.push(ja),Q[ua.end=oa]=ua):(ua=G[oa])?(m=Q[xa])?(delete G[ua.start],delete Q[m.end],ua===m?(ua.ring.push(ja),u(ua.ring)):G[m.start]=Q[ua.end]={start:m.start,end:ua.end,ring:m.ring.concat(ua.ring)}):(delete G[ua.start],ua.ring.unshift(ra),G[ua.start=
xa]=ua):G[xa]=Q[oa]={start:xa,end:oa,ring:[ra,ja]}}var G=[],Q=[],Z;var da=Z=-1;var ka=F[0]>=P;for(cc[ka<<1].forEach(z);++da<l-1;){var qa=ka;ka=F[da+1]>=P;cc[qa|ka<<1].forEach(z)}for(cc[ka<<0].forEach(z);++Z<t-1;){da=-1;ka=F[Z*l+l]>=P;var R=F[Z*l]>=P;for(cc[ka<<1|R<<2].forEach(z);++da<l-1;){qa=ka;ka=F[Z*l+l+da+1]>=P;var T=R;R=F[Z*l+da+1]>=P;cc[qa|ka<<1|R<<2|T<<3].forEach(z)}cc[ka|R<<3].forEach(z)}da=-1;R=F[Z*l]>=P;for(cc[R<<2].forEach(z);++da<l-1;)T=R,R=F[Z*l+da+1]>=P,cc[R<<2|T<<3].forEach(z);cc[R<<
3].forEach(z)}function f(F,P,u){F.forEach(function(z){var G=z[0],Q=z[1],Z=G|0,da=Q|0,ka=P[da*l+Z];if(0<G&&G<l&&Z===G){var qa=P[da*l+Z-1];z[0]=G+(u-qa)/(ka-qa)-.5}0<Q&&Q<t&&da===Q&&(qa=P[(da-1)*l+Z],z[1]=Q+(u-qa)/(ka-qa)-.5)})}var l=1,t=1,x=v,A=f;a.contour=b;a.size=function(F){if(!arguments.length)return[l,t];var P=Math.ceil(F[0]),u=Math.ceil(F[1]);if(!(0<P&&0<u))throw Error("invalid size");return l=P,t=u,a};a.thresholds=function(F){return arguments.length?(x="function"===typeof F?F:Array.isArray(F)?
oc(zj.call(F)):oc(F),a):x};a.smooth=function(F){return arguments.length?(A=F?f:Qp,a):A===f};return a}function Jg(a,b,c){for(var f=a.width,l=a.height,t=(c<<1)+1,x=0;x<l;++x)for(var A=0,F=0;A<f+c;++A)A<f&&(F+=a.data[A+x*f]),A>=c&&(A>=t&&(F-=a.data[A-t+x*f]),b.data[A-c+x*f]=F/Math.min(A+1,f-1+t-A,t))}function Kg(a,b,c){for(var f=a.width,l=a.height,t=(c<<1)+1,x=0;x<f;++x)for(var A=0,F=0;A<l+c;++A)A<l&&(F+=a.data[x+A*f]),A>=c&&(A>=t&&(F-=a.data[x+(A-t)*f]),b.data[x+(A-c)*f]=F/Math.min(A+1,l-1+t-A,t))}
function Rp(a){return a[0]}function Sp(a){return a[1]}function Tp(){return 1}function Aj(a){return function(b){for(var c={},f=0;f<a.length;f++)c[a[f]]=b[f]||"";return c}}function Up(a,b){var c=Aj(a);return function(f,l){return b(c(f),l,a)}}function Vp(a){var b=Object.create(null),c=[];a.forEach(function(f){for(var l in f)l in b||c.push(b[l]=l)});return c}function Pe(a){function b(x,A){function F(){if(Z)return Lg;if(da)return da=!1,Bj;var qa,R=z,T;if(34===x.charCodeAt(R)){for(;z++<u&&34!==x.charCodeAt(z)||
34===x.charCodeAt(++z););(qa=z)>=u?Z=!0:10===(T=x.charCodeAt(z++))?da=!0:13===T&&(da=!0,10===x.charCodeAt(z)&&++z);return x.slice(R+1,qa-1).replace(/""/g,'"')}for(;z<u;){if(10===(T=x.charCodeAt(qa=z++)))da=!0;else if(13===T)da=!0,10===x.charCodeAt(z)&&++z;else if(T!==t)continue;return x.slice(R,qa)}return Z=!0,x.slice(R,u)}var P=[],u=x.length,z=0,G=0,Q,Z=0>=u,da=!1;10===x.charCodeAt(u-1)&&--u;for(13===x.charCodeAt(u-1)&&--u;(Q=F())!==Lg;){for(var ka=[];Q!==Bj&&Q!==Lg;)ka.push(Q),Q=F();A&&null==(ka=
A(ka,G++))||P.push(ka)}return P}function c(x){return x.map(f).join(a)}function f(x){return null==x?"":l.test(x+="")?'"'+x.replace(/"/g,'""')+'"':x}var l=new RegExp('["'+a+"\n\r]"),t=a.charCodeAt(0);return{parse:function(x,A){var F,P;x=b(x,function(u,z){if(F)return F(u,z-1);P=u;F=A?Up(u,A):Aj(u)});x.columns=P||[];return x},parseRows:b,format:function(x,A){null==A&&(A=Vp(x));return[A.map(f).join(a)].concat(x.map(function(F){return A.map(function(P){return f(F[P])}).join(a)})).join("\n")},formatRows:function(x){return x.map(c).join("\n")}}}
function Wp(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.blob()}function Xp(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.arrayBuffer()}function Yp(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.text()}function Mg(a,b){return fetch(a,b).then(Yp)}function Cj(a){return function(b,c,f){2===arguments.length&&"function"===typeof c&&(f=c,c=void 0);return Mg(b,c).then(function(l){return a(l,f)})}}function Zp(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.json()}
function mb(a){return function(){return a}}function pc(){return 1E-6*(Math.random()-.5)}function Dj(a,b,c,f){if(isNaN(b)||isNaN(c))return a;var l,t=a._root;f={data:f};var x=a._x0,A=a._y0,F=a._x1,P=a._y1,u,z,G,Q,Z;if(!t)return a._root=f,a;for(;t.length;)if((G=b>=(u=(x+F)/2))?x=u:F=u,(Q=c>=(z=(A+P)/2))?A=z:P=z,l=t,!(t=t[Z=Q<<1|G]))return l[Z]=f,a;var da=+a._x.call(null,t.data);var ka=+a._y.call(null,t.data);if(b===da&&c===ka)return f.next=t,l?l[Z]=f:a._root=f,a;do l=l?l[Z]=Array(4):a._root=Array(4),
(G=b>=(u=(x+F)/2))?x=u:F=u,(Q=c>=(z=(A+P)/2))?A=z:P=z;while((Z=Q<<1|G)===(G=(ka>=z)<<1|da>=u));return l[G]=t,l[Z]=f,a}function vb(a,b,c,f,l){this.node=a;this.x0=b;this.y0=c;this.x1=f;this.y1=l}function $p(a){return a[0]}function aq(a){return a[1]}function Qe(a,b,c){b=new Ng(null==b?$p:b,null==c?aq:c,NaN,NaN,NaN,NaN);return null==a?b:b.addAll(a)}function Ng(a,b,c,f,l,t){this._x=a;this._y=b;this._x0=c;this._y0=f;this._x1=l;this._y1=t;this._root=void 0}function Ej(a){for(var b={data:a.data},c=b;a=a.next;)c=
c.next={data:a.data};return b}function bq(a){return a.x+a.vx}function cq(a){return a.y+a.vy}function dq(a){return a.index}function Fj(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function eq(a){return a.x}function fq(a){return a.y}function Re(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+1)]}function Vc(a){return a=Re(Math.abs(a)),a?a[1]:NaN}function gq(a,b){return function(c,f){for(var l=
c.length,t=[],x=0,A=a[0],F=0;0<l&&0<A;){F+A+1>f&&(A=Math.max(1,f-F));t.push(c.substring(l-=A,l+A));if((F+=A+1)>f)break;A=a[x=(x+1)%a.length]}return t.reverse().join(b)}}function hq(a){return function(b){return b.replace(/[0-9]/g,function(c){return a[+c]})}}function Gd(a){return new Og(a)}function Og(a){if(!(b=iq.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];
this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function Gj(a,b){b=Re(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function Hj(a){return a}function Ij(a){function b(A){function F(oa){var ua=T,m=ja,E,O;if("c"===R)m=ra(oa)+m,oa="";else{oa=+oa;var M=0>oa;oa=ra(Math.abs(oa),ka);if(qa){var N=oa.length,V=1,ba=-1;a:for(;V<N;++V)switch(oa[V]){case ".":ba=E=V;break;case "0":0===
ba&&(ba=V);E=V;break;default:if(!+oa[V])break a;0<ba&&(ba=0)}oa=0<ba?oa.slice(0,ba)+oa.slice(E+1):oa}M&&0===+oa&&(M=!1);ua=(M?"("===z?z:"-":"-"===z||"("===z?"":z)+ua;m=("s"===R?Jj[8+Kj/3]:"")+m+(M&&"("===z?")":"");if(xa)for(M=-1,E=oa.length;++M<E;)if(O=oa.charCodeAt(M),48>O||57<O){m=(46===O?l+oa.slice(M+1):oa.slice(M))+m;oa=oa.slice(0,M);break}}da&&!Q&&(oa=c(oa,Infinity));O=ua.length+oa.length+m.length;M=O<Z?Array(Z-O+1).join(P):"";da&&Q&&(oa=c(M+oa,M.length?Z-m.length:Infinity),M="");switch(u){case "<":oa=
ua+oa+m+M;break;case "=":oa=ua+M+oa+m;break;case "^":oa=M.slice(0,O=M.length>>1)+ua+oa+m+M.slice(O);break;default:oa=M+ua+oa+m}return t(oa)}A=Gd(A);var P=A.fill,u=A.align,z=A.sign,G=A.symbol,Q=A.zero,Z=A.width,da=A.comma,ka=A.precision,qa=A.trim,R=A.type;"n"===R?(da=!0,R="g"):Lj[R]||(null==ka&&(ka=12),qa=!0,R="g");if(Q||"0"===P&&"="===u)Q=!0,P="0",u="=";var T="$"===G?f[0]:"#"===G&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",ja="$"===G?f[1]:/[%p]/.test(R)?x:"",ra=Lj[R],xa=/[defgprs%]/.test(R);ka=null==
ka?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,ka)):Math.max(0,Math.min(20,ka));F.toString=function(){return A+""};return F}var c=a.grouping&&a.thousands?gq(a.grouping,a.thousands):Hj,f=a.currency,l=a.decimal,t=a.numerals?hq(a.numerals):Hj,x=a.percent||"%";return{format:b,formatPrefix:function(A,F){var P=b((A=Gd(A),A.type="f",A));A=3*Math.max(-8,Math.min(8,Math.floor(Vc(F)/3)));var u=Math.pow(10,-A),z=Jj[8+A/3];return function(G){return P(u*G)+z}}}}function Mj(a){Se=Ij(a);d3.format=Se.format;d3.formatPrefix=
Se.formatPrefix;return Se}function Nj(a){return Math.max(0,-Vc(Math.abs(a)))}function Oj(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Vc(b)/3)))-Vc(Math.abs(a)))}function Pj(a,b){a=Math.abs(a);b=Math.abs(b)-a;return Math.max(0,Vc(b)-Vc(a))+1}function Qb(){this.reset()}function Qj(a,b,c){var f=a.s=b+c,l=f-b;a.t=b-(f-l)+(c-l)}function Rj(a){return 1<a?0:-1>a?Ya:Math.acos(a)}function wb(a){return 1<a?gb:-1>a?-gb:Math.asin(a)}function Sj(a){return(a=Ia(a/2))*a}function hb(){}function Te(a,
b){if(a&&Tj.hasOwnProperty(a.type))Tj[a.type](a,b)}function Pg(a,b,c){var f=-1;c=a.length-c;for(b.lineStart();++f<c;){var l=a[f];b.point(l[0],l[1],l[2])}b.lineEnd()}function Uj(a,b){var c=-1,f=a.length;for(b.polygonStart();++c<f;)Pg(a[c],b,1);b.polygonEnd()}function Rb(a,b){if(a&&Vj.hasOwnProperty(a.type))Vj[a.type](a,b);else Te(a,b)}function jq(){Wb.point=kq}function lq(){Wj(Xj,Yj)}function kq(a,b){Wb.point=Wj;Xj=a;Yj=b;a*=Sa;b*=Sa;Qg=a;Rg=Ka(b=b/2+Ue);Sg=Ia(b)}function Wj(a,b){a*=Sa;b*=Sa;b=b/2+
Ue;var c=a-Qg,f=0<=c?1:-1,l=f*c;c=Ka(b);b=Ia(b);var t=Sg*b,x=Rg*c+t*Ka(l);f=t*f*Ia(l);Ve.add(xb(f,x));Qg=a;Rg=c;Sg=b}function We(a){return[xb(a[1],a[0]),wb(a[2])]}function Cc(a){var b=a[0];a=a[1];var c=Ka(a);return[c*Ka(b),c*Ia(b),Ia(a)]}function Xe(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Wc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Tg(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Ye(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Ze(a){var b=lb(a[0]*
a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Ug(a,b){qc.push(dc=[jb=a,kb=a]);b<Gb&&(Gb=b);b>Jb&&(Jb=b)}function Zj(a,b){var c=Cc([a*Sa,b*Sa]);if(Xc){var f=Wc(Xc,c);f=Wc([f[1],-f[0],0],f);Ze(f);f=We(f);var l=a-Dc,t=0<l?1:-1,x=f[0]*eb*t;l=180<ab(l);l^(t*Dc<x&&x<t*a)?(f=f[1]*eb,f>Jb&&(Jb=f)):(x=(x+360)%360-180,l^(t*Dc<x&&x<t*a))?(f=-f[1]*eb,f<Gb&&(Gb=f)):(b<Gb&&(Gb=b),b>Jb&&(Jb=b));l?a<Dc?Hb(jb,a)>Hb(jb,kb)&&(kb=a):Hb(a,kb)>Hb(jb,kb)&&(jb=a):kb>=jb?(a<jb&&(jb=a),a>kb&&(kb=a)):a>Dc?Hb(jb,
a)>Hb(jb,kb)&&(kb=a):Hb(a,kb)>Hb(jb,kb)&&(jb=a)}else qc.push(dc=[jb=a,kb=a]);b<Gb&&(Gb=b);b>Jb&&(Jb=b);Xc=c;Dc=a}function ak(){ec.point=Zj}function bk(){dc[0]=jb;dc[1]=kb;ec.point=Ug;Xc=null}function ck(a,b){if(Xc){var c=a-Dc;Hd.add(180<ab(c)?c+(0<c?360:-360):c)}else dk=a,ek=b;Wb.point(a,b);Zj(a,b)}function mq(){Wb.lineStart()}function nq(){ck(dk,ek);Wb.lineEnd();1E-6<ab(Hd)&&(jb=-(kb=180));dc[0]=jb;dc[1]=kb;Xc=null}function Hb(a,b){return 0>(b-=a)?b+360:b}function oq(a,b){return a[0]-b[0]}function fk(a,
b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function Vg(a,b){a*=Sa;b*=Sa;var c=Ka(b);Id(c*Ka(a),c*Ia(a),Ia(b))}function Id(a,b,c){++Jd;$e+=(a-$e)/Jd;af+=(b-af)/Jd;bf+=(c-bf)/Jd}function gk(){Sb.point=pq}function pq(a,b){a*=Sa;b*=Sa;var c=Ka(b);yb=c*Ka(a);zb=c*Ia(a);Ab=Ia(b);Sb.point=qq;Id(yb,zb,Ab)}function qq(a,b){a*=Sa;b*=Sa;var c=Ka(b),f=c*Ka(a);a=c*Ia(a);b=Ia(b);var l=xb(lb((l=zb*b-Ab*a)*l+(l=Ab*f-yb*b)*l+(l=yb*a-zb*f)*l),yb*f+zb*a+Ab*b);cf+=l;df+=l*(yb+(yb=f));ef+=l*(zb+(zb=a));ff+=
l*(Ab+(Ab=b));Id(yb,zb,Ab)}function hk(){Sb.point=Vg}function rq(){Sb.point=sq}function tq(){ik(jk,kk);Sb.point=Vg}function sq(a,b){jk=a;kk=b;a*=Sa;b*=Sa;Sb.point=ik;var c=Ka(b);yb=c*Ka(a);zb=c*Ia(a);Ab=Ia(b);Id(yb,zb,Ab)}function ik(a,b){a*=Sa;b*=Sa;var c=Ka(b),f=c*Ka(a);a=c*Ia(a);b=Ia(b);c=zb*b-Ab*a;var l=Ab*f-yb*b,t=yb*a-zb*f,x=lb(c*c+l*l+t*t),A=wb(x);x=x&&-A/x;Wg+=x*c;Xg+=x*l;Yg+=x*t;cf+=A;df+=A*(yb+(yb=f));ef+=A*(zb+(zb=a));ff+=A*(Ab+(Ab=b));Id(yb,zb,Ab)}function Yc(a){return function(){return a}}
function Zg(a,b){function c(f,l){return f=a(f,l),b(f[0],f[1])}a.invert&&b.invert&&(c.invert=function(f,l){return f=b.invert(f,l),f&&a.invert(f[0],f[1])});return c}function $g(a,b){return[a>Ya?a-Db:a<-Ya?a+Db:a,b]}function ah(a,b,c){return(a%=Db)?b||c?Zg(lk(a),mk(b,c)):lk(a):b||c?mk(b,c):$g}function nk(a){return function(b,c){return b+=a,[b>Ya?b-Db:b<-Ya?b+Db:b,c]}}function lk(a){var b=nk(a);b.invert=nk(-a);return b}function mk(a,b){function c(A,F){var P=Ka(F),u=Ka(A)*P;A=Ia(A)*P;F=Ia(F);P=F*f+u*l;
return[xb(A*t-P*x,u*f-F*l),wb(P*t+A*x)]}var f=Ka(a),l=Ia(a),t=Ka(b),x=Ia(b);c.invert=function(A,F){var P=Ka(F),u=Ka(A)*P;A=Ia(A)*P;F=Ia(F);P=F*t-A*x;return[xb(A*t+F*x,u*f+P*l),wb(P*f-u*l)]};return c}function ok(a){function b(c){c=a(c[0]*Sa,c[1]*Sa);return c[0]*=eb,c[1]*=eb,c}a=ah(a[0]*Sa,a[1]*Sa,2<a.length?a[2]*Sa:0);b.invert=function(c){c=a.invert(c[0]*Sa,c[1]*Sa);return c[0]*=eb,c[1]*=eb,c};return b}function pk(a,b,c,f,l,t){if(c){var x=Ka(b),A=Ia(b);c*=f;if(null==l)l=b+f*Db,t=b-c/2;else if(l=qk(x,
l),t=qk(x,t),0<f?l<t:l>t)l+=f*Db;for(;0<f?l>t:l<t;l-=c)b=We([x,-A*Ka(l),-A*Ia(l)]),a.point(b[0],b[1])}}function qk(a,b){b=Cc(b);b[0]-=a;Ze(b);a=Rj(-b[1]);return((0>-b[2]?-a:a)+Db-1E-6)%Db}function rk(){var a=[],b;return{point:function(c,f){b.push([c,f])},lineStart:function(){a.push(b=[])},lineEnd:hb,rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))},result:function(){var c=a;a=[];b=null;return c}}}function gf(a,b){return 1E-6>ab(a[0]-b[0])&&1E-6>ab(a[1]-b[1])}function hf(a,b,c,f){this.x=
a;this.z=b;this.o=c;this.e=f;this.v=!1;this.n=this.p=null}function sk(a,b,c,f,l){var t=[],x=[];a.forEach(function(z){if(!(0>=(G=z.length-1))){var G,Q=z[0],Z=z[G];if(gf(Q,Z)){l.lineStart();for(A=0;A<G;++A)l.point((Q=z[A])[0],Q[1]);l.lineEnd()}else t.push(G=new hf(Q,z,null,!0)),x.push(G.o=new hf(Q,null,G,!1)),t.push(G=new hf(Z,z,null,!1)),x.push(G.o=new hf(Z,null,G,!0))}});if(t.length){x.sort(b);tk(t);tk(x);var A=0;for(a=x.length;A<a;++A)x[A].e=c=!c;c=t[0];for(var F;;){for(var P=c,u=!0;P.v;)if((P=P.n)===
c)return;b=P.z;l.lineStart();do{P.v=P.o.v=!0;if(P.e){if(u)for(A=0,a=b.length;A<a;++A)l.point((F=b[A])[0],F[1]);else f(P.x,P.n.x,1,l);P=P.n}else{if(u)for(b=P.p.z,A=b.length-1;0<=A;--A)l.point((F=b[A])[0],F[1]);else f(P.x,P.p.x,-1,l);P=P.p}P=P.o;b=P.z;u=!u}while(!P.v);l.lineEnd()}}}function tk(a){if(b=a.length){for(var b,c=0,f=a[0],l;++c<b;)f.n=l=a[c],l.p=f,f=l;f.n=l=a[0];l.p=f}}function uk(a,b){var c=b[0];b=b[1];var f=Ia(b),l=[Ia(c),-Ka(c),0],t=0,x=0;bh.reset();1===f?b=gb+1E-6:-1===f&&(b=-gb-1E-6);
f=0;for(var A=a.length;f<A;++f)if(P=(F=a[f]).length){var F,P,u=F[P-1],z=u[0],G=u[1]/2+Ue,Q=Ia(G),Z=Ka(G);for(G=0;G<P;++G,z=ka,Q=qa,Z=R,u=da){var da=F[G],ka=da[0];R=da[1]/2+Ue;var qa=Ia(R),R=Ka(R),T=ka-z,ja=0<=T?1:-1,ra=ja*T,xa=ra>Ya;Q*=qa;bh.add(xb(Q*ja*Ia(ra),Z*R+Q*Ka(ra)));t+=xa?T+ja*Db:T;xa^z>=c^ka>=c&&(u=Wc(Cc(u),Cc(da)),Ze(u),z=Wc(l,u),Ze(z),z=(xa^0<=T?-1:1)*wb(z[2]),b>z||b===z&&(u[0]||u[1]))&&(x+=xa^0<=T?1:-1)}}return(-1E-6>t||1E-6>t&&-1E-6>bh)^x&1}function vk(a,b,c,f){return function(l){function t(ja,
ra){a(ja,ra)&&l.point(ja,ra)}function x(ja,ra){G.point(ja,ra)}function A(){T.point=x;G.lineStart()}function F(){T.point=t;G.lineEnd()}function P(ja,ra){R.push([ja,ra]);Z.point(ja,ra)}function u(){Z.lineStart();R=[]}function z(){P(R[0][0],R[0][1]);Z.lineEnd();var ja=Z.clean(),ra=Q.result(),xa=ra.length,oa;R.pop();ka.push(R);R=null;if(xa)if(ja&1){if(xa=ra[0],0<(ra=xa.length-1)){da||(l.polygonStart(),da=!0);l.lineStart();for(ja=0;ja<ra;++ja)l.point((oa=xa[ja])[0],oa[1]);l.lineEnd()}}else 1<xa&&ja&2&&
ra.push(ra.pop().concat(ra.shift())),qa.push(ra.filter(uq))}var G=b(l),Q=rk(),Z=b(Q),da=!1,ka,qa,R,T={point:t,lineStart:A,lineEnd:F,polygonStart:function(){T.point=P;T.lineStart=u;T.lineEnd=z;qa=[];ka=[]},polygonEnd:function(){T.point=t;T.lineStart=A;T.lineEnd=F;qa=C(qa);var ja=uk(ka,f);qa.length?(da||(l.polygonStart(),da=!0),sk(qa,vq,ja,c,l)):ja&&(da||(l.polygonStart(),da=!0),l.lineStart(),c(null,null,1,l),l.lineEnd());da&&(l.polygonEnd(),da=!1);qa=ka=null},sphere:function(){l.polygonStart();l.lineStart();
c(null,null,1,l);l.lineEnd();l.polygonEnd()}};return T}}function uq(a){return 1<a.length}function vq(a,b){return(0>(a=a.x)[0]?a[1]-gb-1E-6:gb-a[1])-(0>(b=b.x)[0]?b[1]-gb-1E-6:gb-b[1])}function wk(a){function b(F,P){return Ka(F)*Ka(P)>l}function c(F,P,u){var z=Cc(F),G=Cc(P),Q=[1,0,0];G=Wc(z,G);var Z=Xe(G,G);z=G[0];var da=Z-z*z;if(!da)return!u&&F;Z=l*Z/da;da=-l*z/da;z=Wc(Q,G);Q=Ye(Q,Z);G=Ye(G,da);Tg(Q,G);G=Xe(Q,z);Z=Xe(z,z);da=G*G-Z*(Xe(Q,Q)-1);if(!(0>da)){var ka=lb(da);da=Ye(z,(-G-ka)/Z);Tg(da,Q);
da=We(da);if(!u)return da;u=F[0];var qa=P[0];F=F[1];P=P[1];if(qa<u){var R=u;u=qa;qa=R}var T=qa-u,ja=1E-6>ab(T-Ya);!ja&&P<F&&(R=F,F=P,P=R);if(ja||1E-6>T?ja?0<F+P^da[1]<(1E-6>ab(da[0]-u)?F:P):F<=da[1]&&da[1]<=P:T>Ya^(u<=da[0]&&da[0]<=qa))return P=Ye(z,(-G+ka)/Z),Tg(P,Q),[da,We(P)]}}function f(F,P){var u=x?a:Ya-a,z=0;F<-u?z|=1:F>u&&(z|=2);P<-u?z|=4:P>u&&(z|=8);return z}var l=Ka(a),t=6*Sa,x=0<l,A=1E-6<ab(l);return vk(b,function(F){var P,u,z,G,Q;return{lineStart:function(){G=z=!1;Q=1},point:function(Z,
da){var ka=[Z,da],qa=b(Z,da);da=x?qa?0:f(Z,da):qa?f(Z+(0>Z?Ya:-Ya),da):0;!P&&(G=z=qa)&&F.lineStart();qa!==z&&(Z=c(P,ka),!Z||gf(P,Z)||gf(ka,Z))&&(ka[0]+=1E-6,ka[1]+=1E-6,qa=b(ka[0],ka[1]));if(qa!==z)Q=0,qa?(F.lineStart(),Z=c(ka,P),F.point(Z[0],Z[1])):(Z=c(P,ka),F.point(Z[0],Z[1]),F.lineEnd()),P=Z;else if(A&&P&&x^qa){var R;da&u||!(R=c(ka,P,!0))||(Q=0,x?(F.lineStart(),F.point(R[0][0],R[0][1]),F.point(R[1][0],R[1][1]),F.lineEnd()):(F.point(R[1][0],R[1][1]),F.lineEnd(),F.lineStart(),F.point(R[0][0],R[0][1])))}!qa||
P&&gf(P,ka)||F.point(ka[0],ka[1]);P=ka;z=qa;u=da},lineEnd:function(){z&&F.lineEnd();P=null},clean:function(){return Q|(G&&z)<<1}}},function(F,P,u,z){pk(z,a,t,u,F,P)},x?[0,-a]:[-Ya,a-Ya])}function wq(a,b,c,f,l,t){var x=a[0],A=a[1],F=0,P=1,u=b[0]-x,z=b[1]-A;c-=x;if(u||!(0<c)){c/=u;if(0>u){if(c<F)return;c<P&&(P=c)}else if(0<u){if(c>P)return;c>F&&(F=c)}c=l-x;if(u||!(0>c)){c/=u;if(0>u){if(c>P)return;c>F&&(F=c)}else if(0<u){if(c<F)return;c<P&&(P=c)}c=f-A;if(z||!(0<c)){c/=z;if(0>z){if(c<F)return;c<P&&(P=
c)}else if(0<z){if(c>P)return;c>F&&(F=c)}c=t-A;if(z||!(0>c)){c/=z;if(0>z){if(c>P)return;c>F&&(F=c)}else if(0<z){if(c<F)return;c<P&&(P=c)}0<F&&(a[0]=x+F*u,a[1]=A+F*z);1>P&&(b[0]=x+P*u,b[1]=A+P*z);return!0}}}}}function jf(a,b,c,f){function l(F,P,u,z){var G=0,Q=0;if(null==F||(G=t(F,u))!==(Q=t(P,u))||0>A(F,P)^0<u){do z.point(0===G||3===G?a:c,1<G?f:b);while((G=(G+u+4)%4)!==Q)}else z.point(P[0],P[1])}function t(F,P){return 1E-6>ab(F[0]-a)?0<P?0:3:1E-6>ab(F[0]-c)?0<P?2:1:1E-6>ab(F[1]-b)?0<P?1:0:0<P?3:2}
function x(F,P){return A(F.x,P.x)}function A(F,P){var u=t(F,1),z=t(P,1);return u!==z?u-z:0===u?P[1]-F[1]:1===u?F[0]-P[0]:2===u?F[1]-P[1]:P[0]-F[0]}return function(F){function P(m,E){a<=m&&m<=c&&b<=E&&E<=f&&z.point(m,E)}function u(m,E){var O=a<=m&&m<=c&&b<=E&&E<=f;Z&&da.push([m,E]);if(xa)ka=m,qa=E,R=O,xa=!1,O&&(z.lineStart(),z.point(m,E));else if(O&&ra)z.point(m,E);else{var M=[T=Math.max(-1E9,Math.min(1E9,T)),ja=Math.max(-1E9,Math.min(1E9,ja))],N=[m=Math.max(-1E9,Math.min(1E9,m)),E=Math.max(-1E9,Math.min(1E9,
E))];wq(M,N,a,b,c,f)?(ra||(z.lineStart(),z.point(M[0],M[1])),z.point(N[0],N[1]),O||z.lineEnd(),oa=!1):O&&(z.lineStart(),z.point(m,E),oa=!1)}T=m;ja=E;ra=O}var z=F,G=rk(),Q,Z,da,ka,qa,R,T,ja,ra,xa,oa,ua={point:P,lineStart:function(){ua.point=u;Z&&Z.push(da=[]);xa=!0;ra=!1;T=ja=NaN},lineEnd:function(){Q&&(u(ka,qa),R&&ra&&G.rejoin(),Q.push(G.result()));ua.point=P;ra&&z.lineEnd()},polygonStart:function(){z=G;Q=[];Z=[];oa=!0},polygonEnd:function(){for(var m,E=m=0,O=Z.length;E<O;++E){var M=Z[E],N=1,V=M.length,
ba=M[0],W=ba[0];for(ba=ba[1];N<V;++N){var aa=W;var ea=ba;ba=M[N];W=ba[0];ba=ba[1];ea<=f?ba>f&&(W-aa)*(f-ea)>(ba-ea)*(a-aa)&&++m:ba<=f&&(W-aa)*(f-ea)<(ba-ea)*(a-aa)&&--m}}E=oa&&m;O=(Q=C(Q)).length;if(E||O)F.polygonStart(),E&&(F.lineStart(),l(null,null,1,F),F.lineEnd()),O&&sk(Q,x,m,l,F),F.polygonEnd();z=F;Q=Z=da=null}};return ua}}function xq(){Zc.point=Zc.lineEnd=hb}function yq(a,b){a*=Sa;b*=Sa;ch=a;kf=Ia(b);lf=Ka(b);Zc.point=zq}function zq(a,b){a*=Sa;b*=Sa;var c=Ia(b);b=Ka(b);var f=ab(a-ch),l=Ka(f);
f=Ia(f);f*=b;var t=lf*c-kf*b*l;l=kf*c+lf*b*l;dh.add(xb(lb(f*f+t*t),l));ch=a;kf=c;lf=b}function xk(a){dh.reset();Rb(a,Zc);return+dh}function $c(a,b){eh[0]=a;eh[1]=b;return xk(Aq)}function mf(a,b){return a&&yk.hasOwnProperty(a.type)?yk[a.type](a,b):!1}function zk(a,b){var c=$c(a[0],a[1]),f=$c(a[0],b);a=$c(b,a[1]);return f+a<=c+1E-6}function Ak(a,b){return!!uk(a.map(Bq),Bk(b))}function Bq(a){return a=a.map(Bk),a.pop(),a}function Bk(a){return[a[0]*Sa,a[1]*Sa]}function Ck(a,b,c){var f=g(a,b-1E-6,c).concat(b);
return function(l){return f.map(function(t){return[l,t]})}}function Dk(a,b,c){var f=g(a,b-1E-6,c).concat(b);return function(l){return f.map(function(t){return[t,l]})}}function Ek(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return g(nf(t/G)*G,l,G).map(ka).concat(g(nf(P/Q)*Q,F,Q).map(qa)).concat(g(nf(f/u)*u,c,u).filter(function(T){return 1E-6<ab(T%G)}).map(Z)).concat(g(nf(A/z)*z,x,z).filter(function(T){return 1E-6<ab(T%Q)}).map(da))}var c,f,l,t,x,A,F,P,u=10,z=u,G=90,Q=
360,Z,da,ka,qa,R=2.5;a.lines=function(){return b().map(function(T){return{type:"LineString",coordinates:T}})};a.outline=function(){return{type:"Polygon",coordinates:[ka(t).concat(qa(F).slice(1),ka(l).reverse().slice(1),qa(P).reverse().slice(1))]}};a.extent=function(T){return arguments.length?a.extentMajor(T).extentMinor(T):a.extentMinor()};a.extentMajor=function(T){if(!arguments.length)return[[t,P],[l,F]];t=+T[0][0];l=+T[1][0];P=+T[0][1];F=+T[1][1];t>l&&(T=t,t=l,l=T);P>F&&(T=P,P=F,F=T);return a.precision(R)};
a.extentMinor=function(T){if(!arguments.length)return[[f,A],[c,x]];f=+T[0][0];c=+T[1][0];A=+T[0][1];x=+T[1][1];f>c&&(T=f,f=c,c=T);A>x&&(T=A,A=x,x=T);return a.precision(R)};a.step=function(T){return arguments.length?a.stepMajor(T).stepMinor(T):a.stepMinor()};a.stepMajor=function(T){if(!arguments.length)return[G,Q];G=+T[0];Q=+T[1];return a};a.stepMinor=function(T){if(!arguments.length)return[u,z];u=+T[0];z=+T[1];return a};a.precision=function(T){if(!arguments.length)return R;R=+T;Z=Ck(A,x,90);da=Dk(f,
c,R);ka=Ck(P,F,90);qa=Dk(t,l,R);return a};return a.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ec(a){return a}function Cq(){fc.point=Dq}function Dq(a,b){fc.point=Fk;Gk=fh=a;Hk=gh=b}function Fk(a,b){hh.add(gh*a-fh*b);fh=a;gh=b}function Eq(){Fk(Gk,Hk)}function Fc(a,b){ih+=a;jh+=b;++Kd}function Ik(){Kb.point=Fq}function Fq(a,b){Kb.point=Gq;Fc(Xb=a,Yb=b)}function Gq(a,b){var c=a-Xb,f=b-Yb;c=lb(c*c+f*f);of+=c*(Xb+a)/2;pf+=c*(Yb+b)/2;ad+=c;
Fc(Xb=a,Yb=b)}function Jk(){Kb.point=Fc}function Hq(){Kb.point=Iq}function Jq(){Kk(Lk,Mk)}function Iq(a,b){Kb.point=Kk;Fc(Lk=Xb=a,Mk=Yb=b)}function Kk(a,b){var c=a-Xb,f=b-Yb;c=lb(c*c+f*f);of+=c*(Xb+a)/2;pf+=c*(Yb+b)/2;ad+=c;c=Yb*a-Xb*b;kh+=c*(Xb+a);lh+=c*(Yb+b);Ld+=3*c;Fc(Xb=a,Yb=b)}function Nk(a){this._context=a}function Kq(a,b){Md.point=Ok;Pk=Nd=a;Qk=Od=b}function Ok(a,b){Nd-=a;Od-=b;mh.add(lb(Nd*Nd+Od*Od));Nd=a;Od=b}function Rk(){this._string=[]}function Sk(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+
-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Pd(a){return function(b){var c=new nh,f;for(f in a)c[f]=a[f];c.stream=b;return c}}function nh(){}function oh(a,b,c){var f=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);null!=f&&a.clipExtent(null);Rb(c,a.stream(qf));b(qf.result());null!=f&&a.clipExtent(f);return a}function bd(a,b,c){return oh(a,function(f){var l=b[1][0]-b[0][0],t=b[1][1]-b[0][1],x=Math.min(l/(f[1][0]-f[0][0]),t/(f[1][1]-f[0][1]));l=+b[0][0]+(l-x*(f[1][0]+f[0][0]))/2;f=+b[0][1]+
(t-x*(f[1][1]+f[0][1]))/2;a.scale(150*x).translate([l,f])},c)}function ph(a,b,c){return oh(a,function(f){var l=+b,t=l/(f[1][0]-f[0][0]);l=(l-t*(f[1][0]+f[0][0]))/2;f=-t*f[0][1];a.scale(150*t).translate([l,f])},c)}function qh(a,b,c){return oh(a,function(f){var l=+b,t=l/(f[1][1]-f[0][1]),x=-t*f[0][0];f=(l-t*(f[1][1]+f[0][1]))/2;a.scale(150*t).translate([x,f])},c)}function Tk(a){return Pd({point:function(b,c){b=a(b,c);this.stream.point(b[0],b[1])}})}function Uk(a,b){function c(f,l,t,x,A,F,P,u,z,G,Q,
Z,da,ka){var qa=P-f,R=u-l,T=qa*qa+R*R;if(T>4*b&&da--){var ja=x+G,ra=A+Q,xa=F+Z,oa=lb(ja*ja+ra*ra+xa*xa),ua=wb(xa/=oa),m=1E-6>ab(ab(xa)-1)||1E-6>ab(t-z)?(t+z)/2:xb(ra,ja),E=a(m,ua);ua=E[0];E=E[1];var O=ua-f,M=E-l,N=R*O-qa*M;if(N*N/T>b||.3<ab((qa*O+R*M)/T-.5)||x*G+A*Q+F*Z<Lq)c(f,l,t,x,A,F,ua,E,m,ja/=oa,ra/=oa,xa,da,ka),ka.point(ua,E),c(ua,E,m,ja,ra,xa,P,u,z,G,Q,Z,da,ka)}}return function(f){function l(ua,m){ua=a(ua,m);f.point(ua[0],ua[1])}function t(){R=NaN;oa.point=x;f.lineStart()}function x(ua,m){var E=
Cc([ua,m]);m=a(ua,m);c(R,T,qa,ja,ra,xa,R=m[0],T=m[1],qa=ua,ja=E[0],ra=E[1],xa=E[2],16,f);f.point(R,T)}function A(){oa.point=l;f.lineEnd()}function F(){t();oa.point=P;oa.lineEnd=u}function P(ua,m){x(z=ua,m);G=R;Q=T;Z=ja;da=ra;ka=xa;oa.point=x}function u(){c(R,T,qa,ja,ra,xa,G,Q,z,Z,da,ka,16,f);oa.lineEnd=A;A()}var z,G,Q,Z,da,ka,qa,R,T,ja,ra,xa,oa={point:l,lineStart:t,lineEnd:A,polygonStart:function(){f.polygonStart();oa.lineStart=F},polygonEnd:function(){f.polygonEnd();oa.lineStart=t}};return oa}}function Mq(a){return Pd({point:function(b,
c){b=a(b,c);return this.stream.point(b[0],b[1])}})}function Nq(a,b,c){function f(l,t){return[b+a*l,c-a*t]}f.invert=function(l,t){return[(l-b)/a,(c-t)/a]};return f}function Vk(a,b,c,f){function l(G,Q){return[x*G-A*Q+b,c-A*G-x*Q]}var t=Ka(f);f=Ia(f);var x=t*a,A=f*a,F=t/a,P=f/a,u=(f*c-t*b)/a,z=(f*b+t*c)/a;l.invert=function(G,Q){return[F*G-P*Q+u,z-P*G-F*Q]};return l}function Zb(a){return rh(function(){return a})()}function rh(a){function b(N){return E(N[0]*Sa,N[1]*Sa)}function c(N){return(N=E.invert(N[0],
N[1]))&&[N[0]*eb,N[1]*eb]}function f(){var N=Vk(x,0,0,da).apply(null,t(P,u));N=(da?Vk:Nq)(x,A-N[0],F-N[1],da);Z=ah(z,G,Q);m=Zg(t,N);E=Zg(Z,m);N=m;ua=+oa?Uk(N,oa):Tk(N);return l()}function l(){O=M=null;return b}var t,x=150,A=480,F=250,P=0,u=0,z=0,G=0,Q=0,Z,da=0,ka=null,qa=sh,R=null,T,ja,ra,xa=Ec,oa=.5,ua,m,E,O,M;b.stream=function(N){return O&&M===N?O:O=Oq(Mq(Z)(qa(ua(xa(M=N)))))};b.preclip=function(N){return arguments.length?(qa=N,ka=void 0,l()):qa};b.postclip=function(N){return arguments.length?(xa=
N,R=T=ja=ra=null,l()):xa};b.clipAngle=function(N){return arguments.length?(qa=+N?wk(ka=N*Sa):(ka=null,sh),l()):ka*eb};b.clipExtent=function(N){return arguments.length?(xa=null==N?(R=T=ja=ra=null,Ec):jf(R=+N[0][0],T=+N[0][1],ja=+N[1][0],ra=+N[1][1]),l()):null==R?null:[[R,T],[ja,ra]]};b.scale=function(N){return arguments.length?(x=+N,f()):x};b.translate=function(N){return arguments.length?(A=+N[0],F=+N[1],f()):[A,F]};b.center=function(N){return arguments.length?(P=N[0]%360*Sa,u=N[1]%360*Sa,f()):[P*
eb,u*eb]};b.rotate=function(N){return arguments.length?(z=N[0]%360*Sa,G=N[1]%360*Sa,Q=2<N.length?N[2]%360*Sa:0,f()):[z*eb,G*eb,Q*eb]};b.angle=function(N){return arguments.length?(da=N%360*Sa,f()):da*eb};b.precision=function(N){if(arguments.length){var V=m;var ba=oa=N*N;V=(ua=+ba?Uk(V,ba):Tk(V),l())}else V=lb(oa);return V};b.fitExtent=function(N,V){return bd(b,N,V)};b.fitSize=function(N,V){return bd(b,[[0,0],N],V)};b.fitWidth=function(N,V){return ph(b,N,V)};b.fitHeight=function(N,V){return qh(b,N,
V)};return function(){t=a.apply(this,arguments);b.invert=t.invert&&c;return f()}}function th(a){var b=0,c=Ya/3,f=rh(a);a=f(b,c);a.parallels=function(l){return arguments.length?f(b=l[0]*Sa,c=l[1]*Sa):[b*eb,c*eb]};return a}function Pq(a){function b(f,l){return[f*c,Ia(l)/c]}var c=Ka(a);b.invert=function(f,l){return[f/c,wb(l*c)]};return b}function Wk(a,b){function c(A,F){F=lb(t-2*l*Ia(F))/l;return[F*Ia(A*=l),x-F*Ka(A)]}var f=Ia(a),l=(f+Ia(b))/2;if(1E-6>ab(l))return Pq(a);var t=1+f*(2*l-f),x=lb(t)/l;c.invert=
function(A,F){F=x-F;return[xb(A,ab(F))/l*Qd(F),wb((t-(A*A+F*F)*l*l)/(2*l))]};return c}function rf(){return th(Wk).scale(155.424).center([0,33.6442])}function Xk(){return rf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Qq(a){var b=a.length;return{point:function(c,f){for(var l=-1;++l<b;)a[l].point(c,f)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<
b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}function Yk(a){return function(b,c){var f=Ka(b),l=Ka(c);f=a(f*l);return[f*l*Ia(b),f*Ia(c)]}}function Rd(a){return function(b,c){var f=lb(b*b+c*c),l=a(f),t=Ia(l);l=Ka(l);return[xb(b*t,f*l),wb(f&&c*t/f)]}}function Sd(a,b){return[a,sf(cd((gb+b)/2))]}function Zk(a){function b(){var z=Ya*l(),G=c(ok(c.rotate()).invert([0,0]));return x(null==A?[[G[0]-z,G[1]-z],
[G[0]+z,G[1]+z]]:a===Sd?[[Math.max(G[0]-z,A),F],[Math.min(G[0]+z,P),u]]:[[A,Math.max(G[1]-z,F)],[P,Math.min(G[1]+z,u)]])}var c=Zb(a),f=c.center,l=c.scale,t=c.translate,x=c.clipExtent,A=null,F,P,u;c.scale=function(z){return arguments.length?(l(z),b()):l()};c.translate=function(z){return arguments.length?(t(z),b()):t()};c.center=function(z){return arguments.length?(f(z),b()):f()};c.clipExtent=function(z){return arguments.length?(null==z?A=F=P=u=null:(A=+z[0][0],F=+z[0][1],P=+z[1][0],u=+z[1][1]),b()):
null==A?null:[[A,F],[P,u]]};return b()}function $k(a,b){function c(x,A){0<t?A<-gb+1E-6&&(A=-gb+1E-6):A>gb-1E-6&&(A=gb-1E-6);A=t/uh(cd((gb+A)/2),l);return[A*Ia(l*x),t-A*Ka(l*x)]}var f=Ka(a),l=a===b?Ia(a):sf(f/Ka(b))/sf(cd((gb+b)/2)/cd((gb+a)/2)),t=f*uh(cd((gb+a)/2),l)/l;if(!l)return Sd;c.invert=function(x,A){A=t-A;var F=Qd(l)*lb(x*x+A*A);return[xb(x,ab(A))/l*Qd(A),2*dd(uh(t/F,1/l))-gb]};return c}function Td(a,b){return[a,b]}function al(a,b){function c(x,A){A=t-A;x*=l;return[A*Ia(x),t-A*Ka(x)]}var f=
Ka(a),l=a===b?Ia(a):(f-Ka(b))/(b-a),t=f/l+a;if(1E-6>ab(l))return Td;c.invert=function(x,A){A=t-A;return[xb(x,ab(A))/l*Qd(A),t-Qd(l)*lb(x*x+A*A)]};return c}function vh(a,b){b=wb(tf*Ia(b));var c=b*b,f=c*c*c;return[a*Ka(b)/(tf*(1.340264+3*-.081106*c+f*(7*8.93E-4+.034164*c))),b*(1.340264+-.081106*c+f*(8.93E-4+.003796*c))]}function wh(a,b){var c=Ka(b),f=Ka(a)*c;return[c*Ia(a)/f,Ia(b)/f]}function uf(a,b,c,f){return 1===a&&1===b&&0===c&&0===f?Ec:Pd({point:function(l,t){this.stream.point(l*a+c,t*b+f)}})}
function xh(a,b){var c=b*b,f=c*c;return[a*(.8707-.131979*c+f*(-.013791+f*(.003971*c-.001529*f))),b*(1.007226+c*(.015085+f*(-.044475+.028874*c-.005916*f)))]}function yh(a,b){return[Ka(b)*Ia(a),Ia(b)]}function zh(a,b){var c=Ka(b),f=1+Ka(a)*c;return[c*Ia(a)/f,Ia(b)/f]}function Ah(a,b){return[sf(cd((gb+b)/2)),-a]}function Rq(a,b){return a.parent===b.parent?1:2}function Sq(a,b){return a+b.x}function Tq(a,b){return Math.max(a,b.y)}function Uq(a){for(var b;b=a.children;)a=b[0];return a}function Vq(a){for(var b;b=
a.children;)a=b[b.length-1];return a}function Wq(a){var b=0,c=a.children,f=c&&c.length;if(f)for(;0<=--f;)b+=c[f].value;else b=1;a.value=b}function Bh(a,b){var c=new ed(a);a=+a.value&&(c.value=a.value);var f,l=[c],t,x,A,F;for(null==b&&(b=Xq);f=l.pop();)if(a&&(f.value=+f.data.value),(x=b(f.data))&&(F=x.length))for(f.children=Array(F),A=F-1;0<=A;--A)l.push(t=f.children[A]=new ed(x[A])),t.parent=f,t.depth=f.depth+1;return c.eachBefore(bl)}function Xq(a){return a.children}function Yq(a){a.data=a.data.data}
function bl(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function ed(a){this.data=a;this.depth=this.height=0;this.parent=null}function cl(a){var b=0;a=Zq.call(a);for(var c=a.length,f,l;c;)l=Math.random()*c--|0,f=a[c],a[c]=a[l],a[l]=f;c=a.length;f=[];for(var t;b<c;)if(l=a[b],t&&dl(t,l))++b;else{a:if(b=f,Ch(l,b))b=[l];else{for(f=0;f<b.length;++f)if(vf(l,b[f])&&Ch(Ud(b[f],l),b)){b=[b[f],l];break a}for(f=0;f<b.length-1;++f)for(t=f+1;t<b.length;++t)if(vf(Ud(b[f],b[t]),l)&&vf(Ud(b[f],l),b[t])&&
vf(Ud(b[t],l),b[f])&&Ch(el(b[f],b[t],l),b)){b=[b[f],b[t],l];break a}throw Error();}a:{b=f=b;switch(b.length){case 1:b=b[0];b={x:b.x,y:b.y,r:b.r};break a;case 2:b=Ud(b[0],b[1]);break a;case 3:b=el(b[0],b[1],b[2]);break a}b=void 0}t=b;b=0}return t}function vf(a,b){var c=a.r-b.r,f=b.x-a.x;a=b.y-a.y;return 0>c||c*c<f*f+a*a}function dl(a,b){var c=a.r-b.r+1E-6,f=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>f*f+a*a}function Ch(a,b){for(var c=0;c<b.length;++c)if(!dl(a,b[c]))return!1;return!0}function Ud(a,b){var c=
a.x,f=a.y;a=a.r;var l=b.x,t=b.y;b=b.r;var x=l-c,A=t-f,F=b-a,P=Math.sqrt(x*x+A*A);return{x:(c+l+x/P*F)/2,y:(f+t+A/P*F)/2,r:(P+a+b)/2}}function el(a,b,c){var f=a.x,l=a.y;a=a.r;var t=b.x,x=b.y,A=b.r,F=c.x,P=c.y,u=c.r;c=f-t;b=f-F;var z=l-x,G=l-P,Q=A-a,Z=u-a,da=f*f+l*l-a*a;x=da-t*t-x*x+A*A;P=da-F*F-P*P+u*u;F=b*z-c*G;t=(z*P-G*x)/(2*F)-f;z=(G*Q-z*Z)/F;G=(b*x-c*P)/(2*F)-l;c=(c*Z-b*Q)/F;b=z*z+c*c-1;Q=2*(a+t*z+G*c);a=t*t+G*G-a*a;a=-(b?(Q+Math.sqrt(Q*Q-4*b*a))/(2*b):a/Q);return{x:f+t+z*a,y:l+G+c*a,r:a}}function fl(a,
b,c){var f=a.x-b.x,l=a.y-b.y,t=f*f+l*l;if(t){var x=b.r+c.r;x*=x;var A=a.r+c.r;A*=A;if(x>A){var F=(t+A-x)/(2*t);x=Math.sqrt(Math.max(0,A/t-F*F));c.x=a.x-F*f-x*l;c.y=a.y-F*l+x*f}else F=(t+x-A)/(2*t),x=Math.sqrt(Math.max(0,x/t-F*F)),c.x=b.x+F*f-x*l,c.y=b.y+F*l+x*f}else c.x=b.x+c.r,c.y=b.y}function gl(a,b){var c=a.r+b.r-1E-6,f=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>f*f+a*a}function hl(a){var b=a._,c=a.next._,f=b.r+c.r;a=(b.x*c.r+c.x*b.r)/f;b=(b.y*c.r+c.y*b.r)/f;return a*a+b*b}function wf(a){this._=a;this.previous=
this.next=null}function il(a){if(!(c=a.length))return 0;var b,c;var f=a[0];f.x=0;f.y=0;if(!(1<c))return f.r;var l=a[1];f.x=-l.r;l.x=f.r;l.y=0;if(!(2<c))return f.r+l.r;fl(l,f,b=a[2]);f=new wf(f);l=new wf(l);b=new wf(b);f.next=b.previous=l;l.next=f.previous=b;b.next=l.previous=f;var t=3;a:for(;t<c;++t){fl(f._,l._,b=a[t]);b=new wf(b);var x=l.next;var A=f.previous;var F=l._.r;var P=f._.r;do if(F<=P){if(gl(x._,b._)){l=x;f.next=l;l.previous=f;--t;continue a}F+=x._.r;x=x.next}else{if(gl(A._,b._)){f=A;f.next=
l;l.previous=f;--t;continue a}P+=A._.r;A=A.previous}while(x!==A.next);b.previous=f;b.next=l;f.next=l.previous=l=b;for(x=hl(f);(b=b.next)!==l;)(A=hl(b))<x&&(f=b,x=A);l=f.next}f=[l._];for(b=l;(b=b.next)!==l;)f.push(b._);b=cl(f);for(t=0;t<c;++t)f=a[t],f.x-=b.x,f.y-=b.y;return b.r}function xf(a){if("function"!==typeof a)throw Error();return a}function Gc(){return 0}function fd(a){return function(){return a}}function $q(a){return Math.sqrt(a.value)}function jl(a){return function(b){b.children||(b.r=Math.max(0,
+a(b)||0))}}function Dh(a,b){return function(c){if(f=c.children){var f,l,t=f.length,x=a(c)*b||0;if(x)for(l=0;l<t;++l)f[l].r+=x;var A=il(f);if(x)for(l=0;l<t;++l)f[l].r-=x;c.r=A+x}}}function kl(a){return function(b){var c=b.parent;b.r*=a;c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function ll(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)}function Vd(a,b,c,f,l){var t=a.children,x=-1,A=t.length;for(f=a.value&&(f-b)/a.value;++x<A;)a=t[x],a.y0=c,a.y1=l,a.x0=b,a.x1=b+=
a.value*f}function ar(a){return a.id}function br(a){return a.parentId}function cr(a,b){return a.parent===b.parent?1:2}function Eh(a){var b=a.children;return b?b[0]:a.t}function Fh(a){var b=a.children;return b?b[b.length-1]:a.t}function yf(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function dr(a){a=new yf(a,0);for(var b,c=[a],f,l,t;b=c.pop();)if(l=b._.children)for(b.children=Array(f=l.length),t=f-1;0<=t;--t)c.push(f=b.children[t]=
new yf(l[t],t)),f.parent=b;(a.parent=new yf(null,0)).children=[a];return a}function zf(a,b,c,f,l){var t=a.children,x=-1,A=t.length;for(l=a.value&&(l-c)/a.value;++x<A;)a=t[x],a.x0=b,a.x1=f,a.y0=c,a.y1=c+=a.value*l}function ml(a,b,c,f,l,t){for(var x=[],A=b.children,F,P,u=F=0,z=A.length,G,Q=b.value,Z,da,ka,qa,R,T;F<z;){b=l-c;G=t-f;do Z=A[u++].value;while(!Z&&u<z);da=ka=Z;T=Math.max(G/b,b/G)/(Q*a);qa=Z*Z*T;for(R=Math.max(ka/qa,qa/da);u<z;++u){Z+=P=A[u].value;P<da&&(da=P);P>ka&&(ka=P);qa=Z*Z*T;qa=Math.max(ka/
qa,qa/da);if(qa>R){Z-=P;break}R=qa}x.push(F={value:Z,dice:b<G,children:A.slice(F,u)});F.dice?Vd(F,c,f,l,Q?f+=G*Z/Q:t):zf(F,c,f,Q?c+=b*Z/Q:l,t);Q-=Z;F=u}return x}function er(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function fr(a,b){return a[0]-b[0]||a[1]-b[1]}function nl(a){for(var b=a.length,c=[0,1],f=2,l=2;l<b;++l){for(;1<f&&0>=er(a[c[f-2]],a[c[f-1]],a[l]);)--f;c[f++]=l}return c.slice(0,f)}function gd(){return Math.random()}function Gh(a){function b(t){var x=t+"",A=c.get(x);if(!A){if(l!==
Hh)return l;c.set(x,A=f.push(t))}return a[(A-1)%a.length]}var c=bc(),f=[],l=Hh;a=null==a?[]:rc.call(a);b.domain=function(t){if(!arguments.length)return f.slice();f=[];c=bc();for(var x=-1,A=t.length,F,P;++x<A;)c.has(P=(F=t[x])+"")||c.set(P,f.push(F));return b};b.range=function(t){return arguments.length?(a=rc.call(t),b):a.slice()};b.unknown=function(t){return arguments.length?(l=t,b):l};b.copy=function(){return Gh().domain(f).range(a).unknown(l)};return b}function Ih(){function a(){var z=c().length,
G=l[1]<l[0],Q=l[G-0],Z=l[1-G];t=(Z-Q)/Math.max(1,z-F+2*P);A&&(t=Math.floor(t));Q+=(Z-Q-t*(z-F))*u;x=t*(1-F);A&&(Q=Math.round(Q),x=Math.round(x));z=g(z).map(function(da){return Q+t*da});return f(G?z.reverse():z)}var b=Gh().unknown(void 0),c=b.domain,f=b.range,l=[0,1],t,x,A=!1,F=0,P=0,u=.5;delete b.unknown;b.domain=function(z){return arguments.length?(c(z),a()):c()};b.range=function(z){return arguments.length?(l=[+z[0],+z[1]],a()):l.slice()};b.rangeRound=function(z){return l=[+z[0],+z[1]],A=!0,a()};
b.bandwidth=function(){return x};b.step=function(){return t};b.round=function(z){return arguments.length?(A=!!z,a()):A};b.padding=function(z){return arguments.length?(F=P=Math.max(0,Math.min(1,z)),a()):F};b.paddingInner=function(z){return arguments.length?(F=Math.max(0,Math.min(1,z)),a()):F};b.paddingOuter=function(z){return arguments.length?(P=Math.max(0,Math.min(1,z)),a()):P};b.align=function(z){return arguments.length?(u=Math.max(0,Math.min(1,z)),a()):u};b.copy=function(){return Ih().domain(c()).range(l).round(A).paddingInner(F).paddingOuter(P).align(u)};
return a()}function ol(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return ol(b())};return a}function Jh(a){return function(){return a}}function pl(a){return+a}function Kh(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:Jh(b)}function gr(a){return function(b,c){var f=a(b=+b,c=+c);return function(l){return l<=b?0:l>=c?1:f(l)}}}function hr(a){return function(b,c){var f=a(b=+b,c=+c);return function(l){return 0>=l?b:1<=l?c:f(l)}}}function ir(a,
b,c,f){var l=a[0];a=a[1];var t=b[0];b=b[1];a<l?(l=c(a,l),t=f(b,t)):(l=c(l,a),t=f(t,b));return function(x){return t(l(x))}}function jr(a,b,c,f){var l=Math.min(a.length,b.length)-1,t=Array(l),x=Array(l),A=-1;a[l]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++A<l;)t[A]=c(a[A],a[A+1]),x[A]=f(b[A],b[A+1]);return function(F){var P=Hc(a,F,1,l)-1;return x[P](t[P](F))}}function Af(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function Bf(a,b){function c(){F=
2<Math.min(l.length,t.length)?jr:ir;P=u=null;return f}function f(z){return(P||(P=F(l,t,A?gr(a):a,x)))(+z)}var l=ql,t=ql,x=wd,A=!1,F,P,u;f.invert=function(z){return(u||(u=F(t,l,Kh,A?hr(b):b)))(+z)};f.domain=function(z){return arguments.length?(l=Lh.call(z,pl),c()):l.slice()};f.range=function(z){return arguments.length?(t=rc.call(z),c()):t.slice()};f.rangeRound=function(z){return t=rc.call(z),x=Zi,c()};f.clamp=function(z){return arguments.length?(A=!!z,c()):A};f.interpolate=function(z){return arguments.length?
(x=z,c()):x};return c()}function hd(a){var b=a.domain;a.ticks=function(c){var f=b();return n(f[0],f[f.length-1],null==c?10:c)};a.tickFormat=function(c,f){var l;a:{var t=b(),x=t[0];t=t[t.length-1];c=q(x,t,null==c?10:c);f=Gd(null==f?",f":f);switch(f.type){case "s":x=Math.max(Math.abs(x),Math.abs(t));null!=f.precision||isNaN(l=Oj(c,x))||(f.precision=l);l=d3.formatPrefix(f,x);break a;case "":case "e":case "g":case "p":case "r":null!=f.precision||isNaN(l=Pj(c,Math.max(Math.abs(x),Math.abs(t))))||(f.precision=
l-("e"===f.type));break;case "f":case "%":null!=f.precision||isNaN(l=Nj(c))||(f.precision=l-2*("%"===f.type))}l=d3.format(f)}return l};a.nice=function(c){null==c&&(c=10);var f=b(),l=0,t=f.length-1,x=f[l],A=f[t];if(A<x){var F=x;x=A;A=F;F=l;l=t;t=F}F=r(x,A,c);0<F?(x=Math.floor(x/F)*F,A=Math.ceil(A/F)*F,F=r(x,A,c)):0>F&&(x=Math.ceil(x*F)/F,A=Math.floor(A*F)/F,F=r(x,A,c));0<F?(f[l]=Math.floor(x/F)*F,f[t]=Math.ceil(A/F)*F,b(f)):0>F&&(f[l]=Math.ceil(x*F)/F,f[t]=Math.floor(A*F)/F,b(f));return a};return a}
function rl(){var a=Bf(Kh,Fb);a.copy=function(){return Af(a,rl())};return hd(a)}function sl(){function a(c){return+c}var b=[0,1];a.invert=a;a.domain=a.range=function(c){return arguments.length?(b=Lh.call(c,pl),a):b.slice()};a.copy=function(){return sl().domain(b)};return hd(a)}function tl(a,b){a=a.slice();var c=0,f=a.length-1,l=a[c],t=a[f];if(t<l){var x=c;c=f;f=x;x=l;l=t;t=x}a[c]=b.floor(l);a[f]=b.ceil(t);return a}function kr(a,b){return(b=Math.log(b/a))?function(c){return Math.log(c/a)/b}:Jh(b)}
function lr(a,b){return 0>a?function(c){return-Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,c)*Math.pow(a,1-c)}}function mr(a){return isFinite(a)?+("1e"+a):0>a?0:a}function ul(a){return 10===a?mr:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function vl(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function wl(a){return function(b){return-a(-b)}}function xl(){function a(){l=vl(f);t=ul(f);0>c()[0]&&(l=
wl(l),t=wl(t));return b}var b=Bf(kr,lr).domain([1,10]),c=b.domain,f=10,l=vl(10),t=ul(10);b.base=function(x){return arguments.length?(f=+x,a()):f};b.domain=function(x){return arguments.length?(c(x),a()):c()};b.ticks=function(x){var A=c(),F=A[0];A=A[A.length-1];var P;if(P=A<F)u=F,F=A,A=u;var u=l(F),z=l(A);var G=null==x?10:+x;x=[];if(!(f%1)&&z-u<G)if(u=Math.round(u)-1,z=Math.round(z)+1,0<F)for(;u<z;++u){var Q=1;for(G=t(u);Q<f;++Q){var Z=G*Q;if(!(Z<F)){if(Z>A)break;x.push(Z)}}}else for(;u<z;++u)for(Q=
f-1,G=t(u);1<=Q;--Q){if(Z=G*Q,!(Z<F)){if(Z>A)break;x.push(Z)}}else x=n(u,z,Math.min(z-u,G)).map(t);return P?x.reverse():x};b.tickFormat=function(x,A){null==A&&(A=10===f?".0e":",");"function"!==typeof A&&(A=d3.format(A));if(Infinity===x)return A;null==x&&(x=10);var F=Math.max(1,f*x/b.ticks().length);return function(P){var u=P/t(Math.round(l(P)));u*f<f-.5&&(u*=f);return u<=F?A(P):""}};b.nice=function(){return c(tl(c(),{floor:function(x){return t(Math.floor(l(x)))},ceil:function(x){return t(Math.ceil(l(x)))}}))};
b.copy=function(){return Af(b,xl().base(f))};return b}function id(a,b){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}function Mh(){var a=1,b=Bf(function(f,l){return(l=id(l,a)-(f=id(f,a)))?function(t){return(id(t,a)-f)/l}:Jh(l)},function(f,l){l=id(l,a)-(f=id(f,a));return function(t){return id(f+l*t,1/a)}}),c=b.domain;b.exponent=function(f){return arguments.length?(a=+f,c(c())):a};b.copy=function(){return Af(b,Mh().exponent(a))};return hd(b)}function yl(){function a(){var t=0,x=Math.max(1,f.length);for(l=
Array(x-1);++t<x;)l[t-1]=B(c,t/x);return b}function b(t){if(!isNaN(t=+t))return f[Hc(l,t)]}var c=[],f=[],l=[];b.invertExtent=function(t){t=f.indexOf(t);return 0>t?[NaN,NaN]:[0<t?l[t-1]:c[0],t<l.length?l[t]:c[c.length-1]]};b.domain=function(t){if(!arguments.length)return c.slice();c=[];for(var x=0,A=t.length,F;x<A;++x)(F=t[x],null==F||isNaN(F=+F))||c.push(F);c.sort(I);return a()};b.range=function(t){return arguments.length?(f=rc.call(t),a()):f.slice()};b.quantiles=function(){return l.slice()};b.copy=
function(){return yl().domain(c).range(f)};return b}function zl(){function a(A){if(A<=A)return x[Hc(t,A,0,l)]}function b(){var A=-1;for(t=Array(l);++A<l;)t[A]=((A+1)*f-(A-l)*c)/(l+1);return a}var c=0,f=1,l=1,t=[.5],x=[0,1];a.domain=function(A){return arguments.length?(c=+A[0],f=+A[1],b()):[c,f]};a.range=function(A){return arguments.length?(l=(x=rc.call(A)).length-1,b()):x.slice()};a.invertExtent=function(A){A=x.indexOf(A);return 0>A?[NaN,NaN]:1>A?[c,t[0]]:A>=l?[t[l-1],f]:[t[A-1],t[A]]};a.copy=function(){return zl().domain([c,
f]).range(x)};return hd(a)}function Al(){function a(l){if(l<=l)return c[Hc(b,l,0,f)]}var b=[.5],c=[0,1],f=1;a.domain=function(l){return arguments.length?(b=rc.call(l),f=Math.min(b.length,c.length-1),a):b.slice()};a.range=function(l){return arguments.length?(c=rc.call(l),f=Math.min(b.length,c.length-1),a):c.slice()};a.invertExtent=function(l){l=c.indexOf(l);return[b[l-1],b[l]]};a.copy=function(){return Al().domain(b).range(c)};return a}function nb(a,b,c,f){function l(t){return a(t=new Date(+t)),t}
l.floor=l;l.ceil=function(t){return a(t=new Date(t-1)),b(t,1),a(t),t};l.round=function(t){var x=l(t),A=l.ceil(t);return t-x<A-t?x:A};l.offset=function(t,x){return b(t=new Date(+t),null==x?1:Math.floor(x)),t};l.range=function(t,x,A){var F=[],P;t=l.ceil(t);A=null==A?1:Math.floor(A);if(!(t<x&&0<A))return F;do F.push(P=new Date(+t)),b(t,A),a(t);while(P<t&&t<x);return F};l.filter=function(t){return nb(function(x){if(x>=x)for(;a(x),!t(x);)x.setTime(x-1)},function(x,A){if(x>=x)if(0>A)for(;0>=++A;)for(;b(x,
-1),!t(x););else for(;0<=--A;)for(;b(x,1),!t(x););})};c&&(l.count=function(t,x){Nh.setTime(+t);Oh.setTime(+x);a(Nh);a(Oh);return Math.floor(c(Nh,Oh))},l.every=function(t){t=Math.floor(t);return isFinite(t)&&0<t?1<t?l.filter(f?function(x){return 0===f(x)%t}:function(x){return 0===l.count(0,x)%t}):l:null});return l}function Ic(a){return nb(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(b,c){b.setDate(b.getDate()+7*c)},function(b,c){return(c-b-6E4*(c.getTimezoneOffset()-
b.getTimezoneOffset()))/6048E5})}function Jc(a){return nb(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCDate(b.getUTCDate()+7*c)},function(b,c){return(c-b)/6048E5})}function nr(a){if(0<=a.y&&100>a.y){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Cf(a){if(0<=a.y&&100>a.y){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,
a.m,a.d,a.H,a.M,a.S,a.L))}function Wd(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function Bl(a){function b(m,E){return function(O){var M=[],N=-1,V=0,ba=m.length,W,aa;for(O instanceof Date||(O=new Date(+O));++N<ba;)if(37===m.charCodeAt(N)){M.push(m.slice(V,N));null!=(V=Cl[W=m.charAt(++N)])?W=m.charAt(++N):V="e"===W?" ":"0";if(aa=E[W])W=aa(O,V);M.push(W);V=N+1}M.push(m.slice(V,N));return M.join("")}}function c(m,E){return function(O){var M=Wd(1900);if(f(M,m,O+="",0)!=O.length)return null;if("Q"in M)return new Date(M.Q);
"p"in M&&(M.H=M.H%12+12*M.p);if("V"in M){if(1>M.V||53<M.V)return null;"w"in M||(M.w=1);if("Z"in M){O=Cf(Wd(M.y));var N=O.getUTCDay();O=4<N||0===N?Xd.ceil(O):Xd(O);O=Yd.offset(O,7*(M.V-1));M.y=O.getUTCFullYear();M.m=O.getUTCMonth();M.d=O.getUTCDate()+(M.w+6)%7}else O=E(Wd(M.y)),N=O.getDay(),O=4<N||0===N?Zd.ceil(O):Zd(O),O=$d.offset(O,7*(M.V-1)),M.y=O.getFullYear(),M.m=O.getMonth(),M.d=O.getDate()+(M.w+6)%7}else if("W"in M||"U"in M)"w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),N="Z"in M?Cf(Wd(M.y)).getUTCDay():
E(Wd(M.y)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+7*M.W-(N+5)%7:M.w+7*M.U-(N+6)%7;return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Cf(M)):E(M)}}function f(m,E,O,M){for(var N=0,V=E.length,ba=O.length,W;N<V;){if(M>=ba)return-1;W=E.charCodeAt(N++);if(37===W){if(W=E.charAt(N++),W=ua[W in Cl?E.charAt(N++):W],!W||0>(M=W(m,O,M)))return-1}else if(W!=O.charCodeAt(M++))return-1}return M}var l=a.dateTime,t=a.date,x=a.time,A=a.periods,F=a.days,P=a.shortDays,u=a.months,z=a.shortMonths,G=ae(A),Q=be(A),Z=ae(F),da=be(F),
ka=ae(P),qa=be(P),R=ae(u),T=be(u),ja=ae(z),ra=be(z),xa={a:function(m){return P[m.getDay()]},A:function(m){return F[m.getDay()]},b:function(m){return z[m.getMonth()]},B:function(m){return u[m.getMonth()]},c:null,d:Dl,e:Dl,f:or,H:pr,I:qr,j:rr,L:El,m:sr,M:tr,p:function(m){return A[+(12<=m.getHours())]},Q:Fl,s:Gl,S:ur,u:vr,U:wr,V:xr,w:yr,W:zr,x:null,X:null,y:Ar,Y:Br,Z:Cr,"%":Hl},oa={a:function(m){return P[m.getUTCDay()]},A:function(m){return F[m.getUTCDay()]},b:function(m){return z[m.getUTCMonth()]},
B:function(m){return u[m.getUTCMonth()]},c:null,d:Il,e:Il,f:Dr,H:Er,I:Fr,j:Gr,L:Jl,m:Hr,M:Ir,p:function(m){return A[+(12<=m.getUTCHours())]},Q:Fl,s:Gl,S:Jr,u:Kr,U:Lr,V:Mr,w:Nr,W:Or,x:null,X:null,y:Pr,Y:Qr,Z:Rr,"%":Hl},ua={a:function(m,E,O){return(E=ka.exec(E.slice(O)))?(m.w=qa[E[0].toLowerCase()],O+E[0].length):-1},A:function(m,E,O){return(E=Z.exec(E.slice(O)))?(m.w=da[E[0].toLowerCase()],O+E[0].length):-1},b:function(m,E,O){return(E=ja.exec(E.slice(O)))?(m.m=ra[E[0].toLowerCase()],O+E[0].length):
-1},B:function(m,E,O){return(E=R.exec(E.slice(O)))?(m.m=T[E[0].toLowerCase()],O+E[0].length):-1},c:function(m,E,O){return f(m,l,E,O)},d:Kl,e:Kl,f:Sr,H:Ll,I:Ll,j:Tr,L:Ur,m:Vr,M:Wr,p:function(m,E,O){return(E=G.exec(E.slice(O)))?(m.p=Q[E[0].toLowerCase()],O+E[0].length):-1},Q:Xr,s:Yr,S:Zr,u:$r,U:as,V:bs,w:cs,W:ds,x:function(m,E,O){return f(m,t,E,O)},X:function(m,E,O){return f(m,x,E,O)},y:es,Y:fs,Z:gs,"%":hs};xa.x=b(t,xa);xa.X=b(x,xa);xa.c=b(l,xa);oa.x=b(t,oa);oa.X=b(x,oa);oa.c=b(l,oa);return{format:function(m){var E=
b(m+="",xa);E.toString=function(){return m};return E},parse:function(m){var E=c(m+="",nr);E.toString=function(){return m};return E},utcFormat:function(m){var E=b(m+="",oa);E.toString=function(){return m};return E},utcParse:function(m){var E=c(m,Cf);E.toString=function(){return m};return E}}}function bb(a,b,c){var f=0>a?"-":"";a=(f?-a:a)+"";var l=a.length;return f+(l<c?Array(c-l+1).join(b)+a:a)}function is(a){return a.replace(js,"\\$&")}function ae(a){return new RegExp("^(?:"+a.map(is).join("|")+")",
"i")}function be(a){for(var b={},c=-1,f=a.length;++c<f;)b[a[c].toLowerCase()]=c;return b}function cs(a,b,c){return(b=rb.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function $r(a,b,c){return(b=rb.exec(b.slice(c,c+1)))?(a.u=+b[0],c+b[0].length):-1}function as(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.U=+b[0],c+b[0].length):-1}function bs(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.V=+b[0],c+b[0].length):-1}function ds(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.W=+b[0],c+b[0].length):-1}function fs(a,
b,c){return(b=rb.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function es(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1}function gs(a,b,c){return(b=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6)))?(a.Z=b[1]?0:-(b[2]+(b[3]||"00")),c+b[0].length):-1}function Vr(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function Kl(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Tr(a,b,c){return(b=rb.exec(b.slice(c,
c+3)))?(a.m=0,a.d=+b[0],c+b[0].length):-1}function Ll(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Wr(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Zr(a,b,c){return(b=rb.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Ur(a,b,c){return(b=rb.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Sr(a,b,c){return(b=rb.exec(b.slice(c,c+6)))?(a.L=Math.floor(b[0]/1E3),c+b[0].length):-1}function hs(a,b,c){return(a=ks.exec(b.slice(c,
c+1)))?c+a[0].length:-1}function Xr(a,b,c){return(b=rb.exec(b.slice(c)))?(a.Q=+b[0],c+b[0].length):-1}function Yr(a,b,c){return(b=rb.exec(b.slice(c)))?(a.Q=1E3*+b[0],c+b[0].length):-1}function Dl(a,b){return bb(a.getDate(),b,2)}function pr(a,b){return bb(a.getHours(),b,2)}function qr(a,b){return bb(a.getHours()%12||12,b,2)}function rr(a,b){return bb(1+$d.count(gc(a),a),b,3)}function El(a,b){return bb(a.getMilliseconds(),b,3)}function or(a,b){return El(a,b)+"000"}function sr(a,b){return bb(a.getMonth()+
1,b,2)}function tr(a,b){return bb(a.getMinutes(),b,2)}function ur(a,b){return bb(a.getSeconds(),b,2)}function vr(a){a=a.getDay();return 0===a?7:a}function wr(a,b){return bb(ce.count(gc(a),a),b,2)}function xr(a,b){var c=a.getDay();a=4<=c||0===c?de(a):de.ceil(a);return bb(de.count(gc(a),a)+(4===gc(a).getDay()),b,2)}function yr(a){return a.getDay()}function zr(a,b){return bb(Zd.count(gc(a),a),b,2)}function Ar(a,b){return bb(a.getFullYear()%100,b,2)}function Br(a,b){return bb(a.getFullYear()%1E4,b,4)}
function Cr(a){a=a.getTimezoneOffset();return(0<a?"-":(a*=-1,"+"))+bb(a/60|0,"0",2)+bb(a%60,"0",2)}function Il(a,b){return bb(a.getUTCDate(),b,2)}function Er(a,b){return bb(a.getUTCHours(),b,2)}function Fr(a,b){return bb(a.getUTCHours()%12||12,b,2)}function Gr(a,b){return bb(1+Yd.count(hc(a),a),b,3)}function Jl(a,b){return bb(a.getUTCMilliseconds(),b,3)}function Dr(a,b){return Jl(a,b)+"000"}function Hr(a,b){return bb(a.getUTCMonth()+1,b,2)}function Ir(a,b){return bb(a.getUTCMinutes(),b,2)}function Jr(a,
b){return bb(a.getUTCSeconds(),b,2)}function Kr(a){a=a.getUTCDay();return 0===a?7:a}function Lr(a,b){return bb(ee.count(hc(a),a),b,2)}function Mr(a,b){var c=a.getUTCDay();a=4<=c||0===c?fe(a):fe.ceil(a);return bb(fe.count(hc(a),a)+(4===hc(a).getUTCDay()),b,2)}function Nr(a){return a.getUTCDay()}function Or(a,b){return bb(Xd.count(hc(a),a),b,2)}function Pr(a,b){return bb(a.getUTCFullYear()%100,b,2)}function Qr(a,b){return bb(a.getUTCFullYear()%1E4,b,4)}function Rr(){return"+0000"}function Hl(){return"%"}
function Fl(a){return+a}function Gl(a){return Math.floor(+a/1E3)}function Ml(a){jd=Bl(a);d3.timeFormat=jd.format;d3.timeParse=jd.parse;d3.utcFormat=jd.utcFormat;d3.utcParse=jd.utcParse;return jd}function ls(a){return a.toISOString()}function ms(a){a=new Date(a);return isNaN(a)?null:a}function ns(a){return new Date(a)}function os(a){return a instanceof Date?+a:+new Date(+a)}function Ph(a,b,c,f,l,t,x,A,F){function P(oa){return(x(oa)<oa?Z:t(oa)<oa?da:l(oa)<oa?ka:f(oa)<oa?qa:b(oa)<oa?c(oa)<oa?R:T:a(oa)<
oa?ja:ra)(oa)}function u(oa,ua,m,E){null==oa&&(oa=10);if("number"===typeof oa){E=Math.abs(m-ua)/oa;var O=H(function(M){return M[2]}).right(xa,E);O===xa.length?(E=q(ua/31536E6,m/31536E6,oa),oa=a):O?(O=xa[E/xa[O-1][2]<xa[O][2]/E?O-1:O],E=O[1],oa=O[0]):(E=Math.max(q(ua,m,oa),1),oa=A)}return null==E?oa:oa.every(E)}var z=Bf(Kh,Fb),G=z.invert,Q=z.domain,Z=F(".%L"),da=F(":%S"),ka=F("%I:%M"),qa=F("%I %p"),R=F("%a %d"),T=F("%b %d"),ja=F("%B"),ra=F("%Y"),xa=[[x,1,1E3],[x,5,5E3],[x,15,15E3],[x,30,3E4],[t,1,
6E4],[t,5,3E5],[t,15,9E5],[t,30,18E5],[l,1,36E5],[l,3,108E5],[l,6,216E5],[l,12,432E5],[f,1,864E5],[f,2,1728E5],[c,1,6048E5],[b,1,2592E6],[b,3,7776E6],[a,1,31536E6]];z.invert=function(oa){return new Date(G(oa))};z.domain=function(oa){return arguments.length?Q(Lh.call(oa,os)):Q().map(ns)};z.ticks=function(oa,ua){var m=Q(),E=m[0];m=m[m.length-1];var O=m<E;if(O){var M=E;E=m;m=M}M=(M=u(oa,E,m,ua))?M.range(E,m+1):[];return O?M.reverse():M};z.tickFormat=function(oa,ua){return null==ua?P:F(ua)};z.nice=function(oa,
ua){var m=Q();return(oa=u(oa,m[0],m[m.length-1],ua))?Q(tl(m,oa)):z};z.copy=function(){return Af(z,Ph(a,b,c,f,l,t,x,A,F))};return z}function Nl(a){function b(x){x=(x-c)*l;return a(t?Math.max(0,Math.min(1,x)):x)}var c=0,f=1,l=1,t=!1;b.domain=function(x){return arguments.length?(c=+x[0],f=+x[1],l=c===f?0:1/(f-c),b):[c,f]};b.clamp=function(x){return arguments.length?(t=!!x,b):t};b.interpolator=function(x){return arguments.length?(a=x,b):a};b.copy=function(){return Nl(a).domain([c,f]).clamp(t)};return hd(b)}
function Ol(a){function b(F){var P=.5+((F=+F)-f)*(F<f?t:x);return a(A?Math.max(0,Math.min(1,P)):P)}var c=0,f=.5,l=1,t=1,x=1,A=!1;b.domain=function(F){return arguments.length?(c=+F[0],f=+F[1],l=+F[2],t=c===f?0:.5/(f-c),x=f===l?0:.5/(l-f),b):[c,f,l]};b.clamp=function(F){return arguments.length?(A=!!F,b):A};b.interpolator=function(F){return arguments.length?(a=F,b):a};b.copy=function(){return Ol(a).domain([c,f,l]).clamp(A)};return hd(b)}function Ua(a){for(var b=a.length/6|0,c=Array(b),f=0;f<b;)c[f]=
"#"+a.slice(6*f,6*++f);return c}function db(a){return Pl(a[a.length-1])}function Df(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}}function Xa(a){return function(){return a}}function Ql(a){return 1<=a?Ef:-1>=a?-Ef:Math.asin(a)}function ps(a){return a.innerRadius}function qs(a){return a.outerRadius}function rs(a){return a.startAngle}function ss(a){return a.endAngle}function ts(a){return a&&a.padAngle}function Ff(a,b,c,f,l,t,x){var A=a-c,F=b-f;x=(x?t:-t)/kd(A*
A+F*F);F*=x;A*=-x;var P=a+F,u=b+A,z=c+F,G=f+A;c=(P+z)/2;f=(u+G)/2;b=z-P;a=G-u;x=b*b+a*a;t=l-t;G=P*G-z*u;var Q=(0>a?-1:1)*kd(us(0,t*t*x-G*G));P=(G*a-b*Q)/x;u=(-G*b-a*Q)/x;z=(G*a+b*Q)/x;b=(-G*b+a*Q)/x;a=P-c;x=u-f;c=z-c;f=b-f;a*a+x*x>c*c+f*f&&(P=z,u=b);return{cx:P,cy:u,x01:-F,y01:-A,x11:P*(l/t-1),y11:u*(l/t-1)}}function Rl(a){this._context=a}function Gf(a){return new Rl(a)}function Qh(a){return a[0]}function Rh(a){return a[1]}function Sh(){function a(A){var F,P=A.length,u,z=!1,G;null==l&&(x=t(G=nc()));
for(F=0;F<=P;++F)!(F<P&&f(u=A[F],F,A))===z&&((z=!z)?x.lineStart():x.lineEnd()),z&&x.point(+b(u,F,A),+c(u,F,A));if(G)return x=null,G+""||null}var b=Qh,c=Rh,f=Xa(!0),l=null,t=Gf,x=null;a.x=function(A){return arguments.length?(b="function"===typeof A?A:Xa(+A),a):b};a.y=function(A){return arguments.length?(c="function"===typeof A?A:Xa(+A),a):c};a.defined=function(A){return arguments.length?(f="function"===typeof A?A:Xa(!!A),a):f};a.curve=function(A){return arguments.length?(t=A,null!=l&&(x=t(l)),a):t};
a.context=function(A){return arguments.length?(null==A?l=x=null:x=t(l=A),a):l};return a}function Sl(){function a(u){var z,G,Q=u.length,Z,da=!1,ka,qa=Array(Q),R=Array(Q);null==A&&(P=F(ka=nc()));for(z=0;z<=Q;++z){if(!(z<Q&&x(Z=u[z],z,u))===da)if(da=!da){var T=z;P.areaStart();P.lineStart()}else{P.lineEnd();P.lineStart();for(G=z-1;G>=T;--G)P.point(qa[G],R[G]);P.lineEnd();P.areaEnd()}da&&(qa[z]=+c(Z,z,u),R[z]=+l(Z,z,u),P.point(f?+f(Z,z,u):qa[z],t?+t(Z,z,u):R[z]))}if(ka)return P=null,ka+""||null}function b(){return Sh().defined(x).curve(F).context(A)}
var c=Qh,f=null,l=Xa(0),t=Rh,x=Xa(!0),A=null,F=Gf,P=null;a.x=function(u){return arguments.length?(c="function"===typeof u?u:Xa(+u),f=null,a):c};a.x0=function(u){return arguments.length?(c="function"===typeof u?u:Xa(+u),a):c};a.x1=function(u){return arguments.length?(f=null==u?null:"function"===typeof u?u:Xa(+u),a):f};a.y=function(u){return arguments.length?(l="function"===typeof u?u:Xa(+u),t=null,a):l};a.y0=function(u){return arguments.length?(l="function"===typeof u?u:Xa(+u),a):l};a.y1=function(u){return arguments.length?
(t=null==u?null:"function"===typeof u?u:Xa(+u),a):t};a.lineX0=a.lineY0=function(){return b().x(c).y(l)};a.lineY1=function(){return b().x(c).y(t)};a.lineX1=function(){return b().x(f).y(l)};a.defined=function(u){return arguments.length?(x="function"===typeof u?u:Xa(!!u),a):x};a.curve=function(u){return arguments.length?(F=u,null!=A&&(P=F(A)),a):F};a.context=function(u){return arguments.length?(null==u?A=P=null:P=F(A=u),a):A};return a}function vs(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function ws(a){return a}
function Tl(a){this._curve=a}function Th(a){function b(c){return new Tl(a(c))}b._curve=a;return b}function ge(a){var b=a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(c){return arguments.length?b(Th(c)):b()._curve};return a}function Ul(){return ge(Sh().curve(Vl))}function Wl(){var a=Sl().curve(Vl),b=a.curve,c=a.lineX0,f=a.lineX1,l=a.lineY0,t=a.lineY1;a.angle=a.x;delete a.x;a.startAngle=a.x0;delete a.x0;a.endAngle=a.x1;delete a.x1;a.radius=a.y;delete a.y;a.innerRadius=a.y0;
delete a.y0;a.outerRadius=a.y1;delete a.y1;a.lineStartAngle=function(){return ge(c())};delete a.lineX0;a.lineEndAngle=function(){return ge(f())};delete a.lineX1;a.lineInnerRadius=function(){return ge(l())};delete a.lineY0;a.lineOuterRadius=function(){return ge(t())};delete a.lineY1;a.curve=function(x){return arguments.length?b(Th(x)):b()._curve};return a}function he(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function xs(a){return a.source}function ys(a){return a.target}function Uh(a){function b(){var A,
F=Vh.call(arguments),P=c.apply(this,F),u=f.apply(this,F);x||(x=A=nc());a(x,+l.apply(this,(F[0]=P,F)),+t.apply(this,F),+l.apply(this,(F[0]=u,F)),+t.apply(this,F));if(A)return x=null,A+""||null}var c=xs,f=ys,l=Qh,t=Rh,x=null;b.source=function(A){return arguments.length?(c=A,b):c};b.target=function(A){return arguments.length?(f=A,b):f};b.x=function(A){return arguments.length?(l="function"===typeof A?A:Xa(+A),b):l};b.y=function(A){return arguments.length?(t="function"===typeof A?A:Xa(+A),b):t};b.context=
function(A){return arguments.length?(x=null==A?null:A,b):x};return b}function zs(a,b,c,f,l){a.moveTo(b,c);a.bezierCurveTo(b=(b+f)/2,c,b,l,f,l)}function As(a,b,c,f,l){a.moveTo(b,c);a.bezierCurveTo(b,c=(c+l)/2,f,c,f,l)}function Bs(a,b,c,f,l){var t=he(b,c);b=he(b,c=(c+l)/2);c=he(f,c);f=he(f,l);a.moveTo(t[0],t[1]);a.bezierCurveTo(b[0],b[1],c[0],c[1],f[0],f[1])}function sc(){}function Hf(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+
b)/6,(a._y0+4*a._y1+c)/6)}function If(a){this._context=a}function Xl(a){this._context=a}function Yl(a){this._context=a}function Zl(a,b){this._basis=new If(a);this._beta=b}function Jf(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function Wh(a,b){this._context=a;this._k=(1-b)/6}function Xh(a,b){this._context=a;this._k=(1-b)/6}function Yh(a,b){this._context=a;this._k=(1-b)/6}function Zh(a,b,c){var f=a._x1,l=a._y1,
t=a._x2,x=a._y2;if(1E-12<a._l01_a){var A=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,F=3*a._l01_a*(a._l01_a+a._l12_a);f=(f*A-a._x0*a._l12_2a+a._x2*a._l01_2a)/F;l=(l*A-a._y0*a._l12_2a+a._y2*a._l01_2a)/F}1E-12<a._l23_a&&(A=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,F=3*a._l23_a*(a._l23_a+a._l12_a),t=(t*A+a._x1*a._l23_2a-b*a._l12_2a)/F,x=(x*A+a._y1*a._l23_2a-c*a._l12_2a)/F);a._context.bezierCurveTo(f,l,t,x,a._x2,a._y2)}function $l(a,b){this._context=a;this._alpha=b}function am(a,b){this._context=a;this._alpha=
b}function bm(a,b){this._context=a;this._alpha=b}function cm(a){this._context=a}function dm(a,b,c){var f=a._x1-a._x0;b-=a._x1;var l=(a._y1-a._y0)/(f||0>b&&-0);a=(c-a._y1)/(b||0>f&&-0);return((0>l?-1:1)+(0>a?-1:1))*Math.min(Math.abs(l),Math.abs(a),.5*Math.abs((l*b+a*f)/(f+b)))||0}function em(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function $h(a,b,c){var f=a._x0,l=a._x1,t=a._y1,x=(l-f)/3;a._context.bezierCurveTo(f+x,a._y0+x*b,l-x,t-x*c,l,t)}function Kf(a){this._context=a}function fm(a){this._context=
new gm(a)}function gm(a){this._context=a}function hm(a){this._context=a}function im(a){var b,c=a.length-1,f=Array(c),l=Array(c),t=Array(c);f[0]=0;l[0]=2;t[0]=a[0]+2*a[1];for(b=1;b<c-1;++b)f[b]=1,l[b]=4,t[b]=4*a[b]+2*a[b+1];f[c-1]=2;l[c-1]=7;t[c-1]=8*a[c-1]+a[c];for(b=1;b<c;++b){var x=f[b]/l[b-1];l[b]-=x;t[b]-=x*t[b-1]}f[c-1]=t[c-1]/l[c-1];for(b=c-2;0<=b;--b)f[b]=(t[b]-f[b+1])/l[b];l[c-1]=(a[c]+f[c-1])/2;for(b=0;b<c-1;++b)l[b]=2*a[b+1]-f[b+1];return[f,l]}function Lf(a,b){this._context=a;this._t=b}
function ld(a,b){if(1<(x=a.length))for(var c=1,f,l,t=a[b[0]],x,A=t.length;c<x;++c)for(l=t,t=a[b[c]],f=0;f<A;++f)t[f][1]+=t[f][0]=isNaN(l[f][1])?l[f][0]:l[f][1]}function md(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Cs(a,b){return a[b]}function jm(a){var b=a.map(km);return md(a).sort(function(c,f){return b[c]-b[f]})}function km(a){for(var b=0,c=-1,f=a.length,l;++c<f;)if(l=+a[c][1])b+=l;return b}function lm(a){return function(){return a}}function Ds(a){return a[0]}function Es(a){return a[1]}
function Mf(){this._=null}function Nf(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ie(a,b){var c=b.R,f=b.U;f?f.L===b?f.L=c:f.R=c:a._=c;c.U=f;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function je(a,b){var c=b.L,f=b.U;f?f.L===b?f.L=c:f.R=c:a._=c;c.U=f;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function mm(a){for(;a.L;)a=a.L;return a}function ke(a,b,c,f){var l=[null,null],t=sb.push(l)-1;l.left=a;l.right=b;c&&Of(l,a,b,c);f&&Of(l,b,a,f);Ib[a.index].halfedges.push(t);Ib[b.index].halfedges.push(t);return l}function le(a,b,
c){b=[b,c];b.left=a;return b}function Of(a,b,c,f){a[0]||a[1]?a.left===c?a[1]=f:a[0]=f:(a[0]=f,a.left=b,a.right=c)}function Fs(a,b,c,f,l){var t=a[0],x=a[1],A=t[0];t=t[1];var F=0,P=1,u=x[0]-A;x=x[1]-t;b-=A;if(u||!(0<b)){b/=u;if(0>u){if(b<F)return;b<P&&(P=b)}else if(0<u){if(b>P)return;b>F&&(F=b)}b=f-A;if(u||!(0>b)){b/=u;if(0>u){if(b>P)return;b>F&&(F=b)}else if(0<u){if(b<F)return;b<P&&(P=b)}b=c-t;if(x||!(0<b)){b/=x;if(0>x){if(b<F)return;b<P&&(P=b)}else if(0<x){if(b>P)return;b>F&&(F=b)}b=l-t;if(x||!(0>
b)){b/=x;if(0>x){if(b>P)return;b>F&&(F=b)}else if(0<x){if(b<F)return;b<P&&(P=b)}if(!(0<F||1>P))return!0;0<F&&(a[0]=[A+F*u,t+F*x]);1>P&&(a[1]=[A+P*u,t+P*x]);return!0}}}}}function Gs(a,b,c,f,l){var t=a[1];if(t)return!0;var x=a[0],A=a.left,F=a.right;t=A[0];A=A[1];var P=F[0];F=F[1];var u=(t+P)/2;if(F===A){if(u<b||u>=f)return;if(t>P){if(!x)x=[u,c];else if(x[1]>=l)return;t=[u,l]}else{if(!x)x=[u,l];else if(x[1]<c)return;t=[u,c]}}else{var z=(t-P)/(F-A);u=(A+F)/2-z*u;if(-1>z||1<z)if(t>P){if(!x)x=[(c-u)/z,
c];else if(x[1]>=l)return;t=[(l-u)/z,l]}else{if(!x)x=[(l-u)/z,l];else if(x[1]<c)return;t=[(c-u)/z,c]}else if(A<F){if(!x)x=[b,z*b+u];else if(x[0]>=f)return;t=[f,z*f+u]}else{if(!x)x=[f,z*f+u];else if(x[0]<b)return;t=[b,z*b+u]}}a[0]=x;a[1]=t;return!0}function Hs(a,b){a=a.site;var c=b.left,f=b.right;a===f&&(f=c,c=a);if(f)return Math.atan2(f[1]-c[1],f[0]-c[0]);a===c?(c=b[1],f=b[0]):(c=b[0],f=b[1]);return Math.atan2(c[0]-f[0],f[1]-c[1])}function nm(a,b){return b[+(b.left!==a.site)]}function Is(){for(var a=
0,b=Ib.length,c,f,l,t;a<b;++a)if((c=Ib[a])&&(t=(f=c.halfedges).length)){var x=Array(t),A=Array(t);for(l=0;l<t;++l)x[l]=l,A[l]=Hs(c,sb[f[l]]);x.sort(function(F,P){return A[P]-A[F]});for(l=0;l<t;++l)A[l]=f[x[l]];for(l=0;l<t;++l)f[l]=A[l]}}function Js(){Nf(this);this.x=this.y=this.arc=this.site=this.cy=null}function nd(a){var b=a.P,c=a.N;if(b&&c){var f=b.site;b=a.site;var l=c.site;if(f!==l){c=b[0];var t=b[1],x=f[0]-c,A=f[1]-t;f=l[0]-c;var F=l[1]-t;l=2*(x*F-A*f);if(!(l>=-Ks)){var P=x*x+A*A,u=f*f+F*F;
A=(F*P-A*u)/l;f=(x*u-f*P)/l;x=om.pop()||new Js;x.arc=a;x.site=b;x.x=A+c;x.y=(x.cy=f+t)+Math.sqrt(A*A+f*f);a.circle=x;a=null;for(b=me._;b;)if(x.y<b.y||x.y===b.y&&x.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}me.insert(a,x);a||(ai=x)}}}}function od(a){var b=a.circle;b&&(b.P||(ai=b.N),me.remove(b),om.push(b),Nf(b),a.circle=null)}function Ls(){Nf(this);this.edge=this.site=this.circle=null}function pm(a){var b=qm.pop()||new Ls;b.site=a;return b}function bi(a){od(a);pd.remove(a);
qm.push(a);Nf(a)}function rm(a,b){var c=a.site,f=c[0],l=c[1],t=l-b;if(!t)return f;a=a.P;if(!a)return-Infinity;c=a.site;a=c[0];c=c[1];b=c-b;if(!b)return a;var x=a-f,A=1/t-1/b,F=x/b;return A?(-F+Math.sqrt(F*F-2*A*(x*x/(-2*b)-c+b/2+l-t/2)))/A+f:(f+a)/2}function Ms(a,b){return b[1]-a[1]||b[0]-a[0]}function ci(a,b){var c=a.sort(Ms).pop(),f;sb=[];Ib=Array(a.length);pd=new Mf;for(me=new Mf;;){var l=ai;if(c&&(!l||c[1]<l.y||c[1]===l.y&&c[0]<l.x)){if(c[0]!==f||c[1]!==t){var t=f=void 0;l=c;for(var x=l[0],A=
l[1],F=pd._;F;){var P=rm(F,A)-x;if(P>cb)F=F.L;else{var u=F;var z=A;var G=u.N;G?z=rm(G,z):(u=u.site,z=u[1]===z?u[0]:Infinity);z=x-z;if(z>cb){if(!F.R){t=F;break}F=F.R}else{P>-cb?(t=F.P,f=F):z>-cb?(t=F,f=F.N):t=f=F;break}}}Ib[l.index]={site:l,halfedges:[]};P=pm(l);pd.insert(t,P);if(t||f)if(t===f)od(t),f=pm(t.site),pd.insert(P,f),P.edge=f.edge=ke(t.site,P.site),nd(t),nd(f);else if(f){od(t);od(f);x=t.site;F=x[0];z=x[1];u=l[0]-F;G=l[1]-z;A=f.site;var Q=A[0]-F,Z=A[1]-z,da=2*(u*Z-G*Q),ka=u*u+G*G,qa=Q*Q+Z*
Z;F=[(Z*ka-G*qa)/da+F,(u*qa-Q*ka)/da+z];Of(f.edge,x,A,F);P.edge=ke(x,l,null,F);f.edge=ke(l,A,null,F);nd(t);nd(f)}else P.edge=ke(t.site,P.site);f=c[0];t=c[1]}c=a.pop()}else if(l){A=l.arc;l=A.circle;x=l.x;F=l.cy;l=[x,F];u=A.P;z=A.N;P=[A];bi(A);for(A=u;A.circle&&Math.abs(x-A.circle.x)<cb&&Math.abs(F-A.circle.cy)<cb;)u=A.P,P.unshift(A),bi(A),A=u;P.unshift(A);od(A);for(u=z;u.circle&&Math.abs(x-u.circle.x)<cb&&Math.abs(F-u.circle.cy)<cb;)z=u.N,P.push(u),bi(u),u=z;P.push(u);od(u);F=P.length;for(x=1;x<F;++x)u=
P[x],A=P[x-1],Of(u.edge,A.site,u.site,l);A=P[0];u=P[F-1];u.edge=ke(A.site,u.site,null,l);nd(A);nd(u)}else break}Is();if(b){f=+b[0][0];a=+b[0][1];c=+b[1][0];b=+b[1][1];t=sb.length;for(var R;t--;)Gs(R=sb[t],f,a,c,b)&&Fs(R,f,a,c,b)&&(Math.abs(R[0][0]-R[1][0])>cb||Math.abs(R[0][1]-R[1][1])>cb)||delete sb[t];R=Ib.length;t=!0;for(l=0;l<R;++l)if(P=Ib[l]){var T=P.site;A=P.halfedges;for(x=A.length;x--;)sb[A[x]]||A.splice(x,1);x=0;for(F=A.length;x<F;)if(z=sb[A[x]],u=z[+(z.left===P.site)],G=u[0],Q=u[1],Z=nm(P,
sb[A[++x%F]]),z=Z[0],Z=Z[1],Math.abs(G-z)>cb||Math.abs(Q-Z)>cb)A.splice(x,0,sb.push(le(T,u,Math.abs(G-f)<cb&&b-Q>cb?[f,Math.abs(z-f)<cb?Z:b]:Math.abs(Q-b)<cb&&c-G>cb?[Math.abs(Z-b)<cb?z:c,b]:Math.abs(G-c)<cb&&Q-a>cb?[c,Math.abs(z-c)<cb?Z:a]:Math.abs(Q-a)<cb&&G-f>cb?[Math.abs(Z-a)<cb?z:f,a]:null))-1),++F;F&&(t=!1)}if(t){x=Infinity;l=0;for(t=null;l<R;++l)if(P=Ib[l])T=P.site,A=T[0]-f,F=T[1]-a,A=A*A+F*F,A<x&&(x=A,t=P);t&&(l=[f,a],f=[f,b],b=[c,b],a=[c,a],t.halfedges.push(sb.push(le(T=t.site,l,f))-1,sb.push(le(T,
f,b))-1,sb.push(le(T,b,a))-1,sb.push(le(T,a,l))-1))}for(l=0;l<R;++l)if(P=Ib[l])P.halfedges.length||delete Ib[l]}this.edges=sb;this.cells=Ib;pd=me=sb=Ib=null}function Pf(a){return function(){return a}}function Ns(a,b,c){this.target=a;this.type=b;this.transform=c}function ic(a,b,c){this.k=a;this.x=b;this.y=c}function sm(a){return a.__zoom||Qf}function ne(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Os(){return!d3.event.button}function Ps(){var a=this;if(a instanceof SVGElement){a=
a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function tm(){return this.__zoom||Qf}function Qs(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)/500}function Rs(){return"ontouchstart"in this}function Ss(a,b,c){var f=a.invertX(b[0][0])-c[0][0],l=a.invertX(b[1][0])-c[1][0],t=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(l>f?(f+l)/2:Math.min(0,f)||Math.max(0,l),b>t?(t+b)/2:Math.min(0,
t)||Math.max(0,b))}var um=H(I),Hc=um.right,Ts=um.left,vm=Array.prototype,Us=vm.slice,Vs=vm.map,bg=Math.sqrt(50),cg=Math.sqrt(10),dg=Math.sqrt(2),eg=Array.prototype.slice,Pn={value:function(){}};Da.prototype=Ea.prototype={constructor:Da,on:function(a,b){var c=this._,f=ya(a+"",c),l,t=-1,x=f.length;if(2>arguments.length)for(;++t<x;){var A;if(A=l=(a=f[t]).type){a:{A=c[l];for(var F=0,P=A.length;F<P;++F)if((l=A[F]).name===a.name){l=l.value;break a}l=void 0}A=l}if(A)return l}else{if(null!=b&&"function"!==
typeof b)throw Error("invalid callback: "+b);for(;++t<x;)if(l=(a=f[t]).type)c[l]=Ja(c[l],a.name,b);else if(null==b)for(l in c)c[l]=Ja(c[l],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new Da(a)},call:function(a,b){if(0<(l=arguments.length-2))for(var c=Array(l),f=0,l,t;f<l;++f)c[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);t=this._[a];f=0;for(l=t.length;f<l;++f)t[f].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+
a);a=this._[a];for(var f=0,l=a.length;f<l;++f)a[f].value.apply(b,c)}};var Eb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};if("undefined"!==typeof document){var oe=document.documentElement;if(!oe.matches){var Ws=oe.webkitMatchesSelector||oe.msMatchesSelector||oe.mozMatchesSelector||oe.oMatchesSelector;se=function(a){return function(){return Ws.call(this,a)}}}}var di=
se;te.prototype={constructor:te,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};Ai.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,
1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var Ei={};d3.event=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Ei={mouseenter:"mouseover",mouseleave:"mouseout"}));var ig=[null];ub.prototype=xc.prototype={constructor:ub,select:function(a){"function"!==typeof a&&(a=pb(a));for(var b=this._groups,c=b.length,f=Array(c),l=0;l<c;++l)for(var t=b[l],x=t.length,A=f[l]=Array(x),F,P,u=0;u<x;++u)(F=t[u])&&
(P=a.call(F,F.__data__,u,t))&&("__data__"in F&&(P.__data__=F.__data__),A[u]=P);return new ub(f,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=fg(a));for(var b=this._groups,c=b.length,f=[],l=[],t=0;t<c;++t)for(var x=b[t],A=x.length,F,P=0;P<A;++P)if(F=x[P])f.push(a.call(F,F.__data__,P,x)),l.push(F);return new ub(f,l)},filter:function(a){"function"!==typeof a&&(a=di(a));for(var b=this._groups,c=b.length,f=Array(c),l=0;l<c;++l)for(var t=b[l],x=t.length,A=f[l]=[],F,P=0;P<x;++P)(F=t[P])&&
a.call(F,F.__data__,P,t)&&A.push(F);return new ub(f,this._parents)},data:function(a,b){if(!a)return Q=Array(this.size()),P=-1,this.each(function(R){Q[++P]=R}),Q;var c=b?Sn:Rn,f=this._parents,l=this._groups;"function"!==typeof a&&(a=Qn(a));for(var t=l.length,x=Array(t),A=Array(t),F=Array(t),P=0;P<t;++P){var u=f[P],z=l[P],G=z.length,Q=a.call(u,u&&u.__data__,P,f),Z=Q.length,da=A[P]=Array(Z),ka=x[P]=Array(Z);G=F[P]=Array(G);c(u,z,da,ka,G,Q,b);z=u=0;for(var qa;u<Z;++u)if(G=da[u]){for(u>=z&&(z=u+1);!(qa=
ka[z])&&++z<Z;);G._next=qa||null}}x=new ub(x,f);x._enter=A;x._exit=F;return x},enter:function(){return new ub(this._enter||this._groups.map(zi),this._parents)},exit:function(){return new ub(this._exit||this._groups.map(zi),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,f=Math.min(c,a.length),l=Array(c),t=0;t<f;++t)for(var x=b[t],A=a[t],F=x.length,P=l[t]=Array(F),u,z=0;z<F;++z)if(u=x[z]||A[z])P[z]=u;for(;t<c;++t)l[t]=b[t];return new ub(l,this._parents)},order:function(){for(var a=
this._groups,b=-1,c=a.length;++b<c;)for(var f=a[b],l=f.length-1,t=f[l],x;0<=--l;)if(x=f[l])t&&t!==x.nextSibling&&t.parentNode.insertBefore(x,t),t=x;return this},sort:function(a){function b(z,G){return z&&G?a(z.__data__,G.__data__):!z-!G}a||(a=Tn);for(var c=this._groups,f=c.length,l=Array(f),t=0;t<f;++t){for(var x=c[t],A=x.length,F=l[t]=Array(A),P,u=0;u<A;++u)if(P=x[u])F[u]=P;F.sort(b)}return(new ub(l,this._parents)).order()},call:function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);
return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var f=a[b],l=0,t=f.length;l<t;++l){var x=f[l];if(x)return x}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,f=b.length;c<f;++c)for(var l=b[c],t=0,x=l.length,A;t<x;++t)(A=l[t])&&a.call(A,A.__data__,t,l);return this},attr:function(a,
b){var c=La(a);if(2>arguments.length){var f=this.node();return c.local?f.getAttributeNS(c.space,c.local):f.getAttribute(c)}return this.each((null==b?c.local?Vn:Un:"function"===typeof b?c.local?Zn:Yn:c.local?Xn:Wn)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?$n:"function"===typeof b?bo:ao)(a,b,null==c?"":c)):wc(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?co:"function"===typeof b?fo:eo)(a,b)):this.node()[a]},classed:function(a,b){var c=
(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var f=hg(this.node()),l=-1,t=c.length;++l<t;)if(!f.contains(c[l]))return!1;return!0}return this.each(("function"===typeof b?io:b?go:ho)(c,b))},text:function(a){return arguments.length?this.each(null==a?jo:("function"===typeof a?lo:ko)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?mo:("function"===typeof a?oo:no)(a)):this.node().innerHTML},raise:function(){return this.each(po)},lower:function(){return this.each(qo)},
append:function(a){var b="function"===typeof a?a:Ma(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:Ma(a),f=null==b?ro:"function"===typeof b?b:pb(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),f.apply(this,arguments)||null)})},remove:function(){return this.each(so)},clone:function(a){return this.select(a?uo:to)},datum:function(a){return arguments.length?this.property("__data__",
a):this.node().__data__},on:function(a,b,c){var f=wo(a+""),l=f.length,t;if(2>arguments.length){var x=this.node().__on;if(x)for(var A=0,F=x.length,P;A<F;++A){var u=0;for(P=x[A];u<l;++u)if((t=f[u]).type===P.type&&t.name===P.name)return P.value}}else{x=b?yo:xo;null==c&&(c=!1);for(u=0;u<l;++u)this.each(x(f[u],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?Ao:zo)(a,b))}};var Bo=0;jg.prototype=Gi.prototype={constructor:jg,get:function(a){for(var b=this._;!(b in a);)if(!(a=
a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};lg.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var qd=1/.7,Go=/^#([0-9a-f]{3})$/,Ho=/^#([0-9a-f]{6})$/,Io=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),Jo=RegExp("^rgb\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
Ko=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Lo=RegExp("^rgba\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Mo=RegExp("^hsl\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),
No=RegExp("^hsla\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oc(lc,mc,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});Oc(qb,Pc,vd(lc,{brighter:function(a){a=
null==a?qd:Math.pow(qd,a);return new qb(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new qb(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+ng(this.r)+ng(this.g)+ng(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":
"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));Oc(Tb,ze,vd(lc,{brighter:function(a){a=null==a?qd:Math.pow(qd,a);return new Tb(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Tb(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+
(.5>c?c:1-c)*b;c=2*c-b;return new qb(og(240<=a?a-240:a+120,c,b),og(a,c,b),og(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Li=Math.PI/180,Pi=180/Math.PI,Ni=4/29,Qc=6/29,Mi=3*Qc*Qc,Po=Qc*Qc*Qc;Oc(Nb,Ae,vd(lc,{brighter:function(a){return new Nb(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new Nb(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},
rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*sg(b);a=1*sg(a);c=.82521*sg(c);return new qb(tg(3.1338561*b-1.6168667*a-.4906146*c),tg(-.9787684*b+1.9161415*a+.033454*c),tg(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));Oc(Ub,Be,vd(lc,{brighter:function(a){return new Ub(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new Ub(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return pg(this).rgb()}}));
var Qi=1.78277*-.29227-.1347134789;Oc(yc,Ob,vd(lc,{brighter:function(a){a=null==a?qd:Math.pow(qd,a);return new yc(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new yc(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Li,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),f=Math.cos(a);a=Math.sin(a);return new qb(255*(b+c*(-.14861*f+1.78277*a)),255*(b+c*(-.29227*f+-.90649*a)),255*(b+1.97294*c*f),this.opacity)}}));var xd=function c(b){function f(t,
x){var A=l((t=Pc(t)).r,(x=Pc(x)).r),F=l(t.g,x.g),P=l(t.b,x.b),u=ob(t.opacity,x.opacity);return function(z){t.r=A(z);t.g=F(z);t.b=P(z);t.opacity=u(z);return t+""}}var l=Ro(b);f.gamma=c;return f}(1),Pl=Vi(Si),Xs=Vi(Ti),vg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wg=new RegExp(vg.source,"g"),aj=180/Math.PI,ei={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},pe,fi,wm,Rf,xm=bj(function(b){if("none"===b)return ei;pe||(pe=document.createElement("DIV"),fi=document.documentElement,wm=document.defaultView);
pe.style.transform=b;b=wm.getComputedStyle(fi.appendChild(pe),null).getPropertyValue("transform");fi.removeChild(pe);b=b.slice(7,-1).split(",");return $i(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),ym=bj(function(b){if(null==b)return ei;Rf||(Rf=document.createElementNS("http://www.w3.org/2000/svg","g"));Rf.setAttribute("transform",b);if(!(b=Rf.transform.baseVal.consolidate()))return ei;b=b.matrix;return $i(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),yd=Math.SQRT2,Ys=ej(De),Zs=ej(ob),$s=
fj(De),at=fj(ob),bt=gj(De),Sf=gj(ob),Sc=0,Bd=0,Dd=0,Ge,Cd,He=0,zc=0,Ee=0,zd="object"===typeof performance&&performance.now?performance:Date,hj="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Ad.prototype=Fe.prototype={constructor:Ad,restart:function(b,c,f){if("function"!==typeof b)throw new TypeError("callback is not a function");f=(null==f?Rc():+f)+(null==c?0:+c);this._next||Cd===this||(Cd?Cd._next=this:Ge=this,Cd=this);
this._call=b;this._time=f;xg()},stop:function(){this._call&&(this._call=null,this._time=Infinity,xg())}};var Xo=Ea("start","end","interrupt"),Yo=[],ct=xc.prototype.constructor,zm=0,rd=xc.prototype;Vb.prototype=lj.prototype={constructor:Vb,select:function(b){var c=this._name,f=this._id;"function"!==typeof b&&(b=pb(b));for(var l=this._groups,t=l.length,x=Array(t),A=0;A<t;++A)for(var F=l[A],P=F.length,u=x[A]=Array(P),z,G,Q=0;Q<P;++Q)(z=F[Q])&&(G=b.call(z,z.__data__,Q,F))&&("__data__"in z&&(G.__data__=
z.__data__),u[Q]=G,Ie(u[Q],c,f,Q,u,Pb(z,f)));return new Vb(x,this._parents,c,f)},selectAll:function(b){var c=this._name,f=this._id;"function"!==typeof b&&(b=fg(b));for(var l=this._groups,t=l.length,x=[],A=[],F=0;F<t;++F)for(var P=l[F],u=P.length,z,G=0;G<u;++G)if(z=P[G]){for(var Q=b.call(z,z.__data__,G,P),Z,da=Pb(z,f),ka=0,qa=Q.length;ka<qa;++ka)(Z=Q[ka])&&Ie(Z,c,f,ka,Q,da);x.push(Q);A.push(z)}return new Vb(x,A,c,f)},filter:function(b){"function"!==typeof b&&(b=di(b));for(var c=this._groups,f=c.length,
l=Array(f),t=0;t<f;++t)for(var x=c[t],A=x.length,F=l[t]=[],P,u=0;u<A;++u)(P=x[u])&&b.call(P,P.__data__,u,x)&&F.push(P);return new Vb(l,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var f=c.length,l=Math.min(f,b.length),t=Array(f),x=0;x<l;++x)for(var A=c[x],F=b[x],P=A.length,u=t[x]=Array(P),z,G=0;G<P;++G)if(z=A[G]||F[G])u[G]=z;for(;x<f;++x)t[x]=c[x];return new Vb(t,this._parents,this._name,this._id)},selection:function(){return new ct(this._groups,
this._parents)},transition:function(){for(var b=this._name,c=this._id,f=++zm,l=this._groups,t=l.length,x=0;x<t;++x)for(var A=l[x],F=A.length,P,u=0;u<F;++u)if(P=A[u]){var z=Pb(P,c);Ie(P,b,f,u,A,{time:z.time+z.delay+z.duration,delay:0,duration:z.duration,ease:z.ease})}return new Vb(l,this._parents,b,f)},call:rd.call,nodes:rd.nodes,node:rd.node,size:rd.size,empty:rd.empty,each:rd.each,on:function(b,c){var f=this._id;return 2>arguments.length?Pb(this.node(),f).on.on(b):this.each(op(f,b,c))},attr:function(b,
c){var f=La(b),l="transform"===f?ym:kj;return this.attrTween(b,"function"===typeof c?(f.local?fp:ep)(f,l,Ag(this,"attr."+b,c)):null==c?(f.local?bp:ap)(f):(f.local?dp:cp)(f,l,c+""))},attrTween:function(b,c){var f="attr."+b;if(2>arguments.length)return(f=this.tween(f))&&f._value;if(null==c)return this.tween(f,null);if("function"!==typeof c)throw Error();var l=La(b);return this.tween(f,(l.local?gp:hp)(l,c))},style:function(b,c,f){var l="transform"===(b+="")?xm:kj;return null==c?this.styleTween(b,qp(b,
l)).on("end.style."+b,rp(b)):this.styleTween(b,"function"===typeof c?tp(b,l,Ag(this,"style."+b,c)):sp(b,l,c+""),f)},styleTween:function(b,c,f){var l="style."+(b+="");if(2>arguments.length)return(l=this.tween(l))&&l._value;if(null==c)return this.tween(l,null);if("function"!==typeof c)throw Error();return this.tween(l,up(b,c,null==f?"":f))},text:function(b){return this.tween("text","function"===typeof b?wp(Ag(this,"text",b)):vp(null==b?"":b+""))},remove:function(){return this.on("end.remove",pp(this._id))},
tween:function(b,c){var f=this._id;b+="";if(2>arguments.length){f=Pb(this.node(),f).tween;for(var l=0,t=f.length,x;l<t;++l)if((x=f[l]).name===b)return x.value;return null}return this.each((null==c?Zo:$o)(f,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?ip:jp)(c,b)):Pb(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?kp:lp)(c,b)):Pb(this.node(),c).duration},ease:function(b){var c=this._id;
return arguments.length?this.each(mp(c,b)):Pb(this.node(),c).ease}};var dt=function f(c){function l(t){return Math.pow(t,c)}c=+c;l.exponent=f;return l}(3),et=function l(f){function t(x){return 1-Math.pow(1-x,f)}f=+f;t.exponent=l;return t}(3),Am=function t(l){function x(A){return(1>=(A*=2)?Math.pow(A,l):2-Math.pow(2-A,l))/2}l=+l;x.exponent=t;return x}(3),oj=Math.PI,Bm=oj/2,Cg=4/11,yp=6/11,xp=8/11,Ap=9/11,zp=10/11,Bp=21/22,Je=1/Cg/Cg,ft=function x(t){function A(F){return F*F*((t+1)*F-t)}t=+t;A.overshoot=
x;return A}(1.70158),gt=function A(x){function F(P){return--P*P*((x+1)*P+x)+1}x=+x;F.overshoot=A;return F}(1.70158),Cm=function F(A){function P(u){return(1>(u*=2)?u*u*((A+1)*u-A):(u-=2)*u*((A+1)*u+A)+2)/2}A=+A;P.overshoot=F;return P}(1.70158),sd=2*Math.PI,ht=function u(F,P){function z(Q){return F*Math.pow(2,10*--Q)*Math.sin((G-Q)/P)}var G=Math.asin(1/(F=Math.max(1,F)))*(P/=sd);z.amplitude=function(Q){return u(Q,P*sd)};z.period=function(Q){return u(F,Q)};return z}(1,.3),Dm=function z(P,u){function G(Z){return 1-
P*Math.pow(2,-10*(Z=+Z))*Math.sin((Z+Q)/u)}var Q=Math.asin(1/(P=Math.max(1,P)))*(u/=sd);G.amplitude=function(Z){return z(Z,u*sd)};G.period=function(Z){return z(P,Z)};return G}(1,.3),it=function G(u,z){function Q(da){return(0>(da=2*da-1)?u*Math.pow(2,10*da)*Math.sin((Z-da)/z):2-u*Math.pow(2,-10*da)*Math.sin((Z+da)/z))/2}var Z=Math.asin(1/(u=Math.max(1,u)))*(z/=sd);Q.amplitude=function(da){return G(da,z*sd)};Q.period=function(da){return G(u,da)};return Q}(1,.3),gi={time:null,delay:0,duration:250,ease:Bg};
xc.prototype.interrupt=function(u){return this.each(function(){Bc(this,u)})};xc.prototype.transition=function(u){var z;if(u instanceof Vb){var G=u._id;u=u._name}else G=++zm,(z=gi).time=Rc(),u=null==u?null:u+"";for(var Q=this._groups,Z=Q.length,da=0;da<Z;++da)for(var ka=Q[da],qa=ka.length,R,T=0;T<qa;++T)if(R=ka[T]){var ja=R,ra=u,xa=G,oa=T,ua=ka,m;if(!(m=z))a:{m=void 0;for(var E=G;!(m=R.__transition)||!(m=m[E]);)if(!(R=R.parentNode)){m=(gi.time=Rc(),gi);break a}}Ie(ja,ra,xa,oa,ua,m)}return new Vb(Q,
this._parents,u,G)};var jt=[null],sj={name:"drag"},Gg={name:"space"},Tc={name:"handle"},Uc={name:"center"},Me={name:"x",handles:["e","w"].map(Fd),input:function(u,z){return u&&[[u[0],z[0][1]],[u[1],z[1][1]]]},output:function(u){return u&&[u[0][0],u[1][0]]}},Le={name:"y",handles:["n","s"].map(Fd),input:function(u,z){return u&&[[z[0][0],u[0]],[z[1][0],u[1]]]},output:function(u){return u&&[u[0][1],u[1][1]]}},kt={name:"xy",handles:"n e s w nw ne se sw".split(" ").map(Fd),input:function(u){return u},output:function(u){return u}},
ac={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tj={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},uj={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fp={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Gp={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Em=Math.cos,Fm=Math.sin,Gm=Math.PI,Tf=Gm/2,Hm=2*Gm,Im=Math.max,lt=Array.prototype.slice,hi=Math.PI,
ii=2*hi,mt=ii-1E-6;Ig.prototype=nc.prototype={constructor:Ig,moveTo:function(u,z){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+z)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(u,z){this._+="L"+(this._x1=+u)+","+(this._y1=+z)},quadraticCurveTo:function(u,z,G,Q){this._+="Q"+ +u+","+ +z+","+(this._x1=+G)+","+(this._y1=+Q)},bezierCurveTo:function(u,z,G,Q,Z,da){this._+="C"+ +u+","+ +z+","+ +G+","+ +Q+","+(this._x1=+Z)+","+(this._y1=
+da)},arcTo:function(u,z,G,Q,Z){u=+u;z=+z;G=+G;Q=+Q;Z=+Z;var da=this._x1,ka=this._y1,qa=G-u,R=Q-z,T=da-u,ja=ka-z,ra=T*T+ja*ja;if(0>Z)throw Error("negative radius: "+Z);if(null===this._x1)this._+="M"+(this._x1=u)+","+(this._y1=z);else if(1E-6<ra)if(1E-6<Math.abs(ja*qa-R*T)&&Z){G-=da;Q-=ka;var xa=qa*qa+R*R;ka=Math.sqrt(xa);da=Math.sqrt(ra);ra=Z*Math.tan((hi-Math.acos((xa+ra-(G*G+Q*Q))/(2*ka*da)))/2);da=ra/da;ra/=ka;1E-6<Math.abs(da-1)&&(this._+="L"+(u+da*T)+","+(z+da*ja));this._+="A"+Z+","+Z+",0,0,"+
+(ja*G>T*Q)+","+(this._x1=u+ra*qa)+","+(this._y1=z+ra*R)}else this._+="L"+(this._x1=u)+","+(this._y1=z)},arc:function(u,z,G,Q,Z,da){u=+u;z=+z;G=+G;var ka=G*Math.cos(Q),qa=G*Math.sin(Q),R=u+ka,T=z+qa,ja=1^da;Q=da?Q-Z:Z-Q;if(0>G)throw Error("negative radius: "+G);if(null===this._x1)this._+="M"+R+","+T;else if(1E-6<Math.abs(this._x1-R)||1E-6<Math.abs(this._y1-T))this._+="L"+R+","+T;G&&(0>Q&&(Q=Q%ii+ii),Q>mt?this._+="A"+G+","+G+",0,1,"+ja+","+(u-ka)+","+(z-qa)+"A"+G+","+G+",0,1,"+ja+","+(this._x1=R)+
","+(this._y1=T):1E-6<Q&&(this._+="A"+G+","+G+",0,"+ +(Q>=hi)+","+ja+","+(this._x1=u+G*Math.cos(Z))+","+(this._y1=z+G*Math.sin(Z))))},rect:function(u,z,G,Q){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+z)+"h"+ +G+"v"+ +Q+"h"+-G+"Z"},toString:function(){return this._}};Ne.prototype=bc.prototype={constructor:Ne,has:function(u){return" "+u in this},get:function(u){return this[" "+u]},set:function(u,z){this[" "+u]=z;return this},remove:function(u){u=" "+u;return u in this&&delete this[u]},
clear:function(){for(var u in this)" "===u[0]&&delete this[u]},keys:function(){var u=[],z;for(z in this)" "===z[0]&&u.push(z.slice(1));return u},values:function(){var u=[],z;for(z in this)" "===z[0]&&u.push(this[z]);return u},entries:function(){var u=[],z;for(z in this)" "===z[0]&&u.push({key:z.slice(1),value:this[z]});return u},size:function(){var u=0,z;for(z in this)" "===z[0]&&++u;return u},empty:function(){for(var u in this)if(" "===u[0])return!1;return!0},each:function(u){for(var z in this)" "===
z[0]&&u(this[z],z.slice(1),this)}};var Kc=bc.prototype;Oe.prototype=xj.prototype={constructor:Oe,has:Kc.has,add:function(u){u+="";this[" "+u]=u;return this},remove:Kc.remove,clear:Kc.clear,values:Kc.keys,size:Kc.size,empty:Kc.empty,each:Kc.each};var zj=Array.prototype.slice,cc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],
[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Bj={},Lg={},Uf=Pe(","),Jm=Uf.parse,nt=Uf.parseRows,ot=Uf.format,pt=Uf.formatRows,Vf=Pe("\t"),Km=Vf.parse,qt=Vf.parseRows,rt=Vf.format,st=Vf.formatRows,tt=Cj(Jm),ut=Cj(Km),Bb=Qe.prototype=Ng.prototype;Bb.copy=function(){var u=new Ng(this._x,this._y,this._x0,this._y0,this._x1,this._y1),z=this._root,G,Q;if(!z)return u;if(!z.length)return u._root=Ej(z),u;for(G=[{source:z,target:u._root=Array(4)}];z=G.pop();)for(var Z=0;4>
Z;++Z)if(Q=z.source[Z])Q.length?G.push({source:Q,target:z.target[Z]=Array(4)}):z.target[Z]=Ej(Q);return u};Bb.add=function(u){var z=+this._x.call(null,u),G=+this._y.call(null,u);return Dj(this.cover(z,G),z,G,u)};Bb.addAll=function(u){var z,G,Q=u.length,Z,da,ka=Array(Q),qa=Array(Q),R=Infinity,T=Infinity,ja=-Infinity,ra=-Infinity;for(G=0;G<Q;++G)isNaN(Z=+this._x.call(null,z=u[G]))||isNaN(da=+this._y.call(null,z))||(ka[G]=Z,qa[G]=da,Z<R&&(R=Z),Z>ja&&(ja=Z),da<T&&(T=da),da>ra&&(ra=da));ja<R&&(R=this._x0,
ja=this._x1);ra<T&&(T=this._y0,ra=this._y1);this.cover(R,T).cover(ja,ra);for(G=0;G<Q;++G)Dj(this,ka[G],qa[G],u[G]);return this};Bb.cover=function(u,z){if(isNaN(u=+u)||isNaN(z=+z))return this;var G=this._x0,Q=this._y0,Z=this._x1,da=this._y1;if(isNaN(G))Z=(G=Math.floor(u))+1,da=(Q=Math.floor(z))+1;else if(G>u||u>Z||Q>z||z>da){var ka=Z-G,qa=this._root,R;switch(R=(z<(Q+da)/2)<<1|u<(G+Z)/2){case 0:do{var T=Array(4);T[R]=qa;qa=T}while(ka*=2,Z=G+ka,da=Q+ka,u>Z||z>da);break;case 1:do T=Array(4),T[R]=qa,qa=
T;while(ka*=2,G=Z-ka,da=Q+ka,G>u||z>da);break;case 2:do T=Array(4),T[R]=qa,qa=T;while(ka*=2,Z=G+ka,Q=da-ka,u>Z||Q>z);break;case 3:do T=Array(4),T[R]=qa,qa=T;while(ka*=2,G=Z-ka,Q=da-ka,G>u||Q>z)}this._root&&this._root.length&&(this._root=qa)}else return this;this._x0=G;this._y0=Q;this._x1=Z;this._y1=da;return this};Bb.data=function(){var u=[];this.visit(function(z){if(!z.length){do u.push(z.data);while(z=z.next)}});return u};Bb.extent=function(u){return arguments.length?this.cover(+u[0][0],+u[0][1]).cover(+u[1][0],
+u[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Bb.find=function(u,z,G){var Q=this._x0,Z=this._y0,da,ka,qa,R,T=this._x1,ja=this._y1,ra=[],xa=this._root,oa;xa&&ra.push(new vb(xa,Q,Z,T,ja));null==G?G=Infinity:(Q=u-G,Z=z-G,T=u+G,ja=z+G,G*=G);for(;oa=ra.pop();)if(!(!(xa=oa.node)||(da=oa.x0)>T||(ka=oa.y0)>ja||(qa=oa.x1)<Q||(R=oa.y1)<Z))if(xa.length){oa=(da+qa)/2;var ua=(ka+R)/2;ra.push(new vb(xa[3],oa,ua,qa,R),new vb(xa[2],da,ua,oa,R),new vb(xa[1],oa,ka,qa,ua),new vb(xa[0],
da,ka,oa,ua));if(xa=(z>=ua)<<1|u>=oa)oa=ra[ra.length-1],ra[ra.length-1]=ra[ra.length-1-xa],ra[ra.length-1-xa]=oa}else if(oa=u-+this._x.call(null,xa.data),ua=z-+this._y.call(null,xa.data),oa=oa*oa+ua*ua,oa<G){var m=Math.sqrt(G=oa);Q=u-m;Z=z-m;T=u+m;ja=z+m;m=xa.data}return m};Bb.remove=function(u){if(isNaN(R=+this._x.call(null,u))||isNaN(T=+this._y.call(null,u)))return this;var z,G=this._root,Q,Z=this._x0,da=this._y0,ka=this._x1,qa=this._y1,R,T,ja,ra,xa,oa,ua;if(!G)return this;if(G.length)for(;;){(xa=
R>=(ja=(Z+ka)/2))?Z=ja:ka=ja;(oa=T>=(ra=(da+qa)/2))?da=ra:qa=ra;if(!(z=G,G=G[ua=oa<<1|xa]))return this;if(!G.length)break;if(z[ua+1&3]||z[ua+2&3]||z[ua+3&3]){var m=z;var E=ua}}for(;G.data!==u;)if(!(Q=G,G=G.next))return this;(u=G.next)&&delete G.next;if(Q)return u?Q.next=u:delete Q.next,this;if(!z)return this._root=u,this;u?z[ua]=u:delete z[ua];(G=z[0]||z[1]||z[2]||z[3])&&G===(z[3]||z[2]||z[1]||z[0])&&!G.length&&(m?m[E]=G:this._root=G);return this};Bb.removeAll=function(u){for(var z=0,G=u.length;z<
G;++z)this.remove(u[z]);return this};Bb.root=function(){return this._root};Bb.size=function(){var u=0;this.visit(function(z){if(!z.length){do++u;while(z=z.next)}});return u};Bb.visit=function(u){var z=[],G,Q=this._root,Z,da,ka,qa,R;for(Q&&z.push(new vb(Q,this._x0,this._y0,this._x1,this._y1));G=z.pop();)if(!u(Q=G.node,da=G.x0,ka=G.y0,qa=G.x1,R=G.y1)&&Q.length){G=(da+qa)/2;var T=(ka+R)/2;(Z=Q[3])&&z.push(new vb(Z,G,T,qa,R));(Z=Q[2])&&z.push(new vb(Z,da,T,G,R));(Z=Q[1])&&z.push(new vb(Z,G,ka,qa,T));
(Z=Q[0])&&z.push(new vb(Z,da,ka,G,T))}return this};Bb.visitAfter=function(u){var z=[],G=[],Q;for(this._root&&z.push(new vb(this._root,this._x0,this._y0,this._x1,this._y1));Q=z.pop();){var Z=Q.node;if(Z.length){var da,ka=Q.x0,qa=Q.y0,R=Q.x1,T=Q.y1,ja=(ka+R)/2,ra=(qa+T)/2;(da=Z[0])&&z.push(new vb(da,ka,qa,ja,ra));(da=Z[1])&&z.push(new vb(da,ja,qa,R,ra));(da=Z[2])&&z.push(new vb(da,ka,ra,ja,T));(da=Z[3])&&z.push(new vb(da,ja,ra,R,T))}G.push(Q)}for(;Q=G.pop();)u(Q.node,Q.x0,Q.y0,Q.x1,Q.y1);return this};
Bb.x=function(u){return arguments.length?(this._x=u,this):this._x};Bb.y=function(u){return arguments.length?(this._y=u,this):this._y};var vt=Math.PI*(3-Math.sqrt(5)),iq=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Gd.prototype=Og.prototype;Og.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?
"~":"")+this.type};var Kj,Lj={"%":function(u,z){return(100*u).toFixed(z)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.round(u).toString(10)},e:function(u,z){return u.toExponential(z)},f:function(u,z){return u.toFixed(z)},g:function(u,z){return u.toPrecision(z)},o:function(u){return Math.round(u).toString(8)},p:function(u,z){return Gj(100*u,z)},r:Gj,s:function(u,z){var G=Re(u,z);if(!G)return u+"";var Q=G[0];G=G[1];G=G-(Kj=3*Math.max(-8,Math.min(8,
Math.floor(G/3))))+1;var Z=Q.length;return G===Z?Q:G>Z?Q+Array(G-Z+1).join("0"):0<G?Q.slice(0,G)+"."+Q.slice(G):"0."+Array(1-G).join("0")+Re(u,Math.max(0,z+G-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}},Jj="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),Se;Mj({decimal:".",thousands:",",grouping:[3],currency:["$",""]});Qb.prototype={constructor:Qb,reset:function(){this.s=this.t=0},add:function(u){Qj(Wf,u,this.t);Qj(this,
Wf.s,this.s);this.s?this.t+=Wf.t:this.s=Wf.t},valueOf:function(){return this.s}};var Wf=new Qb,Ya=Math.PI,gb=Ya/2,Ue=Ya/4,Db=2*Ya,eb=180/Ya,Sa=Ya/180,ab=Math.abs,dd=Math.atan,xb=Math.atan2,Ka=Math.cos,nf=Math.ceil,Lm=Math.exp,sf=Math.log,uh=Math.pow,Ia=Math.sin,Qd=Math.sign||function(u){return 0<u?1:0>u?-1:0},lb=Math.sqrt,cd=Math.tan,Vj={Feature:function(u,z){Te(u.geometry,z)},FeatureCollection:function(u,z){u=u.features;for(var G=-1,Q=u.length;++G<Q;)Te(u[G].geometry,z)}},Tj={Sphere:function(u,z){z.sphere()},
Point:function(u,z){u=u.coordinates;z.point(u[0],u[1],u[2])},MultiPoint:function(u,z){for(var G=u.coordinates,Q=-1,Z=G.length;++Q<Z;)u=G[Q],z.point(u[0],u[1],u[2])},LineString:function(u,z){Pg(u.coordinates,z,0)},MultiLineString:function(u,z){u=u.coordinates;for(var G=-1,Q=u.length;++G<Q;)Pg(u[G],z,0)},Polygon:function(u,z){Uj(u.coordinates,z)},MultiPolygon:function(u,z){u=u.coordinates;for(var G=-1,Q=u.length;++G<Q;)Uj(u[G],z)},GeometryCollection:function(u,z){u=u.geometries;for(var G=-1,Q=u.length;++G<
Q;)Te(u[G],z)}},Ve=new Qb,Xf=new Qb,Xj,Yj,Qg,Rg,Sg,Wb={point:hb,lineStart:hb,lineEnd:hb,polygonStart:function(){Ve.reset();Wb.lineStart=jq;Wb.lineEnd=lq},polygonEnd:function(){var u=+Ve;Xf.add(0>u?Db+u:u);this.lineStart=this.lineEnd=this.point=hb},sphere:function(){Xf.add(Db)}},jb,Gb,kb,Jb,Dc,dk,ek,Xc,Hd=new Qb,qc,dc,ec={point:Ug,lineStart:ak,lineEnd:bk,polygonStart:function(){ec.point=ck;ec.lineStart=mq;ec.lineEnd=nq;Hd.reset();Wb.polygonStart()},polygonEnd:function(){Wb.polygonEnd();ec.point=Ug;
ec.lineStart=ak;ec.lineEnd=bk;0>Ve?(jb=-(kb=180),Gb=-(Jb=90)):1E-6<Hd?Jb=90:-1E-6>Hd&&(Gb=-90);dc[0]=jb;dc[1]=kb}},Jd,cf,$e,af,bf,df,ef,ff,Wg,Xg,Yg,jk,kk,yb,zb,Ab,Sb={sphere:hb,point:Vg,lineStart:gk,lineEnd:hk,polygonStart:function(){Sb.lineStart=rq;Sb.lineEnd=tq},polygonEnd:function(){Sb.lineStart=gk;Sb.lineEnd=hk}};$g.invert=$g;var bh=new Qb,sh=vk(function(){return!0},function(u){var z=NaN,G=NaN,Q=NaN,Z;return{lineStart:function(){u.lineStart();Z=1},point:function(da,ka){var qa=0<da?Ya:-Ya,R=ab(da-
z);if(1E-6>ab(R-Ya))u.point(z,G=0<(G+ka)/2?gb:-gb),u.point(Q,G),u.lineEnd(),u.lineStart(),u.point(qa,G),u.point(da,G),Z=0;else if(Q!==qa&&R>=Ya){1E-6>ab(z-Q)&&(z-=1E-6*Q);1E-6>ab(da-qa)&&(da-=1E-6*qa);R=z;var T=G,ja=da,ra,xa,oa=Ia(R-ja);G=1E-6<ab(oa)?dd((Ia(T)*(xa=Ka(ka))*Ia(ja)-Ia(ka)*(ra=Ka(T))*Ia(R))/(ra*xa*oa)):(T+ka)/2;u.point(Q,G);u.lineEnd();u.lineStart();u.point(qa,G);Z=0}u.point(z=da,G=ka);Q=qa},lineEnd:function(){u.lineEnd();z=G=NaN},clean:function(){return 2-Z}}},function(u,z,G,Q){null==
u?(G*=gb,Q.point(-Ya,G),Q.point(0,G),Q.point(Ya,G),Q.point(Ya,0),Q.point(Ya,-G),Q.point(0,-G),Q.point(-Ya,-G),Q.point(-Ya,0),Q.point(-Ya,G)):1E-6<ab(u[0]-z[0])?(u=u[0]<z[0]?Ya:-Ya,G=G*u/2,Q.point(-u,G),Q.point(0,G),Q.point(u,G)):Q.point(z[0],z[1])},[-Ya,-gb]),dh=new Qb,ch,kf,lf,Zc={sphere:hb,point:hb,lineStart:function(){Zc.point=yq;Zc.lineEnd=xq},lineEnd:hb,polygonStart:hb,polygonEnd:hb},eh=[null,null],Aq={type:"LineString",coordinates:eh},Mm={Feature:function(u,z){return mf(u.geometry,z)},FeatureCollection:function(u,
z){u=u.features;for(var G=-1,Q=u.length;++G<Q;)if(mf(u[G].geometry,z))return!0;return!1}},yk={Sphere:function(){return!0},Point:function(u,z){return 0===$c(u.coordinates,z)},MultiPoint:function(u,z){u=u.coordinates;for(var G=-1,Q=u.length;++G<Q;)if(0===$c(u[G],z))return!0;return!1},LineString:function(u,z){return zk(u.coordinates,z)},MultiLineString:function(u,z){u=u.coordinates;for(var G=-1,Q=u.length;++G<Q;)if(zk(u[G],z))return!0;return!1},Polygon:function(u,z){return Ak(u.coordinates,z)},MultiPolygon:function(u,
z){u=u.coordinates;for(var G=-1,Q=u.length;++G<Q;)if(Ak(u[G],z))return!0;return!1},GeometryCollection:function(u,z){u=u.geometries;for(var G=-1,Q=u.length;++G<Q;)if(mf(u[G],z))return!0;return!1}},ji=new Qb,hh=new Qb,Gk,Hk,fh,gh,fc={point:hb,lineStart:hb,lineEnd:hb,polygonStart:function(){fc.lineStart=Cq;fc.lineEnd=Eq},polygonEnd:function(){fc.lineStart=fc.lineEnd=fc.point=hb;ji.add(ab(hh));hh.reset()},result:function(){var u=ji/2;ji.reset();return u}},td=Infinity,Yf=td,qe=-td,Zf=qe,qf={point:function(u,
z){u<td&&(td=u);u>qe&&(qe=u);z<Yf&&(Yf=z);z>Zf&&(Zf=z)},lineStart:hb,lineEnd:hb,polygonStart:hb,polygonEnd:hb,result:function(){var u=[[td,Yf],[qe,Zf]];qe=Zf=-(Yf=td=Infinity);return u}},ih=0,jh=0,Kd=0,of=0,pf=0,ad=0,kh=0,lh=0,Ld=0,Lk,Mk,Xb,Yb,Kb={point:Fc,lineStart:Ik,lineEnd:Jk,polygonStart:function(){Kb.lineStart=Hq;Kb.lineEnd=Jq},polygonEnd:function(){Kb.point=Fc;Kb.lineStart=Ik;Kb.lineEnd=Jk},result:function(){var u=Ld?[kh/Ld,lh/Ld]:ad?[of/ad,pf/ad]:Kd?[ih/Kd,jh/Kd]:[NaN,NaN];ih=jh=Kd=of=pf=
ad=kh=lh=Ld=0;return u}};Nk.prototype={_radius:4.5,pointRadius:function(u){return this._radius=u,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(u,z){switch(this._point){case 0:this._context.moveTo(u,z);this._point=1;break;case 1:this._context.lineTo(u,z);break;default:this._context.moveTo(u+this._radius,z),this._context.arc(u,z,this._radius,
0,Db)}},result:hb};var mh=new Qb,ki,Pk,Qk,Nd,Od,Md={point:hb,lineStart:function(){Md.point=Kq},lineEnd:function(){ki&&Ok(Pk,Qk);Md.point=hb},polygonStart:function(){ki=!0},polygonEnd:function(){ki=null},result:function(){var u=+mh;mh.reset();return u}};Rk.prototype={_radius:4.5,_circle:Sk(4.5),pointRadius:function(u){(u=+u)!==this._radius&&(this._radius=u,this._circle=null);return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},
lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(u,z){switch(this._point){case 0:this._string.push("M",u,",",z);this._point=1;break;case 1:this._string.push("L",u,",",z);break;default:null==this._circle&&(this._circle=Sk(this._radius)),this._string.push("M",u,",",z,this._circle)}},result:function(){if(this._string.length){var u=this._string.join("");this._string=[];return u}return null}};nh.prototype={constructor:nh,point:function(u,z){this.stream.point(u,
z)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Lq=Ka(30*Sa),Oq=Pd({point:function(u,z){this.stream.point(u*Sa,z*Sa)}}),li=Yk(function(u){return lb(2/(1+u))});li.invert=Rd(function(u){return 2*wb(u/2)});var mi=Yk(function(u){return(u=Rj(u))&&u/Ia(u)});mi.invert=Rd(function(u){return u});Sd.invert=function(u,z){return[u,
2*dd(Lm(z))-gb]};Td.invert=Td;var tf=lb(3)/2;vh.invert=function(u,z){for(var G=z,Q=G*G,Z=Q*Q*Q,da=0,ka;12>da&&!(ka=G*(1.340264+-.081106*Q+Z*(8.93E-4+.003796*Q))-z,Q=1.340264+3*-.081106*Q+Z*(7*8.93E-4+.034164*Q),G-=ka/=Q,Q=G*G,Z=Q*Q*Q,1E-12>ab(ka));++da);return[tf*u*(1.340264+3*-.081106*Q+Z*(7*8.93E-4+.034164*Q))/Ka(G),wb(Ia(G)/tf)]};wh.invert=Rd(dd);xh.invert=function(u,z){var G=z,Q=25;do{var Z=G*G;var da=Z*Z;G-=da=(G*(1.007226+Z*(.015085+da*(-.044475+.028874*Z-.005916*da)))-z)/(1.007226+Z*(.045255+
da*(-.311325+.259866*Z-.005916*11*da)))}while(1E-6<ab(da)&&0<--Q);return[u/(.8707+(Z=G*G)*(-.131979+Z*(-.013791+Z*Z*Z*(.003971-.001529*Z)))),G]};yh.invert=Rd(wb);zh.invert=Rd(function(u){return 2*dd(u)});Ah.invert=function(u,z){return[-z,2*dd(Lm(u))-gb]};ed.prototype=Bh.prototype={constructor:ed,count:function(){return this.eachAfter(Wq)},each:function(u){var z,G=[this],Q;do{var Z=G.reverse();for(G=[];z=Z.pop();)if(u(z),z=z.children){var da=0;for(Q=z.length;da<Q;++da)G.push(z[da])}}while(G.length);
return this},eachAfter:function(u){for(var z,G=[this],Q=[],Z,da;z=G.pop();)if(Q.push(z),z=z.children)for(Z=0,da=z.length;Z<da;++Z)G.push(z[Z]);for(;z=Q.pop();)u(z);return this},eachBefore:function(u){for(var z,G=[this],Q;z=G.pop();)if(u(z),z=z.children)for(Q=z.length-1;0<=Q;--Q)G.push(z[Q]);return this},sum:function(u){return this.eachAfter(function(z){for(var G=+u(z.data)||0,Q=z.children,Z=Q&&Q.length;0<=--Z;)G+=Q[Z].value;z.value=G})},sort:function(u){return this.eachBefore(function(z){z.children&&
z.children.sort(u)})},path:function(u){var z=this;var G=z;var Q=u;if(G!==Q){var Z=G.ancestors(),da=Q.ancestors(),ka=null;G=Z.pop();for(Q=da.pop();G===Q;)ka=G,G=Z.pop(),Q=da.pop();G=ka}for(Q=[z];z!==G;)z=z.parent,Q.push(z);for(z=Q.length;u!==G;)Q.splice(z,0,u),u=u.parent;return Q},ancestors:function(){for(var u=this,z=[u];u=u.parent;)z.push(u);return z},descendants:function(){var u=[];this.each(function(z){u.push(z)});return u},leaves:function(){var u=[];this.eachBefore(function(z){z.children||u.push(z)});
return u},links:function(){var u=this,z=[];u.each(function(G){G!==u&&z.push({source:G.parent,target:G})});return z},copy:function(){return Bh(this).eachBefore(Yq)}};var Zq=Array.prototype.slice,wt={depth:-1},Nm={};yf.prototype=Object.create(ed.prototype);var Om=(1+Math.sqrt(5))/2,Pm=function G(z){function Q(Z,da,ka,qa,R){ml(z,Z,da,ka,qa,R)}Q.ratio=function(Z){return G(1<(Z=+Z)?Z:1)};return Q}(Om),xt=function Q(G){function Z(da,ka,qa,R,T){if((ja=da._squarify)&&ja.ratio===G)for(var ja,ra,xa,oa=-1,ua,
m=ja.length,E=da.value;++oa<m;){da=ja[oa];ra=da.children;xa=da.value=0;for(ua=ra.length;xa<ua;++xa)da.value+=ra[xa].value;da.dice?Vd(da,ka,qa,R,qa+=(T-qa)*da.value/E):zf(da,ka,qa,ka+=(R-ka)*da.value/E,T);E-=da.value}else da._squarify=ja=ml(G,da,ka,qa,R,T),ja.ratio=G}Z.ratio=function(da){return Q(1<(da=+da)?da:1)};return Z}(Om),yt=function Z(Q){function da(ka,qa){ka=null==ka?0:+ka;qa=null==qa?1:+qa;1===arguments.length?(qa=ka,ka=0):qa-=ka;return function(){return Q()*qa+ka}}da.source=Z;return da}(gd),
Qm=function da(Z){function ka(qa,R){var T,ja;qa=null==qa?0:+qa;R=null==R?1:+R;return function(){if(null!=T){var ra=T;T=null}else{do T=2*Z()-1,ra=2*Z()-1,ja=T*T+ra*ra;while(!ja||1<ja)}return qa+R*ra*Math.sqrt(-2*Math.log(ja)/ja)}}ka.source=da;return ka}(gd),zt=function ka(da){function qa(){var R=Qm.source(da).apply(this,arguments);return function(){return Math.exp(R())}}qa.source=ka;return qa}(gd),Rm=function qa(ka){function R(T){return function(){for(var ja=0,ra=0;ra<T;++ra)ja+=ka();return ja}}R.source=
qa;return R}(gd),At=function R(qa){function T(ja){var ra=Rm.source(qa)(ja);return function(){return ra()/ja}}T.source=R;return T}(gd),Bt=function T(R){function ja(ra){return function(){return-Math.log(1-R())/ra}}ja.source=T;return ja}(gd),Sm=Array.prototype,Lh=Sm.map,rc=Sm.slice,Hh={name:"implicit"},ql=[0,1],Nh=new Date,Oh=new Date,Lc=nb(function(){},function(R,T){R.setTime(+R+T)},function(R,T){return T-R});Lc.every=function(R){R=Math.floor(R);return isFinite(R)&&0<R?1<R?nb(function(T){T.setTime(Math.floor(T/
R)*R)},function(T,ja){T.setTime(+T+ja*R)},function(T,ja){return(ja-T)/R}):Lc:null};var Tm=Lc.range,re=nb(function(R){R.setTime(1E3*Math.floor(R/1E3))},function(R,T){R.setTime(+R+1E3*T)},function(R,T){return(T-R)/1E3},function(R){return R.getUTCSeconds()}),Um=re.range,ni=nb(function(R){R.setTime(6E4*Math.floor(R/6E4))},function(R,T){R.setTime(+R+6E4*T)},function(R,T){return(T-R)/6E4},function(R){return R.getMinutes()}),Ct=ni.range,oi=nb(function(R){var T=6E4*R.getTimezoneOffset()%36E5;0>T&&(T+=36E5);
R.setTime(36E5*Math.floor((+R-T)/36E5)+T)},function(R,T){R.setTime(+R+36E5*T)},function(R,T){return(T-R)/36E5},function(R){return R.getHours()}),Dt=oi.range,$d=nb(function(R){R.setHours(0,0,0,0)},function(R,T){R.setDate(R.getDate()+T)},function(R,T){return(T-R-6E4*(T.getTimezoneOffset()-R.getTimezoneOffset()))/864E5},function(R){return R.getDate()-1}),Et=$d.range,ce=Ic(0),Zd=Ic(1),Vm=Ic(2),Wm=Ic(3),de=Ic(4),Xm=Ic(5),Ym=Ic(6),Zm=ce.range,Ft=Zd.range,Gt=Vm.range,Ht=Wm.range,It=de.range,Jt=Xm.range,
Kt=Ym.range,pi=nb(function(R){R.setDate(1);R.setHours(0,0,0,0)},function(R,T){R.setMonth(R.getMonth()+T)},function(R,T){return T.getMonth()-R.getMonth()+12*(T.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),Lt=pi.range,gc=nb(function(R){R.setMonth(0,1);R.setHours(0,0,0,0)},function(R,T){R.setFullYear(R.getFullYear()+T)},function(R,T){return T.getFullYear()-R.getFullYear()},function(R){return R.getFullYear()});gc.every=function(R){return isFinite(R=Math.floor(R))&&0<R?nb(function(T){T.setFullYear(Math.floor(T.getFullYear()/
R)*R);T.setMonth(0,1);T.setHours(0,0,0,0)},function(T,ja){T.setFullYear(T.getFullYear()+ja*R)}):null};var Mt=gc.range,qi=nb(function(R){R.setUTCSeconds(0,0)},function(R,T){R.setTime(+R+6E4*T)},function(R,T){return(T-R)/6E4},function(R){return R.getUTCMinutes()}),Nt=qi.range,ri=nb(function(R){R.setUTCMinutes(0,0,0)},function(R,T){R.setTime(+R+36E5*T)},function(R,T){return(T-R)/36E5},function(R){return R.getUTCHours()}),Ot=ri.range,Yd=nb(function(R){R.setUTCHours(0,0,0,0)},function(R,T){R.setUTCDate(R.getUTCDate()+
T)},function(R,T){return(T-R)/864E5},function(R){return R.getUTCDate()-1}),Pt=Yd.range,ee=Jc(0),Xd=Jc(1),$m=Jc(2),an=Jc(3),fe=Jc(4),bn=Jc(5),cn=Jc(6),dn=ee.range,Qt=Xd.range,Rt=$m.range,St=an.range,Tt=fe.range,Ut=bn.range,Vt=cn.range,si=nb(function(R){R.setUTCDate(1);R.setUTCHours(0,0,0,0)},function(R,T){R.setUTCMonth(R.getUTCMonth()+T)},function(R,T){return T.getUTCMonth()-R.getUTCMonth()+12*(T.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),Wt=si.range,hc=nb(function(R){R.setUTCMonth(0,
1);R.setUTCHours(0,0,0,0)},function(R,T){R.setUTCFullYear(R.getUTCFullYear()+T)},function(R,T){return T.getUTCFullYear()-R.getUTCFullYear()},function(R){return R.getUTCFullYear()});hc.every=function(R){return isFinite(R=Math.floor(R))&&0<R?nb(function(T){T.setUTCFullYear(Math.floor(T.getUTCFullYear()/R)*R);T.setUTCMonth(0,1);T.setUTCHours(0,0,0,0)},function(T,ja){T.setUTCFullYear(T.getUTCFullYear()+ja*R)}):null};var Xt=hc.range,Cl={"-":"",_:" ",0:"0"},rb=/^\s*\d+/,ks=/^%/,js=/[\\^$*+?|[\]().{}]/g,
jd;Ml({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Yt=Date.prototype.toISOString?ls:d3.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Zt=+new Date("2000-01-01T00:00:00.000Z")?
ms:d3.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),$t=Ua("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),au=Ua("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),bu=Ua("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),cu=Ua("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),du=
Ua("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),eu=Ua("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fu=Ua("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),gu=Ua("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),hu=Ua("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),iu=Ua("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ju=Ua("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ku=Ua("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),
en=Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ua),lu=db(en),fn=Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837",
"7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ua),mu=db(fn),gn=Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221",
"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ua),nu=db(gn),hn=Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806",
"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ua),ou=db(hn),jn=Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061",
"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ua),pu=db(jn),kn=Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ua),
qu=db(kn),ln=Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ua),ru=db(ln),mn=Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641",
"d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ua),su=db(mn),nn=Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd",
"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ua),tu=db(nn),on=Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824",
"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ua),uu=db(on),pn=Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ua),vu=db(pn),qn=Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac",
"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ua),wu=db(qn),rn=Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ua),xu=db(rn),sn=Array(3).concat("ece2f0a6bddb1c9099",
"f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ua),yu=db(sn),tn=Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b",
"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ua),zu=db(tn),un=Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ua),Au=db(un),vn=Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177",
"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ua),Bu=db(vn),wn=Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ua),Cu=db(wn),xn=Array(3).concat("f7fcb9addd8e31a354",
"ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ua),Du=db(xn),yn=Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04",
"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ua),Eu=db(yn),zn=Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ua),Fu=db(zn),An=Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c",
"eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ua),Gu=db(An),Bn=Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ua),Hu=db(Bn),Cn=Array(3).concat("f0f0f0bdbdbd636363",
"f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ua),Iu=db(Cn),Dn=Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486",
"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ua),Ju=db(Dn),En=Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ua),Ku=db(En),Fn=Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603",
"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ua),Lu=db(Fn),Mu=Sf(Ob(300,.5,0),Ob(-240,.5,1)),Nu=Sf(Ob(-100,.75,.35),Ob(80,1.5,.8)),Ou=Sf(Ob(260,.75,.35),Ob(80,1.5,.8)),$f=Ob(),ag=Pc(),Pu=Math.PI/3,Qu=2*Math.PI/3,Ru=Df(Ua("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),
Su=Df(Ua("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
Tu=Df(Ua("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
Uu=Df(Ua("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),
Gn=Math.abs,tb=Math.atan2,Mc=Math.cos,us=Math.max,ti=Math.min,$b=Math.sin,kd=Math.sqrt,tc=Math.PI,Ef=tc/2,uc=2*tc;Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(R,T){R=+R;T=+T;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(R,T):this._context.moveTo(R,T);break;case 1:this._point=
2;default:this._context.lineTo(R,T)}}};var Vl=Th(Gf);Tl.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(R,T){this._curve.point(T*Math.sin(R),T*-Math.cos(R))}};var Vh=Array.prototype.slice,ui={draw:function(R,T){T=Math.sqrt(T/tc);R.moveTo(T,0);R.arc(0,0,T,0,uc)}},Hn={draw:function(R,T){T=Math.sqrt(T/5)/2;R.moveTo(-3*T,-T);R.lineTo(-T,-T);R.lineTo(-T,
-3*T);R.lineTo(T,-3*T);R.lineTo(T,-T);R.lineTo(3*T,-T);R.lineTo(3*T,T);R.lineTo(T,T);R.lineTo(T,3*T);R.lineTo(-T,3*T);R.lineTo(-T,T);R.lineTo(-3*T,T);R.closePath()}},In=Math.sqrt(1/3),Vu=2*In,Jn={draw:function(R,T){T=Math.sqrt(T/Vu);var ja=T*In;R.moveTo(0,-T);R.lineTo(ja,0);R.lineTo(0,T);R.lineTo(-ja,0);R.closePath()}},Kn=Math.sin(tc/10)/Math.sin(7*tc/10),Wu=Math.sin(uc/10)*Kn,Xu=-Math.cos(uc/10)*Kn,Ln={draw:function(R,T){T=Math.sqrt(.8908130915292852*T);var ja=Wu*T,ra=Xu*T;R.moveTo(0,-T);R.lineTo(ja,
ra);for(var xa=1;5>xa;++xa){var oa=uc*xa/5,ua=Math.cos(oa);oa=Math.sin(oa);R.lineTo(oa*T,-ua*T);R.lineTo(ua*ja-oa*ra,oa*ja+ua*ra)}R.closePath()}},Mn={draw:function(R,T){T=Math.sqrt(T);var ja=-T/2;R.rect(ja,ja,T,T)}},vi=Math.sqrt(3),Nn={draw:function(R,T){T=-Math.sqrt(T/(3*vi));R.moveTo(0,2*T);R.lineTo(-vi*T,-T);R.lineTo(vi*T,-T);R.closePath()}},Lb=Math.sqrt(3)/2,wi=1/Math.sqrt(12),Yu=3*(wi/2+1),On={draw:function(R,T){var ja=Math.sqrt(T/Yu);T=ja/2;var ra=ja*wi;ja=ja*wi+ja;var xa=-T;R.moveTo(T,ra);
R.lineTo(T,ja);R.lineTo(xa,ja);R.lineTo(-.5*T-Lb*ra,Lb*T+-.5*ra);R.lineTo(-.5*T-Lb*ja,Lb*T+-.5*ja);R.lineTo(-.5*xa-Lb*ja,Lb*xa+-.5*ja);R.lineTo(-.5*T+Lb*ra,-.5*ra-Lb*T);R.lineTo(-.5*T+Lb*ja,-.5*ja-Lb*T);R.lineTo(-.5*xa+Lb*ja,-.5*ja-Lb*xa);R.closePath()}},Zu=[ui,Hn,Jn,Mn,Ln,Nn,On];If.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Hf(this,this._x1,
this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(R,T){R=+R;T=+T;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(R,T):this._context.moveTo(R,T);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hf(this,R,T)}this._x0=this._x1;this._x1=R;this._y0=this._y1;this._y1=T}};Xl.prototype=
{areaStart:sc,areaEnd:sc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,
this._y3),this.point(this._x4,this._y4)}},point:function(R,T){R=+R;T=+T;switch(this._point){case 0:this._point=1;this._x2=R;this._y2=T;break;case 1:this._point=2;this._x3=R;this._y3=T;break;case 2:this._point=3;this._x4=R;this._y4=T;this._context.moveTo((this._x0+4*this._x1+R)/6,(this._y0+4*this._y1+T)/6);break;default:Hf(this,R,T)}this._x0=this._x1;this._x1=R;this._y0=this._y1;this._y1=T}};Yl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(R,T){R=+R;T=+T;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ja=(this._x0+4*this._x1+R)/6,ra=(this._y0+4*this._y1+T)/6;this._line?this._context.lineTo(ja,ra):this._context.moveTo(ja,ra);break;case 3:this._point=4;default:Hf(this,R,T)}this._x0=this._x1;this._x1=R;this._y0=
this._y1;this._y1=T}};Zl.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var R=this._x,T=this._y,ja=R.length-1;if(0<ja)for(var ra=R[0],xa=T[0],oa=R[ja]-ra,ua=T[ja]-xa,m=-1,E;++m<=ja;)E=m/ja,this._basis.point(this._beta*R[m]+(1-this._beta)*(ra+E*oa),this._beta*T[m]+(1-this._beta)*(xa+E*ua));this._x=this._y=null;this._basis.lineEnd()},point:function(R,T){this._x.push(+R);this._y.push(+T)}};var $u=function ja(T){function ra(xa){return 1===T?new If(xa):
new Zl(xa,T)}ra.beta=function(xa){return ja(+xa)};return ra}(.85);Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Jf(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(T,ja){T=+T;ja=+ja;
switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(T,ja):this._context.moveTo(T,ja);break;case 1:this._point=2;this._x1=T;this._y1=ja;break;case 2:this._point=3;default:Jf(this,T,ja)}this._x0=this._x1;this._x1=this._x2;this._x2=T;this._y0=this._y1;this._y1=this._y2;this._y2=ja}};var av=function ra(ja){function xa(oa){return new Wh(oa,ja)}xa.tension=function(oa){return ra(+oa)};return xa}(0);Xh.prototype={areaStart:sc,areaEnd:sc,lineStart:function(){this._x0=this._x1=this._x2=
this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(ja,ra){ja=+ja;ra=+ra;switch(this._point){case 0:this._point=1;this._x3=ja;this._y3=ra;break;
case 1:this._point=2;this._context.moveTo(this._x4=ja,this._y4=ra);break;case 2:this._point=3;this._x5=ja;this._y5=ra;break;default:Jf(this,ja,ra)}this._x0=this._x1;this._x1=this._x2;this._x2=ja;this._y0=this._y1;this._y1=this._y2;this._y2=ra}};var bv=function xa(ra){function oa(ua){return new Xh(ua,ra)}oa.tension=function(ua){return xa(+ua)};return oa}(0);Yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=
this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ra,xa){ra=+ra;xa=+xa;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jf(this,ra,xa)}this._x0=this._x1;this._x1=this._x2;this._x2=ra;this._y0=this._y1;this._y1=this._y2;
this._y2=xa}};var cv=function oa(xa){function ua(m){return new Yh(m,xa)}ua.tension=function(m){return oa(+m)};return ua}(0);$l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(xa,oa){xa=+xa;oa=+oa;if(this._point){var ua=this._x2-xa,m=this._y2-oa;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ua*ua+m*m,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(xa,oa):this._context.moveTo(xa,oa);break;case 1:this._point=2;break;case 2:this._point=3;default:Zh(this,xa,oa)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=
this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=xa;this._y0=this._y1;this._y1=this._y2;this._y2=oa}};var dv=function ua(oa){function m(E){return oa?new $l(E,oa):new Wh(E,0)}m.alpha=function(E){return ua(+E)};return m}(.5);am.prototype={areaStart:sc,areaEnd:sc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(oa,ua){oa=+oa;ua=+ua;if(this._point){var m=this._x2-oa,E=this._y2-ua;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(m*m+E*E,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=oa;this._y3=ua;break;case 1:this._point=2;this._context.moveTo(this._x4=oa,this._y4=
ua);break;case 2:this._point=3;this._x5=oa;this._y5=ua;break;default:Zh(this,oa,ua)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=oa;this._y0=this._y1;this._y1=this._y2;this._y2=ua}};var ev=function m(ua){function E(O){return ua?new am(O,ua):new Xh(O,0)}E.alpha=function(O){return m(+O)};return E}(.5);bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ua,m){ua=+ua;m=+m;if(this._point){var E=this._x2-ua,O=this._y2-m;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(E*E+O*O,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?
this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zh(this,ua,m)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ua;this._y0=this._y1;this._y1=this._y2;this._y2=m}};var fv=function E(m){function O(M){return m?new bm(M,m):new Yh(M,0)}O.alpha=function(M){return E(+M)};return O}(.5);cm.prototype={areaStart:sc,areaEnd:sc,lineStart:function(){this._point=
0},lineEnd:function(){this._point&&this._context.closePath()},point:function(m,E){m=+m;E=+E;this._point?this._context.lineTo(m,E):(this._point=1,this._context.moveTo(m,E))}};Kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$h(this,this._t0,em(this,this._t0))}(this._line||0!==this._line&&
1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(m,E){var O=NaN;m=+m;E=+E;if(m!==this._x1||E!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(m,E):this._context.moveTo(m,E);break;case 1:this._point=2;break;case 2:this._point=3;$h(this,em(this,O=dm(this,m,E)),O);break;default:$h(this,this._t0,O=dm(this,m,E))}this._x0=this._x1;this._x1=m;this._y0=this._y1;this._y1=E;this._t0=O}}};(fm.prototype=Object.create(Kf.prototype)).point=
function(m,E){Kf.prototype.point.call(this,E,m)};gm.prototype={moveTo:function(m,E){this._context.moveTo(E,m)},closePath:function(){this._context.closePath()},lineTo:function(m,E){this._context.lineTo(E,m)},bezierCurveTo:function(m,E,O,M,N,V){this._context.bezierCurveTo(E,m,M,O,V,N)}};hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var m=this._x,E=this._y,O=m.length;if(O)if(this._line?this._context.lineTo(m[0],
E[0]):this._context.moveTo(m[0],E[0]),2===O)this._context.lineTo(m[1],E[1]);else for(var M=im(m),N=im(E),V=0,ba=1;ba<O;++V,++ba)this._context.bezierCurveTo(M[0][V],N[0][V],M[1][V],N[1][V],m[ba],E[ba]);(this._line||0!==this._line&&1===O)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(m,E){this._x.push(+m);this._y.push(+E)}};Lf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=
0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(m,E){m=+m;E=+E;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(m,E):this._context.moveTo(m,E);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,E),this._context.lineTo(m,E);else{var O=this._x*(1-this._t)+
m*this._t;this._context.lineTo(O,this._y);this._context.lineTo(O,E)}}this._x=m;this._y=E}};Mf.prototype={constructor:Mf,insert:function(m,E){var O;if(m){E.P=m;if(E.N=m.N)m.N.P=E;m.N=E;if(m.R){for(m=m.R;m.L;)m=m.L;m.L=E}else m.R=E;var M=m}else this._?(m=mm(this._),E.P=null,E.N=m,m.P=m.L=E,M=m):(E.P=E.N=null,this._=E,M=null);E.L=E.R=null;E.U=M;E.C=!0;for(m=E;M&&M.C;)E=M.U,M===E.L?(O=E.R)&&O.C?(M.C=O.C=!1,E.C=!0,m=E):(m===M.R&&(ie(this,M),m=M,M=m.U),M.C=!1,E.C=!0,je(this,E)):(O=E.L)&&O.C?(M.C=O.C=!1,
E.C=!0,m=E):(m===M.L&&(je(this,M),m=M,M=m.U),M.C=!1,E.C=!0,ie(this,E)),M=m.U;this._.C=!1},remove:function(m){m.N&&(m.N.P=m.P);m.P&&(m.P.N=m.N);m.N=m.P=null;var E=m.U,O=m.L,M=m.R;var N=O?M?mm(M):O:M;E?E.L===m?E.L=N:E.R=N:this._=N;if(O&&M){var V=N.C;N.C=m.C;N.L=O;O.U=N;N!==M?(E=N.U,N.U=m.U,m=N.R,E.L=m,N.R=M,M.U=N):(N.U=E,E=N,m=N.R)}else V=m.C,m=N;m&&(m.U=E);if(!V)if(m&&m.C)m.C=!1;else{do{if(m===this._)break;if(m===E.L){if(m=E.R,m.C&&(m.C=!1,E.C=!0,ie(this,E),m=E.R),m.L&&m.L.C||m.R&&m.R.C){m.R&&m.R.C||
(m.L.C=!1,m.C=!0,je(this,m),m=E.R);m.C=E.C;E.C=m.R.C=!1;ie(this,E);m=this._;break}}else if(m=E.L,m.C&&(m.C=!1,E.C=!0,je(this,E),m=E.L),m.L&&m.L.C||m.R&&m.R.C){m.L&&m.L.C||(m.R.C=!1,m.C=!0,ie(this,m),m=E.L);m.C=E.C;E.C=m.L.C=!1;je(this,E);m=this._;break}m.C=!0;m=E;E=E.U}while(!m.C);m&&(m.C=!1)}}};var om=[],ai,qm=[],cb=1E-6,Ks=1E-12,pd,Ib,me,sb;ci.prototype={constructor:ci,polygons:function(){var m=this.edges;return this.cells.map(function(E){var O=E.halfedges.map(function(M){return nm(E,m[M])});O.data=
E.site.data;return O})},triangles:function(){var m=[],E=this.edges;this.cells.forEach(function(O,M){if(ba=(N=O.halfedges).length){O=O.site;var N,V=-1,ba,W=E[N[ba-1]];for(W=W.left===O?W.right:W.left;++V<ba;){var aa=W;W=E[N[V]];W=W.left===O?W.right:W.left;aa&&W&&M<aa.index&&M<W.index&&0>(O[0]-W[0])*(aa[1]-O[1])-(O[0]-aa[0])*(W[1]-O[1])&&m.push([O.data,aa.data,W.data])}}});return m},links:function(){return this.edges.filter(function(m){return m.right}).map(function(m){return{source:m.left.data,target:m.right.data}})},
find:function(m,E,O){var M=this,N=M._found||0;var V=M.cells.length;for(var ba;!(ba=M.cells[N]);)if(++N>=V)return null;V=m-ba.site[0];var W=E-ba.site[1],aa=V*V+W*W;do ba=M.cells[V=N],N=null,ba.halfedges.forEach(function(ea){var pa=M.edges[ea];ea=pa.left;if(ea!==ba.site&&ea||(ea=pa.right)){pa=m-ea[0];var ta=E-ea[1];pa=pa*pa+ta*ta;pa<aa&&(aa=pa,N=ea.index)}});while(null!==N);M._found=V;return null==O||aa<=O*O?ba.site:null}};ic.prototype={constructor:ic,scale:function(m){return 1===m?this:new ic(this.k*
m,this.x,this.y)},translate:function(m,E){return 0===m&0===E?this:new ic(this.k,this.x+this.k*m,this.y+this.k*E)},apply:function(m){return[m[0]*this.k+this.x,m[1]*this.k+this.y]},applyX:function(m){return m*this.k+this.x},applyY:function(m){return m*this.k+this.y},invert:function(m){return[(m[0]-this.x)/this.k,(m[1]-this.y)/this.k]},invertX:function(m){return(m-this.x)/this.k},invertY:function(m){return(m-this.y)/this.k},rescaleX:function(m){return m.copy().domain(m.range().map(this.invertX,this).map(m.invert,
m))},rescaleY:function(m){return m.copy().domain(m.range().map(this.invertY,this).map(m.invert,m))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qf=new ic(1,0,0);sm.prototype=ic.prototype;d3.version="5.7.0";d3.bisect=Hc;d3.bisectRight=Hc;d3.bisectLeft=Ts;d3.ascending=I;d3.bisector=H;d3.cross=function(m,E,O){var M=m.length,N=E.length,V=Array(M*N),ba,W,aa;null==O&&(O=J);for(ba=aa=0;ba<M;++ba){var ea=m[ba];for(W=0;W<N;++W,++aa)V[aa]=O(ea,E[W])}return V};d3.descending=
function(m,E){return E<m?-1:E>m?1:E>=m?0:NaN};d3.deviation=k;d3.extent=e;d3.histogram=function(){function m(N){var V,ba=N.length,W=Array(ba);for(V=0;V<ba;++V)W[V]=E(N[V],V,N);V=O(W);var aa=V[0],ea=V[1],pa=M(W,aa,ea);Array.isArray(pa)||(pa=q(aa,ea,pa),pa=g(Math.ceil(aa/pa)*pa,ea,pa));for(var ta=pa.length;pa[0]<=aa;)pa.shift(),--ta;for(;pa[ta-1]>ea;)pa.pop(),--ta;var ca=Array(ta+1);for(V=0;V<=ta;++V){var la=ca[V]=[];la.x0=0<V?pa[V-1]:aa;la.x1=V<ta?pa[V]:ea}for(V=0;V<ba;++V)la=W[V],aa<=la&&la<=ea&&ca[Hc(pa,
la,0,ta)].push(N[V]);return ca}var E=h,O=e,M=v;m.value=function(N){return arguments.length?(E="function"===typeof N?N:d(N),m):E};m.domain=function(N){return arguments.length?(O="function"===typeof N?N:d([N[0],N[1]]),m):O};m.thresholds=function(N){return arguments.length?(M="function"===typeof N?N:Array.isArray(N)?d(Us.call(N)):d(N),m):M};return m};d3.thresholdFreedmanDiaconis=function(m,E,O){m=Vs.call(m,w).sort(I);return Math.ceil((O-E)/(2*(B(m,.75)-B(m,.25))*Math.pow(m.length,-1/3)))};d3.thresholdScott=
function(m,E,O){return Math.ceil((O-E)/(3.5*k(m)*Math.pow(m.length,-1/3)))};d3.thresholdSturges=v;d3.max=K;d3.mean=function(m,E){var O=m.length,M=O,N=-1,V,ba=0;if(null==E)for(;++N<O;)isNaN(V=w(m[N]))?--M:ba+=V;else for(;++N<O;)isNaN(V=w(E(m[N],N,m)))?--M:ba+=V;if(M)return ba/M};d3.median=function(m,E){var O=m.length,M=-1,N,V=[];if(null==E)for(;++M<O;)isNaN(N=w(m[M]))||V.push(N);else for(;++M<O;)isNaN(N=w(E(m[M],M,m)))||V.push(N);return B(V.sort(I),.5)};d3.merge=C;d3.min=y;d3.pairs=function(m,E){null==
E&&(E=J);for(var O=0,M=m.length-1,N=m[0],V=Array(0>M?0:M);O<M;)V[O]=E(N,N=m[++O]);return V};d3.permute=function(m,E){for(var O=E.length,M=Array(O);O--;)M[O]=m[E[O]];return M};d3.quantile=B;d3.range=g;d3.scan=function(m,E){if(O=m.length){var O,M=0,N=0,V,ba=m[N];for(null==E&&(E=I);++M<O;)if(0>E(V=m[M],ba)||0!==E(ba,ba))ba=V,N=M;if(0===E(ba,ba))return N}};d3.shuffle=function(m,E,O){O=(null==O?m.length:O)-(E=null==E?0:+E);for(var M,N;O;)N=Math.random()*O--|0,M=m[O+E],m[O+E]=m[N+E],m[N+E]=M;return m};
d3.sum=function(m,E){var O=m.length,M=-1,N,V=0;if(null==E)for(;++M<O;){if(N=+m[M])V+=N}else for(;++M<O;)if(N=+E(m[M],M,m))V+=N;return V};d3.ticks=n;d3.tickIncrement=r;d3.tickStep=q;d3.transpose=L;d3.variance=p;d3.zip=function(){return L(arguments)};d3.axisTop=function(m){return Ba(1,m)};d3.axisRight=function(m){return Ba(2,m)};d3.axisBottom=function(m){return Ba(3,m)};d3.axisLeft=function(m){return Ba(4,m)};d3.brush=function(){return Fg(kt)};d3.brushX=function(){return Fg(Me)};d3.brushY=function(){return Fg(Le)};
d3.brushSelection=function(m){return(m=m.__brush)?m.dim.output(m.selection):null};d3.chord=function(){function m(V){var ba=V.length,W=[],aa=g(ba),ea=[],pa=[],ta=pa.groups=Array(ba),ca=Array(ba*ba),la,fa;var ma=0;for(la=-1;++la<ba;){var va=0;for(fa=-1;++fa<ba;)va+=V[la][fa];W.push(va);ea.push(g(ba));ma+=va}O&&aa.sort(function(Na,Va){return O(W[Na],W[Va])});M&&ea.forEach(function(Na,Va){Na.sort(function(Za,sa){return M(V[Va][Za],V[Va][sa])})});var na=(ma=Im(0,Hm-E*ba)/ma)?E:Hm/ba;va=0;for(la=-1;++la<
ba;){var Aa=va;for(fa=-1;++fa<ba;){var Ca=aa[la],za=ea[Ca][fa],Ha=V[Ca][za],Ga=va,Qa=va+=Ha*ma;ca[za*ba+Ca]={index:Ca,subindex:za,startAngle:Ga,endAngle:Qa,value:Ha}}ta[Ca]={index:Ca,startAngle:Aa,endAngle:va,value:W[Ca]};va+=na}for(la=-1;++la<ba;)for(fa=la-1;++fa<ba;)aa=ca[fa*ba+la],ea=ca[la*ba+fa],(aa.value||ea.value)&&pa.push(aa.value<ea.value?{source:ea,target:aa}:{source:aa,target:ea});return N?pa.sort(N):pa}var E=0,O=null,M=null,N=null;m.padAngle=function(V){return arguments.length?(E=Im(0,
V),m):E};m.sortGroups=function(V){return arguments.length?(O=V,m):O};m.sortSubgroups=function(V){return arguments.length?(M=V,m):M};m.sortChords=function(V){return arguments.length?(null==V?N=null:(N=Hp(V))._=V,m):N&&N._};return m};d3.ribbon=function(){function m(){var W,aa=lt.call(arguments),ea=E.apply(this,aa),pa=O.apply(this,aa);ea=+M.apply(this,(aa[0]=ea,aa));var ta=N.apply(this,aa)-Tf,ca=V.apply(this,aa)-Tf,la=ea*Em(ta),fa=ea*Fm(ta);pa=+M.apply(this,(aa[0]=pa,aa));var ma=N.apply(this,aa)-Tf;
aa=V.apply(this,aa)-Tf;ba||(ba=W=nc());ba.moveTo(la,fa);ba.arc(0,0,ea,ta,ca);if(ta!==ma||ca!==aa)ba.quadraticCurveTo(0,0,pa*Em(ma),pa*Fm(ma)),ba.arc(0,0,pa,ma,aa);ba.quadraticCurveTo(0,0,la,fa);ba.closePath();if(W)return ba=null,W+""||null}var E=Ip,O=Jp,M=Kp,N=Lp,V=Mp,ba=null;m.radius=function(W){return arguments.length?(M="function"===typeof W?W:Hg(+W),m):M};m.startAngle=function(W){return arguments.length?(N="function"===typeof W?W:Hg(+W),m):N};m.endAngle=function(W){return arguments.length?(V=
"function"===typeof W?W:Hg(+W),m):V};m.source=function(W){return arguments.length?(E=W,m):E};m.target=function(W){return arguments.length?(O=W,m):O};m.context=function(W){return arguments.length?(ba=null==W?null:W,m):ba};return m};d3.nest=function(){function m(W,aa,ea,pa){if(aa>=O.length)return null!=N&&W.sort(N),null!=V?V(W):W;for(var ta=-1,ca=W.length,la=O[aa++],fa,ma,va=bc(),na,Aa=ea();++ta<ca;)(na=va.get(fa=la(ma=W[ta])+""))?na.push(ma):va.set(fa,[ma]);va.each(function(Ca,za){pa(Aa,za,m(Ca,aa,
ea,pa))});return Aa}function E(W,aa){if(++aa>O.length)return W;var ea=M[aa-1];if(null!=V&&aa>=O.length)var pa=W.entries();else pa=[],W.each(function(ta,ca){pa.push({key:ca,values:E(ta,aa)})});return null!=ea?pa.sort(function(ta,ca){return ea(ta.key,ca.key)}):pa}var O=[],M=[],N,V,ba;return ba={object:function(W){return m(W,0,Np,Op)},map:function(W){return m(W,0,vj,wj)},entries:function(W){return E(m(W,0,vj,wj),0)},key:function(W){O.push(W);return ba},sortKeys:function(W){M[O.length-1]=W;return ba},
sortValues:function(W){N=W;return ba},rollup:function(W){V=W;return ba}}};d3.set=xj;d3.map=bc;d3.keys=function(m){var E=[],O;for(O in m)E.push(O);return E};d3.values=function(m){var E=[],O;for(O in m)E.push(m[O]);return E};d3.entries=function(m){var E=[],O;for(O in m)E.push({key:O,value:m[O]});return E};d3.color=mc;d3.rgb=Pc;d3.hsl=ze;d3.lab=Ae;d3.hcl=Be;d3.lch=function(m,E,O,M){return 1===arguments.length?Oi(m):new Ub(O,E,m,null==M?1:M)};d3.gray=function(m,E){return new Nb(m,0,0,null==E?1:E)};d3.cubehelix=
Ob;d3.contours=yj;d3.contourDensity=function(){function m(na){var Aa=new Float32Array(fa*ma),Ca=new Float32Array(fa*ma);na.forEach(function(za,Ha,Ga){var Qa=+ba(za,Ha,Ga)+la>>ca,Na=+W(za,Ha,Ga)+la>>ca;za=+aa(za,Ha,Ga);0<=Qa&&Qa<fa&&0<=Na&&Na<ma&&(Aa[Qa+Na*fa]+=za)});Jg({width:fa,height:ma,data:Aa},{width:fa,height:ma,data:Ca},ta>>ca);Kg({width:fa,height:ma,data:Ca},{width:fa,height:ma,data:Aa},ta>>ca);Jg({width:fa,height:ma,data:Aa},{width:fa,height:ma,data:Ca},ta>>ca);Kg({width:fa,height:ma,data:Ca},
{width:fa,height:ma,data:Aa},ta>>ca);Jg({width:fa,height:ma,data:Aa},{width:fa,height:ma,data:Ca},ta>>ca);Kg({width:fa,height:ma,data:Ca},{width:fa,height:ma,data:Aa},ta>>ca);na=va(Aa);Array.isArray(na)||(Ca=K(Aa),na=q(0,Ca,na),na=g(0,Math.floor(Ca/na)*na,na),na.shift());return yj().thresholds(na).size([fa,ma])(Aa).map(E)}function E(na){na.value*=Math.pow(2,-2*ca);na.coordinates.forEach(O);return na}function O(na){na.forEach(M)}function M(na){na.forEach(N)}function N(na){na[0]=na[0]*Math.pow(2,ca)-
la;na[1]=na[1]*Math.pow(2,ca)-la}function V(){la=3*ta;fa=ea+2*la>>ca;ma=pa+2*la>>ca;return m}var ba=Rp,W=Sp,aa=Tp,ea=960,pa=500,ta=20,ca=2,la=3*ta,fa=ea+2*la>>ca,ma=pa+2*la>>ca,va=oc(20);m.x=function(na){return arguments.length?(ba="function"===typeof na?na:oc(+na),m):ba};m.y=function(na){return arguments.length?(W="function"===typeof na?na:oc(+na),m):W};m.weight=function(na){return arguments.length?(aa="function"===typeof na?na:oc(+na),m):aa};m.size=function(na){if(!arguments.length)return[ea,pa];
var Aa=Math.ceil(na[0]),Ca=Math.ceil(na[1]);if(!(0<=Aa||0<=Aa))throw Error("invalid size");return ea=Aa,pa=Ca,V()};m.cellSize=function(na){if(!arguments.length)return 1<<ca;if(!(1<=(na=+na)))throw Error("invalid cell size");return ca=Math.floor(Math.log(na)/Math.LN2),V()};m.thresholds=function(na){return arguments.length?(va="function"===typeof na?na:Array.isArray(na)?oc(zj.call(na)):oc(na),m):va};m.bandwidth=function(na){if(!arguments.length)return Math.sqrt(ta*(ta+1));if(!(0<=(na=+na)))throw Error("invalid bandwidth");
return ta=Math.round((Math.sqrt(4*na*na+1)-1)/2),V()};return m};d3.dispatch=Ea;d3.drag=function(){function m(za){za.on("mousedown.drag",E).filter(ta).on("touchstart.drag",N).on("touchmove.drag",V).on("touchend.drag touchcancel.drag",ba).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(){if(!Aa&&aa.apply(this,arguments)){var za=W("mouse",ea.apply(this,arguments),kc,this,arguments);za&&(Cb(d3.event.view).on("mousemove.drag",O,!0).on("mouseup.drag",M,!0),we(d3.event.view),
d3.event.stopImmediatePropagation(),na=!1,ma=d3.event.clientX,va=d3.event.clientY,za("start"))}}function O(){Nc();if(!na){var za=d3.event.clientX-ma,Ha=d3.event.clientY-va;na=za*za+Ha*Ha>Ca}ca.mouse("drag")}function M(){Cb(d3.event.view).on("mousemove.drag mouseup.drag",null);xe(d3.event.view,na);Nc();ca.mouse("end")}function N(){if(aa.apply(this,arguments)){var za=d3.event.changedTouches,Ha=ea.apply(this,arguments),Ga=za.length,Qa,Na;for(Qa=0;Qa<Ga;++Qa)if(Na=W(za[Qa].identifier,Ha,ve,this,arguments))d3.event.stopImmediatePropagation(),
Na("start")}}function V(){var za=d3.event.changedTouches,Ha=za.length,Ga,Qa;for(Ga=0;Ga<Ha;++Ga)if(Qa=ca[za[Ga].identifier])Nc(),Qa("drag")}function ba(){var za=d3.event.changedTouches,Ha=za.length,Ga,Qa;Aa&&clearTimeout(Aa);Aa=setTimeout(function(){Aa=null},500);for(Ga=0;Ga<Ha;++Ga)if(Qa=ca[za[Ga].identifier])d3.event.stopImmediatePropagation(),Qa("end")}function W(za,Ha,Ga,Qa,Na){var Va=Ga(Ha,za),Za,sa,Fa,Oa=la.copy();if(ud(new lg(m,"beforestart",Za,za,fa,Va[0],Va[1],0,0,Oa),function(){if(null==
(d3.event.subject=Za=pa.apply(Qa,Na)))return!1;sa=Za.x-Va[0]||0;Fa=Za.y-Va[1]||0;return!0}))return function Wa($a){var ib=Va;switch($a){case "start":ca[za]=Wa;var Mb=fa++;break;case "end":delete ca[za],--fa;case "drag":Va=Ga(Ha,za),Mb=fa}ud(new lg(m,$a,Za,za,Mb,Va[0]+sa,Va[1]+Fa,Va[0]-ib[0],Va[1]-ib[1],Oa),Oa.apply,Oa,[$a,Qa,Na])}}var aa=Co,ea=Do,pa=Eo,ta=Fo,ca={},la=Ea("start","drag","end"),fa=0,ma,va,na,Aa,Ca=0;m.filter=function(za){return arguments.length?(aa="function"===typeof za?za:ye(!!za),
m):aa};m.container=function(za){return arguments.length?(ea="function"===typeof za?za:ye(za),m):ea};m.subject=function(za){return arguments.length?(pa="function"===typeof za?za:ye(za),m):pa};m.touchable=function(za){return arguments.length?(ta="function"===typeof za?za:ye(!!za),m):ta};m.on=function(){var za=la.on.apply(la,arguments);return za===la?m:za};m.clickDistance=function(za){return arguments.length?(Ca=(za=+za)*za,m):Math.sqrt(Ca)};return m};d3.dragDisable=we;d3.dragEnable=xe;d3.dsvFormat=
Pe;d3.csvParse=Jm;d3.csvParseRows=nt;d3.csvFormat=ot;d3.csvFormatRows=pt;d3.tsvParse=Km;d3.tsvParseRows=qt;d3.tsvFormat=rt;d3.tsvFormatRows=st;d3.easeLinear=function(m){return+m};d3.easeQuad=mj;d3.easeQuadIn=function(m){return m*m};d3.easeQuadOut=function(m){return m*(2-m)};d3.easeQuadInOut=mj;d3.easeCubic=Bg;d3.easeCubicIn=function(m){return m*m*m};d3.easeCubicOut=function(m){return--m*m*m+1};d3.easeCubicInOut=Bg;d3.easePoly=Am;d3.easePolyIn=dt;d3.easePolyOut=et;d3.easePolyInOut=Am;d3.easeSin=nj;
d3.easeSinIn=function(m){return 1-Math.cos(m*Bm)};d3.easeSinOut=function(m){return Math.sin(m*Bm)};d3.easeSinInOut=nj;d3.easeExp=pj;d3.easeExpIn=function(m){return Math.pow(2,10*m-10)};d3.easeExpOut=function(m){return 1-Math.pow(2,-10*m)};d3.easeExpInOut=pj;d3.easeCircle=qj;d3.easeCircleIn=function(m){return 1-Math.sqrt(1-m*m)};d3.easeCircleOut=function(m){return Math.sqrt(1- --m*m)};d3.easeCircleInOut=qj;d3.easeBounce=Ed;d3.easeBounceIn=function(m){return 1-Ed(1-m)};d3.easeBounceOut=Ed;d3.easeBounceInOut=
function(m){return(1>=(m*=2)?1-Ed(1-m):Ed(m-1)+1)/2};d3.easeBack=Cm;d3.easeBackIn=ft;d3.easeBackOut=gt;d3.easeBackInOut=Cm;d3.easeElastic=Dm;d3.easeElasticIn=ht;d3.easeElasticOut=Dm;d3.easeElasticInOut=it;d3.blob=function(m,E){return fetch(m,E).then(Wp)};d3.buffer=function(m,E){return fetch(m,E).then(Xp)};d3.dsv=function(m,E,O,M){3===arguments.length&&"function"===typeof O&&(M=O,O=void 0);var N=Pe(m);return Mg(E,O).then(function(V){return N.parse(V,M)})};d3.csv=tt;d3.tsv=ut;d3.json=function(m,E){return fetch(m,
E).then(Zp)};d3.text=Mg;d3.forceCenter=function(m,E){function O(){var N,V=M.length,ba=0,W=0;for(N=0;N<V;++N){var aa=M[N];ba+=aa.x;W+=aa.y}ba=ba/V-m;W=W/V-E;for(N=0;N<V;++N)aa=M[N],aa.x-=ba,aa.y-=W}var M;null==m&&(m=0);null==E&&(E=0);O.initialize=function(N){M=N};O.x=function(N){return arguments.length?(m=+N,O):m};O.y=function(N){return arguments.length?(E=+N,O):E};return O};d3.forceCollide=function(m){function E(){function aa(Aa,Ca,za,Ha,Ga){var Qa=Aa.data;Aa=Aa.r;var Na=ma+Aa;if(Qa)Qa.index>ca.index&&
(Ca=la-Qa.x-Qa.vx,za=fa-Qa.y-Qa.vy,Ha=Ca*Ca+za*za,Ha<Na*Na&&(0===Ca&&(Ca=pc(),Ha+=Ca*Ca),0===za&&(za=pc(),Ha+=za*za),Ha=(Na-(Ha=Math.sqrt(Ha)))/Ha*ba,ca.vx+=(Ca*=Ha)*(Na=(Aa*=Aa)/(va+Aa)),ca.vy+=(za*=Ha)*Na,Qa.vx-=Ca*(Na=1-Na),Qa.vy-=za*Na));else return Ca>la+Na||Ha<la-Na||za>fa+Na||Ga<fa-Na}for(var ea,pa=N.length,ta,ca,la,fa,ma,va,na=0;na<W;++na)for(ta=Qe(N,bq,cq).visitAfter(O),ea=0;ea<pa;++ea)ca=N[ea],ma=V[ca.index],va=ma*ma,la=ca.x+ca.vx,fa=ca.y+ca.vy,ta.visit(aa)}function O(aa){if(aa.data)return aa.r=
V[aa.data.index];for(var ea=aa.r=0;4>ea;++ea)aa[ea]&&aa[ea].r>aa.r&&(aa.r=aa[ea].r)}function M(){if(N){var aa,ea=N.length;V=Array(ea);for(aa=0;aa<ea;++aa){var pa=N[aa];V[pa.index]=+m(pa,aa,N)}}}var N,V,ba=1,W=1;"function"!==typeof m&&(m=mb(null==m?1:+m));E.initialize=function(aa){N=aa;M()};E.iterations=function(aa){return arguments.length?(W=+aa,E):W};E.strength=function(aa){return arguments.length?(ba=+aa,E):ba};E.radius=function(aa){return arguments.length?(m="function"===typeof aa?aa:mb(+aa),M(),
E):m};return E};d3.forceLink=function(m){function E(fa){return 1/Math.min(ta[fa.source.index],ta[fa.target.index])}function O(fa){for(var ma=0,va=m.length;ma<la;++ma)for(var na=0,Aa,Ca,za,Ha,Ga;na<va;++na)Aa=m[na],Ca=Aa.source,Aa=Aa.target,za=Aa.x+Aa.vx-Ca.x-Ca.vx||pc(),Ha=Aa.y+Aa.vy-Ca.y-Ca.vy||pc(),Ga=Math.sqrt(za*za+Ha*Ha),Ga=(Ga-ea[na])/Ga*fa*W[na],za*=Ga,Ha*=Ga,Aa.vx-=za*(Ga=ca[na]),Aa.vy-=Ha*Ga,Ca.vx+=za*(Ga=1-Ga),Ca.vy+=Ha*Ga}function M(){if(pa){var fa=pa.length,ma=m.length,va=bc(pa,ba);var na=
0;for(ta=Array(fa);na<ma;++na)fa=m[na],fa.index=na,"object"!==typeof fa.source&&(fa.source=Fj(va,fa.source)),"object"!==typeof fa.target&&(fa.target=Fj(va,fa.target)),ta[fa.source.index]=(ta[fa.source.index]||0)+1,ta[fa.target.index]=(ta[fa.target.index]||0)+1;na=0;for(ca=Array(ma);na<ma;++na)fa=m[na],ca[na]=ta[fa.source.index]/(ta[fa.source.index]+ta[fa.target.index]);W=Array(ma);N();ea=Array(ma);V()}}function N(){if(pa)for(var fa=0,ma=m.length;fa<ma;++fa)W[fa]=+E(m[fa],fa,m)}function V(){if(pa)for(var fa=
0,ma=m.length;fa<ma;++fa)ea[fa]=+aa(m[fa],fa,m)}var ba=dq,W,aa=mb(30),ea,pa,ta,ca,la=1;null==m&&(m=[]);O.initialize=function(fa){pa=fa;M()};O.links=function(fa){return arguments.length?(m=fa,M(),O):m};O.id=function(fa){return arguments.length?(ba=fa,O):ba};O.iterations=function(fa){return arguments.length?(la=+fa,O):la};O.strength=function(fa){return arguments.length?(E="function"===typeof fa?fa:mb(+fa),N(),O):E};O.distance=function(fa){return arguments.length?(aa="function"===typeof fa?fa:mb(+fa),
V(),O):aa};return O};d3.forceManyBody=function(){function m(ca){var la,fa=N.length,ma=Qe(N,eq,fq).visitAfter(O);ba=ca;for(la=0;la<fa;++la)V=N[la],ma.visit(M)}function E(){if(N){var ca,la=N.length;aa=Array(la);for(ca=0;ca<la;++ca){var fa=N[ca];aa[fa.index]=+W(fa,ca,N)}}}function O(ca){var la=0,fa,ma,va=0,na,Aa,Ca;if(ca.length){for(na=Aa=Ca=0;4>Ca;++Ca)(fa=ca[Ca])&&(ma=Math.abs(fa.value))&&(la+=fa.value,va+=ma,na+=ma*fa.x,Aa+=ma*fa.y);ca.x=na/va;ca.y=Aa/va}else{fa=ca;fa.x=fa.data.x;fa.y=fa.data.y;do la+=
aa[fa.data.index];while(fa=fa.next)}ca.value=la}function M(ca,la,fa,ma){if(!ca.value)return!0;var va=ca.x-V.x,na=ca.y-V.y;la=ma-la;ma=va*va+na*na;if(la*la/ta<ma)return ma<pa&&(0===va&&(va=pc(),ma+=va*va),0===na&&(na=pc(),ma+=na*na),ma<ea&&(ma=Math.sqrt(ea*ma)),V.vx+=va*ca.value*ba/ma,V.vy+=na*ca.value*ba/ma),!0;if(!(ca.length||ma>=pa)){if(ca.data!==V||ca.next)0===va&&(va=pc(),ma+=va*va),0===na&&(na=pc(),ma+=na*na),ma<ea&&(ma=Math.sqrt(ea*ma));do ca.data!==V&&(la=aa[ca.data.index]*ba/ma,V.vx+=va*la,
V.vy+=na*la);while(ca=ca.next)}}var N,V,ba,W=mb(-30),aa,ea=1,pa=Infinity,ta=.81;m.initialize=function(ca){N=ca;E()};m.strength=function(ca){return arguments.length?(W="function"===typeof ca?ca:mb(+ca),E(),m):W};m.distanceMin=function(ca){return arguments.length?(ea=ca*ca,m):Math.sqrt(ea)};m.distanceMax=function(ca){return arguments.length?(pa=ca*ca,m):Math.sqrt(pa)};m.theta=function(ca){return arguments.length?(ta=ca*ca,m):Math.sqrt(ta)};return m};d3.forceRadial=function(m,E,O){function M(ea){for(var pa=
0,ta=V.length;pa<ta;++pa){var ca=V[pa],la=ca.x-E||1E-6,fa=ca.y-O||1E-6,ma=Math.sqrt(la*la+fa*fa);ma=(aa[pa]-ma)*W[pa]*ea/ma;ca.vx+=la*ma;ca.vy+=fa*ma}}function N(){if(V){var ea,pa=V.length;W=Array(pa);aa=Array(pa);for(ea=0;ea<pa;++ea)aa[ea]=+m(V[ea],ea,V),W[ea]=isNaN(aa[ea])?0:+ba(V[ea],ea,V)}}var V,ba=mb(.1),W,aa;"function"!==typeof m&&(m=mb(+m));null==E&&(E=0);null==O&&(O=0);M.initialize=function(ea){V=ea;N()};M.strength=function(ea){return arguments.length?(ba="function"===typeof ea?ea:mb(+ea),
N(),M):ba};M.radius=function(ea){return arguments.length?(m="function"===typeof ea?ea:mb(+ea),N(),M):m};M.x=function(ea){return arguments.length?(E=+ea,M):E};M.y=function(ea){return arguments.length?(O=+ea,M):O};return M};d3.forceSimulation=function(m){function E(){O();la.call("tick",V);ba<W&&(ca.stop(),la.call("end",V))}function O(){var fa,ma=m.length;ba+=(ea-ba)*aa;ta.each(function(na){na(ba)});for(fa=0;fa<ma;++fa){var va=m[fa];null==va.fx?va.x+=va.vx*=pa:(va.x=va.fx,va.vx=0);null==va.fy?va.y+=
va.vy*=pa:(va.y=va.fy,va.vy=0)}}function M(){for(var fa=0,ma=m.length,va;fa<ma;++fa){va=m[fa];va.index=fa;if(isNaN(va.x)||isNaN(va.y)){var na=10*Math.sqrt(fa),Aa=fa*vt;va.x=na*Math.cos(Aa);va.y=na*Math.sin(Aa)}if(isNaN(va.vx)||isNaN(va.vy))va.vx=va.vy=0}}function N(fa){fa.initialize&&fa.initialize(m);return fa}var V,ba=1,W=.001,aa=1-Math.pow(W,1/300),ea=0,pa=.6,ta=bc(),ca=Fe(E),la=Ea("tick","end");null==m&&(m=[]);M();return V={tick:O,restart:function(){return ca.restart(E),V},stop:function(){return ca.stop(),
V},nodes:function(fa){return arguments.length?(m=fa,M(),ta.each(N),V):m},alpha:function(fa){return arguments.length?(ba=+fa,V):ba},alphaMin:function(fa){return arguments.length?(W=+fa,V):W},alphaDecay:function(fa){return arguments.length?(aa=+fa,V):+aa},alphaTarget:function(fa){return arguments.length?(ea=+fa,V):ea},velocityDecay:function(fa){return arguments.length?(pa=1-fa,V):1-pa},force:function(fa,ma){return 1<arguments.length?(null==ma?ta.remove(fa):ta.set(fa,N(ma)),V):ta.get(fa)},find:function(fa,
ma,va){var na,Aa=m.length;va=null==va?Infinity:va*va;for(na=0;na<Aa;++na){var Ca=m[na];var za=fa-Ca.x;var Ha=ma-Ca.y;za=za*za+Ha*Ha;if(za<va){var Ga=Ca;va=za}}return Ga},on:function(fa,ma){return 1<arguments.length?(la.on(fa,ma),V):la.on(fa)}}};d3.forceX=function(m){function E(W){for(var aa=0,ea=N.length,pa;aa<ea;++aa)pa=N[aa],pa.vx+=(ba[aa]-pa.x)*V[aa]*W}function O(){if(N){var W,aa=N.length;V=Array(aa);ba=Array(aa);for(W=0;W<aa;++W)V[W]=isNaN(ba[W]=+m(N[W],W,N))?0:+M(N[W],W,N)}}var M=mb(.1),N,V,
ba;"function"!==typeof m&&(m=mb(null==m?0:+m));E.initialize=function(W){N=W;O()};E.strength=function(W){return arguments.length?(M="function"===typeof W?W:mb(+W),O(),E):M};E.x=function(W){return arguments.length?(m="function"===typeof W?W:mb(+W),O(),E):m};return E};d3.forceY=function(m){function E(W){for(var aa=0,ea=N.length,pa;aa<ea;++aa)pa=N[aa],pa.vy+=(ba[aa]-pa.y)*V[aa]*W}function O(){if(N){var W,aa=N.length;V=Array(aa);ba=Array(aa);for(W=0;W<aa;++W)V[W]=isNaN(ba[W]=+m(N[W],W,N))?0:+M(N[W],W,
N)}}var M=mb(.1),N,V,ba;"function"!==typeof m&&(m=mb(null==m?0:+m));E.initialize=function(W){N=W;O()};E.strength=function(W){return arguments.length?(M="function"===typeof W?W:mb(+W),O(),E):M};E.y=function(W){return arguments.length?(m="function"===typeof W?W:mb(+W),O(),E):m};return E};d3.formatDefaultLocale=Mj;d3.formatLocale=Ij;d3.formatSpecifier=Gd;d3.precisionFixed=Nj;d3.precisionPrefix=Oj;d3.precisionRound=Pj;d3.geoArea=function(m){Xf.reset();Rb(m,Wb);return 2*Xf};d3.geoBounds=function(m){var E,
O,M;Jb=kb=-(jb=Gb=Infinity);qc=[];Rb(m,ec);if(E=qc.length){qc.sort(oq);m=1;var N=qc[0];for(O=[N];m<E;++m){var V=qc[m];fk(N,V[0])||fk(N,V[1])?(Hb(N[0],V[1])>Hb(N[0],N[1])&&(N[1]=V[1]),Hb(V[0],N[1])>Hb(N[0],N[1])&&(N[0]=V[0])):O.push(N=V)}var ba=-Infinity;E=O.length-1;m=0;for(N=O[E];m<=E;N=V,++m)V=O[m],(M=Hb(N[1],V[0]))>ba&&(ba=M,jb=V[0],kb=N[1])}qc=dc=null;return Infinity===jb||Infinity===Gb?[[NaN,NaN],[NaN,NaN]]:[[jb,Gb],[kb,Jb]]};d3.geoCentroid=function(m){Jd=cf=$e=af=bf=df=ef=ff=Wg=Xg=Yg=0;Rb(m,
Sb);m=Wg;var E=Xg,O=Yg,M=m*m+E*E+O*O;return 1E-12>M&&(m=df,E=ef,O=ff,1E-6>cf&&(m=$e,E=af,O=bf),M=m*m+E*E+O*O,1E-12>M)?[NaN,NaN]:[xb(E,m)*eb,wb(O/lb(M))*eb]};d3.geoCircle=function(){function m(){var W=E.apply(this,arguments),aa=O.apply(this,arguments)*Sa,ea=M.apply(this,arguments)*Sa;N=[];V=ah(-W[0]*Sa,-W[1]*Sa,0).invert;pk(ba,aa,ea,1);W={type:"Polygon",coordinates:[N]};N=V=null;return W}var E=Yc([0,0]),O=Yc(90),M=Yc(6),N,V,ba={point:function(W,aa){N.push(W=V(W,aa));W[0]*=eb;W[1]*=eb}};m.center=function(W){return arguments.length?
(E="function"===typeof W?W:Yc([+W[0],+W[1]]),m):E};m.radius=function(W){return arguments.length?(O="function"===typeof W?W:Yc(+W),m):O};m.precision=function(W){return arguments.length?(M="function"===typeof W?W:Yc(+W),m):M};return m};d3.geoClipAntimeridian=sh;d3.geoClipCircle=wk;d3.geoClipExtent=function(){var m=0,E=0,O=960,M=500,N,V,ba;return ba={stream:function(W){return N&&V===W?N:N=jf(m,E,O,M)(V=W)},extent:function(W){return arguments.length?(m=+W[0][0],E=+W[0][1],O=+W[1][0],M=+W[1][1],N=V=null,
ba):[[m,E],[O,M]]}}};d3.geoClipRectangle=jf;d3.geoContains=function(m,E){return(m&&Mm.hasOwnProperty(m.type)?Mm[m.type]:mf)(m,E)};d3.geoDistance=$c;d3.geoGraticule=Ek;d3.geoGraticule10=function(){return Ek()()};d3.geoInterpolate=function(m,E){var O=m[0]*Sa,M=m[1]*Sa;m=E[0]*Sa;E=E[1]*Sa;var N=Ka(M),V=Ia(M),ba=Ka(E),W=Ia(E),aa=N*Ka(O),ea=N*Ia(O),pa=ba*Ka(m),ta=ba*Ia(m),ca=2*wb(lb(Sj(E-M)+N*ba*Sj(m-O))),la=Ia(ca);m=ca?function(fa){var ma=Ia(fa*=ca)/la,va=Ia(ca-fa)/la;fa=va*aa+ma*pa;var na=va*ea+ma*ta;
ma=va*V+ma*W;return[xb(na,fa)*eb,xb(ma,lb(fa*fa+na*na))*eb]}:function(){return[O*eb,M*eb]};m.distance=ca;return m};d3.geoLength=xk;d3.geoPath=function(m,E){function O(ba){ba&&("function"===typeof M&&V.pointRadius(+M.apply(this,arguments)),Rb(ba,N(V)));return V.result()}var M=4.5,N,V;O.area=function(ba){Rb(ba,N(fc));return fc.result()};O.measure=function(ba){Rb(ba,N(Md));return Md.result()};O.bounds=function(ba){Rb(ba,N(qf));return qf.result()};O.centroid=function(ba){Rb(ba,N(Kb));return Kb.result()};
O.projection=function(ba){return arguments.length?(N=null==ba?(m=null,Ec):(m=ba).stream,O):m};O.context=function(ba){if(!arguments.length)return E;V=null==ba?(E=null,new Rk):new Nk(E=ba);"function"!==typeof M&&V.pointRadius(M);return O};O.pointRadius=function(ba){if(!arguments.length)return M;M="function"===typeof ba?ba:(V.pointRadius(+ba),+ba);return O};return O.projection(m).context(E)};d3.geoAlbers=Xk;d3.geoAlbersUsa=function(){function m(ca){var la=ca[0];ca=ca[1];return pa=null,(V.point(la,ca),
pa)||(W.point(la,ca),pa)||(ea.point(la,ca),pa)}function E(){O=M=null;return m}var O,M,N=Xk(),V,ba=rf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),W,aa=rf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ea,pa,ta={point:function(ca,la){pa=[ca,la]}};m.invert=function(ca){var la=N.scale(),fa=N.translate(),ma=(ca[0]-fa[0])/la;la=(ca[1]-fa[1])/la;return(.12<=la&&.234>la&&-.425<=ma&&-.214>ma?ba:.166<=la&&.234>la&&-.214<=ma&&-.115>ma?aa:N).invert(ca)};m.stream=function(ca){return O&&M===ca?
O:O=Qq([N.stream(M=ca),ba.stream(ca),aa.stream(ca)])};m.precision=function(ca){if(!arguments.length)return N.precision();N.precision(ca);ba.precision(ca);aa.precision(ca);return E()};m.scale=function(ca){if(!arguments.length)return N.scale();N.scale(ca);ba.scale(.35*ca);aa.scale(ca);return m.translate(N.translate())};m.translate=function(ca){if(!arguments.length)return N.translate();var la=N.scale(),fa=+ca[0],ma=+ca[1];V=N.translate(ca).clipExtent([[fa-.455*la,ma-.238*la],[fa+.455*la,ma+.238*la]]).stream(ta);
W=ba.translate([fa-.307*la,ma+.201*la]).clipExtent([[fa-.425*la+1E-6,ma+.12*la+1E-6],[fa-.214*la-1E-6,ma+.234*la-1E-6]]).stream(ta);ea=aa.translate([fa-.205*la,ma+.212*la]).clipExtent([[fa-.214*la+1E-6,ma+.166*la+1E-6],[fa-.115*la-1E-6,ma+.234*la-1E-6]]).stream(ta);return E()};m.fitExtent=function(ca,la){return bd(m,ca,la)};m.fitSize=function(ca,la){return bd(m,[[0,0],ca],la)};m.fitWidth=function(ca,la){return ph(m,ca,la)};m.fitHeight=function(ca,la){return qh(m,ca,la)};return m.scale(1070)};d3.geoAzimuthalEqualArea=
function(){return Zb(li).scale(124.75).clipAngle(179.999)};d3.geoAzimuthalEqualAreaRaw=li;d3.geoAzimuthalEquidistant=function(){return Zb(mi).scale(79.4188).clipAngle(179.999)};d3.geoAzimuthalEquidistantRaw=mi;d3.geoConicConformal=function(){return th($k).scale(109.5).parallels([30,30])};d3.geoConicConformalRaw=$k;d3.geoConicEqualArea=rf;d3.geoConicEqualAreaRaw=Wk;d3.geoConicEquidistant=function(){return th(al).scale(131.154).center([0,13.9389])};d3.geoConicEquidistantRaw=al;d3.geoEqualEarth=function(){return Zb(vh).scale(177.158)};
d3.geoEqualEarthRaw=vh;d3.geoEquirectangular=function(){return Zb(Td).scale(152.63)};d3.geoEquirectangularRaw=Td;d3.geoGnomonic=function(){return Zb(wh).scale(144.049).clipAngle(60)};d3.geoGnomonicRaw=wh;d3.geoIdentity=function(){function m(){ca=la=null;return fa}var E=1,O=0,M=0,N=1,V=1,ba=Ec,W=null,aa,ea,pa,ta=Ec,ca,la,fa;return fa={stream:function(ma){return ca&&la===ma?ca:ca=ba(ta(la=ma))},postclip:function(ma){return arguments.length?(ta=ma,W=aa=ea=pa=null,m()):ta},clipExtent:function(ma){return arguments.length?
(ta=null==ma?(W=aa=ea=pa=null,Ec):jf(W=+ma[0][0],aa=+ma[0][1],ea=+ma[1][0],pa=+ma[1][1]),m()):null==W?null:[[W,aa],[ea,pa]]},scale:function(ma){return arguments.length?(ba=uf((E=+ma)*N,E*V,O,M),m()):E},translate:function(ma){return arguments.length?(ba=uf(E*N,E*V,O=+ma[0],M=+ma[1]),m()):[O,M]},reflectX:function(ma){return arguments.length?(ba=uf(E*(N=ma?-1:1),E*V,O,M),m()):0>N},reflectY:function(ma){return arguments.length?(ba=uf(E*N,E*(V=ma?-1:1),O,M),m()):0>V},fitExtent:function(ma,va){return bd(fa,
ma,va)},fitSize:function(ma,va){return bd(fa,[[0,0],ma],va)},fitWidth:function(ma,va){return ph(fa,ma,va)},fitHeight:function(ma,va){return qh(fa,ma,va)}}};d3.geoProjection=Zb;d3.geoProjectionMutator=rh;d3.geoMercator=function(){return Zk(Sd).scale(961/Db)};d3.geoMercatorRaw=Sd;d3.geoNaturalEarth1=function(){return Zb(xh).scale(175.295)};d3.geoNaturalEarth1Raw=xh;d3.geoOrthographic=function(){return Zb(yh).scale(249.5).clipAngle(90.000001)};d3.geoOrthographicRaw=yh;d3.geoStereographic=function(){return Zb(zh).scale(250).clipAngle(142)};
d3.geoStereographicRaw=zh;d3.geoTransverseMercator=function(){var m=Zk(Ah),E=m.center,O=m.rotate;m.center=function(M){return arguments.length?E([-M[1],M[0]]):(M=E(),[M[1],-M[0]])};m.rotate=function(M){return arguments.length?O([M[0],M[1],2<M.length?M[2]+90:90]):(M=O(),[M[0],M[1],M[2]-90])};return O([0,0,90]).scale(159.155)};d3.geoTransverseMercatorRaw=Ah;d3.geoRotation=ok;d3.geoStream=Rb;d3.geoTransform=function(m){return{stream:Pd(m)}};d3.cluster=function(){function m(V){var ba,W=0;V.eachAfter(function(ca){var la=
ca.children;if(la){var fa=la.reduce(Sq,0)/la.length;ca.x=fa;ca.y=1+la.reduce(Tq,0)}else ca.x=ba?W+=E(ca,ba):0,ca.y=0,ba=ca});var aa=Uq(V),ea=Vq(V),pa=aa.x-E(aa,ea)/2,ta=ea.x+E(ea,aa)/2;return V.eachAfter(N?function(ca){ca.x=(ca.x-V.x)*O;ca.y=(V.y-ca.y)*M}:function(ca){ca.x=(ca.x-pa)/(ta-pa)*O;ca.y=(1-(V.y?ca.y/V.y:1))*M})}var E=Rq,O=1,M=1,N=!1;m.separation=function(V){return arguments.length?(E=V,m):E};m.size=function(V){return arguments.length?(N=!1,O=+V[0],M=+V[1],m):N?null:[O,M]};m.nodeSize=function(V){return arguments.length?
(N=!0,O=+V[0],M=+V[1],m):N?[O,M]:null};return m};d3.hierarchy=Bh;d3.pack=function(){function m(V){V.x=O/2;V.y=M/2;E?V.eachBefore(jl(E)).eachAfter(Dh(N,.5)).eachBefore(kl(1)):V.eachBefore(jl($q)).eachAfter(Dh(Gc,1)).eachAfter(Dh(N,V.r/Math.min(O,M))).eachBefore(kl(Math.min(O,M)/(2*V.r)));return V}var E=null,O=1,M=1,N=Gc;m.radius=function(V){return arguments.length?(E=null==V?null:xf(V),m):E};m.size=function(V){return arguments.length?(O=+V[0],M=+V[1],m):[O,M]};m.padding=function(V){return arguments.length?
(N="function"===typeof V?V:fd(+V),m):N};return m};d3.packSiblings=function(m){il(m);return m};d3.packEnclose=cl;d3.partition=function(){function m(ba){var W=ba.height+1;ba.x0=ba.y0=N;ba.x1=O;ba.y1=M/W;ba.eachBefore(E(M,W));V&&ba.eachBefore(ll);return ba}function E(ba,W){return function(aa){aa.children&&Vd(aa,aa.x0,ba*(aa.depth+1)/W,aa.x1,ba*(aa.depth+2)/W);var ea=aa.x0,pa=aa.y0,ta=aa.x1-N,ca=aa.y1-N;ta<ea&&(ea=ta=(ea+ta)/2);ca<pa&&(pa=ca=(pa+ca)/2);aa.x0=ea;aa.y0=pa;aa.x1=ta;aa.y1=ca}}var O=1,M=1,
N=0,V=!1;m.round=function(ba){return arguments.length?(V=!!ba,m):V};m.size=function(ba){return arguments.length?(O=+ba[0],M=+ba[1],m):[O,M]};m.padding=function(ba){return arguments.length?(N=+ba,m):N};return m};d3.stratify=function(){function m(M){var N,V=M.length,ba=Array(V),W,aa={};for(N=0;N<V;++N){var ea=M[N];var pa=ba[N]=new ed(ea);null!=(W=E(ea,N,M))&&(W+="")&&(ea="$"+(pa.id=W),aa[ea]=ea in aa?Nm:pa)}for(N=0;N<V;++N)if(pa=ba[N],W=O(M[N],N,M),null!=W&&(W+="")){ea=aa["$"+W];if(!ea)throw Error("missing: "+
W);if(ea===Nm)throw Error("ambiguous: "+W);ea.children?ea.children.push(pa):ea.children=[pa];pa.parent=ea}else{if(ta)throw Error("multiple roots");var ta=pa}if(!ta)throw Error("no root");ta.parent=wt;ta.eachBefore(function(ca){ca.depth=ca.parent.depth+1;--V}).eachBefore(bl);ta.parent=null;if(0<V)throw Error("cycle");return ta}var E=ar,O=br;m.id=function(M){return arguments.length?(E=xf(M),m):E};m.parentId=function(M){return arguments.length?(O=xf(M),m):O};return m};d3.tree=function(){function m(aa){var ea=
dr(aa);ea.eachAfter(E);ea.parent.m=-ea.z;ea.eachBefore(O);if(W)aa.eachBefore(M);else{var pa=aa,ta=aa,ca=aa;aa.eachBefore(function(va){va.x<pa.x&&(pa=va);va.x>ta.x&&(ta=va);va.depth>ca.depth&&(ca=va)});ea=pa===ta?1:N(pa,ta)/2;var la=ea-pa.x,fa=V/(ta.x+ea+la),ma=ba/(ca.depth||1);aa.eachBefore(function(va){va.x=(va.x+la)*fa;va.y=va.depth*ma})}return aa}function E(aa){var ea=aa.children,pa=aa.parent.children,ta=aa.i?pa[aa.i-1]:null;if(ea){for(var ca=0,la=0,fa=aa.children,ma=fa.length,va;0<=--ma;)va=fa[ma],
va.z+=ca,va.m+=ca,ca+=va.s+(la+=va.c);ea=(ea[0].z+ea[ea.length-1].z)/2;ta?(aa.z=ta.z+N(aa._,ta._),aa.m=aa.z-ea):aa.z=ea}else ta&&(aa.z=ta.z+N(aa._,ta._));ea=aa.parent;pa=aa.parent.A||pa[0];if(ta){la=ca=aa;fa=ca.parent.children[0];ma=ca.m;va=la.m;for(var na=ta.m,Aa=fa.m,Ca;ta=Fh(ta),ca=Eh(ca),ta&&ca;){fa=Eh(fa);la=Fh(la);la.a=aa;Ca=ta.z+na-ca.z-ma+N(ta._,ca._);if(0<Ca){var za=ta.a.parent===aa.parent?ta.a:pa,Ha=aa,Ga=Ca,Qa=Ga/(Ha.i-za.i);Ha.c-=Qa;Ha.s+=Ga;za.c+=Qa;Ha.z+=Ga;Ha.m+=Ga;ma+=Ca;va+=Ca}na+=
ta.m;ma+=ca.m;Aa+=fa.m;va+=la.m}ta&&!Fh(la)&&(la.t=ta,la.m+=na-va);ca&&!Eh(fa)&&(fa.t=ca,fa.m+=ma-Aa,pa=aa)}ea.A=pa}function O(aa){aa._.x=aa.z+aa.parent.m;aa.m+=aa.parent.m}function M(aa){aa.x*=V;aa.y=aa.depth*ba}var N=cr,V=1,ba=1,W=null;m.separation=function(aa){return arguments.length?(N=aa,m):N};m.size=function(aa){return arguments.length?(W=!1,V=+aa[0],ba=+aa[1],m):W?null:[V,ba]};m.nodeSize=function(aa){return arguments.length?(W=!0,V=+aa[0],ba=+aa[1],m):W?[V,ba]:null};return m};d3.treemap=function(){function m(ca){ca.x0=
ca.y0=0;ca.x1=N;ca.y1=V;ca.eachBefore(E);ba=[0];M&&ca.eachBefore(ll);return ca}function E(ca){var la=ba[ca.depth],fa=ca.x0+la,ma=ca.y0+la,va=ca.x1-la,na=ca.y1-la;va<fa&&(fa=va=(fa+va)/2);na<ma&&(ma=na=(ma+na)/2);ca.x0=fa;ca.y0=ma;ca.x1=va;ca.y1=na;ca.children&&(la=ba[ca.depth+1]=W(ca)/2,fa+=ta(ca)-la,ma+=aa(ca)-la,va-=ea(ca)-la,na-=pa(ca)-la,va<fa&&(fa=va=(fa+va)/2),na<ma&&(ma=na=(ma+na)/2),O(ca,fa,ma,va,na))}var O=Pm,M=!1,N=1,V=1,ba=[0],W=Gc,aa=Gc,ea=Gc,pa=Gc,ta=Gc;m.round=function(ca){return arguments.length?
(M=!!ca,m):M};m.size=function(ca){return arguments.length?(N=+ca[0],V=+ca[1],m):[N,V]};m.tile=function(ca){return arguments.length?(O=xf(ca),m):O};m.padding=function(ca){return arguments.length?m.paddingInner(ca).paddingOuter(ca):m.paddingInner()};m.paddingInner=function(ca){return arguments.length?(W="function"===typeof ca?ca:fd(+ca),m):W};m.paddingOuter=function(ca){return arguments.length?m.paddingTop(ca).paddingRight(ca).paddingBottom(ca).paddingLeft(ca):m.paddingTop()};m.paddingTop=function(ca){return arguments.length?
(aa="function"===typeof ca?ca:fd(+ca),m):aa};m.paddingRight=function(ca){return arguments.length?(ea="function"===typeof ca?ca:fd(+ca),m):ea};m.paddingBottom=function(ca){return arguments.length?(pa="function"===typeof ca?ca:fd(+ca),m):pa};m.paddingLeft=function(ca){return arguments.length?(ta="function"===typeof ca?ca:fd(+ca),m):ta};return m};d3.treemapBinary=function(m,E,O,M,N){function V(ta,ca,la,fa,ma,va,na){if(ta>=ca-1)ta=ba[ta],ta.x0=fa,ta.y0=ma,ta.x1=va,ta.y1=na;else{for(var Aa=pa[ta],Ca=la/
2+Aa,za=ta+1,Ha=ca-1;za<Ha;){var Ga=za+Ha>>>1;pa[Ga]<Ca?za=Ga+1:Ha=Ga}Ca-pa[za-1]<pa[za]-Ca&&ta+1<za&&--za;Aa=pa[za]-Aa;Ca=la-Aa;va-fa>na-ma?(la=(fa*Ca+va*Aa)/la,V(ta,za,Aa,fa,ma,la,na),V(za,ca,Ca,la,ma,va,na)):(la=(ma*Ca+na*Aa)/la,V(ta,za,Aa,fa,ma,va,la),V(za,ca,Ca,fa,la,va,na))}}var ba=m.children,W,aa=ba.length,ea,pa=Array(aa+1);for(pa[0]=ea=W=0;W<aa;++W)pa[W+1]=ea+=ba[W].value;V(0,aa,m.value,E,O,M,N)};d3.treemapDice=Vd;d3.treemapSlice=zf;d3.treemapSliceDice=function(m,E,O,M,N){(m.depth&1?zf:Vd)(m,
E,O,M,N)};d3.treemapSquarify=Pm;d3.treemapResquarify=xt;d3.interpolate=wd;d3.interpolateArray=Wi;d3.interpolateBasis=Si;d3.interpolateBasisClosed=Ti;d3.interpolateDate=Xi;d3.interpolateDiscrete=function(m){var E=m.length;return function(O){return m[Math.max(0,Math.min(E-1,Math.floor(O*E)))]}};d3.interpolateHue=function(m,E){var O=De(+m,+E);return function(M){M=O(M);return M-360*Math.floor(M/360)}};d3.interpolateNumber=Fb;d3.interpolateObject=Yi;d3.interpolateRound=Zi;d3.interpolateString=ug;d3.interpolateTransformCss=
xm;d3.interpolateTransformSvg=ym;d3.interpolateZoom=dj;d3.interpolateRgb=xd;d3.interpolateRgbBasis=Pl;d3.interpolateRgbBasisClosed=Xs;d3.interpolateHsl=Ys;d3.interpolateHslLong=Zs;d3.interpolateLab=function(m,E){var O=ob((m=Ae(m)).l,(E=Ae(E)).l),M=ob(m.a,E.a),N=ob(m.b,E.b),V=ob(m.opacity,E.opacity);return function(ba){m.l=O(ba);m.a=M(ba);m.b=N(ba);m.opacity=V(ba);return m+""}};d3.interpolateHcl=$s;d3.interpolateHclLong=at;d3.interpolateCubehelix=bt;d3.interpolateCubehelixLong=Sf;d3.piecewise=function(m,
E){for(var O=0,M=E.length-1,N=E[0],V=Array(0>M?0:M);O<M;)V[O]=m(N,N=E[++O]);return function(ba){var W=Math.max(0,Math.min(M-1,Math.floor(ba*=M)));return V[W](ba-W)}};d3.quantize=function(m,E){for(var O=Array(E),M=0;M<E;++M)O[M]=m(M/(E-1));return O};d3.path=nc;d3.polygonArea=function(m){for(var E=-1,O=m.length,M,N=m[O-1],V=0;++E<O;)M=N,N=m[E],V+=M[1]*N[0]-M[0]*N[1];return V/2};d3.polygonCentroid=function(m){for(var E=-1,O=m.length,M=0,N=0,V,ba=m[O-1],W,aa=0;++E<O;)V=ba,ba=m[E],aa+=W=V[0]*ba[1]-ba[0]*
V[1],M+=(V[0]+ba[0])*W,N+=(V[1]+ba[1])*W;return aa*=3,[M/aa,N/aa]};d3.polygonHull=function(m){if(3>(O=m.length))return null;var E,O,M=Array(O),N=Array(O);for(E=0;E<O;++E)M[E]=[+m[E][0],+m[E][1],E];M.sort(fr);for(E=0;E<O;++E)N[E]=[M[E][0],-M[E][1]];O=nl(M);N=nl(N);var V=N[0]===O[0],ba=N[N.length-1]===O[O.length-1],W=[];for(E=O.length-1;0<=E;--E)W.push(m[M[O[E]][2]]);for(E=+V;E<N.length-ba;++E)W.push(m[M[N[E]][2]]);return W};d3.polygonContains=function(m,E){var O=m.length,M=m[O-1],N=E[0];E=E[1];for(var V=
M[0],ba=M[1],W,aa=!1,ea=0;ea<O;++ea)M=m[ea],W=M[0],M=M[1],M>E!==ba>E&&N<(V-W)*(E-M)/(ba-M)+W&&(aa=!aa),V=W,ba=M;return aa};d3.polygonLength=function(m){var E=-1,O=m.length,M=m[O-1],N=M[0];M=M[1];for(var V=0;++E<O;){var ba=N;var W=M;M=m[E];N=M[0];M=M[1];ba-=N;W-=M;V+=Math.sqrt(ba*ba+W*W)}return V};d3.quadtree=Qe;d3.randomUniform=yt;d3.randomNormal=Qm;d3.randomLogNormal=zt;d3.randomBates=At;d3.randomIrwinHall=Rm;d3.randomExponential=Bt;d3.scaleBand=Ih;d3.scalePoint=function(){return ol(Ih().paddingInner(1))};
d3.scaleIdentity=sl;d3.scaleLinear=rl;d3.scaleLog=xl;d3.scaleOrdinal=Gh;d3.scaleImplicit=Hh;d3.scalePow=Mh;d3.scaleSqrt=function(){return Mh().exponent(.5)};d3.scaleQuantile=yl;d3.scaleQuantize=zl;d3.scaleThreshold=Al;d3.scaleTime=function(){return Ph(gc,pi,ce,$d,oi,ni,re,Lc,d3.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)])};d3.scaleUtc=function(){return Ph(hc,si,ee,Yd,ri,qi,re,Lc,d3.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)])};d3.scaleSequential=Nl;d3.scaleDiverging=Ol;d3.schemeCategory10=
$t;d3.schemeCategory20b=au;d3.schemeCategory20c=bu;d3.schemeCategory20=cu;d3.schemeAccent=du;d3.schemeDark2=eu;d3.schemePaired=fu;d3.schemePastel1=gu;d3.schemePastel2=hu;d3.schemeSet1=iu;d3.schemeSet2=ju;d3.schemeSet3=ku;d3.interpolateBrBG=lu;d3.schemeBrBG=en;d3.interpolatePRGn=mu;d3.schemePRGn=fn;d3.interpolatePiYG=nu;d3.schemePiYG=gn;d3.interpolatePuOr=ou;d3.schemePuOr=hn;d3.interpolateRdBu=pu;d3.schemeRdBu=jn;d3.interpolateRdGy=qu;d3.schemeRdGy=kn;d3.interpolateRdYlBu=ru;d3.schemeRdYlBu=ln;d3.interpolateRdYlGn=
su;d3.schemeRdYlGn=mn;d3.interpolateSpectral=tu;d3.schemeSpectral=nn;d3.interpolateBuGn=uu;d3.schemeBuGn=on;d3.interpolateBuPu=vu;d3.schemeBuPu=pn;d3.interpolateGnBu=wu;d3.schemeGnBu=qn;d3.interpolateOrRd=xu;d3.schemeOrRd=rn;d3.interpolatePuBuGn=yu;d3.schemePuBuGn=sn;d3.interpolatePuBu=zu;d3.schemePuBu=tn;d3.interpolatePuRd=Au;d3.schemePuRd=un;d3.interpolateRdPu=Bu;d3.schemeRdPu=vn;d3.interpolateYlGnBu=Cu;d3.schemeYlGnBu=wn;d3.interpolateYlGn=Du;d3.schemeYlGn=xn;d3.interpolateYlOrBr=Eu;d3.schemeYlOrBr=
yn;d3.interpolateYlOrRd=Fu;d3.schemeYlOrRd=zn;d3.interpolateBlues=Gu;d3.schemeBlues=An;d3.interpolateGreens=Hu;d3.schemeGreens=Bn;d3.interpolateGreys=Iu;d3.schemeGreys=Cn;d3.interpolatePurples=Ju;d3.schemePurples=Dn;d3.interpolateReds=Ku;d3.schemeReds=En;d3.interpolateOranges=Lu;d3.schemeOranges=Fn;d3.interpolateCubehelixDefault=Mu;d3.interpolateRainbow=function(m){if(0>m||1<m)m-=Math.floor(m);var E=Math.abs(m-.5);$f.h=360*m-100;$f.s=1.5-1.5*E;$f.l=.8-.9*E;return $f+""};d3.interpolateWarm=Nu;d3.interpolateCool=
Ou;d3.interpolateSinebow=function(m){var E;m=(.5-m)*Math.PI;ag.r=255*(E=Math.sin(m))*E;ag.g=255*(E=Math.sin(m+Pu))*E;ag.b=255*(E=Math.sin(m+Qu))*E;return ag+""};d3.interpolateViridis=Ru;d3.interpolateMagma=Su;d3.interpolateInferno=Tu;d3.interpolatePlasma=Uu;d3.create=function(m){return Cb(Ma(m).call(document.documentElement))};d3.creator=Ma;d3.local=Gi;d3.matcher=di;d3.mouse=kc;d3.namespace=La;d3.namespaces=Eb;d3.clientPoint=ue;d3.select=Cb;d3.selectAll=function(m){return"string"===typeof m?new ub([document.querySelectorAll(m)],
[document.documentElement]):new ub([null==m?[]:m],ig)};d3.selection=xc;d3.selector=pb;d3.selectorAll=fg;d3.style=wc;d3.touch=ve;d3.touches=function(m,E){null==E&&(E=kg().touches);for(var O=0,M=E?E.length:0,N=Array(M);O<M;++O)N[O]=ue(m,E[O]);return N};d3.window=gg;d3.customEvent=ud;d3.arc=function(){function m(){var ea,pa=+E.apply(this,arguments),ta=+O.apply(this,arguments),ca=V.apply(this,arguments)-Ef,la=ba.apply(this,arguments)-Ef,fa=Gn(la-ca),ma=la>ca;aa||(aa=ea=nc());if(ta<pa){var va=ta;ta=pa;
pa=va}if(1E-12<ta)if(fa>uc-1E-12)aa.moveTo(ta*Mc(ca),ta*$b(ca)),aa.arc(0,0,ta,ca,la,!ma),1E-12<pa&&(aa.moveTo(pa*Mc(la),pa*$b(la)),aa.arc(0,0,pa,la,ca,ma));else{var na=ca,Aa=la;va=ca;var Ca=la,za=fa,Ha=fa,Ga=W.apply(this,arguments)/2,Qa=1E-12<Ga&&(N?+N.apply(this,arguments):kd(pa*pa+ta*ta)),Na=ti(Gn(ta-pa)/2,+M.apply(this,arguments)),Va=Na,Za=Na;if(1E-12<Qa){var sa=Ql(Qa/pa*$b(Ga));Ga=Ql(Qa/ta*$b(Ga));1E-12<(za-=2*sa)?(sa*=ma?1:-1,va+=sa,Ca-=sa):(za=0,va=Ca=(ca+la)/2);1E-12<(Ha-=2*Ga)?(Ga*=ma?1:-1,
na+=Ga,Aa-=Ga):(Ha=0,na=Aa=(ca+la)/2)}ca=ta*Mc(na);la=ta*$b(na);sa=pa*Mc(Ca);Ga=pa*$b(Ca);if(1E-12<Na){var Fa=ta*Mc(Aa),Oa=ta*$b(Aa),Ta=pa*Mc(va),$a=pa*$b(va);if(fa<tc){1E-12<za?(Va=Ta-ca,Za=$a-la,fa=sa-Fa,Qa=Ga-Oa,fa=(fa*(la-Oa)-Qa*(ca-Fa))/(Qa*Va-fa*Za),Va=[ca+fa*Va,la+fa*Za]):Va=[sa,Ga];Za=ca-Va[0];fa=la-Va[1];Qa=Fa-Va[0];var Wa=Oa-Va[1];Za=(Za*Qa+fa*Wa)/(kd(Za*Za+fa*fa)*kd(Qa*Qa+Wa*Wa));Za=1/$b((1<Za?0:-1>Za?tc:Math.acos(Za))/2);fa=kd(Va[0]*Va[0]+Va[1]*Va[1]);Va=ti(Na,(pa-fa)/(Za-1));Za=ti(Na,
(ta-fa)/(Za+1))}}1E-12<Ha?1E-12<Za?(na=Ff(Ta,$a,ca,la,ta,Za,ma),Aa=Ff(Fa,Oa,sa,Ga,ta,Za,ma),aa.moveTo(na.cx+na.x01,na.cy+na.y01),Za<Na?aa.arc(na.cx,na.cy,Za,tb(na.y01,na.x01),tb(Aa.y01,Aa.x01),!ma):(aa.arc(na.cx,na.cy,Za,tb(na.y01,na.x01),tb(na.y11,na.x11),!ma),aa.arc(0,0,ta,tb(na.cy+na.y11,na.cx+na.x11),tb(Aa.cy+Aa.y11,Aa.cx+Aa.x11),!ma),aa.arc(Aa.cx,Aa.cy,Za,tb(Aa.y11,Aa.x11),tb(Aa.y01,Aa.x01),!ma))):(aa.moveTo(ca,la),aa.arc(0,0,ta,na,Aa,!ma)):aa.moveTo(ca,la);1E-12<pa&&1E-12<za?1E-12<Va?(na=Ff(sa,
Ga,Fa,Oa,pa,-Va,ma),Aa=Ff(ca,la,Ta,$a,pa,-Va,ma),aa.lineTo(na.cx+na.x01,na.cy+na.y01),Va<Na?aa.arc(na.cx,na.cy,Va,tb(na.y01,na.x01),tb(Aa.y01,Aa.x01),!ma):(aa.arc(na.cx,na.cy,Va,tb(na.y01,na.x01),tb(na.y11,na.x11),!ma),aa.arc(0,0,pa,tb(na.cy+na.y11,na.cx+na.x11),tb(Aa.cy+Aa.y11,Aa.cx+Aa.x11),ma),aa.arc(Aa.cx,Aa.cy,Va,tb(Aa.y11,Aa.x11),tb(Aa.y01,Aa.x01),!ma))):aa.arc(0,0,pa,Ca,va,ma):aa.lineTo(sa,Ga)}else aa.moveTo(0,0);aa.closePath();if(ea)return aa=null,ea+""||null}var E=ps,O=qs,M=Xa(0),N=null,V=
rs,ba=ss,W=ts,aa=null;m.centroid=function(){var ea=(+E.apply(this,arguments)+ +O.apply(this,arguments))/2,pa=(+V.apply(this,arguments)+ +ba.apply(this,arguments))/2-tc/2;return[Mc(pa)*ea,$b(pa)*ea]};m.innerRadius=function(ea){return arguments.length?(E="function"===typeof ea?ea:Xa(+ea),m):E};m.outerRadius=function(ea){return arguments.length?(O="function"===typeof ea?ea:Xa(+ea),m):O};m.cornerRadius=function(ea){return arguments.length?(M="function"===typeof ea?ea:Xa(+ea),m):M};m.padRadius=function(ea){return arguments.length?
(N=null==ea?null:"function"===typeof ea?ea:Xa(+ea),m):N};m.startAngle=function(ea){return arguments.length?(V="function"===typeof ea?ea:Xa(+ea),m):V};m.endAngle=function(ea){return arguments.length?(ba="function"===typeof ea?ea:Xa(+ea),m):ba};m.padAngle=function(ea){return arguments.length?(W="function"===typeof ea?ea:Xa(+ea),m):W};m.context=function(ea){return arguments.length?(aa=null==ea?null:ea,m):aa};return m};d3.area=Sl;d3.line=Sh;d3.pie=function(){function m(W){var aa,ea=W.length;var pa=0;
var ta=Array(ea),ca=Array(ea),la=+N.apply(this,arguments);var fa=Math.min(uc,Math.max(-uc,V.apply(this,arguments)-la));var ma=Math.min(Math.abs(fa)/ea,ba.apply(this,arguments)),va=ma*(0>fa?-1:1),na;for(aa=0;aa<ea;++aa)0<(na=ca[ta[aa]=aa]=+E(W[aa],aa,W))&&(pa+=na);null!=O?ta.sort(function(Ca,za){return O(ca[Ca],ca[za])}):null!=M&&ta.sort(function(Ca,za){return M(W[Ca],W[za])});aa=0;for(fa=pa?(fa-ea*va)/pa:0;aa<ea;++aa,la=Aa){pa=ta[aa];na=ca[pa];var Aa=la+(0<na?na*fa:0)+va;ca[pa]={data:W[pa],index:aa,
value:na,startAngle:la,endAngle:Aa,padAngle:ma}}return ca}var E=ws,O=vs,M=null,N=Xa(0),V=Xa(uc),ba=Xa(0);m.value=function(W){return arguments.length?(E="function"===typeof W?W:Xa(+W),m):E};m.sortValues=function(W){return arguments.length?(O=W,M=null,m):O};m.sort=function(W){return arguments.length?(M=W,O=null,m):M};m.startAngle=function(W){return arguments.length?(N="function"===typeof W?W:Xa(+W),m):N};m.endAngle=function(W){return arguments.length?(V="function"===typeof W?W:Xa(+W),m):V};m.padAngle=
function(W){return arguments.length?(ba="function"===typeof W?W:Xa(+W),m):ba};return m};d3.areaRadial=Wl;d3.radialArea=Wl;d3.lineRadial=Ul;d3.radialLine=Ul;d3.pointRadial=he;d3.linkHorizontal=function(){return Uh(zs)};d3.linkVertical=function(){return Uh(As)};d3.linkRadial=function(){var m=Uh(Bs);m.angle=m.x;delete m.x;m.radius=m.y;delete m.y;return m};d3.symbol=function(){function m(){var N;M||(M=N=nc());E.apply(this,arguments).draw(M,+O.apply(this,arguments));if(N)return M=null,N+""||null}var E=
Xa(ui),O=Xa(64),M=null;m.type=function(N){return arguments.length?(E="function"===typeof N?N:Xa(N),m):E};m.size=function(N){return arguments.length?(O="function"===typeof N?N:Xa(+N),m):O};m.context=function(N){return arguments.length?(M=null==N?null:N,m):M};return m};d3.symbols=Zu;d3.symbolCircle=ui;d3.symbolCross=Hn;d3.symbolDiamond=Jn;d3.symbolSquare=Mn;d3.symbolStar=Ln;d3.symbolTriangle=Nn;d3.symbolWye=On;d3.curveBasisClosed=function(m){return new Xl(m)};d3.curveBasisOpen=function(m){return new Yl(m)};
d3.curveBasis=function(m){return new If(m)};d3.curveBundle=$u;d3.curveCardinalClosed=bv;d3.curveCardinalOpen=cv;d3.curveCardinal=av;d3.curveCatmullRomClosed=ev;d3.curveCatmullRomOpen=fv;d3.curveCatmullRom=dv;d3.curveLinearClosed=function(m){return new cm(m)};d3.curveLinear=Gf;d3.curveMonotoneX=function(m){return new Kf(m)};d3.curveMonotoneY=function(m){return new fm(m)};d3.curveNatural=function(m){return new hm(m)};d3.curveStep=function(m){return new Lf(m,.5)};d3.curveStepAfter=function(m){return new Lf(m,
1)};d3.curveStepBefore=function(m){return new Lf(m,0)};d3.stack=function(){function m(V){var ba=E.apply(this,arguments),W,aa=V.length,ea=ba.length,pa=Array(ea);for(W=0;W<ea;++W){for(var ta=ba[W],ca=pa[W]=Array(aa),la=0,fa;la<aa;++la)ca[la]=fa=[0,+N(V[la],ta,la,V)],fa.data=V[la];ca.key=ta}W=0;for(ba=O(pa);W<ea;++W)pa[ba[W]].index=W;M(pa,ba);return pa}var E=Xa([]),O=md,M=ld,N=Cs;m.keys=function(V){return arguments.length?(E="function"===typeof V?V:Xa(Vh.call(V)),m):E};m.value=function(V){return arguments.length?
(N="function"===typeof V?V:Xa(+V),m):N};m.order=function(V){return arguments.length?(O=null==V?md:"function"===typeof V?V:Xa(Vh.call(V)),m):O};m.offset=function(V){return arguments.length?(M=null==V?ld:V,m):M};return m};d3.stackOffsetExpand=function(m,E){if(0<(M=m.length)){for(var O,M,N=0,V=m[0].length,ba;N<V;++N){for(ba=O=0;O<M;++O)ba+=m[O][N][1]||0;if(ba)for(O=0;O<M;++O)m[O][N][1]/=ba}ld(m,E)}};d3.stackOffsetDiverging=function(m,E){if(1<(aa=m.length))for(var O,M=0,N,V,ba,W,aa,ea=m[E[0]].length;M<
ea;++M)for(O=ba=W=0;O<aa;++O)0<=(V=(N=m[E[O]][M])[1]-N[0])?(N[0]=ba,N[1]=ba+=V):0>V?(N[1]=W,N[0]=W+=V):N[0]=ba};d3.stackOffsetNone=ld;d3.stackOffsetSilhouette=function(m,E){if(0<(N=m.length)){for(var O=0,M=m[E[0]],N,V=M.length;O<V;++O){for(var ba=0,W=0;ba<N;++ba)W+=m[ba][O][1]||0;M[O][1]+=M[O][0]=-W/2}ld(m,E)}};d3.stackOffsetWiggle=function(m,E){if(0<(ba=m.length)&&0<(V=(N=m[E[0]]).length)){for(var O=0,M=1,N,V,ba;M<V;++M){for(var W=0,aa=0,ea=0;W<ba;++W){var pa=m[E[W]],ta=pa[M][1]||0;pa=(ta-(pa[M-
1][1]||0))/2;for(var ca=0;ca<W;++ca){var la=m[E[ca]];pa+=(la[M][1]||0)-(la[M-1][1]||0)}aa+=ta;ea+=pa*ta}N[M-1][1]+=N[M-1][0]=O;aa&&(O-=ea/aa)}N[M-1][1]+=N[M-1][0]=O;ld(m,E)}};d3.stackOrderAscending=jm;d3.stackOrderDescending=function(m){return jm(m).reverse()};d3.stackOrderInsideOut=function(m){var E=m.length,O=m.map(km),M=md(m).sort(function(ea,pa){return O[pa]-O[ea]}),N=0,V=0,ba=[],W=[];for(m=0;m<E;++m){var aa=M[m];N<V?(N+=O[aa],ba.push(aa)):(V+=O[aa],W.push(aa))}return W.reverse().concat(ba)};
d3.stackOrderNone=md;d3.stackOrderReverse=function(m){return md(m).reverse()};d3.timeInterval=nb;d3.timeMillisecond=Lc;d3.timeMilliseconds=Tm;d3.utcMillisecond=Lc;d3.utcMilliseconds=Tm;d3.timeSecond=re;d3.timeSeconds=Um;d3.utcSecond=re;d3.utcSeconds=Um;d3.timeMinute=ni;d3.timeMinutes=Ct;d3.timeHour=oi;d3.timeHours=Dt;d3.timeDay=$d;d3.timeDays=Et;d3.timeWeek=ce;d3.timeWeeks=Zm;d3.timeSunday=ce;d3.timeSundays=Zm;d3.timeMonday=Zd;d3.timeMondays=Ft;d3.timeTuesday=Vm;d3.timeTuesdays=Gt;d3.timeWednesday=
Wm;d3.timeWednesdays=Ht;d3.timeThursday=de;d3.timeThursdays=It;d3.timeFriday=Xm;d3.timeFridays=Jt;d3.timeSaturday=Ym;d3.timeSaturdays=Kt;d3.timeMonth=pi;d3.timeMonths=Lt;d3.timeYear=gc;d3.timeYears=Mt;d3.utcMinute=qi;d3.utcMinutes=Nt;d3.utcHour=ri;d3.utcHours=Ot;d3.utcDay=Yd;d3.utcDays=Pt;d3.utcWeek=ee;d3.utcWeeks=dn;d3.utcSunday=ee;d3.utcSundays=dn;d3.utcMonday=Xd;d3.utcMondays=Qt;d3.utcTuesday=$m;d3.utcTuesdays=Rt;d3.utcWednesday=an;d3.utcWednesdays=St;d3.utcThursday=fe;d3.utcThursdays=Tt;d3.utcFriday=
bn;d3.utcFridays=Ut;d3.utcSaturday=cn;d3.utcSaturdays=Vt;d3.utcMonth=si;d3.utcMonths=Wt;d3.utcYear=hc;d3.utcYears=Xt;d3.timeFormatDefaultLocale=Ml;d3.timeFormatLocale=Bl;d3.isoFormat=Yt;d3.isoParse=Zt;d3.now=Rc;d3.timer=Fe;d3.timerFlush=ij;d3.timeout=yg;d3.interval=function(m,E,O){var M=new Ad,N=E;if(null==E)return M.restart(m,E,O),M;E=+E;O=null==O?Rc():+O;M.restart(function W(ba){ba+=N;M.restart(W,N+=E,O);m(ba)},E,O);return M};d3.transition=lj;d3.active=function(m,E){var O=m.__transition,M,N;if(O)for(N in E=
null==E?null:E+"",O)if(1<(M=O[N]).state&&M.name===E)return new Vb([[m]],jt,E,+N);return null};d3.interrupt=Bc;d3.voronoi=function(){function m(N){return new ci(N.map(function(V,ba){var W=[Math.round(E(V,ba,N)/cb)*cb,Math.round(O(V,ba,N)/cb)*cb];W.index=ba;W.data=V;return W}),M)}var E=Ds,O=Es,M=null;m.polygons=function(N){return m(N).polygons()};m.links=function(N){return m(N).links()};m.triangles=function(N){return m(N).triangles()};m.x=function(N){return arguments.length?(E="function"===typeof N?
N:lm(+N),m):E};m.y=function(N){return arguments.length?(O="function"===typeof N?N:lm(+N),m):O};m.extent=function(N){return arguments.length?(M=null==N?null:[[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]],m):M&&[[M[0][0],M[0][1]],[M[1][0],M[1][1]]]};m.size=function(N){return arguments.length?(M=null==N?null:[[0,0],[+N[0],+N[1]]],m):M&&[M[1][0]-M[0][0],M[1][1]-M[0][1]]};return m};d3.zoom=function(){function m(sa){sa.property("__zoom",tm).on("wheel.zoom",W).on("mousedown.zoom",aa).on("dblclick.zoom",ea).filter(na).on("touchstart.zoom",
pa).on("touchmove.zoom",ta).on("touchend.zoom touchcancel.zoom",ca).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(sa,Fa){Fa=Math.max(Aa[0],Math.min(Aa[1],Fa));return Fa===sa.k?sa:new ic(Fa,sa.x,sa.y)}function O(sa,Fa,Oa){var Ta=Fa[0]-Oa[0]*sa.k;Fa=Fa[1]-Oa[1]*sa.k;return Ta===sa.x&&Fa===sa.y?sa:new ic(sa.k,Ta,Fa)}function M(sa){return[(+sa[0][0]+ +sa[1][0])/2,(+sa[0][1]+ +sa[1][1])/2]}function N(sa,Fa,Oa){sa.on("start.zoom",function(){V(this,arguments).start()}).on("interrupt.zoom end.zoom",
function(){V(this,arguments).end()}).tween("zoom",function(){var Ta=arguments,$a=V(this,Ta),Wa=fa.apply(this,Ta),ib=Oa||M(Wa),Mb=Math.max(Wa[1][0]-Wa[0][0],Wa[1][1]-Wa[0][1]);Wa=this.__zoom;var xi="function"===typeof Fa?Fa.apply(this,Ta):Fa,gv=Ha(Wa.invert(ib).concat(Mb/Wa.k),xi.invert(ib).concat(Mb/xi.k));return function(jc){if(1===jc)jc=xi;else{jc=gv(jc);var yi=Mb/jc[2];jc=new ic(yi,ib[0]-jc[0]*yi,ib[1]-jc[1]*yi)}$a.zoom(null,jc)}})}function V(sa,Fa){for(var Oa=0,Ta=Ga.length,$a;Oa<Ta;++Oa)if(($a=
Ga[Oa]).that===sa)return $a;return new ba(sa,Fa)}function ba(sa,Fa){this.that=sa;this.args=Fa;this.index=-1;this.active=0;this.extent=fa.apply(sa,Fa)}function W(){if(la.apply(this,arguments)){var sa=V(this,arguments),Fa=this.__zoom,Oa=Math.max(Aa[0],Math.min(Aa[1],Fa.k*Math.pow(2,va.apply(this,arguments)))),Ta=kc(this);if(sa.wheel){if(sa.mouse[0][0]!==Ta[0]||sa.mouse[0][1]!==Ta[1])sa.mouse[1]=Fa.invert(sa.mouse[0]=Ta);clearTimeout(sa.wheel)}else{if(Fa.k===Oa)return;sa.mouse=[Ta,Fa.invert(Ta)];Bc(this);
sa.start()}ne();sa.wheel=setTimeout(function(){sa.wheel=null;sa.end()},150);sa.zoom("mouse",ma(O(E(Fa,Oa),sa.mouse[0],sa.mouse[1]),sa.extent,Ca))}}function aa(){if(!Va&&la.apply(this,arguments)){var sa=V(this,arguments),Fa=Cb(d3.event.view).on("mousemove.zoom",function(){ne();if(!sa.moved){var Wa=d3.event.clientX-Ta,ib=d3.event.clientY-$a;sa.moved=Wa*Wa+ib*ib>Za}sa.zoom("mouse",ma(O(sa.that.__zoom,sa.mouse[0]=kc(sa.that),sa.mouse[1]),sa.extent,Ca))},!0).on("mouseup.zoom",function(){Fa.on("mousemove.zoom mouseup.zoom",
null);xe(d3.event.view,sa.moved);ne();sa.end()},!0),Oa=kc(this),Ta=d3.event.clientX,$a=d3.event.clientY;we(d3.event.view);d3.event.stopImmediatePropagation();sa.mouse=[Oa,this.__zoom.invert(Oa)];Bc(this);sa.start()}}function ea(){if(la.apply(this,arguments)){var sa=this.__zoom,Fa=kc(this),Oa=sa.invert(Fa);sa=ma(O(E(sa,sa.k*(d3.event.shiftKey?.5:2)),Fa,Oa),fa.apply(this,arguments),Ca);ne();0<za?Cb(this).transition().duration(za).call(N,sa,Fa):Cb(this).call(m.transform,sa)}}function pa(){if(la.apply(this,
arguments)){var sa=V(this,arguments),Fa=d3.event.changedTouches,Oa=Fa.length,Ta;d3.event.stopImmediatePropagation();for(Ta=0;Ta<Oa;++Ta){var $a=Fa[Ta];var Wa=ve(this,Fa,$a.identifier);Wa=[Wa,this.__zoom.invert(Wa),$a.identifier];if(sa.touch0)sa.touch1||(sa.touch1=Wa);else{sa.touch0=Wa;var ib=!0}}if(Na&&(Na=clearTimeout(Na),!sa.touch1)){sa.end();(Wa=Cb(this).on("dblclick.zoom"))&&Wa.apply(this,arguments);return}ib&&(Na=setTimeout(function(){Na=null},500),Bc(this),sa.start())}}function ta(){var sa=
V(this,arguments),Fa=d3.event.changedTouches,Oa=Fa.length,Ta;ne();Na&&(Na=clearTimeout(Na));for(Ta=0;Ta<Oa;++Ta){var $a=Fa[Ta];var Wa=ve(this,Fa,$a.identifier);sa.touch0&&sa.touch0[2]===$a.identifier?sa.touch0[0]=Wa:sa.touch1&&sa.touch1[2]===$a.identifier&&(sa.touch1[0]=Wa)}$a=sa.that.__zoom;if(sa.touch1){Wa=sa.touch0[0];Fa=sa.touch0[1];Ta=sa.touch1[0];Oa=sa.touch1[1];var ib=(ib=Ta[0]-Wa[0])*ib+(ib=Ta[1]-Wa[1])*ib;var Mb=(Mb=Oa[0]-Fa[0])*Mb+(Mb=Oa[1]-Fa[1])*Mb;$a=E($a,Math.sqrt(ib/Mb));Wa=[(Wa[0]+
Ta[0])/2,(Wa[1]+Ta[1])/2];ib=[(Fa[0]+Oa[0])/2,(Fa[1]+Oa[1])/2]}else if(sa.touch0)Wa=sa.touch0[0],ib=sa.touch0[1];else return;sa.zoom("touch",ma(O($a,Wa,ib),sa.extent,Ca))}function ca(){var sa=V(this,arguments),Fa=d3.event.changedTouches,Oa=Fa.length,Ta;d3.event.stopImmediatePropagation();Va&&clearTimeout(Va);Va=setTimeout(function(){Va=null},500);for(Ta=0;Ta<Oa;++Ta){var $a=Fa[Ta];sa.touch0&&sa.touch0[2]===$a.identifier?delete sa.touch0:sa.touch1&&sa.touch1[2]===$a.identifier&&delete sa.touch1}sa.touch1&&
!sa.touch0&&(sa.touch0=sa.touch1,delete sa.touch1);sa.touch0?sa.touch0[1]=this.__zoom.invert(sa.touch0[0]):sa.end()}var la=Os,fa=Ps,ma=Ss,va=Qs,na=Rs,Aa=[0,Infinity],Ca=[[-Infinity,-Infinity],[Infinity,Infinity]],za=250,Ha=dj,Ga=[],Qa=Ea("start","zoom","end"),Na,Va,Za=0;m.transform=function(sa,Fa){var Oa=sa.selection?sa.selection():sa;Oa.property("__zoom",tm);sa!==Oa?N(sa,Fa):Oa.interrupt().each(function(){V(this,arguments).start().zoom(null,"function"===typeof Fa?Fa.apply(this,arguments):Fa).end()})};
m.scaleBy=function(sa,Fa){m.scaleTo(sa,function(){var Oa=this.__zoom.k,Ta="function"===typeof Fa?Fa.apply(this,arguments):Fa;return Oa*Ta})};m.scaleTo=function(sa,Fa){m.transform(sa,function(){var Oa=fa.apply(this,arguments),Ta=this.__zoom,$a=M(Oa),Wa=Ta.invert($a),ib="function"===typeof Fa?Fa.apply(this,arguments):Fa;return ma(O(E(Ta,ib),$a,Wa),Oa,Ca)})};m.translateBy=function(sa,Fa,Oa){m.transform(sa,function(){return ma(this.__zoom.translate("function"===typeof Fa?Fa.apply(this,arguments):Fa,"function"===
typeof Oa?Oa.apply(this,arguments):Oa),fa.apply(this,arguments),Ca)})};m.translateTo=function(sa,Fa,Oa){m.transform(sa,function(){var Ta=fa.apply(this,arguments),$a=this.__zoom,Wa=M(Ta);return ma(Qf.translate(Wa[0],Wa[1]).scale($a.k).translate("function"===typeof Fa?-Fa.apply(this,arguments):-Fa,"function"===typeof Oa?-Oa.apply(this,arguments):-Oa),Ta,Ca)})};ba.prototype={start:function(){1===++this.active&&(this.index=Ga.push(this)-1,this.emit("start"));return this},zoom:function(sa,Fa){this.mouse&&
"mouse"!==sa&&(this.mouse[1]=Fa.invert(this.mouse[0]));this.touch0&&"touch"!==sa&&(this.touch0[1]=Fa.invert(this.touch0[0]));this.touch1&&"touch"!==sa&&(this.touch1[1]=Fa.invert(this.touch1[0]));this.that.__zoom=Fa;this.emit("zoom");return this},end:function(){0===--this.active&&(Ga.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(sa){ud(new Ns(m,sa,this.that.__zoom),Qa.apply,Qa,[sa,this.that,this.args])}};m.wheelDelta=function(sa){return arguments.length?(va="function"===
typeof sa?sa:Pf(+sa),m):va};m.filter=function(sa){return arguments.length?(la="function"===typeof sa?sa:Pf(!!sa),m):la};m.touchable=function(sa){return arguments.length?(na="function"===typeof sa?sa:Pf(!!sa),m):na};m.extent=function(sa){return arguments.length?(fa="function"===typeof sa?sa:Pf([[+sa[0][0],+sa[0][1]],[+sa[1][0],+sa[1][1]]]),m):fa};m.scaleExtent=function(sa){return arguments.length?(Aa[0]=+sa[0],Aa[1]=+sa[1],m):[Aa[0],Aa[1]]};m.translateExtent=function(sa){return arguments.length?(Ca[0][0]=
+sa[0][0],Ca[1][0]=+sa[1][0],Ca[0][1]=+sa[0][1],Ca[1][1]=+sa[1][1],m):[[Ca[0][0],Ca[0][1]],[Ca[1][0],Ca[1][1]]]};m.constrain=function(sa){return arguments.length?(ma=sa,m):ma};m.duration=function(sa){return arguments.length?(za=+sa,m):za};m.interpolate=function(sa){return arguments.length?(Ha=sa,m):Ha};m.on=function(){var sa=Qa.on.apply(Qa,arguments);return sa===Qa?m:sa};m.clickDistance=function(sa){return arguments.length?(Za=(sa=+sa)*sa,m):Math.sqrt(Za)};return m};d3.zoomTransform=sm;d3.zoomIdentity=
Qf;Eb.svg=Eb.svg;Eb.xhtml=Eb.xhtml;Eb.xlink=Eb.xlink;Eb.xml=Eb.xml;Eb.xmlns=Eb.xmlns})();/*

The MIT License (MIT)

Copyright (c) 2014-2017 Palantir Technologies, Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 MIT
 MIT
 @fileoverview Implements the Signature API to help in comparing when two
 Plottable objects have "changed".

 Memoization in Plottable is complicated by mutable scales and datasets. We cannot simply
 reference compare two e.g. scales since it may have internally mutated. To resolve this,
 we write a recursive Signature interface that holds an immutable snapshot of whatever
 state the scale/data was in at the time. Then on memoized function invocation we sign the
 new inputs and compare the signatures to decide if we should recompute.

 We must hand-write a signature for each custom class we wish to support.
 MIT

 @fileoverview manually add d3-selection-multi to d3 default bundle. Most of this code is
 copied from d3-selection-multi@1.0.0.
 See https://github.com/d3/d3-selection-multi/issues/11 for why we have to do this
 MIT
 @fileoverview Implements a convenient thunk function to handle the common case
 of creating a memoized function that takes its inputs from mutable class properties.
 MIT
 @fileoverview Implements a function memoizer using the Signature API.
 Plottable 3.7.0 (https://github.com/palantir/plottable)
 Copyright 2014-2017 Palantir Technologies
 Licensed under MIT (https://github.com/palantir/plottable/blob/master/LICENSE)
 is-plain-object <https://github.com/jonschlinkert/is-plain-object>

 Copyright (c) 2014-2017, Jon Schlinkert.
 Released under the MIT License.
 isobject <https://github.com/jonschlinkert/isobject>

 Copyright (c) 2014-2017, Jon Schlinkert.
 Released under the MIT License.
*/
var Plottable=function(se){return function(I){function H(J){if(D[J])return D[J].exports;var w=D[J]={i:J,l:!1,exports:{}};I[J].call(w.exports,w,w.exports,H);w.l=!0;return w.exports}var D={};H.m=I;H.c=D;H.i=function(J){return J};H.d=function(J,w,p){H.o(J,w)||Object.defineProperty(J,w,{configurable:!1,enumerable:!0,get:p})};H.n=function(J){var w=J&&J.__esModule?function(){return J["default"]}:function(){return J};H.d(w,"a",w);return w};H.o=function(J,w){return Object.prototype.hasOwnProperty.call(J,
w)};H.p="";return H(H.s=140)}([function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}I=D(107);H.Array=I;I=D(110);H.Color=I;I=D(55);H.DOM=I;I=D(56);H.Math=I;I=D(113);H.Object=I;I=D(57);H.RTree=I;I=D(115);H.Stacking=I;I=D(35);H.Window=I;J(D(108));J(D(109));J(D(12));J(D(111));J(D(112));J(D(58));J(D(116))},function(I,H){I.exports=se},function(I,H,D){function J(K,C,y){var L=C.accessor;C=C.scale;if(null==C)return[];var U=K.data();null!=y&&(U=U.filter(function(X,S){return y(X,S,K)}));
U=U.map(function(X,S){return L(X,S,K)});return C.extentOfValues(U)}var w=this&&this.__extends||function(K,C){function y(){this.constructor=K}for(var L in C)C.hasOwnProperty(L)&&(K[L]=C[L]);K.prototype=null===C?Object.create(C):(y.prototype=C.prototype,new y)},p=D(1),k=D(7);I=D(4);var e=D(18),d=D(6),h=D(9),g=D(20),n=D(0),r=D(12),q=D(10),v=D(51),B=D(52);H.Renderer=q.makeEnum(["svg","canvas"]);I=function(K){function C(){var y=K.call(this)||this;y._dataChanged=!1;y._attrExtents={};y._animate=!1;y._animators=
{};y._propertyExtents={};y._resetEntityStore=function(){y._cachedEntityStore=void 0};y._overflowHidden=!0;y.addClass("plot");y._datasetToDrawer=new n.Map;y._attrBindings=p.map();y._includedValuesProvider=function(U,X){return y._includedValuesForScale(U,X)};y._renderCallback=function(){return y.render()};y._onDatasetUpdateCallback=function(){return y._onDatasetUpdate()};y._propertyBindings=p.map();var L=(new k.Easing).maxTotalDuration(C._ANIMATION_MAX_DURATION);y.animator(v.Animator.MAIN,L);y.animator(v.Animator.RESET,
new k.Null);y._deferredResetEntityStore=n.Window.debounce(B.DeferredRenderer.DEFERRED_RENDERING_DELAY,y._resetEntityStore);return y}w(C,K);C.getTotalDrawTime=function(y,L){return L.reduce(function(U,X){return U+X.animator.totalTime(y.length)},0)};C.applyDrawSteps=function(y,L){return y.map(function(U){var X=U.attrToProjector,S={};Object.keys(X).forEach(function(Y){S[Y]=function(ha,ia){return X[Y](ha,ia,L)}});return{attrToAppliedProjector:S,animator:U.animator}})};C.prototype.anchor=function(y){y=
r.coerceExternalD3(y);K.prototype.anchor.call(this,y);this._dataChanged=!0;this._resetEntityStore();this._updateExtents();return this};C.prototype._setup=function(){var y=this;this._isSetup||(K.prototype._setup.call(this),null!=this._canvas&&this._appendCanvasNode(),this._renderArea=this.content().append("g").classed("render-area",!0),this.datasets().forEach(function(L){return y._createNodesForDataset(L)}))};C.prototype._appendCanvasNode=function(){var y=this.element().select(".plot-canvas-container");
y.empty()&&(y=this.element().append("div").classed("plot-canvas-container",!0),y.node().appendChild(this._canvas.node()))};C.prototype.setBounds=function(y,L,U,X){K.prototype.setBounds.call(this,y,L,U,X);this._resetEntityStore();null!=this._canvas&&(this._bufferCanvas&&!this._bufferCanvasValid&&(this._bufferCanvas.attr("width",this._canvas.attr("width")),this._bufferCanvas.attr("height",this._canvas.attr("height")),(U=this._bufferCanvas.node().getContext("2d"))&&U.drawImage(this._canvas.node(),0,
0),this._bufferCanvasValid=!0),U=null!=window.devicePixelRatio?window.devicePixelRatio:1,this._canvas.attr("width",y*U),this._canvas.attr("height",L*U),X=this._canvas.node().getContext("2d"))&&(X.setTransform(U,0,0,U,0,0),this._bufferCanvas&&X.drawImage(this._bufferCanvas.node(),0,0,y,L));return this};C.prototype.destroy=function(){var y=this;K.prototype.destroy.call(this);this._scales().forEach(function(L){return L.offUpdate(y._renderCallback)});this.datasets([])};C.prototype._createNodesForDataset=
function(y){y=this._datasetToDrawer.get(y);"svg"===this.renderer()?y.useSVG(this._renderArea):y.useCanvas(this._canvas);return y};C.prototype._createDrawer=function(y){return new d.ProxyDrawer(function(){return new h.SVGDrawer("path","")},function(L){return new e.CanvasDrawer(L,function(){})})};C.prototype._getAnimator=function(y){return this._animateOnNextRender()?this._animators[y]||new k.Null:new k.Null};C.prototype._onDatasetUpdate=function(){this._updateExtents();this._dataChanged=!0;this._resetEntityStore();
this.renderLowPriority()};C.prototype.attr=function(y,L,U){if(null==L)return this._attrBindings.get(y);this._bindAttr(y,L,U);this.render();return this};C.prototype._bindProperty=function(y,L,U,X){var S=this._propertyBindings.get(y);S=null!=S?S.scale:null;this._propertyBindings.set(y,{accessor:"function"===typeof L?L:function(){return L},scale:U,postScale:X});null!=S&&this._uninstallScaleForKey(S,y);null!=U&&this._installScaleForKey(U,y);this._clearAttrToProjectorCache()};C.prototype._bindAttr=function(y,
L,U){var X=this._attrBindings.get(y);X=null!=X?X.scale:null;this._attrBindings.set(y,{accessor:"function"===typeof L?L:function(){return L},scale:U});null!=X&&this._uninstallScaleForKey(X,y);null!=U&&this._installScaleForKey(U,y);this._clearAttrToProjectorCache()};C.prototype._clearAttrToProjectorCache=function(){delete this._cachedAttrToProjector};C.prototype._getAttrToProjector=function(){null==this._cachedAttrToProjector&&(this._cachedAttrToProjector=this._generateAttrToProjector());return n.Object.assign({},
this._cachedAttrToProjector)};C.prototype._generateAttrToProjector=function(){var y={};this._attrBindings.each(function(U,X){y[X]=C._scaledAccessor(U)});var L=this._propertyProjectors();Object.keys(L).forEach(function(U){null==y[U]&&(y[U]=L[U])});return y};C.prototype.renderImmediately=function(){K.prototype.renderImmediately.call(this);this._isAnchored&&(this._paint(),this._dataChanged=!1);return this};C.prototype.renderLowPriority=function(){this._renderCallback();return this};C.prototype.animated=
function(y){if(null==y)return this._animate;this._animate=y;return this};C.prototype.detach=function(){K.prototype.detach.call(this);this._updateExtents();return this};C.prototype._scales=function(){var y=[];this._attrBindings.each(function(L,U){L=L.scale;null!=L&&-1===y.indexOf(L)&&y.push(L)});this._propertyBindings.each(function(L,U){L=L.scale;null!=L&&-1===y.indexOf(L)&&y.push(L)});return y};C.prototype._updateExtents=function(){var y=this;this._resetEntityStore();this._scales().forEach(function(L){return L.addIncludedValuesProvider(y._includedValuesProvider)})};
C.prototype._filterForProperty=function(y){return null};C.prototype.getExtentsForAttr=function(y){var L=this;if(null==this._attrExtents[y]){var U=g.memThunk(function(){return L.datasets()},function(){return L._attrBindings.get(y)},function(X,S){return null==S||null==S.accessor?null:X.map(function(Y){return J(Y,S,null)})});this._attrExtents[y]=U}return this._attrExtents[y]()};C.prototype.getExtentsForProperty=function(y){var L=this;if(null==this._propertyExtents[y]){var U=g.memThunk(function(){return L.datasets()},
function(){return L._propertyBindings.get(y)},function(){return L._filterForProperty(y)},function(X,S,Y){return null==S||null==S.accessor?null:X.map(function(ha){return J(ha,S,Y)})});this._propertyExtents[y]=U}return this._propertyExtents[y]()};C.prototype._includedValuesForScale=function(y,L){var U=this;if(!this._isAnchored&&!L)return[];var X=[];this._attrBindings.each(function(S,Y){S.scale===y&&(S=U.getExtentsForAttr(Y),null!=S&&(X=X.concat(p.merge(S))))});this._propertyBindings.each(function(S,
Y){S.scale===y&&(S=U.getExtentsForProperty(Y),null!=S&&(X=X.concat(p.merge(S))))});return X};C.prototype.animator=function(y,L){if(void 0===L)return this._animators[y];this._animators[y]=L;return this};C.prototype.renderer=function(y){var L=this;if(void 0===y)return null==this._canvas?"svg":"canvas";null==this._canvas&&"canvas"===y?(this._canvas=p.select(document.createElement("canvas")).classed("plot-canvas",!0),this._bufferCanvas=p.select(document.createElement("canvas")),null!=this.element()&&
this._appendCanvasNode(),this._datasetToDrawer.forEach(function(U){U.useCanvas(L._canvas)}),this.render()):null!=this._canvas&&"svg"==y&&(this._canvas.remove(),this._bufferCanvas=this._canvas=null,this._datasetToDrawer.forEach(function(U){U.useSVG(L._renderArea)}),this.render());return this};C.prototype.addDataset=function(y){this._addDataset(y);this._onDatasetUpdate();return this};C.prototype._addDataset=function(y){this._removeDataset(y);var L=this._createDrawer(y);this._datasetToDrawer.set(y,L);
this._isSetup&&this._createNodesForDataset(y);y.onUpdate(this._onDatasetUpdateCallback);return this};C.prototype.removeDataset=function(y){this._removeDataset(y);this._onDatasetUpdate();return this};C.prototype._removeDataset=function(y){if(-1===this.datasets().indexOf(y))return this;this._removeDatasetNodes(y);y.offUpdate(this._onDatasetUpdateCallback);this._datasetToDrawer.delete(y);return this};C.prototype._removeDatasetNodes=function(y){this._datasetToDrawer.get(y).remove()};C.prototype.datasets=
function(y){var L=this,U=[];this._datasetToDrawer.forEach(function(X,S){return U.push(S)});if(null==y)return U;U.forEach(function(X){return L._removeDataset(X)});y.forEach(function(X){return L._addDataset(X)});this._onDatasetUpdate();return this};C.prototype._generateDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:new k.Null}]};C.prototype._additionalPaint=function(y){};C.prototype._buildLightweightPlotEntities=function(y){var L=this,U=[];y.forEach(function(X,S){var Y=
L._datasetToDrawer.get(X),ha=0;X.data().forEach(function(ia,wa){var Ba=L._pixelPoint(ia,wa,X);n.Math.isNaN(Ba.x)||n.Math.isNaN(Ba.y)||(U.push({datum:ia,get position(){return L._pixelPoint.call(L,ia,wa,X)},index:wa,dataset:X,datasetIndex:S,component:L,drawer:Y,validDatumIndex:ha}),ha++)})});return U};C.prototype._getDataToDraw=function(){var y=new n.Map;this.datasets().forEach(function(L){return y.set(L,L.data())});return y};C.prototype._paint=function(){var y=this;delete this._cachedAttrToProjector;
var L=this._generateDrawSteps(),U=this._getDataToDraw(),X=this.datasets().map(function(Y){return y._datasetToDrawer.get(Y)});if("canvas"===this.renderer()){var S=this._canvas.node();S.getContext("2d").clearRect(0,0,S.clientWidth,S.clientHeight);this._bufferCanvasValid=!1}this.datasets().forEach(function(Y,ha){var ia=C.applyDrawSteps(L,Y);X[ha].draw(U.get(Y),ia)});S=this.datasets().map(function(Y,ha){return C.getTotalDrawTime(U.get(Y),L)});S=n.Math.max(S,0);this._additionalPaint(S)};C.prototype.selections=
function(y){var L=this;void 0===y&&(y=this.datasets());if("canvas"===this.renderer())return p.selectAll();var U=[];y.forEach(function(X){X=L._datasetToDrawer.get(X);null!=X&&(X=X.getVisualPrimitives(),U.push.apply(U,X))});return p.selectAll(U)};C.prototype.entities=function(y){var L=this;return this._getEntityStore(y).entities().map(function(U){return L._lightweightPlotEntityToPlotEntity(U)})};C.prototype._getEntityStore=function(y){function L(S){return U._entityBounds(S)}var U=this;if(void 0!==y){var X=
new n.EntityStore;X.addAll(this._buildLightweightPlotEntities(y),L,this._localOriginBounds());return X}void 0===this._cachedEntityStore&&(X=new n.EntityStore,X.addAll(this._buildLightweightPlotEntities(this.datasets()),L,this._localOriginBounds()),this._cachedEntityStore=X);return this._cachedEntityStore};C.prototype._localOriginBounds=function(){return{topLeft:{x:0,y:0},bottomRight:{x:this.width(),y:this.height()}}};C.prototype._entityBounds=function(y){var L=this._pixelPoint(y.datum,y.index,y.dataset);
return{x:L.x,y:L.y,width:0,height:0}};C.prototype._lightweightPlotEntityToPlotEntity=function(y){return{bounds:this._entityBounds(y),component:y.component,dataset:y.dataset,datasetIndex:y.datasetIndex,datum:y.datum,index:y.index,position:y.position,selection:p.select(y.drawer.getVisualPrimitives()[y.validDatumIndex])}};C.prototype.entitiesAt=function(y){throw Error("plots must implement entitiesAt");};C.prototype.entityNearest=function(y){y=this._getEntityStore().entityNearest(y);return void 0===
y?void 0:this._lightweightPlotEntityToPlotEntity(y)};C.prototype.entitiesIn=function(y,L){return this.entitiesInBounds(null==L?{x:y.topLeft.x,y:y.topLeft.y,width:y.bottomRight.x-y.topLeft.x,height:y.bottomRight.y-y.topLeft.y}:{x:y.min,y:L.min,width:y.max-y.min,height:L.max-L.min})};C.prototype.entitiesInBounds=function(y){var L=this;if(y=this._getEntityStore().entitiesInBounds(y))return y.map(function(U){return L._lightweightPlotEntityToPlotEntity(U)})};C.prototype.entitiesInXBounds=function(y){var L=
this;if(y=this._getEntityStore().entitiesInXBounds(y))return y.map(function(U){return L._lightweightPlotEntityToPlotEntity(U)})};C.prototype.entitiesInYBounds=function(y){var L=this;if(y=this._getEntityStore().entitiesInYBounds(y))return y.map(function(U){return L._lightweightPlotEntityToPlotEntity(U)})};C.prototype._uninstallScaleForKey=function(y,L){y.offUpdate(this._renderCallback);y.offUpdate(this._deferredResetEntityStore);y.removeIncludedValuesProvider(this._includedValuesProvider)};C.prototype._installScaleForKey=
function(y,L){y.onUpdate(this._renderCallback);y.onUpdate(this._deferredResetEntityStore);y.addIncludedValuesProvider(this._includedValuesProvider)};C.prototype._propertyProjectors=function(){return{}};C._scaledAccessor=function(y){var L=y.scale,U=y.accessor,X=y.postScale,S=null==L?U:function(Y,ha,ia){return L.scale(U(Y,ha,ia))};return null==X?S:function(Y,ha,ia){return X(S(Y,ha,ia),Y,ha,ia)}};C.prototype._pixelPoint=function(y,L,U){return{x:0,y:0}};C.prototype._animateOnNextRender=function(){return this._animate&&
this._dataChanged};return C}(I.Component);I._ANIMATION_MAX_DURATION=600;H.Plot=I},function(I,H,D){function J(k){for(var e in k)H.hasOwnProperty(e)||(H[e]=k[e])}I=D(105);H.TickGenerators=I;J(D(54));J(D(101));J(D(102));J(D(103));J(D(104));J(D(106));var w=D(54),p=D(11);H.isTransformable=function(k){return k instanceof p.QuantitativeScale||k instanceof w.Category}},function(I,H,D){var J=D(1),w=D(30),p=D(0),k=D(12);I=D(10);H.XAlignment=I.makeEnum(["left","center","right"]);H.YAlignment=I.makeEnum(["top",
"center","bottom"]);I=function(){function e(){this._overflowHidden=!1;this._origin={x:0,y:0};this._xAlignment="left";this._yAlignment="top";this._isAnchored=this._isSetup=!1;this._cssClasses=new p.Set;this._destroyed=!1;this._onAnchorCallbacks=new p.CallbackSet;this._onDetachCallbacks=new p.CallbackSet;this._cssClasses.add("component")}e.prototype.anchor=function(d){d=k.coerceExternalD3(d);if(this._destroyed)throw Error("Can't reuse destroy()-ed Components!");this.isRoot()&&(this._rootElement=d,this._rootElement.classed("plottable",
!0));null!=this._element?d.node().appendChild(this._element.node()):(this._element=d.append("div"),this._setup());this._isAnchored=!0;this._onAnchorCallbacks.callCallbacks(this);return this};e.prototype.onAnchor=function(d){this._isAnchored&&d(this);this._onAnchorCallbacks.add(d);return this};e.prototype.offAnchor=function(d){this._onAnchorCallbacks.delete(d);return this};e.prototype._setup=function(){var d=this;this._isSetup||(this._cssClasses.forEach(function(h){d._element.classed(h,!0)}),this._cssClasses=
new p.Set,this._backgroundContainer=this._element.append("svg").classed("background-container",!0),this._content=this._element.append("svg").classed("content",!0),this._foregroundContainer=this._element.append("svg").classed("foreground-container",!0),this._overflowHidden?this._content.classed("component-overflow-hidden",!0):this._content.classed("component-overflow-visible",!0),this._isSetup=!0)};e.prototype.requestedSpace=function(d,h){return{minWidth:0,minHeight:0}};e.prototype.computeLayout=function(d,
h,g){if(null==d||null==h||null==g){if(null==this._element)throw Error("anchor() must be called before computeLayout()");if(null!=this._rootElement)d={x:0,y:0},g=this._rootElement.node(),h=p.DOM.elementWidth(g),g=p.DOM.elementHeight(g);else throw Error("null arguments cannot be passed to computeLayout() on a non-root, unanchored node");}var n=this._sizeFromOffer(h,g),r=n.height,q=n.width;this.setBounds(q,r,d.x+(h-q)*e._xAlignToProportion[this._xAlignment],d.y+(g-r)*e._yAlignToProportion[this._yAlignment]);
return this};e.prototype.setBounds=function(d,h,g,n){void 0===g&&(g=0);void 0===n&&(n=0);this._width=d;this._height=h;this._origin={x:g,y:n};null!=this._element&&this._element.styles({left:g+"px",height:h+"px",top:n+"px",width:d+"px"});null!=this._resizeHandler&&this._resizeHandler({width:d,height:h});return this};e.prototype._sizeFromOffer=function(d,h){var g=this.requestedSpace(d,h);return{width:this.fixedWidth()?Math.min(d,g.minWidth):d,height:this.fixedHeight()?Math.min(h,g.minHeight):h}};e.prototype.render=
function(){this._isAnchored&&this._isSetup&&0<=this.width()&&0<=this.height()&&w.registerToRender(this);return this};e.prototype.renderLowPriority=function(){return this.render()};e.prototype._scheduleComputeLayout=function(){this._isAnchored&&this._isSetup&&w.registerToComputeLayoutAndRender(this)};e.prototype.onResize=function(d){this._resizeHandler=d;return this};e.prototype.renderImmediately=function(){return this};e.prototype.redraw=function(){this._isAnchored&&this._isSetup&&(this.isRoot()?
this._scheduleComputeLayout():this.parent().redraw());return this};e.prototype.invalidateCache=function(){};e.prototype.renderTo=function(d){this.detach();if(null!=d){d="string"===typeof d?J.select(d):d instanceof Element?J.select(d):k.coerceExternalD3(d);if(!d.node()||null==d.node().nodeName)throw Error("Plottable requires a valid Element to renderTo");if("svg"===d.node().nodeName)throw Error("Plottable 3.x and later can only renderTo an HTML component; pass a div instead!");this.anchor(d)}if(null==
this._element)throw Error("If a Component has never been rendered before, then renderTo must be given a node to render to, or a d3.Selection, or a selector string");w.registerToComputeLayoutAndRender(this);w.flush();return this};e.prototype.xAlignment=function(d){if(null==d)return this._xAlignment;d=d.toLowerCase();if(null==e._xAlignToProportion[d])throw Error("Unsupported alignment: "+d);this._xAlignment=d;this.redraw();return this};e.prototype.yAlignment=function(d){if(null==d)return this._yAlignment;
d=d.toLowerCase();if(null==e._yAlignToProportion[d])throw Error("Unsupported alignment: "+d);this._yAlignment=d;this.redraw();return this};e.prototype.hasClass=function(d){return null==d?!1:null==this._element?this._cssClasses.has(d):this._element.classed(d)};e.prototype.addClass=function(d){if(null==d)return this;null==this._element?this._cssClasses.add(d):this._element.classed(d,!0);return this};e.prototype.removeClass=function(d){if(null==d)return this;null==this._element?this._cssClasses.delete(d):
this._element.classed(d,!1);return this};e.prototype.fixedWidth=function(){return!1};e.prototype.fixedHeight=function(){return!1};e.prototype.detach=function(){this.parent(null);this._isAnchored&&this._element.remove();this._isAnchored=!1;this._onDetachCallbacks.callCallbacks(this);return this};e.prototype.onDetach=function(d){this._onDetachCallbacks.add(d);return this};e.prototype.offDetach=function(d){this._onDetachCallbacks.delete(d);return this};e.prototype.parent=function(d){if(void 0===d)return this._parent;
if(null!==d&&!d.has(this))throw Error("Passed invalid parent");this._parent=d;return this};e.prototype.bounds=function(){var d=this.origin();return{topLeft:d,bottomRight:{x:d.x+this.width(),y:d.y+this.height()}}};e.prototype.destroy=function(){this._destroyed=!0;this.detach()};e.prototype.width=function(){return this._width};e.prototype.height=function(){return this._height};e.prototype.origin=function(){return{x:this._origin.x,y:this._origin.y}};e.prototype.originToRoot=function(){for(var d=this.origin(),
h=this.parent();null!=h;){var g=h.origin();d.x+=g.x;d.y+=g.y;h=h.parent()}return d};e.prototype.root=function(){for(var d=this;!d.isRoot();)d=d.parent();return d};e.prototype.isRoot=function(){return null==this.parent()};e.prototype.foreground=function(){return this._foregroundContainer};e.prototype.content=function(){return this._content};e.prototype.element=function(){return this._element};e.prototype.rootElement=function(){return this.root()._rootElement};e.prototype.background=function(){return this._backgroundContainer};
return e}();I._xAlignToProportion={left:0,center:.5,right:1};I._yAlignToProportion={top:0,center:.5,bottom:1};H.Component=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(59));J(D(62));J(D(133));J(D(21));J(D(64));J(D(66))},function(I,H,D){I=function(){function J(w,p){this._svgDrawerFactory=w;this._canvasDrawerFactory=p}J.prototype.useSVG=function(w){null!=this._currentDrawer&&this._currentDrawer.remove();var p=this._svgDrawerFactory();p.attachTo(w);this._currentDrawer=
p};J.prototype.useCanvas=function(w){null!=this._currentDrawer&&this._currentDrawer.remove();this._currentDrawer=this._canvasDrawerFactory(w.node().getContext("2d"))};J.prototype.getDrawer=function(){return this._currentDrawer};J.prototype.remove=function(){null!=this._currentDrawer&&this._currentDrawer.remove()};J.prototype.draw=function(w,p){this._currentDrawer.draw(w,p)};J.prototype.getVisualPrimitives=function(){return this._currentDrawer.getVisualPrimitives()};J.prototype.getVisualPrimitiveAtIndex=
function(w){return this._currentDrawer.getVisualPrimitiveAtIndex(w)};return J}();H.ProxyDrawer=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(70));J(D(71))},function(I,H,D){function J(k){void 0===k&&(k=3);w(k);return function(e){return e.toFixed(k)}}function w(k){if(0>k||20<k)throw new RangeError("Formatter precision must be between 0 and 20");if(k!==Math.floor(k))throw new RangeError("Formatter precision must be an integer");}var p=D(1);H.currency=function(k,
e,d){void 0===k&&(k=2);void 0===e&&(e="$");void 0===d&&(d=!0);var h=J(k);return function(g){var n=h(Math.abs(g));""!==n&&(n=d?e+n:n+e,0>g&&(n="-"+n));return n}};H.fixed=J;H.general=function(k){void 0===k&&(k=3);w(k);return function(e){if("number"===typeof e){var d=Math.pow(10,k);return String(Math.round(e*d)/d)}return String(e)}};H.identity=function(){return function(k){return String(k)}};H.percentage=function(k){void 0===k&&(k=0);var e=J(k);return function(d){var h=100*d;d=d.toString();d=Math.pow(10,
d.length-(d.indexOf(".")+1));h=parseInt((h*d).toString(),10)/d;return e(h)+"%"}};H.siSuffix=function(k){void 0===k&&(k=3);w(k);return function(e){return p.format("."+k+"s")(e)}};H.shortScale=function(k){void 0===k&&(k=3);w(k);var e=p.format("."+k+"e"),d=p.format("."+k+"f"),h=Math.pow(10,18),g=Math.pow(10,-k);return function(n){var r=Math.abs(n);if((r<g||r>=h)&&0!==r)return e(n);for(var q=-1;r>=Math.pow(1E3,q+2)&&4>q;)q++;r=-1===q?d(n):d(n/Math.pow(1E3,q+1))+"KMBTQ"[q];if(0<n&&"1000"===r.substr(0,
4)||0>n&&"-1000"===r.substr(0,5))4>q?(q++,r=d(n/Math.pow(1E3,q+1))+"KMBTQ"[q]):r=e(n);return r}};H.multiTime=function(){var k=[{specifier:".%L",predicate:function(e){return 0!==e.getMilliseconds()}},{specifier:":%S",predicate:function(e){return 0!==e.getSeconds()}},{specifier:"%I:%M",predicate:function(e){return 0!==e.getMinutes()}},{specifier:"%I %p",predicate:function(e){return 0!==e.getHours()}},{specifier:"%a %d",predicate:function(e){return 0!==e.getDay()&&1!==e.getDate()}},{specifier:"%b %d",
predicate:function(e){return 1!==e.getDate()}},{specifier:"%b",predicate:function(e){return 0!==e.getMonth()}}];return function(e){var d=k.filter(function(h){return h.predicate(e)});return p.timeFormat(0<d.length?d[0].specifier:"%Y")(e)}};H.time=function(k){return p.timeFormat(k)}},function(I,H,D){var J=D(1),w=D(0);I=function(){function p(k,e){this._root=J.select(document.createElementNS("http://www.w3.org/2000/svg","g"));this._className=e;this._svgElementName=k}p.prototype.draw=function(k,e){var d=
this;this._createAndDestroyDOMElements(k);var h=0;e.forEach(function(g,n){w.Window.setTimeout(function(){return d._drawStep(g)},h);h+=g.animator.totalTime(k.length)})};p.prototype.getVisualPrimitives=function(){null==this._cachedVisualPrimitivesNodes&&(this._cachedVisualPrimitivesNodes=this._selection.nodes());return this._cachedVisualPrimitivesNodes};p.prototype.getVisualPrimitiveAtIndex=function(k){return this.getVisualPrimitives()[k]};p.prototype.remove=function(){this._root.remove()};p.prototype.attachTo=
function(k){k.node().appendChild(this._root.node())};p.prototype.getRoot=function(){return this._root};p.prototype.selector=function(){return this._svgElementName};p.prototype._applyDefaultAttributes=function(k){};p.prototype._createAndDestroyDOMElements=function(k){k=k.filter(function(e){return null!=e});k=this._root.selectAll(this.selector()).data(k);this._selection=k.enter().append(this._svgElementName).merge(k);k.exit().remove();this._cachedVisualPrimitivesNodes=null;null!=this._className&&this._selection.classed(this._className,
!0);this._applyDefaultAttributes(this._selection)};p.prototype._drawStep=function(k){var e=this;["fill","stroke"].forEach(function(d){null!=k.attrToAppliedProjector[d]&&e._selection.attr(d,k.attrToAppliedProjector[d])});k.animator.animate(this._selection,k.attrToAppliedProjector);null!=this._className&&this._selection.classed(this._className,!0)};return p}();H.SVGDrawer=I},function(I,H,D){H.makeEnum=function(J){return J.reduce(function(w,p){w[p]=p;return w},{})}},function(I,H,D){var J=this&&this.__extends||
function(e,d){function h(){this.constructor=e}for(var g in d)d.hasOwnProperty(g)&&(e[g]=d[g]);e.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)},w=D(1),p=D(26),k=D(0);I=function(e){function d(){var h=e.call(this)||this;h._tickGenerator=function(g){return g.defaultTicks()};h._padProportion=.05;h._snappingDomainEnabled=!0;h._paddingExceptionsProviders=new k.Set;return h}J(d,e);d.prototype.autoDomain=function(){this._domainMax=this._domainMin=null;e.prototype.autoDomain.call(this);
return this};d.prototype._autoDomainIfAutomaticMode=function(){if(null!=this._domainMin&&null!=this._domainMax)this._setDomain([this._domainMin,this._domainMax]);else{var h=this._getExtent();null!=this._domainMin?(h=h[1],this._domainMin>=h&&(h=this._expandSingleValueDomain([this._domainMin,this._domainMin])[1]),this._setDomain([this._domainMin,h])):null!=this._domainMax?(h=h[0],this._domainMax<=h&&(h=this._expandSingleValueDomain([this._domainMax,this._domainMax])[0]),this._setDomain([h,this._domainMax])):
e.prototype._autoDomainIfAutomaticMode.call(this)}};d.prototype._getUnboundedExtent=function(h){void 0===h&&(h=!1);h=this._getAllIncludedValues(h);var g=this._defaultExtent();0!==h.length&&(h=[k.Math.min(h,g[0]),k.Math.max(h,g[1])],g=this._padDomain(h));return g};d.prototype._getExtent=function(){var h=this._getUnboundedExtent();null!=this._domainMin&&(h[0]=this._domainMin);null!=this._domainMax&&(h[1]=this._domainMax);return h};d.prototype.addPaddingExceptionsProvider=function(h){this._paddingExceptionsProviders.add(h);
this._autoDomainIfAutomaticMode();return this};d.prototype.removePaddingExceptionsProvider=function(h){this._paddingExceptionsProviders.delete(h);this._autoDomainIfAutomaticMode();return this};d.prototype.padProportion=function(h){if(null==h)return this._padProportion;if(0>h)throw Error("padProportion must be non-negative");this._padProportion=h;this._autoDomainIfAutomaticMode();return this};d.prototype._padDomain=function(h){var g=this;if(h[0].valueOf()===h[1].valueOf())return this._expandSingleValueDomain(h);
if(0===this._padProportion)return h;var n=this._padProportion/2,r=h[0],q=h[1],v=!1,B=!1;this._paddingExceptionsProviders.forEach(function(C){C(g).forEach(function(y){y.valueOf()===r.valueOf()&&(v=!0);y.valueOf()===q.valueOf()&&(B=!0)})});var K=this._backingScaleDomain();this._backingScaleDomain(h);h=v?r:this.invert(this.scale(r)-(this.scale(q)-this.scale(r))*n);n=B?q:this.invert(this.scale(q)+(this.scale(q)-this.scale(r))*n);this._backingScaleDomain(K);return this._snappingDomainEnabled?this._niceDomain([h,
n]):[h,n]};d.prototype.snappingDomainEnabled=function(h){if(null==h)return this._snappingDomainEnabled;this._snappingDomainEnabled=h;this._autoDomainIfAutomaticMode();return this};d.prototype._expandSingleValueDomain=function(h){return h};d.prototype.invert=function(h){throw Error("Subclasses should override invert");};d.prototype.domain=function(h){null!=h&&(this._domainMin=h[0],this._domainMax=h[1]);return e.prototype.domain.call(this,h)};d.prototype.domainMin=function(h){if(null==h)return this.domain()[0];
this._domainMin=h;this._autoDomainIfAutomaticMode();return this};d.prototype.domainMax=function(h){if(null==h)return this.domain()[1];this._domainMax=h;this._autoDomainIfAutomaticMode();return this};d.prototype.extentOfValues=function(h){h=w.extent(h.filter(function(g){return k.Math.isValidNumber(+g)}));return null==h[0]||null==h[1]?[]:h};d.prototype.zoom=function(h,g){var n=this;this.domain(this.range().map(function(r){return n.invert(p.zoomOut(r,h,g))}))};d.prototype.pan=function(h){var g=this;
this.domain(this.range().map(function(n){return g.invert(n+h)}))};d.prototype.scaleTransformation=function(h){throw Error("Subclasses should override scaleTransformation");};d.prototype.invertedTransformation=function(h){throw Error("Subclasses should override invertedTransformation");};d.prototype.getTransformationExtent=function(){throw Error("Subclasses should override getTransformationExtent");};d.prototype.getTransformationDomain=function(){throw Error("Subclasses should override getTransformationDomain");
};d.prototype.setTransformationDomain=function(h){throw Error("Subclasses should override setTransformationDomain");};d.prototype._setDomain=function(h){function g(n){return k.Math.isNaN(n)||Infinity===n||-Infinity===n}g(h[0])||g(h[1])?k.Window.warn("Warning: QuantitativeScales cannot take NaN or Infinity as a domain value. Ignoring."):e.prototype._setDomain.call(this,h)};d.prototype.defaultTicks=function(){throw Error("Subclasses should override _getDefaultTicks");};d.prototype.ticks=function(){return this._tickGenerator(this)};
d.prototype._niceDomain=function(h,g){throw Error("Subclasses should override _niceDomain");};d.prototype._defaultExtent=function(){throw Error("Subclasses should override _defaultExtent");};d.prototype.tickGenerator=function(h){if(null==h)return this._tickGenerator;this._tickGenerator=h;return this};return d}(D(17).Scale);I._DEFAULT_NUM_TICKS=10;H.QuantitativeScale=I},function(I,H,D){var J=D(1);H.coerceExternalD3=function(w){if(null==w.attrs){if(null==w.nodes){var p=[];w.each(function(){p.push(this)});
return J.selectAll(p)}return J.selectAll(w.nodes())}return w}},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(83));J(D(84));J(D(85))},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(44));J(D(45));J(D(46));J(D(18));J(D(6));J(D(33));J(D(34));J(D(47));J(D(9));J(D(48))},function(I,H,D){I=function(){function J(){var w=this;this._anchorCallback=function(p){return w._anchor(p)};this._enabled=!0}J.prototype.attachTo=function(w){this._disconnect();
this._componentAttachedTo=w;this._connect();return this};J.prototype.detachFrom=function(w){return this.detach()};J.prototype.detach=function(){this._disconnect();this._componentAttachedTo=null;return this};J.prototype.enabled=function(w){if(null==w)return this._enabled;(this._enabled=w)?this._connect():this._disconnect();return this};J.prototype._anchor=function(w){this._isAnchored=!0};J.prototype._unanchor=function(){this._isAnchored=!1};J.prototype._translateToComponentSpace=function(w){var p=
this._componentAttachedTo.originToRoot();return{x:w.x-p.x,y:w.y-p.y}};J.prototype._isInsideComponent=function(w){return 0<=w.x&&0<=w.y&&w.x<=this._componentAttachedTo.width()&&w.y<=this._componentAttachedTo.height()};J.prototype._connect=function(){if(this.enabled()&&null!=this._componentAttachedTo&&!this._isAnchored)this._componentAttachedTo.onAnchor(this._anchorCallback)};J.prototype._disconnect=function(){this._isAnchored&&this._unanchor();null!=this._componentAttachedTo&&this._componentAttachedTo.offAnchor(this._anchorCallback)};
return J}();H.Interaction=I},function(I,H,D){var J=this&&this.__extends||function(d,h){function g(){this.constructor=d}for(var n in h)h.hasOwnProperty(n)&&(d[n]=h[n]);d.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)},w=D(3),p=D(0),k=D(52),e=D(2);I=function(d){function h(){var g=d.call(this)||this;g._autoAdjustXScaleDomain=!1;g._autoAdjustYScaleDomain=!1;g._deferredRendering=!1;g._applyDeferredRenderingTransform=function(n,r,q,v){g._isAnchored&&(null!=g._renderArea&&g._renderArea.attr("transform",
"translate("+n+", "+r+") scale("+q+", "+v+")"),null!=g._canvas&&g._canvas.style("transform","translate("+n+"px, "+r+"px) scale("+q+", "+v+")"))};g.addClass("xy-plot");g._adjustYDomainOnChangeFromXCallback=function(n){return g._adjustYDomainOnChangeFromX()};g._adjustXDomainOnChangeFromYCallback=function(n){return g._adjustXDomainOnChangeFromY()};g._renderCallback=function(){if(g.deferredRendering()){var n=g.x()&&g.x().scale,r=g.y()&&g.y().scale;g._deferredRenderer.updateDomains(n,r)}else g.render()};
g._deferredRenderer=new k.DeferredRenderer(function(){return g.render()},g._applyDeferredRenderingTransform);return g}J(h,d);h.prototype.render=function(){this.deferredRendering()&&this._deferredRenderer.resetTransforms();return d.prototype.render.call(this)};h.prototype.deferredRendering=function(g){if(null==g)return this._deferredRendering;if(g){var n=this.x()&&this.x().scale,r=this.y()&&this.y().scale;this._deferredRenderer.setDomains(n,r)}this._deferredRendering=g;return this};h.prototype.x=function(g,
n,r){if(null==g)return this._propertyBindings.get(h._X_KEY);this._bindProperty(h._X_KEY,g,n,r);g=this.width();null!=n&&null!=g&&n.range([0,g]);this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain();this.render();return this};h.prototype.y=function(g,n,r){if(null==g)return this._propertyBindings.get(h._Y_KEY);this._bindProperty(h._Y_KEY,g,n,r);g=this.height();null!=n&&null!=g&&(n instanceof w.Category?n.range([0,g]):n.range([g,0]));this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain();
this.render();return this};h.prototype._filterForProperty=function(g){return"x"===g&&this._autoAdjustXScaleDomain?this._makeFilterByProperty("y"):"y"===g&&this._autoAdjustYScaleDomain?this._makeFilterByProperty("x"):null};h.prototype._makeFilterByProperty=function(g){g=this._propertyBindings.get(g);if(null!=g){var n=g.accessor,r=g.scale;if(null!=r)return function(q,v,B){var K=r.range();return p.Math.inRange(r.scale(n(q,v,B)),K[0],K[1])}}return null};h.prototype._uninstallScaleForKey=function(g,n){d.prototype._uninstallScaleForKey.call(this,
g,n);g.offUpdate(n===h._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback)};h.prototype._installScaleForKey=function(g,n){d.prototype._installScaleForKey.call(this,g,n);g.onUpdate(n===h._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback)};h.prototype.destroy=function(){d.prototype.destroy.call(this);this.x().scale&&this.x().scale.offUpdate(this._adjustYDomainOnChangeFromXCallback);this.y().scale&&this.y().scale.offUpdate(this._adjustXDomainOnChangeFromYCallback);
return this};h.prototype.autorangeMode=function(g){if(null==g)return this._autoAdjustXScaleDomain?"x":this._autoAdjustYScaleDomain?"y":"none";switch(g){case "x":this._autoAdjustXScaleDomain=!0;this._autoAdjustYScaleDomain=!1;this._adjustXDomainOnChangeFromY();break;case "y":this._autoAdjustXScaleDomain=!1;this._autoAdjustYScaleDomain=!0;this._adjustYDomainOnChangeFromX();break;case "none":this._autoAdjustYScaleDomain=this._autoAdjustXScaleDomain=!1;break;default:throw Error("Invalid scale name '"+
g+"', must be 'x', 'y' or 'none'");}return this};h.prototype.computeLayout=function(g,n,r){d.prototype.computeLayout.call(this,g,n,r);g=(g=this.x())&&g.scale;null!=g&&g.range([0,this.width()]);g=(g=this.y())&&g.scale;null!=g&&(g instanceof w.Category?g.range([0,this.height()]):g.range([this.height(),0]));return this};h.prototype._updateXExtentsAndAutodomain=function(){var g=this.x().scale;null!=g&&g.autoDomain()};h.prototype._updateYExtentsAndAutodomain=function(){var g=this.y().scale;null!=g&&g.autoDomain()};
h.prototype.showAllData=function(){this._updateXExtentsAndAutodomain();this._updateYExtentsAndAutodomain();return this};h.prototype._adjustYDomainOnChangeFromX=function(){this._projectorsReady()&&this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain()};h.prototype._adjustXDomainOnChangeFromY=function(){this._projectorsReady()&&this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain()};h.prototype._projectorsReady=function(){var g=this.x(),n=this.y();return null!=g&&null!=g.accessor&&
null!=n&&null!=n.accessor};h.prototype._pixelPoint=function(g,n,r){var q=e.Plot._scaledAccessor(this.x()),v=e.Plot._scaledAccessor(this.y());return{x:q(g,n,r),y:v(g,n,r)}};h.prototype._getDataToDraw=function(){var g=this,n=d.prototype._getDataToDraw.call(this);this.datasets().forEach(function(r){n.set(r,n.get(r).filter(function(q,v){var B=e.Plot._scaledAccessor(g.x())(q,v,r);q=e.Plot._scaledAccessor(g.y())(q,v,r);return p.Math.isValidNumber(B)&&p.Math.isValidNumber(q)}))});return n};return h}(e.Plot);
I._X_KEY="x";I._Y_KEY="y";H.XYPlot=I},function(I,H,D){var J=D(0);I=function(){function w(){this._autoDomainAutomatically=!0;this._domainModificationInProgress=!1;this._updateId=0;this._callbacks=new J.CallbackSet;this._includedValuesProviders=new J.Set}w.prototype.extentOfValues=function(p){return[]};w.prototype._getAllIncludedValues=function(p){var k=this;void 0===p&&(p=!1);var e=[];this._includedValuesProviders.forEach(function(d){d=d(k,p);e=e.concat(d)});return e};w.prototype._getExtent=function(){return[]};
w.prototype.onUpdate=function(p){this._callbacks.add(p);return this};w.prototype.offUpdate=function(p){this._callbacks.delete(p);return this};w.prototype._dispatchUpdate=function(){this._updateId++;this._callbacks.callCallbacks(this)};w.prototype.autoDomain=function(){this._autoDomainAutomatically=!0;this._setDomain(this._getExtent());return this};w.prototype._autoDomainIfAutomaticMode=function(){this._autoDomainAutomatically&&this.autoDomain()};w.prototype.scale=function(p){throw Error("Subclasses should override scale");
};w.prototype.ticks=function(){return this.domain()};w.prototype.domain=function(p){if(null==p)return this._getDomain();this._autoDomainAutomatically=!1;this._setDomain(p);return this};w.prototype._getDomain=function(){throw Error("Subclasses should override _getDomain");};w.prototype._setDomain=function(p){this._domainModificationInProgress||(this._domainModificationInProgress=!0,this._backingScaleDomain(p),this._dispatchUpdate(),this._domainModificationInProgress=!1)};w.prototype._backingScaleDomain=
function(p){throw Error("Subclasses should override _backingDomain");};w.prototype.range=function(p){if(null==p)return this._getRange();this._setRange(p);return this};w.prototype._getRange=function(){throw Error("Subclasses should override _getRange");};w.prototype._setRange=function(p){throw Error("Subclasses should override _setRange");};w.prototype.addIncludedValuesProvider=function(p){this._includedValuesProviders.add(p);this._autoDomainIfAutomaticMode();return this};w.prototype.removeIncludedValuesProvider=
function(p){this._includedValuesProviders.delete(p);this._autoDomainIfAutomaticMode();return this};w.prototype.updateId=function(){return this._updateId};return w}();H.Scale=I},function(I,H,D){function J(e,d,h,g){for(var n={},r=0;r<d.length;r++){var q=d[r];e.hasOwnProperty(q)&&(n[q]=e[q](h,g))}return n}function w(e){return null!=e["stroke-width"]?parseFloat(e["stroke-width"]):1}function p(e,d){if(d.stroke){e.lineWidth=w(d);var h=k.color(d.stroke),g=h.opacity;var n=null!=d.opacity?parseFloat(d.opacity):
1;n*=null!=d["stroke-opacity"]?parseFloat(d["stroke-opacity"]):1;h.opacity=g*n;e.strokeStyle=h.toString();e.stroke()}d.fill&&(h=k.color(d.fill),g=h.opacity,n=null!=d.opacity?parseFloat(d.opacity):1,d=(null!=d["fill-opacity"]?parseFloat(d["fill-opacity"]):1)*n,h.opacity=g*d,e.fillStyle=h.toString(),e.fill())}var k=D(1);I=function(){function e(d,h){this._context=d;this._drawStep=h}e.prototype.getDrawStep=function(){return this._drawStep};e.prototype.draw=function(d,h){h=h[h.length-1].attrToAppliedProjector;
this._context.save();this._drawStep(this._context,d,h);this._context.restore()};e.prototype.getVisualPrimitives=function(){return[]};e.prototype.getVisualPrimitiveAtIndex=function(d){return null};e.prototype.remove=function(){};return e}();H.CanvasDrawer=I;H.ContextStyleAttrs="fill-opacity fill opacity stroke-opacity stroke-width stroke".split(" ");H.resolveAttributesSubsetWithStyles=function(e,d,h,g){d=H.ContextStyleAttrs.concat(d);return J(e,d,h,g)};H.resolveAttributes=J;H.getStrokeWidth=w;H.renderArea=
function(e,d,h,g){e.save();e.beginPath();d.context(e);d(h);e.lineJoin="round";p(e,g);e.restore()};H.renderLine=function(e,d,h,g){e.save();e.beginPath();d.context(e);d(h);e.lineJoin="round";p(e,g);e.restore()};H.renderPathWithStyle=p},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(50));J(D(27));J(D(51));J(D(93));J(D(53));J(D(94));J(D(95));J(D(96));J(D(97));J(D(98));J(D(99));J(D(100))},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(92));
J(D(91));I=D(49);H.sign=I.sign},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(134));J(D(135));J(D(136));J(D(137))},function(I,H,D){var J=this&&this.__extends||function(h,g){function n(){this.constructor=h}for(var r in g)g.hasOwnProperty(r)&&(h[r]=g[r]);h.prototype=null===g?Object.create(g):(n.prototype=g.prototype,new n)},w=D(1),p=D(5);I=D(4);var k=D(8),e=D(0),d=D(10);H.AxisOrientation=d.makeEnum(["bottom","left","right","top"]);I=function(h){function g(n,r){var q=
h.call(this)||this;q._endTickLength=5;q._innerTickLength=5;q._tickLabelPadding=10;q._margin=15;q._showEndTickLabels=!1;q._annotationsEnabled=!1;q._annotationTierCount=1;if(null==n||null==r)throw Error("Axis requires a scale and orientation");q._scale=n;q.orientation(r);q._setDefaultAlignment();q.addClass("axis");q.isHorizontal()?q.addClass("x-axis"):q.addClass("y-axis");q.formatter(k.identity());q._rescaleCallback=function(v){return q._rescale()};q._scale.onUpdate(q._rescaleCallback);q._annotatedTicks=
[];q._annotationFormatter=k.identity();return q}J(g,h);g.prototype.destroy=function(){h.prototype.destroy.call(this);this._scale.offUpdate(this._rescaleCallback)};g.prototype.tickLabelDataOnElement=function(n){if(null!=n){for(var r;null!=n&&n.classList&&void 0===r;)n.classList.contains(g.TICK_LABEL_CLASS)?r=n:n=n.parentNode;return void 0===n?void 0:w.select(n).datum()}};g.prototype._computeWidth=function(){return this._maxLabelTickLength()};g.prototype._computeHeight=function(){return this._maxLabelTickLength()};
g.prototype.requestedSpace=function(n,r){r=n=0;if(this.isHorizontal()){if(r=this._computeHeight()+this._margin,this.annotationsEnabled()){var q=this._annotationMeasurer.measure().height+2*g._ANNOTATION_LABEL_PADDING;r+=q*this.annotationTierCount()}}else n=this._computeWidth()+this._margin,this.annotationsEnabled()&&(q=this._annotationMeasurer.measure().height+2*g._ANNOTATION_LABEL_PADDING,n+=q*this.annotationTierCount());return{minWidth:n,minHeight:r}};g.prototype.fixedHeight=function(){return this.isHorizontal()};
g.prototype.fixedWidth=function(){return!this.isHorizontal()};g.prototype._rescale=function(){this.render()};g.prototype.computeLayout=function(n,r,q){h.prototype.computeLayout.call(this,n,r,q);this.isHorizontal()?this._scale.range([0,this.width()]):this._scale.range([this.height(),0]);return this};g.prototype._sizeFromOffer=function(n,r){var q=this.requestedSpace(n,r);return this.isHorizontal()?{width:n,height:q.minHeight}:{height:r,width:q.minWidth}};g.prototype._setup=function(){h.prototype._setup.call(this);
this._tickMarkContainer=this.content().append("g").classed(g.TICK_MARK_CLASS+"-container",!0);this._tickLabelContainer=this.content().append("g").classed(g.TICK_LABEL_CLASS+"-container",!0);this._baseline=this.content().append("line").classed("baseline",!0);this._annotationContainer=this.content().append("g").classed("annotation-container",!0);this._annotationContainer.append("g").classed("annotation-line-container",!0);this._annotationContainer.append("g").classed("annotation-circle-container",!0);
this._annotationContainer.append("g").classed("annotation-rect-container",!0);var n=this._annotationContainer.append("g").classed("annotation-label-container",!0);n=new p.SvgContext(n.node());this._annotationMeasurer=new p.CacheMeasurer(n);this._annotationWriter=new p.Writer(this._annotationMeasurer,n)};g.prototype._getTickValues=function(){return[]};g.prototype.renderImmediately=function(){var n=this._getTickValues(),r=this._tickMarkContainer.selectAll("."+g.TICK_MARK_CLASS).data(n),q=r.enter().append("line").classed(g.TICK_MARK_CLASS,
!0).merge(r);q.attrs(this._generateTickMarkAttrHash());w.select(q.nodes()[0]).classed(g.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0));w.select(q.nodes()[n.length-1]).classed(g.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0));r.exit().remove();this._baseline.attrs(this._generateBaselineAttrHash());this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations();return this};g.prototype.annotatedTicks=function(n){if(null==n)return this._annotatedTicks;
this._annotatedTicks=n;this.render();return this};g.prototype.annotationFormatter=function(n){if(null==n)return this._annotationFormatter;this._annotationFormatter=n;this.render();return this};g.prototype.annotationsEnabled=function(n){if(null==n)return this._annotationsEnabled;this._annotationsEnabled=n;this.redraw();return this};g.prototype.annotationTierCount=function(n){if(null==n)return this._annotationTierCount;if(0>n)throw Error("annotationTierCount cannot be negative");this._annotationTierCount=
n;this.redraw();return this};g.prototype._drawAnnotations=function(){function n(ya){switch(K.orientation()){case "bottom":case "right":return v(ya);case "top":case "left":return v(ya)-y.get(ya).height}}function r(ya){return S.has(ya)?"hidden":"visible"}function q(ya){return K._scale.scale(ya)}function v(ya){switch(K.orientation()){case "bottom":case "right":return X.get(ya)*U+ha;case "top":case "left":return Y-ha-X.get(ya)*U}}function B(ya,Ja,La){ya=ya.selectAll("."+La).data(L);Ja=ya.enter().append(Ja).classed(La,
!0).merge(ya);ya.exit().remove();return Ja}var K=this,C=g._ANNOTATION_LABEL_PADDING,y=new e.Map,L=this._annotatedTicksToRender();L.forEach(function(ya){var Ja=K._annotationMeasurer.measure(K.annotationFormatter()(ya));y.set(ya,{width:Ja.width+2*C,height:Ja.height+2*C})});var U=this._annotationMeasurer.measure().height+2*C,X=this._annotationToTier(y),S=new e.Set,Y=this.isHorizontal()?this.height():this.width(),ha=this._coreSize(),ia=Math.min(this.annotationTierCount(),Math.floor((Y-ha)/U));X.forEach(function(ya,
Ja){(-1===ya||ya>=ia)&&S.add(Ja)});switch(this.orientation()){case "bottom":case "right":var wa=0;break;case "top":wa=this.height();break;case "left":wa=this.width()}var Ba=this.isHorizontal();B(this._annotationContainer.select(".annotation-line-container"),"line",g.ANNOTATION_LINE_CLASS).attrs({x1:Ba?q:wa,x2:Ba?q:v,y1:Ba?wa:q,y2:Ba?v:q,visibility:r});B(this._annotationContainer.select(".annotation-circle-container"),"circle",g.ANNOTATION_CIRCLE_CLASS).attrs({cx:Ba?q:wa,cy:Ba?wa:q,r:3});B(this._annotationContainer.select(".annotation-rect-container"),
"rect",g.ANNOTATION_RECT_CLASS).attrs({x:Ba?q:n,y:Ba?n:q,width:Ba?function(ya){return y.get(ya).width}:function(ya){return y.get(ya).height},height:Ba?function(ya){return y.get(ya).height}:function(ya){return y.get(ya).width},visibility:r});var Ea=this._annotationWriter,Da=this.annotationFormatter();wa=B(this._annotationContainer.select(".annotation-label-container"),"g",g.ANNOTATION_LABEL_CLASS);wa.selectAll(".text-container").remove();wa.attrs({transform:function(ya){var Ja=Ba?q(ya):n(ya);ya=Ba?
n(ya):q(ya);return"translate("+Ja+","+ya+")"},visibility:r}).each(function(ya){Ea.write(Da(ya),Ba?y.get(ya).width:y.get(ya).height,Ba?y.get(ya).height:y.get(ya).width,{xAlign:"center",yAlign:"center",textRotation:Ba?0:90},w.select(this).node())})};g.prototype._annotatedTicksToRender=function(){var n=this,r=this._scale.range();return e.Array.uniq(this.annotatedTicks().filter(function(q){return null==q?!1:e.Math.inRange(n._scale.scale(q),r[0],r[1])}))};g.prototype._coreSize=function(){var n=this.isHorizontal()?
this.height():this.width(),r=this.isHorizontal()?this._computeHeight():this._computeWidth();return Math.min(r,n)};g.prototype._annotationTierHeight=function(){return this._annotationMeasurer.measure().height+2*g._ANNOTATION_LABEL_PADDING};g.prototype._annotationToTier=function(n){var r=this,q=[[]],v=new e.Map,B=this.isHorizontal()?this.width():this.height();this._annotatedTicksToRender().forEach(function(K){var C=r._scale.scale(K),y=n.get(K).width;if(0>C||C+y>B)v.set(K,-1);else{for(var L=function(X){return q[X].some(function(S){var Y=
r._scale.scale(S);S=n.get(S).width;return C+y>=Y&&C<=Y+S})},U=0;L(U);)U++,q.length===U&&q.push([]);q[U].push(K);v.set(K,U)}});return v};g.prototype._removeAnnotations=function(){this._annotationContainer.selectAll(".annotation-line").remove();this._annotationContainer.selectAll(".annotation-circle").remove();this._annotationContainer.selectAll(".annotation-rect").remove();this._annotationContainer.selectAll(".annotation-label").remove()};g.prototype._generateBaselineAttrHash=function(){var n={x1:0,
y1:0,x2:0,y2:0};switch(this._orientation){case "bottom":n.x2=this.width();break;case "top":n.x2=this.width();n.y1=this.height();n.y2=this.height();break;case "left":n.x1=this.width();n.x2=this.width();n.y2=this.height();break;case "right":n.y2=this.height()}return n};g.prototype._generateTickMarkAttrHash=function(n){function r(B){return q._scale.scale(B)}var q=this;void 0===n&&(n=!1);var v={x1:0,y1:0,x2:0,y2:0};this.isHorizontal()?(v.x1=r,v.x2=r):(v.y1=r,v.y2=r);n=n?this._endTickLength:this._innerTickLength;
switch(this._orientation){case "bottom":v.y2=n;break;case "top":v.y1=this.height();v.y2=this.height()-n;break;case "left":v.x1=this.width();v.x2=this.width()-n;break;case "right":v.x2=n}return v};g.prototype._setDefaultAlignment=function(){switch(this._orientation){case "bottom":this.yAlignment("top");break;case "top":this.yAlignment("bottom");break;case "left":this.xAlignment("right");break;case "right":this.xAlignment("left")}};g.prototype.isHorizontal=function(){return"top"===this._orientation||
"bottom"===this._orientation};g.prototype.getScale=function(){return this._scale};g.prototype.formatter=function(n){if(null==n)return this._formatter;this._formatter=n;this.redraw();return this};g.prototype.innerTickLength=function(n){if(null==n)return this._innerTickLength;if(0>n)throw Error("inner tick length must be positive");this._innerTickLength=n;this.redraw();return this};g.prototype.endTickLength=function(n){if(null==n)return this._endTickLength;if(0>n)throw Error("end tick length must be positive");
this._endTickLength=n;this.redraw();return this};g.prototype._maxLabelTickLength=function(){return this.showEndTickLabels()?Math.max(this.innerTickLength(),this.endTickLength()):this.innerTickLength()};g.prototype.tickLabelPadding=function(n){if(null==n)return this._tickLabelPadding;if(0>n)throw Error("tick label padding must be positive");this._tickLabelPadding=n;this.redraw();return this};g.prototype.margin=function(n){if(null==n)return this._margin;if(0>n)throw Error("margin size must be positive");
this._margin=n;this.redraw();return this};g.prototype.orientation=function(n){if(null==n)return this._orientation;n=n.toLowerCase();if("top"!==n&&"bottom"!==n&&"left"!==n&&"right"!==n)throw Error("unsupported orientation");this._orientation=n;this.redraw();return this};g.prototype.showEndTickLabels=function(n){if(null==n)return this._showEndTickLabels;this._showEndTickLabels=n;this.render();return this};g.prototype._showAllTickMarks=function(){this._tickMarkContainer.selectAll("."+g.TICK_MARK_CLASS).each(function(){w.select(this).style("visibility",
"inherit")})};g.prototype._showAllTickLabels=function(){this._tickLabelContainer.selectAll("."+g.TICK_LABEL_CLASS).each(function(){w.select(this).style("visibility","inherit")})};g.prototype._hideOverflowingTickLabels=function(){var n=this.element().node().getBoundingClientRect(),r=this._tickLabelContainer.selectAll("."+g.TICK_LABEL_CLASS);r.empty()||r.each(function(q,v){e.DOM.clientRectInside(this.getBoundingClientRect(),n)||w.select(this).style("visibility","hidden")})};g.prototype._hideTickMarksWithoutLabel=
function(){var n=this._tickMarkContainer.selectAll("."+g.TICK_MARK_CLASS),r=this._tickLabelContainer.selectAll("."+g.TICK_LABEL_CLASS).filter(function(q,v){q=w.select(this).style("visibility");return"inherit"===q||"visible"===q}).data();n.each(function(q,v){-1===r.indexOf(q)&&w.select(this).style("visibility","hidden")})};g.prototype.invalidateCache=function(){h.prototype.invalidateCache.call(this);this._annotationMeasurer.reset()};return g}(I.Component);I.END_TICK_MARK_CLASS="end-tick-mark";I.TICK_MARK_CLASS=
"tick-mark";I.TICK_LABEL_CLASS="tick-label";I.ANNOTATION_LINE_CLASS="annotation-line";I.ANNOTATION_RECT_CLASS="annotation-rect";I.ANNOTATION_CIRCLE_CLASS="annotation-circle";I.ANNOTATION_LABEL_CLASS="annotation-label";I._ANNOTATION_LABEL_PADDING=4;H.Axis=I},function(I,H,D){H.SHOW_WARNINGS=!0;H.ADD_TITLE_ELEMENTS=!0},function(I,H,D){var J=D(0);I=function(){function w(){this._eventToProcessingFunction={};this._eventTarget=document;this._eventNameToCallbackSet={};this._connected=!1}w.prototype._hasNoCallbacks=
function(){for(var p=Object.keys(this._eventNameToCallbackSet),k=0;k<p.length;k++)if(0!==this._eventNameToCallbackSet[p[k]].size)return!1;return!0};w.prototype._connect=function(){var p=this;this._connected||(Object.keys(this._eventToProcessingFunction).forEach(function(k){p._eventTarget.addEventListener(k,p._eventToProcessingFunction[k])}),this._connected=!0)};w.prototype._disconnect=function(){var p=this;this._connected&&this._hasNoCallbacks()&&(Object.keys(this._eventToProcessingFunction).forEach(function(k){p._eventTarget.removeEventListener(k,
p._eventToProcessingFunction[k])}),this._connected=!1)};w.prototype._addCallbackForEvent=function(p,k){null==this._eventNameToCallbackSet[p]&&(this._eventNameToCallbackSet[p]=new J.CallbackSet);this._eventNameToCallbackSet[p].add(k);this._connect()};w.prototype._removeCallbackForEvent=function(p,k){null!=this._eventNameToCallbackSet[p]&&this._eventNameToCallbackSet[p].delete(k);this._disconnect()};w.prototype._callCallbacksForEvent=function(p){for(var k=[],e=1;e<arguments.length;e++)k[e-1]=arguments[e];
var d=this._eventNameToCallbackSet[p];null!=d&&d.callCallbacks.apply(d,k)};return w}();H.Dispatcher=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(87));J(D(88));J(D(40));J(D(89));J(D(90));I=D(26);H.zoomOut=I.zoomOut},function(I,H,D){function J(e,d,h){return h-(h-e)*d}function w(e,d,h,g){var n=1<d;h=n?g:h;if(null==h)return d;var r=e.getTransformationDomain();return(n?Math.min:Math.max)(d,h/Math.abs(r[1]-r[0]))}function p(e,d,h,g,n){if(1>=d||null==g&&null==n)return{centerPoint:h,
zoomAmount:d};var r=k(e),q,v=e.getTransformationDomain();v=(q=v[1]<v[0])?Infinity:-Infinity;q=q?-Infinity:Infinity;g=null==g?v:g;n=null==n?q:n;var B=e.getTransformationDomain();q=B[0];v=B[1];n=e.scaleTransformation(n);v=e.scaleTransformation(v);var K=J(v,d,h);g=e.scaleTransformation(g);e=e.scaleTransformation(q);q=J(e,d,h);return Math.abs(K-q)>Math.abs(n-g)?(d=(n-g)/(v-e),1!==d?{centerPoint:(v*d-n)/(d-1),zoomAmount:d}:{centerPoint:h,zoomAmount:d}):K>n!=r?{centerPoint:(v*d-n)/(d-1),zoomAmount:d}:q<
g!=r?{centerPoint:(e*d-g)/(d-1),zoomAmount:d}:{centerPoint:h,zoomAmount:d}}function k(e){e=e.range();return e[1]<e[0]}H.zoomOut=J;H.constrainedZoom=function(e,d,h,g,n,r,q){d=w(e,d,g,n);return p(e,d,h,r,q)};H.constrainZoomExtents=w;H.constrainZoomValues=p;H.constrainedTranslation=function(e,d,h,g){var n=e.getTransformationDomain(),r=n[0],q=n[1],v=k(e);0<d!==v?(h=g,null!=h&&(r=e.scaleTransformation(q),e=e.scaleTransformation(h),d=(v?Math.max:Math.min)(r+d,e)-r)):null!=h&&(r=e.scaleTransformation(r),
e=e.scaleTransformation(h),d=(v?Math.min:Math.max)(r+d,e)-r);return d}},function(I,H,D){function J(U,X,S){var Y=U.scale;if(Y instanceof q.Category)S=Y.rangeBand();else{var ha=U.accessor;U=p.set(B.Array.flatten(X.map(function(ia){return ia.data().map(function(wa,Ba){return ha(wa,Ba,ia)}).filter(function(wa){return null!=wa}).map(function(wa){return wa.valueOf()})}))).values().map(function(ia){return+ia});U.sort(function(ia,wa){return ia-wa});U=U.map(function(ia){return Y.scale(ia)});U=p.pairs(U);S=
B.Math.min(U,function(ia,wa){return Math.abs(ia[1]-ia[0])},S*L._SINGLE_BAR_DIMENSION_RATIO);S*=L._BAR_THICKNESS_RATIO}return S}var w=this&&this.__extends||function(U,X){function S(){this.constructor=U}for(var Y in X)X.hasOwnProperty(Y)&&(U[Y]=X[Y]);U.prototype=null===X?Object.create(X):(S.prototype=X.prototype,new S)},p=D(1),k=D(5),e=D(7),d=D(8),h=D(14),g=D(6),n=D(34),r=D(20),q=D(3),v=D(11),B=D(0);I=D(10);var K=D(19),C=D(2),y=D(16);H.BarOrientation=I.makeEnum(["vertical","horizontal"]);H.LabelsPosition=
I.makeEnum(["start","middle","end","outside"]);H.BarAlignment=I.makeEnum(["start","middle","end"]);var L=function(U){function X(S){void 0===S&&(S="vertical");var Y=U.call(this)||this;Y._labelFormatter=d.identity();Y._labelsEnabled=!1;Y._labelsPosition=H.LabelsPosition.end;Y._hideBarsIfAnyAreTooWide=!0;Y._barAlignment="middle";Y._computeBarPixelThickness=r.memoize(J);Y._fixedBarPixelThickness=!0;Y.addClass("bar-plot");if("vertical"!==S&&"horizontal"!==S)throw Error(S+" is not a valid orientation for Plots.Bar");
Y._isVertical="vertical"===S;Y.animator("baseline",new e.Null);Y.attr("fill",(new q.Color).range()[0]);Y.attr(X._BAR_THICKNESS_KEY,function(){return Y._barPixelThickness()});Y._labelConfig=new B.Map;Y._baselineValueProvider=function(){return[Y.baselineValue()]};return Y}w(X,U);X.prototype.computeLayout=function(S,Y,ha){U.prototype.computeLayout.call(this,S,Y,ha);this._updateExtents();return this};X.prototype.x=function(S,Y){if(null==S)return U.prototype.x.call(this);null==Y?U.prototype.x.call(this,
S):U.prototype.x.call(this,S,Y);this._updateThicknessAttr();this._updateLengthScale();return this};X.prototype.y=function(S,Y){if(null==S)return U.prototype.y.call(this);null==Y?U.prototype.y.call(this,S):U.prototype.y.call(this,S,Y);this._updateLengthScale();return this};X.prototype.length=function(){return this._isVertical?this.y():this.x()};X.prototype.position=function(){return this._isVertical?this.x():this.y()};X.prototype.barEnd=function(S){if(null==S)return this._propertyBindings.get(X._BAR_END_KEY);
var Y=this.position();this._bindProperty(X._BAR_END_KEY,S,Y&&Y.scale);this._updateThicknessAttr();this._updateLengthScale();this.render();return this};X.prototype.barAlignment=function(S){if(null==S)return this._barAlignment;this._barAlignment=S;this._clearAttrToProjectorCache();this.render();return this};X.prototype.orientation=function(){return this._isVertical?"vertical":"horizontal"};X.prototype._createDrawer=function(){return new g.ProxyDrawer(function(){return new n.RectangleSVGDrawer(X._BAR_AREA_CLASS)},
function(S){return new h.RectangleCanvasDrawer(S)})};X.prototype._setup=function(){U.prototype._setup.call(this);this._baseline=this._renderArea.append("line").classed("baseline",!0)};X.prototype.baselineValue=function(S){if(null==S)return null!=this._baselineValue?this._baselineValue:this._projectorsReady()?(S=this.length().scale)?S instanceof q.Time?new Date(0):0:0:0;this._baselineValue=S;this._updateLengthScale();this._clearAttrToProjectorCache();this.render();return this};X.prototype.addDataset=
function(S){U.prototype.addDataset.call(this,S);return this};X.prototype._addDataset=function(S){U.prototype._addDataset.call(this,S);return this};X.prototype.removeDataset=function(S){U.prototype.removeDataset.call(this,S);return this};X.prototype._removeDataset=function(S){U.prototype._removeDataset.call(this,S);return this};X.prototype.datasets=function(S){if(null==S)return U.prototype.datasets.call(this);U.prototype.datasets.call(this,S);return this};X.prototype.labelsEnabled=function(S,Y){if(null==
S)return this._labelsEnabled;this._labelsEnabled=S;null!=Y&&(this._labelsPosition=Y);this._clearAttrToProjectorCache();this.render();return this};X.prototype.labelFormatter=function(S){if(null==S)return this._labelFormatter;this._labelFormatter=S;this._clearAttrToProjectorCache();this.render();return this};X.prototype._createNodesForDataset=function(S){var Y=U.prototype._createNodesForDataset.call(this,S),ha=this._renderArea.append("g").classed(X._LABEL_AREA_CLASS,!0),ia=new k.SvgContext(ha.node()),
wa=new k.CacheMeasurer(ia);ia=new k.Writer(wa,ia);this._labelConfig.set(S,{labelArea:ha,measurer:wa,writer:ia});return Y};X.prototype._removeDatasetNodes=function(S){U.prototype._removeDatasetNodes.call(this,S);var Y=this._labelConfig.get(S);null!=Y&&(Y.labelArea.remove(),this._labelConfig.delete(S))};X.prototype.entityNearest=function(S){var Y=this;return this._computeBarPixelThickness.doLocked(function(){var ha=Y._isVertical?S.x:S.y,ia=Y._isVertical?S.y:S.x,wa=Y.bounds(),Ba={min:0,max:wa.bottomRight.x-
wa.topLeft.x},Ea={min:0,max:wa.bottomRight.y-wa.topLeft.y},Da=C.Plot._scaledAccessor(Y.length()),ya=Y.length().scale.scale(Y.baselineValue()),Ja=Infinity,La=Infinity,Ra;Y._getEntityStore().entities().forEach(function(Pa){var Ma=Y._entityBounds(Pa);if(B.DOM.intersectsBBox(Ba,Ea,Ma)){var fb=0,pb=0;if(!B.DOM.intersectsBBox(S.x,S.y,Ma,.5)){pb=Y._pixelPointBar(Da(Pa.datum,Pa.index,Pa.dataset),ya,Ma);fb=Math.abs(ha-(Y._isVertical?pb.x:pb.y));var vc=Y._isVertical?Ma.y:Ma.x;Ma=vc+(Y._isVertical?Ma.height:
Ma.width);pb=ia>=vc-.5&&ia<=Ma+.5?0:Math.abs(ia-(Y._isVertical?pb.y:pb.x))}if(fb<Ja||fb===Ja&&pb<La)Ra=Pa,Ja=fb,La=pb}});if(void 0!==Ra)return Y._lightweightPlotEntityToPlotEntity(Ra)})};X.prototype.entitiesAt=function(S){return this._entitiesIntersecting(S.x,S.y)};X.prototype._entitiesIntersecting=function(S,Y){var ha=this,ia=[];this._getEntityStore().entities().forEach(function(wa){B.DOM.intersectsBBox(S,Y,ha._entityBounds(wa))&&ia.push(ha._lightweightPlotEntityToPlotEntity(wa))});return ia};X.prototype._updateLengthScale=
function(){if(this._projectorsReady()){var S=this.length().scale;S instanceof v.QuantitativeScale&&(S.addPaddingExceptionsProvider(this._baselineValueProvider),S.addIncludedValuesProvider(this._baselineValueProvider))}};X.prototype.renderImmediately=function(){var S=this;this._barPixelThickness();return this._computeBarPixelThickness.doLocked(function(){return U.prototype.renderImmediately.call(S)})};X.prototype._additionalPaint=function(S){var Y=this,ha=this.length().scale.scale(this.baselineValue());
ha={x1:this._isVertical?0:ha,y1:this._isVertical?ha:0,x2:this._isVertical?this.width():ha,y2:this._isVertical?ha:this.height()};this._getAnimator("baseline").animate(this._baseline,ha);this.datasets().forEach(function(ia){return Y._labelConfig.get(ia).labelArea.selectAll("g").remove()});this._labelsEnabled&&B.Window.setTimeout(function(){return Y._drawLabels()},S)};X.prototype.getExtentsForProperty=function(S){var Y=this,ha=U.prototype.getExtentsForProperty.call(this,S);if("x"===S&&this._isVertical)S=
this.x();else{if("y"!==S||this._isVertical)return ha;S=this.y()}if(!(S&&S.scale&&S.scale instanceof v.QuantitativeScale))return ha;var ia=S.scale,wa=this._barPixelThickness();return ha=ha.map(function(Ba){return p.extent([ia.invert(Y._getPositionAttr(ia.scale(Ba[0]),wa)),ia.invert(Y._getPositionAttr(ia.scale(Ba[0]),wa)+wa),ia.invert(Y._getPositionAttr(ia.scale(Ba[1]),wa)),ia.invert(Y._getPositionAttr(ia.scale(Ba[1]),wa)+wa)])})};X.prototype._getPositionAttr=function(S,Y){this._isVertical||(S-=Y,Y*=
-1);switch(this._barAlignment){case "start":return S;case "end":return S-Y;default:return S-Y/2}};X.prototype._drawLabels=function(){var S=this,Y=this._getDataToDraw(),ha=this._getAttrToProjector(),ia=this.datasets().some(function(wa){return Y.get(wa).some(function(Ba,Ea){return null==Ba?!1:S._drawLabel(Ba,Ea,wa,ha)})});this._hideBarsIfAnyAreTooWide&&ia&&this.datasets().forEach(function(wa){return S._labelConfig.get(wa).labelArea.selectAll("g").remove()})};X.prototype._drawLabel=function(S,Y,ha,ia){var wa=
this._labelConfig.get(ha),Ba=wa.labelArea,Ea=wa.measurer,Da=wa.writer,ya=this.length().accessor,Ja=ya(S,Y,ha);ya=this.length().scale;var La=null!=ya?ya.scale(Ja):Ja,Ra=null!=ya?ya.scale(this.baselineValue()):this.baselineValue(),Pa={x:ia.x(S,Y,ha),y:ia.y(S,Y,ha)};ya={width:ia.width(S,Y,ha),height:ia.height(S,Y,ha)};Ja=this._labelFormatter(Ja,S,Y,ha);Ea=Ea.measure(Ja);var Ma=this._shouldShowLabelOnBar(Pa,ya,Ea),fb=this._calculateLabelProperties(Pa,ya,Ea,Ma,this._isVertical?La<=Ra:La<Ra);La=fb.containerDimensions;
Pa=fb.labelContainerOrigin;var pb=fb.labelOrigin;Ra=fb.alignment;S=ia.fill(S,Y,ha);Ba=this._createLabelContainer(Ba,Pa,pb,Ea,Ma,S);Da.write(Ja,La.width,La.height,{xAlign:Ra.x,yAlign:Ra.y},Ba.node());return this._isVertical?ya.width<Ea.width:ya.height<Ea.height};X.prototype._shouldShowLabelOnBar=function(S,Y,ha){if(this._labelsPosition===H.LabelsPosition.outside)return!1;S=this._isVertical?S.y:S.x;var ia=this._isVertical?Y.height:Y.width;Y=this._isVertical?this.height():this.width();ha=this._isVertical?
ha.height:ha.width;var wa=S+ia;wa>Y?ia=Y-S:0>S&&(ia=wa);return ha+X._LABEL_MARGIN_INSIDE_BAR<=ia};X.prototype._calculateLabelProperties=function(S,Y,ha,ia,wa){function Ba(fb){switch(fb){case "topLeft":La=Ea._isVertical?"top":"left";Pa+=X._LABEL_MARGIN_INSIDE_BAR;Ma+=X._LABEL_MARGIN_INSIDE_BAR;break;case "center":Ma+=(ya+Ja)/2;break;case "bottomRight":La=Ea._isVertical?"bottom":"right",Pa-=X._LABEL_MARGIN_INSIDE_BAR,Ma+=Ra-X._LABEL_MARGIN_INSIDE_BAR-Ja}}var Ea=this,Da=this._isVertical?S.y:S.x,ya=this._isVertical?
Y.height:Y.width,Ja=this._isVertical?ha.height:ha.width,La="center",Ra=ya,Pa=Da,Ma=Da;if(ia)switch(this._labelsPosition){case H.LabelsPosition.start:wa?Ba("bottomRight"):Ba("topLeft");break;case H.LabelsPosition.middle:Ba("center");break;case H.LabelsPosition.end:wa?Ba("topLeft"):Ba("bottomRight")}else wa?(La=this._isVertical?"top":"left",Ra=ya+X._LABEL_MARGIN_INSIDE_BAR+Ja,Pa-=X._LABEL_MARGIN_INSIDE_BAR+Ja,Ma-=X._LABEL_MARGIN_INSIDE_BAR+Ja):(La=this._isVertical?"bottom":"right",Ra=ya+X._LABEL_MARGIN_INSIDE_BAR+
Ja,Ma+=ya+X._LABEL_MARGIN_INSIDE_BAR);return{containerDimensions:{width:this._isVertical?Y.width:Ra,height:this._isVertical?Ra:Y.height},labelContainerOrigin:{x:this._isVertical?S.x:Pa,y:this._isVertical?Pa:S.y},labelOrigin:{x:this._isVertical?S.x+Y.width/2-ha.width/2:Ma,y:this._isVertical?Ma:S.y+Y.height/2-ha.height/2},alignment:{x:this._isVertical?"center":La,y:this._isVertical?La:"center"}}};X.prototype._createLabelContainer=function(S,Y,ha,ia,wa,Ba){S=S.append("g").attr("transform","translate("+
Y.x+", "+Y.y+")");wa?(S.classed("on-bar-label",!0),wa=1.6*B.Color.contrast("white",Ba)<B.Color.contrast("black",Ba),S.classed(wa?"dark-label":"light-label",!0)):S.classed("off-bar-label",!0);return S};X.prototype._generateDrawSteps=function(){var S=[];if(this._animateOnNextRender()){var Y=this._getAttrToProjector(),ha=this.length().scale.scale(this.baselineValue()),ia=this._isVertical?"height":"width";Y[this._isVertical?"y":"x"]=function(){return ha};Y[ia]=function(){return 0};S.push({attrToProjector:Y,
animator:this._getAnimator(K.Animator.RESET)})}S.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(K.Animator.MAIN)});return S};X.prototype._generateAttrToProjector=function(){function S(Ra,Pa,Ma){return Math.abs(ia-Da(Ra,Pa,Ma))}var Y=this,ha=U.prototype._generateAttrToProjector.call(this),ia=this.length().scale.scale(this.baselineValue()),wa=this._isVertical?"y":"x",Ba=this._isVertical?"x":"y",Ea=C.Plot._scaledAccessor(this.position()),Da=C.Plot._scaledAccessor(this.length()),
ya=ha[X._BAR_THICKNESS_KEY],Ja=ha.gap,La=null==Ja?ya:function(Ra,Pa,Ma){return ya(Ra,Pa,Ma)-Ja(Ra,Pa,Ma)};ha.width=this._isVertical?La:S;ha.height=this._isVertical?S:La;ha[wa]=function(Ra,Pa,Ma){Ra=Da(Ra,Pa,Ma);return Ra>ia?ia:Ra};ha[Ba]=function(Ra,Pa,Ma){return Y._getPositionAttr(Ea(Ra,Pa,Ma),ya(Ra,Pa,Ma))};return ha};X.prototype._updateThicknessAttr=function(){var S=this,Y=this.position(),ha=this.barEnd();null!=Y&&null!=ha?(this._fixedBarPixelThickness=!1,this.attr(X._BAR_THICKNESS_KEY,function(ia,
wa,Ba){var Ea=Y.accessor(ia,wa,Ba);ia=ha.accessor(ia,wa,Ba);Ea=Y.scale?Y.scale.scale(Ea):Ea;ia=ha.scale?ha.scale.scale(ia):ia;return Math.abs(ia-Ea)})):(this._fixedBarPixelThickness=!0,this.attr(X._BAR_THICKNESS_KEY,function(){return S._barPixelThickness()}))};X.prototype._barPixelThickness=function(){return this._fixedBarPixelThickness?this._projectorsReady()?this._computeBarPixelThickness(this.position(),this.datasets(),this._isVertical?this.width():this.height()):0:0};X.prototype.entities=function(S){void 0===
S&&(S=this.datasets());return this._projectorsReady()?U.prototype.entities.call(this,S):[]};X.prototype._entityBounds=function(S){return this._pixelBounds(S.datum,S.index,S.dataset)};X.prototype._pixelBounds=function(S,Y,ha){var ia=this._getAttrToProjector();return{x:ia.x(S,Y,ha),y:ia.y(S,Y,ha),width:ia.width(S,Y,ha),height:ia.height(S,Y,ha)}};X.prototype._pixelPoint=function(S,Y,ha){var ia=this._pixelBounds(S,Y,ha);S=(this._isVertical?C.Plot._scaledAccessor(this.y()):C.Plot._scaledAccessor(this.x()))(S,
Y,ha);Y=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue());return this._pixelPointBar(S,Y,ia)};X.prototype._pixelPointBar=function(S,Y,ha){if(this._isVertical){var ia=ha.x+ha.width/2;S=S<=Y?ha.y:ha.y+ha.height}else ia=S>=Y?ha.x+ha.width:ha.x,S=ha.y+ha.height/2;return{x:ia,y:S}};X.prototype._uninstallScaleForKey=function(S,Y){U.prototype._uninstallScaleForKey.call(this,S,Y)};X.prototype._getDataToDraw=function(){var S=this,Y=new B.Map,ha=this._getAttrToProjector(),ia=this.width(),
wa=this.height();this.datasets().forEach(function(Ba){var Ea=Ba.data().map(function(Da,ya){return S._isDatumOnScreen(ha,ia,wa,Da,ya,Ba)?Da:null});Y.set(Ba,Ea)});return Y};X.prototype._isDatumOnScreen=function(S,Y,ha,ia,wa,Ba){var Ea=S.x(ia,wa,Ba),Da=S.y(ia,wa,Ba),ya=S.width(ia,wa,Ba);S=S.height(ia,wa,Ba);return B.Math.isValidNumber(Ea)&&B.Math.isValidNumber(Da)&&B.Math.isValidNumber(ya)&&B.Math.isValidNumber(S)?B.Math.boundsIntersects(Ea,Da,ya,S,0,0,Y,ha):!1};return X}(y.XYPlot);L._BAR_THICKNESS_RATIO=
.95;L._SINGLE_BAR_DIMENSION_RATIO=.4;L._BAR_AREA_CLASS="bar-area";L._BAR_END_KEY="barEnd";L._BAR_THICKNESS_KEY="width";L._LABEL_AREA_CLASS="bar-label-text-area";L._LABEL_MARGIN_INSIDE_BAR=10;H.Bar=L},function(I,H,D){var J=this&&this.__extends||function(n,r){function q(){this.constructor=n}for(var v in r)r.hasOwnProperty(v)&&(n[v]=r[v]);n.prototype=null===r?Object.create(r):(q.prototype=r.prototype,new q)},w=D(1),p=D(5),k=D(8),e=D(3),d=D(0);I=D(10);var h=D(22);H.TimeInterval=I.makeEnum("second minute hour day week month year".split(" "));
H.TimeAxisOrientation=I.makeEnum(["top","bottom"]);H.TierLabelPosition=I.makeEnum(["between","center"]);I=function(n){function r(q,v){var B=n.call(this,q,v)||this;B._maxTimeIntervalPrecision=null;B._tierLabelPositions=[];B.addClass("time-axis");B.tickLabelPadding(5);B.axisConfigurations(r._DEFAULT_TIME_AXIS_CONFIGURATIONS);B.annotationFormatter(k.time("%a %b %d, %Y"));return B}J(r,n);r.prototype.tierLabelPositions=function(q){if(null==q)return this._tierLabelPositions;if(!q.every(function(v){return"between"===
v.toLowerCase()||"center"===v.toLowerCase()}))throw Error("Unsupported position for tier labels");this._tierLabelPositions=q;this.redraw();return this};r.prototype.maxTimeIntervalPrecision=function(q){if(null==q)return this._maxTimeIntervalPrecision;this._maxTimeIntervalPrecision=q;this.redraw();return this};r.prototype.currentAxisConfiguration=function(){return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex]};r.prototype.axisConfigurations=function(q){if(null==q)return this._possibleTimeAxisConfigurations;
this._possibleTimeAxisConfigurations=q;this._numTiers=d.Math.max(this._possibleTimeAxisConfigurations.map(function(K){return K.length}),0);this._isAnchored&&this._setupDomElements();q=this.tierLabelPositions();for(var v=[],B=0;B<this._numTiers;B++)v.push(q[B]||"between");this.tierLabelPositions(v);this.redraw();return this};r.prototype._getMostPreciseConfigurationIndex=function(){var q=this,v=this._possibleTimeAxisConfigurations.length;this._possibleTimeAxisConfigurations.forEach(function(B,K){K<
v&&B.every(function(C){return q._checkTimeAxisTierConfiguration(C)})&&(v=K)});v===this._possibleTimeAxisConfigurations.length&&(d.Window.warn("zoomed out too far: could not find suitable interval to display labels"),--v);return v};r.prototype.orientation=function(q){if(q&&("right"===q.toLowerCase()||"left"===q.toLowerCase()))throw Error(q+" is not a supported orientation for TimeAxis - only horizontal orientations are supported");return n.prototype.orientation.call(this,q)};r.prototype._computeHeight=
function(){var q=this._measurer.measure().height;this._tierHeights=[];for(var v=0;v<this._numTiers;v++)this._tierHeights.push(q+this.tickLabelPadding()+("between"===this._tierLabelPositions[v]?0:this._maxLabelTickLength()));return w.sum(this._tierHeights)};r.prototype._getIntervalLength=function(q){var v=this._scale.domain()[0];q=e.Time.timeIntervalToD3Time(q.interval).offset(v,q.step);return q>this._scale.domain()[1]?this.width():Math.abs(this._scale.scale(q)-this._scale.scale(v))};r.prototype._maxWidthForInterval=
function(q){return this._measurer.measure(q.formatter(r._LONG_DATE)).width};r.prototype._checkTimeAxisTierConfiguration=function(q){if(null!=this._maxTimeIntervalPrecision){var v=r._SORTED_TIME_INTERVAL_INDEX[this._maxTimeIntervalPrecision],B=r._SORTED_TIME_INTERVAL_INDEX[q.interval];if(null!=v&&null!=B&&B<v)return!1}v=this._maxWidthForInterval(q)+2*this.tickLabelPadding();return Math.min(this._getIntervalLength(q),this.width())>=v};r.prototype._sizeFromOffer=function(q,v){var B=n.prototype._sizeFromOffer.call(this,
q,v);q=this._tierHeights.reduce(function(K,C,y,L){return K+C>B.height?K:K+C});v=this.margin()+(this.annotationsEnabled()?this.annotationTierCount()*this._annotationTierHeight():0);B.height=Math.min(B.height,q+v);return B};r.prototype._setup=function(){n.prototype._setup.call(this);this._setupDomElements()};r.prototype._setupDomElements=function(){this.content().selectAll("."+r.TIME_AXIS_TIER_CLASS).remove();this._tierLabelContainers=[];this._tierMarkContainers=[];this._tierBaselines=[];this._tickLabelContainer.remove();
this._baseline.remove();for(var q=0;q<this._numTiers;++q){var v=this.content().append("g").classed(r.TIME_AXIS_TIER_CLASS,!0);this._tierLabelContainers.push(v.append("g").classed(h.Axis.TICK_LABEL_CLASS+"-container",!0));this._tierMarkContainers.push(v.append("g").classed(h.Axis.TICK_MARK_CLASS+"-container",!0));this._tierBaselines.push(v.append("line").classed("baseline",!0))}q=new p.SvgContext(this._tierLabelContainers[0].node());this._measurer=new p.CacheMeasurer(q)};r.prototype._getTickIntervalValues=
function(q){return this._scale.tickInterval(q.interval,q.step)};r.prototype._getTickValues=function(){var q=this;return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex].reduce(function(v,B){return v.concat(q._getTickIntervalValues(B))},[])};r.prototype._cleanTiers=function(){for(var q=0;q<this._tierLabelContainers.length;q++)this._tierLabelContainers[q].selectAll("."+h.Axis.TICK_LABEL_CLASS).remove(),this._tierMarkContainers[q].selectAll("."+h.Axis.TICK_MARK_CLASS).remove(),this._tierBaselines[q].style("visibility",
"hidden")};r.prototype._getTickValuesForConfiguration=function(q){q=this._scale.tickInterval(q.interval,q.step);var v=this._scale.domain(),B=q.map(function(K){return K.valueOf()});-1===B.indexOf(v[0].valueOf())&&q.unshift(v[0]);-1===B.indexOf(v[1].valueOf())&&q.push(v[1]);return q};r.prototype._renderTierLabels=function(q,v,B){var K=this,C=this._getTickValuesForConfiguration(v),y=[];"between"===this._tierLabelPositions[B]&&1===v.step?C.map(function(Y,ha){ha+1>=C.length||y.push(new Date((C[ha+1].valueOf()-
C[ha].valueOf())/2+C[ha].valueOf()))}):y=C;q=q.selectAll("."+h.Axis.TICK_LABEL_CLASS).data(y,function(Y){return String(Y.valueOf())});var L=q.enter().append("g").classed(h.Axis.TICK_LABEL_CLASS,!0);L.append("text");var U="center"===this._tierLabelPositions[B]||1===v.step?0:this.tickLabelPadding();var X="bottom"===this.orientation()?w.sum(this._tierHeights.slice(0,B+1))-this.tickLabelPadding():"center"===this._tierLabelPositions[B]?this.height()-w.sum(this._tierHeights.slice(0,B))-this.tickLabelPadding()-
this._maxLabelTickLength():this.height()-w.sum(this._tierHeights.slice(0,B))-this.tickLabelPadding();L=q.merge(L);var S=L.selectAll("text");0<S.size()&&S.attr("transform","translate("+U+","+X+")");q.exit().remove();L.attr("transform",function(Y){return"translate("+K._scale.scale(Y)+",0)"});B="center"===this._tierLabelPositions[B]||1===v.step?"middle":"start";L.selectAll("text").text(v.formatter).style("text-anchor",B)};r.prototype._renderTickMarks=function(q,v){q=this._tierMarkContainers[v].selectAll("."+
h.Axis.TICK_MARK_CLASS).data(q);var B=q.enter().append("line").classed(h.Axis.TICK_MARK_CLASS,!0).merge(q),K=this._generateTickMarkAttrHash(),C=this._tierHeights.slice(0,v).reduce(function(y,L){return y+L},0);"bottom"===this.orientation()?(K.y1=C,K.y2=C+("center"===this._tierLabelPositions[v]?this.innerTickLength():this._tierHeights[v])):(K.y1=this.height()-C,K.y2=this.height()-(C+("center"===this._tierLabelPositions[v]?this.innerTickLength():this._tierHeights[v])));B.attrs(K);"bottom"===this.orientation()?
(K.y1=C,K.y2=C+("center"===this._tierLabelPositions[v]?this.endTickLength():this._tierHeights[v])):(K.y1=this.height()-C,K.y2=this.height()-(C+("center"===this._tierLabelPositions[v]?this.endTickLength():this._tierHeights[v])));w.select(B.nodes()[0]).attrs(K);w.select(B.nodes()[B.size()-1]).attrs(K);w.select(B.nodes()[0]).classed(h.Axis.END_TICK_MARK_CLASS,!0);w.select(B.nodes()[B.size()-1]).classed(h.Axis.END_TICK_MARK_CLASS,!0);q.exit().remove()};r.prototype._renderLabellessTickMarks=function(q){q=
this._tickMarkContainer.selectAll("."+h.Axis.TICK_MARK_CLASS).data(q);var v=q.enter().append("line").classed(h.Axis.TICK_MARK_CLASS,!0).merge(q),B=this._generateTickMarkAttrHash();B.y2="bottom"===this.orientation()?this.tickLabelPadding():this.height()-this.tickLabelPadding();v.attrs(B);q.exit().remove()};r.prototype._generateLabellessTicks=function(){return 1>this._mostPreciseConfigIndex?[]:this._getTickIntervalValues(this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex-1][0])};r.prototype.renderImmediately=
function(){var q=this;this._mostPreciseConfigIndex=this._getMostPreciseConfigurationIndex();var v=this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex];this._cleanTiers();v.forEach(function(L,U){return q._renderTierLabels(q._tierLabelContainers[U],L,U)});for(var B=v.map(function(L,U){return q._getTickValuesForConfiguration(L)}),K=0,C=0;C<Math.max(v.length,1);++C){var y=this._generateBaselineAttrHash();y.y1+="bottom"===this.orientation()?K:-K;y.y2=y.y1;this._tierBaselines[C].attrs(y).style("visibility",
"inherit");K+=this._tierHeights[C]}K=[];C=this._scale.domain();C=this._scale.scale(C[1])-this._scale.scale(C[0]);1.5*this._getIntervalLength(v[0])>=C&&(K=this._generateLabellessTicks());this._renderLabellessTickMarks(K);this._hideOverflowingTiers();for(C=0;C<v.length;++C)this._renderTickMarks(B[C],C),this._hideOverlappingAndCutOffLabels(C);this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations();return this};r.prototype._hideOverflowingTiers=function(){var q=this,v=this.height(),
B=0;this.content().selectAll("."+r.TIME_AXIS_TIER_CLASS).attr("visibility",function(K,C){B+=q._tierHeights[C];return B<=v?"inherit":"hidden"})};r.prototype._hideOverlappingAndCutOffLabels=function(q){var v=this,B=this.element().node().getBoundingClientRect(),K=this._tierMarkContainers[q].selectAll("."+h.Axis.TICK_MARK_CLASS).filter(function(y,L){y=w.select(this).style("visibility");return"visible"===y||"inherit"===y}).nodes().map(function(y){return y.getBoundingClientRect()}),C;this._tierLabelContainers[q].selectAll("."+
h.Axis.TICK_LABEL_CLASS).filter(function(y,L){y=w.select(this).style("visibility");return"visible"===y||"inherit"===y}).each(function(y,L){y=this.getBoundingClientRect();var U=w.select(this),X=K[L],S=K[L+1];L=null!=C&&d.DOM.clientRectsOverlap(y,C);X=null!=X&&d.DOM.clientRectsOverlap(y,X);S=null!=S&&d.DOM.clientRectsOverlap(y,S);!(Math.floor(B.left)<=Math.ceil(y.left)&&Math.floor(B.top)<=Math.ceil(y.top)&&Math.floor(y.right)<=Math.ceil(B.left+v.width())&&Math.floor(y.bottom)<=Math.ceil(B.top+v.height()))||
L||X||S?U.style("visibility","hidden"):(C=y,U.style("visibility","inherit"))})};r.prototype.invalidateCache=function(){n.prototype.invalidateCache.call(this);this._measurer.reset()};return r}(h.Axis);I.TIME_AXIS_TIER_CLASS="time-axis-tier";I._SORTED_TIME_INTERVAL_INDEX=(g={},g[H.TimeInterval.second]=0,g[H.TimeInterval.minute]=1,g[H.TimeInterval.hour]=2,g[H.TimeInterval.day]=3,g[H.TimeInterval.week]=4,g[H.TimeInterval.month]=5,g[H.TimeInterval.year]=6,g);I._DEFAULT_TIME_AXIS_CONFIGURATIONS=[[{interval:H.TimeInterval.second,
step:1,formatter:k.time("%I:%M:%S %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.second,step:5,formatter:k.time("%I:%M:%S %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.second,step:10,formatter:k.time("%I:%M:%S %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.second,step:15,formatter:k.time("%I:%M:%S %p")},{interval:H.TimeInterval.day,step:1,
formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.second,step:30,formatter:k.time("%I:%M:%S %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.minute,step:1,formatter:k.time("%I:%M %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.minute,step:5,formatter:k.time("%I:%M %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.minute,step:10,formatter:k.time("%I:%M %p")},
{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.minute,step:15,formatter:k.time("%I:%M %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.minute,step:30,formatter:k.time("%I:%M %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.hour,step:1,formatter:k.time("%I %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.hour,
step:3,formatter:k.time("%I %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.hour,step:6,formatter:k.time("%I %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.hour,step:12,formatter:k.time("%I %p")},{interval:H.TimeInterval.day,step:1,formatter:k.time("%B %e, %Y")}],[{interval:H.TimeInterval.day,step:1,formatter:k.time("%a %e")},{interval:H.TimeInterval.month,step:1,formatter:k.time("%B %Y")}],[{interval:H.TimeInterval.day,
step:1,formatter:k.time("%e")},{interval:H.TimeInterval.month,step:1,formatter:k.time("%B %Y")}],[{interval:H.TimeInterval.month,step:1,formatter:k.time("%B")},{interval:H.TimeInterval.year,step:1,formatter:k.time("%Y")}],[{interval:H.TimeInterval.month,step:1,formatter:k.time("%b")},{interval:H.TimeInterval.year,step:1,formatter:k.time("%Y")}],[{interval:H.TimeInterval.month,step:3,formatter:k.time("%b")},{interval:H.TimeInterval.year,step:1,formatter:k.time("%Y")}],[{interval:H.TimeInterval.month,
step:6,formatter:k.time("%b")},{interval:H.TimeInterval.year,step:1,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:1,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:1,formatter:k.time("%y")}],[{interval:H.TimeInterval.year,step:5,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:25,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:50,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:100,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,
step:200,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:500,formatter:k.time("%Y")}],[{interval:H.TimeInterval.year,step:1E3,formatter:k.time("%Y")}]];I._LONG_DATE=new Date(9999,8,29,12,59,9999);H.Time=I;var g},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(12);I=function(p){function k(){var e=p.call(this)||this;e._detachCallback=
function(d){return e.remove(d)};return e}J(k,p);k.prototype.anchor=function(e){var d=this;e=w.coerceExternalD3(e);p.prototype.anchor.call(this,e);this._forEach(function(h){return h.anchor(d.element())});return this};k.prototype.render=function(){this._forEach(function(e){return e.render()});return this};k.prototype.has=function(e){throw Error("has() is not implemented on ComponentContainer");};k.prototype._adoptAndAnchor=function(e){e.parent(this);e.onDetach(this._detachCallback);this._isAnchored&&
e.anchor(this.element())};k.prototype.remove=function(e){this.has(e)&&(e.offDetach(this._detachCallback),this._remove(e),e.detach(),this.redraw());return this};k.prototype._remove=function(e){return!1};k.prototype._forEach=function(e){throw Error("_forEach() is not implemented on ComponentContainer");};k.prototype.destroy=function(){p.prototype.destroy.call(this);this._forEach(function(e){return e.destroy()})};k.prototype.invalidateCache=function(){this._forEach(function(e){return e.invalidateCache()})};
return k}(D(4).Component);H.ComponentContainer=I},function(I,H,D){function J(n){e.add(n);k.add(n);d||(d=!0,g.render())}var w=D(0);I=D(10);var p=D(39),k=new w.Set,e=new w.Set,d=!1,h=!1;H.Policy=I.makeEnum(["immediate","animationFrame","timeout"]);var g=new p.AnimationFrame;H.renderPolicy=function(n){if(null==n)return g;switch(n){case H.Policy.immediate:g=new p.Immediate;break;case H.Policy.animationFrame:g=new p.AnimationFrame;break;case H.Policy.timeout:g=new p.Timeout;break;default:w.Window.warn("Unrecognized renderPolicy: "+
n)}};H.registerToRender=function(n){h&&w.Window.warn("Registered to render while other components are flushing: request may be ignored");k.add(n);d||(d=!0,g.render())};H.registerToComputeLayoutAndRender=J;H.registerToComputeLayout=function(n){J(n)};H.flush=function(){if(d){e.forEach(function(r){return r.computeLayout()});k.forEach(function(r){return r.render()});h=!0;var n=new w.Set;k.forEach(function(r){try{r.renderImmediately()}catch(q){window.setTimeout(function(){throw q;},0),n.add(r)}});e=new w.Set;
k=n;h=d=!1}}},function(I,H,D){var J=D(1);H.circle=function(){return function(p){return J.symbol().type(J.symbolCircle).size(Math.PI*Math.pow(p/2,2))}};H.square=function(){return function(p){return J.symbol().type(J.symbolSquare).size(Math.pow(p,2))}};H.cross=function(){return function(p){return J.symbol().type(J.symbolCross).size(5/9*Math.pow(p,2))}};H.diamond=function(){return function(p){return J.symbol().type(J.symbolDiamond).size(Math.tan(Math.PI/6)*Math.pow(p,2)/2)}};H.triangle=function(){return function(p){return J.symbol().type(J.symbolTriangle).size(Math.sqrt(3)*
Math.pow(p/2,2))}};H.star=function(){return function(p){return J.symbol().type(J.symbolStar).size(.8908130915292852*Math.pow(p/2,2))}};var w=3*(1/Math.sqrt(12)/2+1);H.wye=function(){return function(p){return J.symbol().type(J.symbolWye).size(w*Math.pow(p/2.4,2))}}},function(I,H,D){var J=this&&this.__extends||function(d,h){function g(){this.constructor=d}for(var n in h)h.hasOwnProperty(n)&&(d[n]=h[n]);d.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)},w=D(25),p=D(0),k=D(12),e=D(37);
I=function(d){function h(){var g=d.call(this)||this;g._detectionRadius=3;g._resizable=!1;g._movable=!1;g._hasCorners=!0;g.addClass("drag-box-layer");g._dragInteraction=new w.Drag;g._setUpCallbacks();g._dragInteraction.attachTo(g);g._dragStartCallbacks=new p.CallbackSet;g._dragCallbacks=new p.CallbackSet;g._dragEndCallbacks=new p.CallbackSet;return g}J(h,d);h.prototype._setUpCallbacks=function(){function g(L,U){0===y&&L.x===U.x&&L.y===U.y&&q.boxVisible(!1);q._dragEndCallbacks.callCallbacks(q.bounds())}
function n(L,U){switch(y){case 0:K.x=U.x;K.y=U.y;break;case 1:v.bottom?K.y=U.y:v.top&&(B.y=U.y);v.right?K.x=U.x:v.left&&(B.x=U.x);break;case 2:L=U.x-C.x;var X=U.y-C.y;B.x+=L;B.y+=X;K.x+=L;K.y+=X;C=U}q._setBounds({topLeft:B,bottomRight:K});q._xBoundsMode===e.PropertyMode.VALUE&&null!=q.xScale()&&q._setXExtent([q.xScale().invert(B.x),q.xScale().invert(K.x)]);q._yBoundsMode===e.PropertyMode.VALUE&&null!=q.yScale()&&q._setYExtent([q.yScale().invert(B.y),q.yScale().invert(K.y)]);q.render();q._dragCallbacks.callCallbacks(q.bounds())}
function r(L){v=q._getResizingEdges(L);var U=q.bounds();U=U.topLeft.x<=L.x&&L.x<=U.bottomRight.x&&U.topLeft.y<=L.y&&L.y<=U.bottomRight.y;q.boxVisible()&&(v.top||v.bottom||v.left||v.right)?y=1:q.boxVisible()&&q.movable()&&U?y=2:(y=0,q._setBounds({topLeft:L,bottomRight:L}),q._xBoundsMode===e.PropertyMode.VALUE&&null!=q.xScale()&&q._setXExtent([q.xScale().invert(L.x),q.xScale().invert(L.x)]),q._yBoundsMode===e.PropertyMode.VALUE&&null!=q.yScale()&&q._setYExtent([q.yScale().invert(L.y),q.yScale().invert(L.y)]),
q.render());q.boxVisible(!0);U=q.bounds();B={x:U.topLeft.x,y:U.topLeft.y};K={x:U.bottomRight.x,y:U.bottomRight.y};C=L;q._dragStartCallbacks.callCallbacks(U)}var q=this,v,B,K,C,y=0;this._dragInteraction.onDragStart(r);this._dragInteraction.onDrag(n);this._dragInteraction.onDragEnd(g);this._disconnectInteraction=function(){q._dragInteraction.offDragStart(r);q._dragInteraction.offDrag(n);q._dragInteraction.offDragEnd(g);q._dragInteraction.detach()}};h.prototype._setup=function(){function g(){return n._box.append("line").styles({opacity:0,
stroke:"pink","pointer-events":"visibleStroke"})}var n=this;d.prototype._setup.call(this);this._detectionEdgeT=g().classed("drag-edge-tb",!0);this._detectionEdgeB=g().classed("drag-edge-tb",!0);this._detectionEdgeL=g().classed("drag-edge-lr",!0);this._detectionEdgeR=g().classed("drag-edge-lr",!0);if(this._hasCorners){var r=function(){return n._box.append("circle").styles({opacity:0,fill:"pink","pointer-events":"visibleFill"})};this._detectionCornerTL=r().classed("drag-corner-tl",!0);this._detectionCornerTR=
r().classed("drag-corner-tr",!0);this._detectionCornerBL=r().classed("drag-corner-bl",!0);this._detectionCornerBR=r().classed("drag-corner-br",!0)}};h.prototype._getResizingEdges=function(g){var n={top:!1,bottom:!1,left:!1,right:!1};if(!this.resizable())return n;var r=this.bounds(),q=r.topLeft.y,v=r.bottomRight.y,B=r.topLeft.x;r=r.bottomRight.x;var K=this._detectionRadius;B-K<=g.x&&g.x<=r+K&&(n.top=q-K<=g.y&&g.y<=q+K,n.bottom=v-K<=g.y&&g.y<=v+K);q-K<=g.y&&g.y<=v+K&&(n.left=B-K<=g.x&&g.x<=B+K,n.right=
r-K<=g.x&&g.x<=r+K);return n};h.prototype.renderImmediately=function(){d.prototype.renderImmediately.call(this);if(this.boxVisible()){var g=this.bounds(),n=g.topLeft.y,r=g.bottomRight.y,q=g.topLeft.x;g=g.bottomRight.x;this._detectionEdgeT.attrs({x1:q,y1:n,x2:g,y2:n,"stroke-width":2*this._detectionRadius});this._detectionEdgeB.attrs({x1:q,y1:r,x2:g,y2:r,"stroke-width":2*this._detectionRadius});this._detectionEdgeL.attrs({x1:q,y1:n,x2:q,y2:r,"stroke-width":2*this._detectionRadius});this._detectionEdgeR.attrs({x1:g,
y1:n,x2:g,y2:r,"stroke-width":2*this._detectionRadius});this._hasCorners&&(this._detectionCornerTL.attrs({cx:q,cy:n,r:this._detectionRadius}),this._detectionCornerTR.attrs({cx:g,cy:n,r:this._detectionRadius}),this._detectionCornerBL.attrs({cx:q,cy:r,r:this._detectionRadius}),this._detectionCornerBR.attrs({cx:g,cy:r,r:this._detectionRadius}))}return this};h.prototype.detectionRadius=function(g){if(null==g)return this._detectionRadius;if(0>g)throw Error("detection radius cannot be negative.");this._detectionRadius=
g;this.render();return this};h.prototype.resizable=function(g){if(null==g)return this._resizable;this._resizable=g;this._setResizableClasses(g);return this};h.prototype._setResizableClasses=function(g){g&&this.enabled()?(this.addClass("x-resizable"),this.addClass("y-resizable")):(this.removeClass("x-resizable"),this.removeClass("y-resizable"))};h.prototype.movable=function(g){if(null==g)return this._movable;this._movable=g;this._setMovableClass();return this};h.prototype._setMovableClass=function(){this.movable()&&
this.enabled()?this.addClass("movable"):this.removeClass("movable")};h.prototype.onDragStart=function(g){this._dragStartCallbacks.add(g);return this};h.prototype.offDragStart=function(g){this._dragStartCallbacks.delete(g);return this};h.prototype.onDrag=function(g){this._dragCallbacks.add(g);return this};h.prototype.offDrag=function(g){this._dragCallbacks.delete(g);return this};h.prototype.onDragEnd=function(g){this._dragEndCallbacks.add(g);return this};h.prototype.offDragEnd=function(g){this._dragEndCallbacks.delete(g);
return this};h.prototype.dragInteraction=function(){return this._dragInteraction};h.prototype.enabled=function(g){if(null==g)return this._dragInteraction.enabled();this._dragInteraction.enabled(g);this._setResizableClasses(this.resizable());this._setMovableClass();return this};h.prototype.destroy=function(){var g=this;d.prototype.destroy.call(this);this._dragStartCallbacks.forEach(function(n){return g._dragCallbacks.delete(n)});this._dragCallbacks.forEach(function(n){return g._dragCallbacks.delete(n)});
this._dragEndCallbacks.forEach(function(n){return g._dragEndCallbacks.delete(n)});this._disconnectInteraction()};h.prototype.detach=function(){this._resetState();this._dragInteraction.detach();d.prototype.detach.call(this);return this};h.prototype.anchor=function(g){g=k.coerceExternalD3(g);this._dragInteraction.attachTo(this);d.prototype.anchor.call(this,g);return this};h.prototype._resetState=function(){this.bounds({topLeft:{x:0,y:0},bottomRight:{x:0,y:0}})};return h}(D(43).SelectionBoxLayer);H.DragBoxLayer=
I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(18);I=function(k){function e(){return k.call(this,"path","line")||this}J(e,k);e.prototype._applyDefaultAttributes=function(d){d.style("fill","none")};e.prototype.getVisualPrimitiveAtIndex=function(d){return k.prototype.getVisualPrimitiveAtIndex.call(this,0)};return e}(D(9).SVGDrawer);
H.LineSVGDrawer=I;var p=["opacity","stroke-opacity","stroke-width","stroke"];H.makeLineCanvasDrawStep=function(k){return function(e,d,h){h=w.resolveAttributes(h,p,d[0],0);w.renderLine(e,k(),d[0],h)}}},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(18);I=function(k){function e(d){void 0===d&&(d="");var h=k.call(this,"rect","")||this;h._rootClassName=
d;h._root.classed(h._rootClassName,!0);return h}J(e,k);return e}(D(9).SVGDrawer);H.RectangleSVGDrawer=I;var p=["x","y","width","height"];H.RectangleCanvasDrawStep=function(k,e,d){k.save();e.forEach(function(h,g){null!=h&&(h=w.resolveAttributesSubsetWithStyles(d,p,h,g),k.beginPath(),k.rect(h.x,h.y,h.width,h.height),w.renderPathWithStyle(k,h))});k.restore()};I=function(k){function e(d){return k.call(this,d,H.RectangleCanvasDrawStep)||this}J(e,k);return e}(w.CanvasDrawer);H.RectangleCanvasDrawer=I},
function(I,H,D){function J(k){p.SHOW_WARNINGS&&console.warn(k)}function w(k,e){for(var d=[],h=2;h<arguments.length;h++)d[h-2]=arguments[h];return 0===e?(k(d),-1):window.setTimeout(k,e,d)}var p=D(23);H.warn=J;H.setTimeout=w;H.debounce=function(k,e,d){function h(){e.apply(d,n)}var g=null,n=[];return function(){n=Array.prototype.slice.call(arguments);clearTimeout(g);g=w(h,k)}};H.deprecated=function(k,e,d){void 0===d&&(d="");J("Method "+k+" has been deprecated in version "+e+". Please refer to the release notes. "+
d)}},function(I,H,D){I=function(){function J(w){this.ruler=null!=w.createRuler?w.createRuler():w}J.prototype.measure=function(w){void 0===w&&(w=J.HEIGHT_TEXT);return this.ruler(w)};return J}();I.HEIGHT_TEXT="bdpql";H.AbstractMeasurer=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(32));J(D(74));J(D(75));J(D(41));J(D(42));J(D(76));J(D(77));J(D(78));J(D(79));J(D(43));J(D(80));J(D(81));J(D(82))},function(I,H,D){var J=D(0);I=function(){function w(p,k){void 0===p&&
(p=[]);void 0===k&&(k={});this._updateId=0;this._data=p;this._metadata=k;this._callbacks=new J.CallbackSet}w.prototype.onUpdate=function(p){this._callbacks.add(p);return this};w.prototype.offUpdate=function(p){this._callbacks.delete(p);return this};w.prototype.data=function(p){if(null==p)return this._data;this._data=p;this._dispatchUpdate();return this};w.prototype.metadata=function(p){if(null==p)return this._metadata;this._metadata=p;this._dispatchUpdate();return this};w.prototype.updateId=function(){return this._updateId};
w.prototype._dispatchUpdate=function(){this._updateId++;this._callbacks.callCallbacks(this)};return w}();H.Dataset=I},function(I,H,D){var J=D(0),w=D(30);I=function(){function p(){}p.prototype.render=function(){w.flush()};return p}();H.Immediate=I;I=function(){function p(){}p.prototype.render=function(){J.DOM.requestAnimationFramePolyfill(w.flush)};return p}();H.AnimationFrame=I;I=function(){function p(){this._timeoutMsec=J.DOM.SCREEN_REFRESH_RATE_MILLISECONDS}p.prototype.render=function(){setTimeout(w.flush,
this._timeoutMsec)};return p}();H.Timeout=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(13),p=D(0);I=function(k){function e(){var d=null!==k&&k.apply(this,arguments)||this;d._keyPressCallbacks={};d._keyReleaseCallbacks={};d._mouseMoveCallback=function(h){return!1};d._downedKeys=new p.Set;d._keyDownCallback=function(h,g){return d._handleKeyDownEvent(h,
g)};d._keyUpCallback=function(h){return d._handleKeyUpEvent(h)};return d}J(e,k);e.prototype._anchor=function(d){k.prototype._anchor.call(this,d);this._positionDispatcher=w.Mouse.getDispatcher(this._componentAttachedTo);this._positionDispatcher.onMouseMove(this._mouseMoveCallback);this._keyDispatcher=w.Key.getDispatcher();this._keyDispatcher.onKeyDown(this._keyDownCallback);this._keyDispatcher.onKeyUp(this._keyUpCallback)};e.prototype._unanchor=function(){k.prototype._unanchor.call(this);this._positionDispatcher.offMouseMove(this._mouseMoveCallback);
this._positionDispatcher=null;this._keyDispatcher.offKeyDown(this._keyDownCallback);this._keyDispatcher.offKeyUp(this._keyUpCallback);this._keyDispatcher=null};e.prototype._handleKeyDownEvent=function(d,h){var g=this._translateToComponentSpace(this._positionDispatcher.lastMousePosition());this._isInsideComponent(g)&&!h.repeat&&(this._keyPressCallbacks[d]&&this._keyPressCallbacks[d].callCallbacks(d),this._downedKeys.add(d))};e.prototype._handleKeyUpEvent=function(d){this._downedKeys.has(d)&&this._keyReleaseCallbacks[d]&&
this._keyReleaseCallbacks[d].callCallbacks(d);this._downedKeys.delete(d)};e.prototype.onKeyPress=function(d,h){this._keyPressCallbacks[d]||(this._keyPressCallbacks[d]=new p.CallbackSet);this._keyPressCallbacks[d].add(h);return this};e.prototype.offKeyPress=function(d,h){this._keyPressCallbacks[d].delete(h);0===this._keyPressCallbacks[d].size&&delete this._keyPressCallbacks[d];return this};e.prototype.onKeyRelease=function(d,h){this._keyReleaseCallbacks[d]||(this._keyReleaseCallbacks[d]=new p.CallbackSet);
this._keyReleaseCallbacks[d].add(h);return this};e.prototype.offKeyRelease=function(d,h){this._keyReleaseCallbacks[d].delete(h);0===this._keyReleaseCallbacks[d].size&&delete this._keyReleaseCallbacks[d];return this};return e}(D(15).Interaction);H.Key=I},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(0);I=function(p){function k(e){void 0===
e&&(e=[]);var d=p.call(this)||this;d._components=[];d.addClass("component-group");e.forEach(function(h){return d.append(h)});return d}J(k,p);k.prototype._forEach=function(e){this.components().forEach(e)};k.prototype.has=function(e){return 0<=this._components.indexOf(e)};k.prototype.requestedSpace=function(e,d){var h=this._components.map(function(g){return g.requestedSpace(e,d)});return{minWidth:w.Math.max(h,function(g){return g.minWidth},0),minHeight:w.Math.max(h,function(g){return g.minHeight},0)}};
k.prototype.computeLayout=function(e,d,h){var g=this;p.prototype.computeLayout.call(this,e,d,h);this._forEach(function(n){n.computeLayout({x:0,y:0},g.width(),g.height())});return this};k.prototype._sizeFromOffer=function(e,d){return{width:e,height:d}};k.prototype.fixedWidth=function(){return this._components.every(function(e){return e.fixedWidth()})};k.prototype.fixedHeight=function(){return this._components.every(function(e){return e.fixedHeight()})};k.prototype.components=function(){return this._components.slice()};
k.prototype.append=function(e){null==e||this.has(e)||(e.detach(),this._components.push(e),this._adoptAndAnchor(e),this.redraw());return this};k.prototype._remove=function(e){e=this._components.indexOf(e);return 0<=e?(this._components.splice(e,1),!0):!1};return k}(D(29).ComponentContainer);H.Group=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,
new d)},w=D(0);I=D(4);var p;(function(k){k[k.VALUE=0]="VALUE";k[k.PIXEL=1]="PIXEL"})(p||(p={}));I=function(k){function e(d){var h=k.call(this)||this;h._mode=p.VALUE;if(d!==e.ORIENTATION_VERTICAL&&d!==e.ORIENTATION_HORIZONTAL)throw Error(d+" is not a valid orientation for GuideLineLayer");h._orientation=d;h._overflowHidden=!0;h.addClass("guide-line-layer");h._isVertical()?h.addClass("vertical"):h.addClass("horizontal");h._scaleUpdateCallback=function(){h._syncPixelPositionAndValue();h.render()};return h}
J(e,k);e.prototype._setup=function(){k.prototype._setup.call(this);this._guideLine=this.content().append("line").classed("guide-line",!0)};e.prototype._sizeFromOffer=function(d,h){return{width:d,height:h}};e.prototype._isVertical=function(){return this._orientation===e.ORIENTATION_VERTICAL};e.prototype.fixedWidth=function(){return!0};e.prototype.fixedHeight=function(){return!0};e.prototype.computeLayout=function(d,h,g){k.prototype.computeLayout.call(this,d,h,g);null!=this.scale()&&(this._isVertical()?
this.scale().range([0,this.width()]):this.scale().range([this.height(),0]));return this};e.prototype.renderImmediately=function(){k.prototype.renderImmediately.call(this);this._syncPixelPositionAndValue();this._guideLine.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition()});return this};e.prototype._syncPixelPositionAndValue=function(){null!=
this.scale()&&(this._mode===p.VALUE&&null!=this.value()?this._pixelPosition=this.scale().scale(this.value()):this._mode===p.PIXEL&&null!=this.pixelPosition()&&(this._value=this.scale().invert(this.pixelPosition())))};e.prototype._setPixelPositionWithoutChangingMode=function(d){this._pixelPosition=d;null!=this.scale()&&(this._value=this.scale().invert(this.pixelPosition()));this.render()};e.prototype.scale=function(d){if(null==d)return this._scale;var h=this._scale;null!=h&&h.offUpdate(this._scaleUpdateCallback);
this._scale=d;this._scale.onUpdate(this._scaleUpdateCallback);this._syncPixelPositionAndValue();this.redraw();return this};e.prototype.value=function(d){if(null==d)return this._value;this._value=d;this._mode=p.VALUE;this._syncPixelPositionAndValue();this.render();return this};e.prototype.pixelPosition=function(d){if(null==d)return this._pixelPosition;if(!w.Math.isValidNumber(d))throw Error("pixelPosition must be a finite number");this._pixelPosition=d;this._mode=p.PIXEL;this._syncPixelPositionAndValue();
this.render();return this};e.prototype.destroy=function(){k.prototype.destroy.call(this);null!=this.scale()&&this.scale().offUpdate(this._scaleUpdateCallback)};return e}(I.Component);I.ORIENTATION_VERTICAL="vertical";I.ORIENTATION_HORIZONTAL="horizontal";H.GuideLineLayer=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(0);I=D(4);var p;
(function(k){k[k.VALUE=0]="VALUE";k[k.PIXEL=1]="PIXEL"})(p=H.PropertyMode||(H.PropertyMode={}));I=function(k){function e(){var d=k.call(this)||this;d._boxVisible=!1;d._boxBounds={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};d._xBoundsMode=p.PIXEL;d._yBoundsMode=p.PIXEL;d.addClass("selection-box-layer");d._adjustBoundsCallback=function(){d.render()};d._overflowHidden=!0;d._xExtent=[void 0,void 0];d._yExtent=[void 0,void 0];return d}J(e,k);e.prototype._setup=function(){k.prototype._setup.call(this);this._box=
this.content().append("g").classed("selection-box",!0).remove();this._boxArea=this._box.append("rect").classed("selection-area",!0)};e.prototype._sizeFromOffer=function(d,h){return{width:d,height:h}};e.prototype.bounds=function(d){if(null==d)return this._getBounds();this._setBounds(d);this._yBoundsMode=this._xBoundsMode=p.PIXEL;this.render();return this};e.prototype._setBounds=function(d){this._boxBounds={topLeft:{x:Math.min(d.topLeft.x,d.bottomRight.x),y:Math.min(d.topLeft.y,d.bottomRight.y)},bottomRight:{x:Math.max(d.topLeft.x,
d.bottomRight.x),y:Math.max(d.topLeft.y,d.bottomRight.y)}}};e.prototype._getBounds=function(){return{topLeft:{x:this._xBoundsMode===p.PIXEL?this._boxBounds.topLeft.x:null==this._xScale?0:Math.min(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===p.PIXEL?this._boxBounds.topLeft.y:null==this._yScale?0:Math.min(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))},bottomRight:{x:this._xBoundsMode===p.PIXEL?this._boxBounds.bottomRight.x:
null==this._xScale?0:Math.max(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===p.PIXEL?this._boxBounds.bottomRight.y:null==this._yScale?0:Math.max(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))}}};e.prototype.renderImmediately=function(){k.prototype.renderImmediately.call(this);if(this._boxVisible){var d=this.bounds(),h=d.topLeft.y,g=d.bottomRight.y,n=d.topLeft.x;d=d.bottomRight.x;if(!(w.Math.isValidNumber(h)&&w.Math.isValidNumber(g)&&
w.Math.isValidNumber(n)&&w.Math.isValidNumber(d)))throw Error("bounds have not been properly set");this._boxArea.attrs({x:n,y:h,width:d-n,height:g-h});this.content().node().appendChild(this._box.node())}else this._box.remove();return this};e.prototype.boxVisible=function(d){if(null==d)return this._boxVisible;this._boxVisible=d;this.render();return this};e.prototype.fixedWidth=function(){return!0};e.prototype.fixedHeight=function(){return!0};e.prototype.xScale=function(d){if(null==d)return this._xScale;
null!=this._xScale&&this._xScale.offUpdate(this._adjustBoundsCallback);this._xScale=d;this._xBoundsMode=p.VALUE;this._xScale.onUpdate(this._adjustBoundsCallback);this.render();return this};e.prototype.yScale=function(d){if(null==d)return this._yScale;null!=this._yScale&&this._yScale.offUpdate(this._adjustBoundsCallback);this._yScale=d;this._yBoundsMode=p.VALUE;this._yScale.onUpdate(this._adjustBoundsCallback);this.render();return this};e.prototype.xExtent=function(d){if(null==d)return this._getXExtent();
this._setXExtent(d);this._xBoundsMode=p.VALUE;this.render();return this};e.prototype._getXExtent=function(){return this._xBoundsMode===p.VALUE?this._xExtent:null==this._xScale?[void 0,void 0]:[this._xScale.invert(this._boxBounds.topLeft.x),this._xScale.invert(this._boxBounds.bottomRight.x)]};e.prototype._setXExtent=function(d){this._xExtent=d};e.prototype.yExtent=function(d){if(null==d)return this._getYExtent();this._setYExtent(d);this._yBoundsMode=p.VALUE;this.render();return this};e.prototype._getYExtent=
function(){return this._yBoundsMode===p.VALUE?this._yExtent:null==this._yScale?[void 0,void 0]:[this._yScale.invert(this._boxBounds.topLeft.y),this._yScale.invert(this._boxBounds.bottomRight.y)]};e.prototype._setYExtent=function(d){this._yExtent=d};e.prototype.destroy=function(){k.prototype.destroy.call(this);null!=this._xScale&&this.xScale().offUpdate(this._adjustBoundsCallback);null!=this._yScale&&this.yScale().offUpdate(this._adjustBoundsCallback)};return e}(I.Component);H.SelectionBoxLayer=I},
function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return w.call(this,"path","arc fill")||this}J(p,w);p.prototype._applyDefaultAttributes=function(k){k.style("stroke","none")};return p}(D(9).SVGDrawer);H.ArcSVGDrawer=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&
(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return w.call(this,"path","arc outline")||this}J(p,w);p.prototype._applyDefaultAttributes=function(k){k.style("fill","none")};return p}(D(9).SVGDrawer);H.ArcOutlineSVGDrawer=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(18);
I=function(k){function e(){return k.call(this,"path","area")||this}J(e,k);e.prototype._applyDefaultAttributes=function(d){d.style("stroke","none")};e.prototype.getVisualPrimitiveAtIndex=function(d){return k.prototype.getVisualPrimitiveAtIndex.call(this,0)};return e}(D(9).SVGDrawer);H.AreaSVGDrawer=I;var p=["fill","opacity","fill-opacity"];H.makeAreaCanvasDrawStep=function(k){return function(e,d,h){h=w.resolveAttributes(h,p,d[0],0);w.renderArea(e,k(),d[0],h)}}},function(I,H,D){var J=this&&this.__extends||
function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return w.call(this,"line","")||this}J(p,w);return p}(D(9).SVGDrawer);H.SegmentSVGDrawer=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(86),p=
D(18);I=function(k){function e(){return k.call(this,"path","symbol")||this}J(e,k);return e}(D(9).SVGDrawer);H.SymbolSVGDrawer=I;H.makeSymbolCanvasDrawStep=function(k,e,d,h){var g=this;return function(n,r,q){for(var v=n.canvas,B=v.clientWidth,K=v.clientHeight,C=void 0===h?new w.CanvasBuffer(0,0):h,y=e(),L=d(),U=null,X=null,S=null,Y=0;Y<r.length;Y++){var ha=r[Y];if(null!=ha){var ia=p.resolveAttributesSubsetWithStyles(q,["x","y"],ha,Y),wa=L(ha,Y,k),Ba=ia.x,Ea=ia.y;if(0<=Ba+wa&&Ba-wa<=B&&0<=Ea+wa&&Ea-
wa<=K){a:if(Ba=p.ContextStyleAttrs,null==U)Ba=!1;else{for(Ea=0;Ea<Ba.length;Ea++){var Da=Ba[Ea];if(U[Da]!=ia[Da]){Ba=!1;break a}}Ba=!0}ha=y(ha,Y,g._dataset);Ba&&S==wa&&X==ha||(U=p.getStrokeWidth(ia),U=wa+U+1,(U>C.screenWidth||U>C.screenHeight)&&C.resize(U,U,!0),C.clear(),U=C.ctx,U.beginPath(),ha(wa).context(U)(null),U.closePath(),p.renderPathWithStyle(U,ia),X=ha,S=wa,U=ia);C.blitCenter(n,ia.x,ia.y)}}}}}},function(I,H,D){function J(C){return C instanceof q?C:C instanceof Date?k(C.valueOf()):C instanceof
r.Scale?w(C):C instanceof n.Dataset?p(C):g(C)?d(C):Array.isArray(C)?e(C):k(C)}function w(C){C={domain:C.domain(),range:C.range(),updateId:C.updateId(),ref:k(C)};return d(C)}function p(C){C={ref:k(C),updateId:C.updateId()};return d(C)}function k(C){return new B(C)}function e(C){return new v(C.map(function(y){return J(y)}))}function d(C){var y={},L;for(L in C)C.hasOwnProperty(L)&&(y[L]=J(C[L]));return new K(y)}var h=this&&this.__extends||function(C,y){function L(){this.constructor=C}for(var U in y)y.hasOwnProperty(U)&&
(C[U]=y[U]);C.prototype=null===y?Object.create(y):(L.prototype=y.prototype,new L)},g=D(128),n=D(38),r=D(17);H.sign=J;H.signScale=w;H.signDataset=p;H.signRef=k;H.signArray=e;H.signObj=d;var q=function(){function C(){}C.prototype.isDifferent=function(y){return y instanceof this.constructor?this.isSignatureDifferent(y):!0};return C}();H.Signature=q;var v=function(C){function y(L){var U=C.call(this)||this;U.array=L;return U}h(y,C);y.prototype.isSignatureDifferent=function(L){if(L.array.length!==this.array.length)return!0;
for(var U=0;U<this.array.length;U++)if(this.array[U].isDifferent(L.array[U]))return!0;return!1};return y}(q);H.ArraySignature=v;var B=function(C){function y(L){var U=C.call(this)||this;U.ref=L;return U}h(y,C);y.prototype.isSignatureDifferent=function(L){return this.ref!==L.ref};return y}(q);H.ReferenceSignature=B;var K=function(C){function y(L){var U=C.call(this)||this;U.obj=L;return U}h(y,C);y.prototype.isSignatureDifferent=function(L){var U=Object.keys(this.obj),X=Object.keys(L.obj);if(U.length!==
X.length)return!0;for(var S=0;S<U.length;S++)if(X=U[S],!L.obj.hasOwnProperty(X)||this.obj[X].isDifferent(L.obj[X]))return!0;return!1};return y}(q);H.ObjectSignature=K},function(I,H,D){var J=this&&this.__extends||function(q,v){function B(){this.constructor=q}for(var K in v)v.hasOwnProperty(K)&&(q[K]=v[K]);q.prototype=null===v?Object.create(v):(B.prototype=v.prototype,new B)},w=D(1),p=D(3),k=D(0),e=D(14),d=D(46),h=D(6),g=D(33),n=D(19);I=D(53);var r=D(2);I=function(q){function v(){var B=q.call(this)||
this;B.addClass("area-plot");B.y0(0);B.attr("fill-opacity",.25);B.attr("fill",(new p.Color).range()[0]);B._lineDrawers=new k.Map;return B}J(v,q);v.prototype.y=function(B,K){if(null==B)return q.prototype.y.call(this);null==K?q.prototype.y.call(this,B):q.prototype.y.call(this,B,K);null!=K&&(B=this.y0().accessor,null!=B&&this._bindProperty(v._Y0_KEY,B,K),this._updateYScale());return this};v.prototype.y0=function(B){if(null==B)return this._propertyBindings.get(v._Y0_KEY);var K=this.y();this._bindProperty(v._Y0_KEY,
B,K&&K.scale);this._updateYScale();this.render();return this};v.prototype._onDatasetUpdate=function(){q.prototype._onDatasetUpdate.call(this);this._updateYScale()};v.prototype._addDataset=function(B){var K=this;this._lineDrawers.set(B,new e.ProxyDrawer(function(){return new g.LineSVGDrawer},function(C){return new e.CanvasDrawer(C,g.makeLineCanvasDrawStep(function(){var y=r.Plot._scaledAccessor(K.x()),L=r.Plot._scaledAccessor(K.y());return K._d3LineFactory(B,y,L)}))}));q.prototype._addDataset.call(this,
B);return this};v.prototype._createNodesForDataset=function(B){q.prototype._createNodesForDataset.call(this,B);B=this._lineDrawers.get(B);"svg"===this.renderer()?B.useSVG(this._renderArea):B.useCanvas(this._canvas);return B};v.prototype._removeDatasetNodes=function(B){q.prototype._removeDatasetNodes.call(this,B);this._lineDrawers.get(B).remove()};v.prototype._additionalPaint=function(){var B=this,K=this._generateLineDrawSteps(),C=this._getDataToDraw();this.datasets().forEach(function(y){var L=r.Plot.applyDrawSteps(K,
y);B._lineDrawers.get(y).draw(C.get(y),L)})};v.prototype._generateLineDrawSteps=function(){var B=[];if(this._animateOnNextRender()){var K=this._generateLineAttrToProjector();K.d=this._constructLineProjector(r.Plot._scaledAccessor(this.x()),this._getResetYFunction());B.push({attrToProjector:K,animator:this._getAnimator(n.Animator.RESET)})}B.push({attrToProjector:this._generateLineAttrToProjector(),animator:this._getAnimator(n.Animator.MAIN)});return B};v.prototype._generateLineAttrToProjector=function(){var B=
this._getAttrToProjector();B.d=this._constructLineProjector(r.Plot._scaledAccessor(this.x()),r.Plot._scaledAccessor(this.y()));return B};v.prototype._createDrawer=function(B){var K=this;return new h.ProxyDrawer(function(){return new d.AreaSVGDrawer},function(C){return new e.CanvasDrawer(C,d.makeAreaCanvasDrawStep(function(){var y=r.Plot._scaledAccessor(K.x()),L=r.Plot._scaledAccessor(K.y()),U=r.Plot._scaledAccessor(K.y0()),X=K._createDefinedProjector(y,L);return K._createAreaGenerator(y,L,U,X,B)}))})};
v.prototype._generateDrawSteps=function(){var B=[];if(this._animateOnNextRender()){var K=this._getAttrToProjector();K.d=this._constructAreaProjector(r.Plot._scaledAccessor(this.x()),this._getResetYFunction(),r.Plot._scaledAccessor(this.y0()));B.push({attrToProjector:K,animator:this._getAnimator(n.Animator.RESET)})}B.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(n.Animator.MAIN)});return B};v.prototype._updateYScale=function(){var B=this.getExtentsForProperty("y0");B=
k.Array.flatten(B);B=k.Array.uniq(B);var K=1===B.length?B[0]:null;B=(B=this.y())&&B.scale;null!=B&&(null!=this._constantBaselineValueProvider&&(B.removePaddingExceptionsProvider(this._constantBaselineValueProvider),this._constantBaselineValueProvider=null),null!=K&&(this._constantBaselineValueProvider=function(){return[K]},B.addPaddingExceptionsProvider(this._constantBaselineValueProvider)))};v.prototype._getResetYFunction=function(){return r.Plot._scaledAccessor(this.y0())};v.prototype._propertyProjectors=
function(){var B=q.prototype._propertyProjectors.call(this);B.d=this._constructAreaProjector(r.Plot._scaledAccessor(this.x()),r.Plot._scaledAccessor(this.y()),r.Plot._scaledAccessor(this.y0()));return B};v.prototype.selections=function(B){var K=this;void 0===B&&(B=this.datasets());if("canvas"===this.renderer())return w.selectAll();var C=q.prototype.selections.call(this,B).nodes();B.map(function(y){return K._lineDrawers.get(y)}).filter(function(y){return null!=y}).forEach(function(y){return C.push.apply(C,
y.getVisualPrimitives())});return w.selectAll(C)};v.prototype._constructAreaProjector=function(B,K,C){var y=this,L=this._createDefinedProjector(r.Plot._scaledAccessor(this.x()),r.Plot._scaledAccessor(this.y()));return function(U,X,S){return y._createAreaGenerator(B,K,C,L,S)(U)}};v.prototype._createDefinedProjector=function(B,K){return function(C,y,L){var U=B(C,y,L);C=K(C,y,L);return k.Math.isValidNumber(U)&&k.Math.isValidNumber(C)}};v.prototype._createAreaGenerator=function(B,K,C,y,L){var U=this._getCurveFactory();
return w.area().x(function(X,S){return B(X,S,L)}).y1(function(X,S){return K(X,S,L)}).y0(function(X,S){return C(X,S,L)}).curve(U).defined(function(X,S){return y(X,S,L)})};return v}(I.Line);I._Y0_KEY="y0";H.Area=I},function(I,H,D){I=H.Animator||(H.Animator={});I.MAIN="main";I.RESET="reset"},function(I,H,D){var J=function(){function w(){var p=this;this.translate=this.scale=0;this.cachedDomain=[null,null];this.lastSeenDomain=[null,null];this.updateDomain=function(k){p.lastSeenDomain=k.getTransformationDomain();
var e=k.scaleTransformation(p.cachedDomain[1])-k.scaleTransformation(p.cachedDomain[0]),d=k.scaleTransformation(p.lastSeenDomain[1])-k.scaleTransformation(p.lastSeenDomain[0]);p.scale=e/d||1;p.translate=k.scaleTransformation(p.cachedDomain[0])-k.scaleTransformation(p.lastSeenDomain[0])*p.scale||0}}w.prototype.reset=function(){this.scale=1;this.translate=0;this.cachedDomain=this.lastSeenDomain};w.prototype.setDomain=function(p){this.cachedDomain=p.getTransformationDomain()};return w}();I=function(){function w(p,
k){var e=this;this.renderCallback=p;this.applyTransformCallback=k;this.domainTransformX=new J;this.domainTransformY=new J;this.renderDeferred=function(){e.applyTransform();clearTimeout(e.timeoutToken);e.timeoutToken=setTimeout(function(){e.renderCallback()},w.DEFERRED_RENDERING_DELAY)}}w.prototype.setDomains=function(p,k){p&&this.domainTransformX.setDomain(p);k&&this.domainTransformY.setDomain(k);this.renderDeferred()};w.prototype.updateDomains=function(p,k){p&&this.domainTransformX.updateDomain(p);
k&&this.domainTransformY.updateDomain(k);this.renderDeferred()};w.prototype.resetTransforms=function(){this.domainTransformX.reset();this.domainTransformY.reset();this.applyTransform()};w.prototype.applyTransform=function(){this.applyTransformCallback(this.domainTransformX.translate,this.domainTransformY.translate,this.domainTransformX.scale,this.domainTransformY.scale)};return w}();I.DEFERRED_RENDERING_DELAY=200;H.DeferredRenderer=I},function(I,H,D){var J=this&&this.__extends||function(K,C){function y(){this.constructor=
K}for(var L in C)C.hasOwnProperty(L)&&(K[L]=C[L]);K.prototype=null===C?Object.create(C):(y.prototype=C.prototype,new y)},w=D(1),p=D(7),k=D(14),e=D(6),d=D(33),h=D(3),g=D(11),n=D(0);I=D(10);var r=D(19),q=D(2),v=D(16),B={linear:w.curveLinear,linearClosed:w.curveLinearClosed,step:w.curveStep,stepBefore:w.curveStepBefore,stepAfter:w.curveStepAfter,basis:w.curveBasis,basisOpen:w.curveBasisOpen,basisClosed:w.curveBasisClosed,bundle:w.curveBundle,cardinal:w.curveCardinal,cardinalOpen:w.curveCardinalOpen,
cardinalClosed:w.curveCardinalClosed,monotone:w.curveMonotoneX};H.CurveName=I.makeEnum("linear linearClosed step stepBefore stepAfter basis basisOpen basisClosed bundle cardinal cardinalOpen cardinalClosed monotone".split(" "));I=function(K){function C(){var y=K.call(this)||this;y._curve="linear";y._autorangeSmooth=!1;y._croppedRenderingEnabled=!0;y._collapseDenseVerticalLinesEnabled=!1;y._downsamplingEnabled=!1;y.addClass("line-plot");var L=new p.Easing;L.stepDuration(q.Plot._ANIMATION_MAX_DURATION);
L.easingMode("expInOut");L.maxTotalDuration(q.Plot._ANIMATION_MAX_DURATION);y.animator(r.Animator.MAIN,L);y.attr("stroke",(new h.Color).range()[0]);y.attr("stroke-width","2px");return y}J(C,K);C.prototype.x=function(y,L,U){if(null==y)return K.prototype.x.call(this);K.prototype.x.call(this,y,L,U);this._setScaleSnapping();return this};C.prototype.y=function(y,L,U){if(null==y)return K.prototype.y.call(this);K.prototype.y.call(this,y,L,U);this._setScaleSnapping();return this};C.prototype.autorangeMode=
function(y){if(null==y)return K.prototype.autorangeMode.call(this);K.prototype.autorangeMode.call(this,y);this._setScaleSnapping();return this};C.prototype.autorangeSmooth=function(y){if(null==y)return this._autorangeSmooth;this._autorangeSmooth=y;this._setScaleSnapping();return this};C.prototype._setScaleSnapping=function(){"x"===this.autorangeMode()&&this.x()&&this.x().scale&&this.x().scale instanceof g.QuantitativeScale&&this.x().scale.snappingDomainEnabled(!this.autorangeSmooth());"y"===this.autorangeMode()&&
this.y()&&this.y().scale&&this.y().scale instanceof g.QuantitativeScale&&this.y().scale.snappingDomainEnabled(!this.autorangeSmooth())};C.prototype.curve=function(y){if(null==y)return this._curve;this._curve=y;this.render();return this};C.prototype.downsamplingEnabled=function(y){if(null==y)return this._downsamplingEnabled;this._downsamplingEnabled=y;return this};C.prototype.croppedRenderingEnabled=function(y){if(null==y)return this._croppedRenderingEnabled;this._croppedRenderingEnabled=y;this.render();
return this};C.prototype.collapseDenseLinesEnabled=function(y){if(null==y)return this._collapseDenseVerticalLinesEnabled;this._collapseDenseVerticalLinesEnabled=y;this.render();return this};C.prototype._createDrawer=function(y){var L=this;return new e.ProxyDrawer(function(){return new d.LineSVGDrawer},function(U){return new k.CanvasDrawer(U,d.makeLineCanvasDrawStep(function(){return L._d3LineFactory(y)}))})};C.prototype.getExtentsForProperty=function(y){var L=K.prototype.getExtentsForProperty.call(this,
y);if(!this._autorangeSmooth||this.autorangeMode()!==y||"x"!==this.autorangeMode()&&"y"!==this.autorangeMode())return L;y=this._getEdgeIntersectionPoints();var U="y"===this.autorangeMode()?y.left.concat(y.right).map(function(X){return X.y}):y.top.concat(y.bottom).map(function(X){return X.x});return L.map(function(X){return w.extent(w.merge([X,U]))})};C.prototype._getEdgeIntersectionPoints=function(){var y=this;if(!(this.y().scale instanceof g.QuantitativeScale&&this.x().scale instanceof g.QuantitativeScale))return{left:[],
right:[],top:[],bottom:[]};var L=this.y().scale,U=this.x().scale,X={left:[],right:[],top:[],bottom:[]},S=U.scale(U.domain()[0]),Y=U.scale(U.domain()[1]),ha=L.scale(L.domain()[0]),ia=L.scale(L.domain()[1]);this.datasets().forEach(function(wa){for(var Ba=wa.data(),Ea,Da,ya,Ja,La,Ra,Pa,Ma=1;Ma<Ba.length;Ma++)Ja=Ra||U.scale(y.x().accessor(Ba[Ma-1],Ma-1,wa)),La=Pa||L.scale(y.y().accessor(Ba[Ma-1],Ma-1,wa)),Ra=U.scale(y.x().accessor(Ba[Ma],Ma,wa)),Pa=L.scale(y.y().accessor(Ba[Ma],Ma,wa)),Ja<S===S<=Ra&&
(Ea=S-Ja,Da=Ra-Ja,ya=Pa-La,Ea=Ea*ya/Da,X.left.push({x:S,y:L.invert(La+Ea)})),Ja<Y===Y<=Ra&&(Ea=Y-Ja,Da=Ra-Ja,ya=Pa-La,Ea=Ea*ya/Da,X.right.push({x:Y,y:L.invert(La+Ea)})),La<ia===ia<=Pa&&(Da=Ra-Ja,Ea=ia-La,ya=Pa-La,Ea=Ea*Da/ya,X.top.push({x:U.invert(Ja+Ea),y:ia})),La<ha===ha<=Pa&&(Da=Ra-Ja,Ea=ha-La,ya=Pa-La,Ea=Ea*Da/ya,X.bottom.push({x:U.invert(Ja+Ea),y:ha}))});return X};C.prototype._getResetYFunction=function(){var y=this.y().scale.domain(),L=Math.max(y[0],y[1]);y=Math.min(y[0],y[1]);L=0>L&&L||0<y&&
y||0;var U=this.y().scale.scale(L);return function(X,S,Y){return U}};C.prototype._generateDrawSteps=function(){var y=[];if(this._animateOnNextRender()){var L=this._getAttrToProjector();L.d=this._constructLineProjector(q.Plot._scaledAccessor(this.x()),this._getResetYFunction());y.push({attrToProjector:L,animator:this._getAnimator(r.Animator.RESET)})}y.push({attrToProjector:this._getAttrToProjector(),animator:this._getAnimator(r.Animator.MAIN)});return y};C.prototype._generateAttrToProjector=function(){var y=
K.prototype._generateAttrToProjector.call(this);Object.keys(y).forEach(function(L){if("d"!==L){var U=y[L];y[L]=function(X,S,Y){return 0<X.length?U(X[0],S,Y):null}}});return y};C.prototype.entitiesAt=function(y){y=this.entityNearestByXThenY(y);return null!=y?[y]:[]};C.prototype.entityNearestByXThenY=function(y){var L=Infinity,U=Infinity,X,S=this.bounds();this.entities().forEach(function(Y){if(n.Math.within(Y.position,S)){var ha=Math.abs(y.x-Y.position.x),ia=Math.abs(y.y-Y.position.y);if(ha<L||ha===
L&&ia<U)X=Y,L=ha,U=ia}});return X};C.prototype._propertyProjectors=function(){var y=K.prototype._propertyProjectors.call(this);y.d=this._constructLineProjector(q.Plot._scaledAccessor(this.x()),q.Plot._scaledAccessor(this.y()));return y};C.prototype._constructLineProjector=function(y,L){var U=this;return function(X,S,Y){return U._d3LineFactory(Y,y,L)(X)}};C.prototype._d3LineFactory=function(y,L,U){void 0===L&&(L=q.Plot._scaledAccessor(this.x()));void 0===U&&(U=q.Plot._scaledAccessor(this.y()));return w.line().x(function(X,
S){return L(X,S,y)}).y(function(X,S){return U(X,S,y)}).curve(this._getCurveFactory()).defined(function(X,S){var Y=L(X,S,y);X=U(X,S,y);return n.Math.isValidNumber(Y)&&n.Math.isValidNumber(X)})};C.prototype._getCurveFactory=function(){var y=this.curve();return"string"===typeof y?(y=B[y],null==y?B.linear:y):y};C.prototype._getDataToDraw=function(){var y=this,L=new n.Map;this.datasets().forEach(function(U){var X=U.data();if(y._croppedRenderingEnabled||y._downsamplingEnabled){var S=X.map(function(Y,ha){return ha});
y._croppedRenderingEnabled&&(S=y._filterCroppedRendering(U,S));y._downsamplingEnabled&&(S=y._filterDownsampling(U,S));y._collapseDenseVerticalLinesEnabled&&(S=y._filterDenseLines(U,S));L.set(U,[S.map(function(Y,ha){return X[Y]})])}else L.set(U,[X])});return L};C.prototype._filterCroppedRendering=function(y,L){function U(ya,Ja){return n.Math.inRange(ya,0,X.width())&&n.Math.inRange(Ja,0,X.height())}for(var X=this,S=q.Plot._scaledAccessor(this.x()),Y=q.Plot._scaledAccessor(this.y()),ha=y.data(),ia=[],
wa=0;wa<L.length;wa++){var Ba=S(ha[L[wa]],L[wa],y),Ea=Y(ha[L[wa]],L[wa],y);Ba=U(Ba,Ea);if(!Ba&&null!=L[wa-1]&&null!=ha[L[wa-1]]){Ea=S(ha[L[wa-1]],L[wa-1],y);var Da=Y(ha[L[wa-1]],L[wa-1],y);Ba=Ba||U(Ea,Da)}Ba||null==L[wa+1]||null==ha[L[wa+1]]||(Ea=S(ha[L[wa+1]],L[wa+1],y),Da=Y(ha[L[wa+1]],L[wa+1],y),Ba=Ba||U(Ea,Da));Ba&&ia.push(L[wa])}return ia};C.prototype._filterDownsampling=function(y,L){function U(Pa,Ma){var fb=S(X[L[Pa]],L[Pa],y),pb=Y(X[L[Pa]],L[Pa],y),vc=S(X[L[Pa+1]],L[Pa+1],y);Pa=Y(X[L[Pa+1]],
L[Pa+1],y);return Infinity===Ma?Math.floor(fb)===Math.floor(vc):Math.floor(Pa)===Math.floor(pb+(vc-fb)*Ma)}if(0===L.length)return[];for(var X=y.data(),S=q.Plot._scaledAccessor(this.x()),Y=q.Plot._scaledAccessor(this.y()),ha=[L[0]],ia=0;ia<L.length-1;){var wa=L[ia],Ba=S(X[L[ia]],L[ia],y),Ea=Y(X[L[ia]],L[ia],y),Da=S(X[L[ia+1]],L[ia+1],y),ya=Y(X[L[ia+1]],L[ia+1],y);ya=Math.floor(Ba)===Math.floor(Da)?Infinity:(ya-Ea)/(Da-Ba);Da=L[ia];Ea=Infinity===ya?Ea:Ba;Ba=Da;for(var Ja=Ea,La=!0;ia<L.length-1&&(La||
U(ia,ya));){ia++;La=!1;var Ra=Infinity===ya?Y(X[L[ia]],L[ia],y):S(X[L[ia]],L[ia],y);Ra>Ja&&(Ja=Ra,Ba=L[ia]);Ra<Ea&&(Ea=Ra,Da=L[ia])}ya=L[ia];Da!==wa&&ha.push(Da);Ba!==Da&&Ba!==wa&&ha.push(Ba);ya!==wa&&ya!==Da&&ya!==Ba&&ha.push(ya)}return ha};C.prototype._filterDenseLines=function(y,L){if(0===L.length)return[];var U=y.data(),X=q.Plot._scaledAccessor(this.x()),S=q.Plot._scaledAccessor(this.y());return this._bucketByX(y,L,function(Y){return X(U[Y],Y,y)},function(Y){return S(U[Y],Y,y)})};C.prototype._bucketByX=
function(y,L,U,X){var S=[];y=y.data();for(var Y=null,ha=0;ha<=L.length;++ha){var ia=L[ha];if(null!=y[ia]){var wa=Math.floor(U(ia)),Ba=X(ia);null==Y?Y=new n.Bucket(ia,wa,Ba):Y.isInBucket(wa)?Y.addToBucket(Ba,ia):(S.push.apply(S,Y.getUniqueIndices()),Y=new n.Bucket(ia,wa,Ba))}}null!=Y&&S.push.apply(S,Y.getUniqueIndices());return S};return C}(v.XYPlot);H.Line=I},function(I,H,D){var J=this&&this.__extends||function(d,h){function g(){this.constructor=d}for(var n in h)h.hasOwnProperty(n)&&(d[n]=h[n]);d.prototype=
null===h?Object.create(h):(g.prototype=h.prototype,new g)},w=D(1),p=D(26),k=D(0),e=[0,1];I=function(d){function h(){var g=d.call(this)||this;g._range=[0,1];g._d3Scale=w.scaleBand();g._d3Scale.range(e);g._d3TransformationScale=w.scaleLinear();g._d3TransformationScale.domain(e);g._innerPadding=h._convertToPlottableInnerPadding(.3);g._outerPadding=h._convertToPlottableOuterPadding(.5,.3);return g}J(h,d);h.prototype.cloneWithoutProviders=function(){var g=(new h).domain(this.domain()).range(this.range()).innerPadding(this.innerPadding()).outerPadding(this.outerPadding());
g._d3TransformationScale.domain(this._d3TransformationScale.domain());return g};h.prototype.extentOfValues=function(g){return k.Array.uniq(g)};h.prototype._getExtent=function(){return k.Array.uniq(this._getAllIncludedValues())};h.prototype.domain=function(g){return d.prototype.domain.call(this,g)};h.prototype.invertRange=function(g){var n=this;void 0===g&&(g=this.range());var r=this._d3Scale.bandwidth(),q=this.invertedTransformation(g[0]),v=this.invertedTransformation(g[1]);g=this._d3Scale.domain();
var B=g.map(function(K){return n._d3Scale(K)+r/2});q=w.bisect(B,q);v=w.bisect(B,v);return g.slice(q,v)};h.prototype.range=function(g){return d.prototype.range.call(this,g)};h._convertToPlottableInnerPadding=function(g){return 1/(1-g)-1};h._convertToPlottableOuterPadding=function(g,n){return g/(1-n)};h.prototype._setBands=function(){var g=1-1/(1+this.innerPadding()),n=this.outerPadding()/(1+this.innerPadding());this._d3Scale.paddingInner(g);this._d3Scale.paddingOuter(n)};h.prototype.rangeBand=function(){return this._rescaleBand(this._d3Scale.bandwidth())};
h.prototype.stepWidth=function(){return this._rescaleBand(this._d3Scale.bandwidth()*(1+this.innerPadding()))};h.prototype.ticks=function(){return this.domain()};h.prototype.innerPadding=function(g){if(null==g)return this._innerPadding;this._innerPadding=g;this.range(this.range());this._dispatchUpdate();return this};h.prototype.outerPadding=function(g){if(null==g)return this._outerPadding;this._outerPadding=g;this.range(this.range());this._dispatchUpdate();return this};h.prototype.scale=function(g){g=
this._d3Scale(g)+this._d3Scale.bandwidth()/2;return this._d3TransformationScale(g)};h.prototype.zoom=function(g,n){var r=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(q){return r._d3TransformationScale.invert(p.zoomOut(q,g,n))}));this._dispatchUpdate()};h.prototype.pan=function(g){var n=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(r){return n._d3TransformationScale.invert(r+g)}));this._dispatchUpdate()};h.prototype.scaleTransformation=
function(g){return this._d3TransformationScale(g)};h.prototype.invertedTransformation=function(g){return this._d3TransformationScale.invert(g)};h.prototype.getTransformationExtent=function(){return e};h.prototype.getTransformationDomain=function(){return this._d3TransformationScale.domain()};h.prototype.setTransformationDomain=function(g){this._d3TransformationScale.domain(g);this._dispatchUpdate()};h.prototype._getDomain=function(){return this._backingScaleDomain()};h.prototype._backingScaleDomain=
function(g){if(null==g)return this._d3Scale.domain();this._d3Scale.domain(g);this._setBands();return this};h.prototype._getRange=function(){return this._range};h.prototype._setRange=function(g){this._range=g;this._d3TransformationScale.range(g);this._setBands()};h.prototype._rescaleBand=function(g){return Math.abs(this._d3TransformationScale(g)-this._d3TransformationScale(0))};return h}(D(17).Scale);H.Category=I},function(I,H,D){function J(v){try{var B=v.node().getBBox()}catch(K){B={x:0,y:0,width:0,
height:0}}return B}function w(v){if("number"===typeof v)return{min:v,max:v};if(v instanceof Object&&"min"in v&&"max"in v)return v;throw Error("input '"+v+"' can't be parsed as an Range");}function p(v,B){v=v.getPropertyValue(B);return parseFloat(v)||0}function k(v){if(null==v||"none"===v)return null;v=v.match(r);if(null==v||2>v.length)return null;v=v[1].split(q).map(function(B){return parseFloat(B)});return 6!=v.length?null:v}var e=D(1),d=Math;H.contains=function(v,B){for(;null!=B&&B!==v;)B=B.parentNode;
return B===v};H.elementBBox=J;H.entityBounds=function(v){return v instanceof SVGElement?J(e.select(v)):v instanceof HTMLElement?(v=v.getBoundingClientRect(),{x:v.left,y:v.top,width:v.width,height:v.height}):{x:0,y:0,width:0,height:0}};H.SCREEN_REFRESH_RATE_MILLISECONDS=1E3/60;H.requestAnimationFramePolyfill=function(v){null!=window.requestAnimationFrame?window.requestAnimationFrame(v):setTimeout(v,H.SCREEN_REFRESH_RATE_MILLISECONDS)};H.elementWidth=function(v){v=v instanceof e.selection?v.node():
v;v=window.getComputedStyle(v);return p(v,"width")+p(v,"padding-left")+p(v,"padding-right")+p(v,"border-left-width")+p(v,"border-right-width")};H.elementHeight=function(v){v=v instanceof e.selection?v.node():v;v=window.getComputedStyle(v);return p(v,"height")+p(v,"padding-top")+p(v,"padding-bottom")+p(v,"border-top-width")+p(v,"border-bottom-width")};var h=RegExp("translate\\s*\\(\\s*((?:[-+]?[0-9]*\\.?[0-9]+))(?:(?:(?:\\s+,?\\s*)|(?:,\\s*))((?:[-+]?[0-9]*\\.?[0-9]+)))?\\s*\\)"),g=RegExp("rotate\\s*\\(\\s*((?:[-+]?[0-9]*\\.?[0-9]+))\\s*\\)"),
n=RegExp("scale\\s*\\(\\s*((?:[-+]?[0-9]*\\.?[0-9]+))(?:(?:(?:\\s+,?\\s*)|(?:,\\s*))((?:[-+]?[0-9]*\\.?[0-9]+)))?\\s*\\)");H.getTranslateValues=function(v){v=h.exec(v.attr("transform"));if(null!=v){var B=v[2];return[+v[1],+(void 0===B?0:B)]}return[0,0]};H.getRotate=function(v){v=g.exec(v.attr("transform"));return null!=v?+v[1]:0};H.getScaleValues=function(v){var B=n.exec(v.attr("transform"));return null!=B?(v=B[1],B=B[2],[+v,null==B?+v:+B]):[0,0]};H.clientRectsOverlap=function(v,B){return d.floor(v.right)<=
d.ceil(B.left)||d.ceil(v.left)>=d.floor(B.right)||d.floor(v.bottom)<=d.ceil(B.top)||d.ceil(v.top)>=d.floor(B.bottom)?!1:!0};H.expandRect=function(v,B){return{left:v.left-B,top:v.top-B,right:v.right+B,bottom:v.bottom+B,width:v.width+2*B,height:v.height+2*B}};H.clientRectInside=function(v,B){return d.floor(B.left)<=d.ceil(v.left)&&d.floor(B.top)<=d.ceil(v.top)&&d.floor(v.right)<=d.ceil(B.right)&&d.floor(v.bottom)<=d.ceil(B.bottom)};H.intersectsBBox=function(v,B,K,C){void 0===C&&(C=.5);v=w(v);B=w(B);
return K.x+K.width>=v.min-C&&K.x<=v.max+C&&K.y+K.height>=B.min-C&&K.y<=B.max+C};H.getHtmlElementAncestors=function(v){for(var B=[];v&&v instanceof HTMLElement;)B.push(v),v=v.parentElement;return B};H.getElementTransform=function(v){v=window.getComputedStyle(v,null);v=v.getPropertyValue("-webkit-transform")||v.getPropertyValue("-moz-transform")||v.getPropertyValue("-ms-transform")||v.getPropertyValue("-o-transform")||v.getPropertyValue("transform");return k(v)};var r=/^matrix\(([^)]+)\)$/,q=/[, ]+/},
function(I,H,D){function J(g,n){return[g[0]*n[0]+g[2]*n[1],g[1]*n[0]+g[3]*n[1],g[0]*n[2]+g[2]*n[3],g[1]*n[2]+g[3]*n[3],g[0]*n[4]+g[2]*n[5]+g[4],g[1]*n[4]+g[3]*n[5]+g[5]]}function w(g,n){return[g[0],g[1],g[2],g[3],g[0]*n[0]+g[2]*n[1]+g[4],g[1]*n[0]+g[3]*n[1]+g[5]]}function p(g){var n=g[0]*g[3]-g[1]*g[2];if(0===n)throw Error("singular matrix");n=1/n;return[n*g[3],n*-g[1],n*-g[2],n*g[0],n*(-g[3]*g[4]+g[2]*g[5]),n*(g[1]*g[4]+-g[0]*g[5])]}var k=D(1),e=D(55),d=Math,h=[1,0,0,1,0,0];H.inRange=function(g,
n,r){return d.min(n,r)<=g&&g<=d.max(n,r)};H.clamp=function(g,n,r){return d.min(d.max(n,g),r)};H.max=function(g,n,r){var q="function"===typeof n?n:null;n=null==q?n:r;g=null==q?k.max(g):k.max(g,q);return void 0!==g?g:n};H.min=function(g,n,r){var q="function"===typeof n?n:null;n=null==q?n:r;g=null==q?k.min(g):k.min(g,q);return void 0!==g?g:n};H.isNaN=function(g){return g!==g};H.isValidNumber=function(g){return"number"===typeof g&&1>g-g};H.range=function(g,n,r){void 0===r&&(r=1);if(0===r)throw Error("step cannot be 0");
n=d.max(d.ceil((n-g)/r),0);for(var q=[],v=0;v<n;++v)q[v]=g+r*v;return q};H.distanceSquared=function(g,n){return d.pow(n.y-g.y,2)+d.pow(n.x-g.x,2)};H.degreesToRadians=function(g){return g/360*d.PI*2};H.within=function(g,n){return n.topLeft.x<=g.x&&n.bottomRight.x>=g.x&&n.topLeft.y<=g.y&&n.bottomRight.y>=g.y};H.boundsIntersects=function(g,n,r,q,v,B,K,C){return g<=v+K&&v<=g+r&&n<=B+C&&B<=n+q};H.getCumulativeTransform=function(g){g=e.getHtmlElementAncestors(g);for(var n=h,r=null,q=0;q<g.length;q++){var v=
g[q],B=e.getElementTransform(v);if(null!=B){var K=v.clientWidth/2,C=v.clientHeight/2;n=w(n,[K,C]);n=J(n,p(B));n=w(n,[-K,-C])}B=v.scrollLeft;K=v.scrollTop;if(null===r||v===r)B-=v.offsetLeft+v.clientLeft,K-=v.offsetTop+v.clientTop,r=v.offsetParent;n=w(n,[B,K])}return n};H.multiplyMatrix=J;H.premultiplyTranslate=function(g,n){return[n[0],n[1],n[2],n[3],n[4]+g[0],n[5]+g[1]]};H.multiplyTranslate=w;H.invertMatrix=p;H.applyTransform=function(g,n){return{x:g[0]*n.x+g[2]*n.y+g[4],y:g[1]*n.x+g[3]*n.y+g[5]}}},
function(I,H,D){var J=new (D(114).SplitStrategyLinear);I=function(){function k(e,d){void 0===e&&(e=5);void 0===d&&(d=J);this.maxNodeChildren=e;this.splitStrategy=d;this.root=new w(!0);this.size=0}k.prototype.getRoot=function(){return this.root};k.prototype.clear=function(){this.root=new w(!0);this.size=0};k.prototype.insert=function(e,d){for(var h=this.root;!h.leaf;)h=h.subtree(e);e=w.valueNode(e,d);h.insert(e);for(this.size+=1;h.overflow(this.maxNodeChildren);)h=h.split(this.splitStrategy),null==
h.parent&&(this.root=h);return e};k.prototype.locate=function(e){return this.query(function(d){return d.contains(e)})};k.prototype.intersect=function(e){return this.query(function(d){return p.isBoundsOverlapBounds(d,e)})};k.prototype.intersectX=function(e){return this.query(function(d){return p.isBoundsOverlapX(d,e)})};k.prototype.intersectY=function(e){return this.query(function(d){return p.isBoundsOverlapY(d,e)})};k.prototype.query=function(e){var d=[];if(null!=this.root.bounds&&!e(this.root.bounds))return d;
for(var h=[this.root];0<h.length;)for(var g=h.shift(),n=0;n<g.entries.length;n++){var r=g.entries[n];e(r.bounds)&&(g.leaf?d.push(r.value):h.push(r))}return d};return k}();H.RTree=I;var w=function(){function k(e){this.leaf=e;this.bounds=null;this.entries=[];this.value=this.parent=null}k.valueNode=function(e,d){var h=new k(!0);h.bounds=e;h.value=d;return h};k.prototype.overflow=function(e){return this.entries.length>e};k.prototype.insert=function(e){this.entries.push(e);e.parent=this;for(var d=this;null!=
d;)d.bounds=p.unionAll([d.bounds,e.bounds]),d=d.parent;return this};k.prototype.remove=function(e){e=this.entries.indexOf(e);if(0<=e)for(this.entries.splice(e,1),e=this;null!=e;)e.bounds=p.unionAll(e.entries.map(function(d){return d.bounds})),e=e.parent;return this};k.prototype.subtree=function(e){for(var d=null,h=0;h<this.entries.length;h++){var g=this.entries[h],n=g.unionAreaDifference(e);if(Infinity>n||Infinity===n&&null!=d&&g.entries.length<d.entries.length)d=g}return d};k.prototype.split=function(e){null!=
this.parent&&this.parent.remove(this);var d=[new k(this.leaf),new k(this.leaf)];e.split(this.entries,d);e=null!=this.parent?this.parent:new k(!1);e.insert(d[0]);e.insert(d[1]);return e};k.prototype.unionAreaDifference=function(e){return Math.abs(p.union(this.bounds,e).area()-this.bounds.area())};k.prototype.maxDepth=function(){return this.leaf?1:1+this.entries.map(function(e){return e.maxDepth()}).reduce(function(e,d){return Math.max(e,d)})};return k}();H.RTreeNode=w;var p=function(){function k(e,
d,h,g){this.xl=e;this.yl=d;this.xh=h;this.yh=g;this.width=this.xh-this.xl;this.height=this.yh-this.yl}k.xywh=function(e,d,h,g){return new k(e,d,e+h,d+g)};k.entityBounds=function(e){return new k(e.x,e.y,e.x+e.width,e.y+e.height)};k.bounds=function(e){return k.pointPair(e.topLeft,e.bottomRight)};k.pointPair=function(e,d){return new k(Math.min(e.x,d.x),Math.min(e.y,d.y),Math.max(e.x,d.x),Math.max(e.y,d.y))};k.points=function(e){if(2>e.length)throw Error("need at least 2 points to create bounds");var d=
e.map(function(h){return h.x});e=e.map(function(h){return h.y});return new k(d.reduce(function(h,g){return Math.min(h,g)}),e.reduce(function(h,g){return Math.min(h,g)}),d.reduce(function(h,g){return Math.max(h,g)}),e.reduce(function(h,g){return Math.max(h,g)}))};k.union=function(e,d){return new k(Math.min(e.xl,d.xl),Math.min(e.yl,d.yl),Math.max(e.xh,d.xh),Math.max(e.yh,d.yh))};k.unionAll=function(e){e=e.filter(function(d){return null!=d});return 0===e.length?null:e.reduce(function(d,h){return k.union(d,
h)})};k.isBoundsOverlapBounds=function(e,d){return k.isBoundsOverlapX(e,d)&&k.isBoundsOverlapY(e,d)};k.isBoundsOverlapX=function(e,d){return!(e.xh<d.xl)&&!(e.xl>d.xh)};k.isBoundsOverlapY=function(e,d){return!(e.yh<d.yl)&&!(e.yl>d.yh)};k.prototype.area=function(){null==this.areaCached&&(this.areaCached=(this.xh-this.xl)*(this.yh-this.yl));return this.areaCached};k.prototype.contains=function(e){return this.xl<=e.x&&this.xh>=e.x&&this.yl<=e.y&&this.yh>=e.y};return k}();H.RTreeBounds=p},function(I,H,
D){I=function(){function J(){"function"===typeof window.Set?this._es6Set=new window.Set:this._values=[];this.size=0}J.prototype.add=function(w){if(null!=this._es6Set)return this._es6Set.add(w),this.size=this._es6Set.size,this;this.has(w)||(this._values.push(w),this.size=this._values.length);return this};J.prototype.delete=function(w){if(null!=this._es6Set)return w=this._es6Set.delete(w),this.size=this._es6Set.size,w;w=this._values.indexOf(w);return-1!==w?(this._values.splice(w,1),this.size=this._values.length,
!0):!1};J.prototype.has=function(w){return null!=this._es6Set?this._es6Set.has(w):-1!==this._values.indexOf(w)};J.prototype.forEach=function(w,p){var k=this;null!=this._es6Set?this._es6Set.forEach(function(e,d){return w.call(p,e,d,k)},p):this._values.forEach(function(e){w.call(p,e,e,k)})};return J}();H.Set=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(131));J(D(130))},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&
(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(21);I=function(p){function k(e,d){var h=p.call(this,e,d)||this;h.cache=new w.Cache(function(g){return h._measureCharacterNotFromCache(g)});return h}J(k,p);k.prototype._measureCharacterNotFromCache=function(e){return p.prototype._measureCharacter.call(this,e)};k.prototype._measureCharacter=function(e){return this.cache.get(e)};k.prototype.reset=function(){this.cache.clear()};return k}(D(61).CharacterMeasurer);H.CacheCharacterMeasurer=
I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return w.apply(this,arguments)||this}J(p,w);p.prototype._measureCharacter=function(k){return w.prototype._measureLine.call(this,k)};p.prototype._measureLine=function(k){var e=this;k=k.split("").map(function(d){return e._measureCharacter(d)});return{height:k.reduce(function(d,
h){return Math.max(d,h.height)},0),width:k.reduce(function(d,h){return d+h.width},0)}};return p}(D(63).Measurer);H.CharacterMeasurer=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(36));J(D(60));J(D(132));J(D(61));J(D(63))},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(36);I=function(p){function k(e,
d){void 0===d&&(d=!1);var h=p.call(this,e)||this;h.useGuards=d;return h}J(k,p);k.prototype._addGuards=function(e){return w.AbstractMeasurer.HEIGHT_TEXT+e+w.AbstractMeasurer.HEIGHT_TEXT};k.prototype._measureLine=function(e,d){void 0===d&&(d=!1);e=(d=this.useGuards||d||/^[\t ]$/.test(e))?this._addGuards(e):e;e=p.prototype.measure.call(this,e);e.width-=d?2*this.getGuardWidth():0;return e};k.prototype.measure=function(e){var d=this;void 0===e&&(e=w.AbstractMeasurer.HEIGHT_TEXT);if(""===e.trim())return{width:0,
height:0};e=e.trim().split("\n").map(function(h){return d._measureLine(h)});return{height:e.reduce(function(h,g){return h+g.height},0),width:e.reduce(function(h,g){return Math.max(h,g.width)},0)}};k.prototype.getGuardWidth=function(){null==this.guardWidth&&(this.guardWidth=p.prototype.measure.call(this).width);return this.guardWidth};return k}(w.AbstractMeasurer);H.Measurer=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(138));J(D(65))},function(I,H,D){var J=D(21);
I=function(){function w(){this.maxLines(Infinity);this.textTrimming("ellipsis");this.allowBreakingWords(!0);this._tokenizer=new J.Tokenizer;this._breakingCharacter="-"}w.prototype.maxLines=function(p){if(null==p)return this._maxLines;this._maxLines=p;return this};w.prototype.textTrimming=function(p){if(null==p)return this._textTrimming;if("ellipsis"!==p&&"none"!==p)throw Error(p+" - unsupported text trimming option.");this._textTrimming=p;return this};w.prototype.allowBreakingWords=function(p){if(null==
p)return this._allowBreakingWords;this._allowBreakingWords=p;return this};w.prototype.wrap=function(p,k,e,d){var h=this;void 0===d&&(d=Infinity);var g={noBrokeWords:0,noLines:0,originalText:p,truncatedText:"",wrappedText:""};e={availableLines:Math.min(Math.floor(d/k.measure().height),this._maxLines),availableWidth:e,canFitText:!0,currentLine:"",wrapping:g};var n=p.split("\n");return n.reduce(function(r,q,v){return h.breakLineToFitWidth(r,q,v!==n.length-1,k)},e).wrapping};w.prototype.breakLineToFitWidth=
function(p,k,e,d){var h=this;p.canFitText||""===p.wrapping.truncatedText||(p.wrapping.truncatedText+="\n");p=this._tokenizer.tokenize(k).reduce(function(g,n){return h.wrapNextToken(n,g,d)},p);k=J.StringMethods.trimEnd(p.currentLine);p.wrapping.noLines+=+(""!==k);p.wrapping.noLines===p.availableLines&&"none"!==this._textTrimming&&e?p.canFitText=!1:p.wrapping.wrappedText+=k;p.currentLine="\n";return p};w.prototype.canFitToken=function(p,k,e){var d=this,h=this._allowBreakingWords?p.split("").map(function(g,
n){return n!==p.length-1?g+d._breakingCharacter:g}):[p];return e.measure(p).width<=k||h.every(function(g){return e.measure(g).width<=k})};w.prototype.addEllipsis=function(p,k,e){if("none"===this._textTrimming)return{remainingToken:"",wrappedToken:p};var d=p.substring(0).trim(),h=e.measure(d).width,g=e.measure("...").width,n=0<p.length&&"\n"===p[0]?"\n":"";if(k<=g)return{remainingToken:p,wrappedToken:n+"...".substr(0,Math.floor(k/(g/3)))};for(;h+g>k;)d=J.StringMethods.trimEnd(d.substr(0,d.length-1)),
h=e.measure(d).width;return{remainingToken:J.StringMethods.trimEnd(p.substring(d.length),"-").trim(),wrappedToken:n+d+"..."}};w.prototype.wrapNextToken=function(p,k,e){if(!k.canFitText||k.availableLines===k.wrapping.noLines||!this.canFitToken(p,k.availableWidth,e))return this.finishWrapping(p,k,e);for(;p;){var d=this.breakTokenToFitInWidth(p,k.currentLine,k.availableWidth,e);k.currentLine=d.line;p=d.remainingToken;if(null!=p)if(k.wrapping.noBrokeWords+=+d.breakWord,++k.wrapping.noLines,k.availableLines===
k.wrapping.noLines){e=this.addEllipsis(k.currentLine,k.availableWidth,e);k.wrapping.wrappedText+=e.wrappedToken;k.wrapping.truncatedText+=e.remainingToken+p;k.currentLine="\n";break}else k.wrapping.wrappedText+=J.StringMethods.trimEnd(k.currentLine),k.currentLine="\n"}return k};w.prototype.finishWrapping=function(p,k,e){k.canFitText&&k.availableLines!==k.wrapping.noLines&&this._allowBreakingWords&&"none"!==this._textTrimming?(e=this.addEllipsis(k.currentLine+p,k.availableWidth,e),k.wrapping.wrappedText+=
e.wrappedToken,k.wrapping.truncatedText+=e.remainingToken,k.wrapping.noBrokeWords+=+(e.remainingToken.length<p.length),k.wrapping.noLines+=+(0<e.wrappedToken.length),k.currentLine=""):k.wrapping.truncatedText+=p;k.canFitText=!1;return k};w.prototype.breakTokenToFitInWidth=function(p,k,e,d,h){void 0===h&&(h=this._breakingCharacter);if(d.measure(k+p).width<=e)return{breakWord:!1,line:k+p,remainingToken:null};if(""===p.trim())return{breakWord:!1,line:k,remainingToken:""};if(!this._allowBreakingWords)return{breakWord:!1,
line:k,remainingToken:p};for(var g=0;g<p.length;)if(d.measure(k+p.substring(0,g+1)+h).width<=e)++g;else break;e="";0<g&&(e=h);return{breakWord:0<g,line:k+p.substring(0,g)+e,remainingToken:p.substring(g)}};return w}();H.Wrapper=I},function(I,H,D){I=D(139);for(var J in I)H.hasOwnProperty(J)||(H[J]=I[J])},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}J(D(72));J(D(73));J(D(28))},function(I,H,D){H.version="3.7.0"},function(I,H,D){function J(v,B){return v.each(function(){var K=
B.apply(this,arguments),C=q.select(this),y;for(y in K)C.attr(y,K[y])})}function w(v,B){for(var K in B)v.attr(K,B[K]);return v}function p(v,B,K){return v.each(function(){var C=B.apply(this,arguments),y=q.select(this),L;for(L in C)y.style(L,C[L],K)})}function k(v,B,K){for(var C in B)v.style(C,B[C],K);return v}function e(v,B){return v.each(function(){var K=B.apply(this,arguments),C=q.select(this),y;for(y in K)C.property(y,K[y])})}function d(v,B){for(var K in B)v.property(K,B[K]);return v}function h(v,
B){return v.each(function(){var K=B.apply(this,arguments),C=q.select(this).transition(v),y;for(y in K)C.attr(y,K[y])})}function g(v,B){for(var K in B)v.attr(K,B[K]);return v}function n(v,B,K){return v.each(function(){var C=B.apply(this,arguments),y=q.select(this).transition(v),L;for(L in C)y.style(L,C[L],K)})}function r(v,B,K){for(var C in B)v.style(C,B[C],K);return v}var q=I=D(1);q.selection.prototype.attrs=function(v){return("function"===typeof v?J:w)(this,v)};q.selection.prototype.styles=function(v,
B){return("function"===typeof v?p:k)(this,v,null==B?"":B)};q.selection.prototype.properties=function(v){return("function"===typeof v?e:d)(this,v)};I.transition.prototype.attrs=function(v){return("function"===typeof v?h:g)(this,v)};I.transition.prototype.styles=function(v,B){return("function"===typeof v?n:r)(this,v,null==B?"":B)}},function(I,H,D){I=D(117);var J=D(12),w=D(10),p={linear:I.easeLinear,quad:I.easeQuad,quadIn:I.easeQuadIn,quadOut:I.easeQuadOut,quadInOut:I.easeQuadInOut,cubic:I.easeCubic,
cubicIn:I.easeCubicIn,cubicOut:I.easeCubicOut,cubicInOut:I.easeCubicInOut,poly:I.easePoly,polyIn:I.easePolyIn,polyOut:I.easePolyOut,polyInOut:I.easePolyInOut,sin:I.easeSin,sinIn:I.easeSinIn,sinOut:I.easeSinOut,sinInOut:I.easeSinInOut,exp:I.easeExp,expIn:I.easeExpIn,expOut:I.easeExpOut,expInOut:I.easeExpInOut,circle:I.easeCircle,circleIn:I.easeCircleIn,circleOut:I.easeCircleOut,circleInOut:I.easeCircleInOut,bounce:I.easeBounce,bounceIn:I.easeBounceIn,bounceOut:I.easeBounceOut,bounceInOut:I.easeBounceInOut,
back:I.easeBack,backIn:I.easeBackIn,backOut:I.easeBackOut,backInOut:I.easeBackInOut,elastic:I.easeElastic,elasticIn:I.easeElasticIn,elasticOut:I.easeElasticOut,elasticInOut:I.easeElasticInOut};H.EaseName=w.makeEnum("linear quad quadIn quadOut quadInOut cubic cubicIn cubicOut cubicInOut poly polyIn polyOut polyInOut sin sinIn sinOut sinInOut exp expIn expOut expInOut circle circleIn circleOut circleInOut bounce bounceIn bounceOut bounceInOut back backIn backOut backInOut elastic elasticIn elasticOut elasticInOut".split(" "));
I=function(){function k(){this._startDelay=k._DEFAULT_START_DELAY_MILLISECONDS;this._stepDuration=k._DEFAULT_STEP_DURATION_MILLISECONDS;this._stepDelay=k._DEFAULT_ITERATIVE_DELAY_MILLISECONDS;this._maxTotalDuration=k._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS;this._easingMode=k._DEFAULT_EASING_MODE}k.prototype.totalTime=function(e){var d=this._getAdjustedIterativeDelay(e);return this.startDelay()+d*Math.max(e-1,0)+this.stepDuration()};k.prototype.animate=function(e,d){var h=this;e=J.coerceExternalD3(e);
var g=e.size(),n=this._getAdjustedIterativeDelay(g);return e.transition().ease(this._getEaseFactory()).duration(this.stepDuration()).delay(function(r,q){return h.startDelay()+n*q}).attrs(d)};k.prototype.startDelay=function(e){if(null==e)return this._startDelay;this._startDelay=e;return this};k.prototype.stepDuration=function(e){if(null==e)return Math.min(this._stepDuration,this._maxTotalDuration);this._stepDuration=e;return this};k.prototype.stepDelay=function(e){if(null==e)return this._stepDelay;
this._stepDelay=e;return this};k.prototype.maxTotalDuration=function(e){if(null==e)return this._maxTotalDuration;this._maxTotalDuration=e;return this};k.prototype.easingMode=function(e){if(null==e)return this._easingMode;this._easingMode=e;return this};k.prototype._getEaseFactory=function(){var e=this.easingMode();return"string"===typeof e?(e=p[e],null==e?p.linear:e):e};k.prototype._getAdjustedIterativeDelay=function(e){var d=this.maxTotalDuration()-this.stepDuration();d=Math.max(d,0);e=d/Math.max(e-
1,1);return Math.min(this.stepDelay(),e)};return k}();I._DEFAULT_START_DELAY_MILLISECONDS=0;I._DEFAULT_STEP_DURATION_MILLISECONDS=300;I._DEFAULT_ITERATIVE_DELAY_MILLISECONDS=15;I._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS=Infinity;I._DEFAULT_EASING_MODE="expOut";H.Easing=I},function(I,H,D){var J=D(12);I=function(){function w(){}w.prototype.totalTime=function(p){return 0};w.prototype.animate=function(p,k){p=J.coerceExternalD3(p);return p.attrs(k)};return w}();H.Null=I},function(I,H,D){var J=this&&this.__extends||
function(h,g){function n(){this.constructor=h}for(var r in g)g.hasOwnProperty(r)&&(h[r]=g[r]);h.prototype=null===g?Object.create(g):(n.prototype=g.prototype,new n)},w=D(1),p=D(5),k=D(4),e=D(0),d=D(22);I=function(h){function g(n,r){void 0===r&&(r="bottom");var q=h.call(this,n,r)||this;q._tickLabelAngle=0;q._tickLabelShearAngle=0;q.addClass("category-axis");return q}J(g,h);Object.defineProperty(g.prototype,"_wrapper",{get:function(){var n=new p.Wrapper;null!=this._tickLabelMaxLines&&n.maxLines(this._tickLabelMaxLines);
return n},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"_writer",{get:function(){return new p.Writer(this._measurer,this._typesetterContext,this._wrapper)},enumerable:!0,configurable:!0});g.prototype._setup=function(){h.prototype._setup.call(this);this._typesetterContext=new p.SvgContext(this._tickLabelContainer.node());this._measurer=new p.CacheMeasurer(this._typesetterContext)};g.prototype._rescale=function(){return this.redraw()};g.prototype.requestedSpace=function(n,r){var q=
this.isHorizontal()?0:this._tickSpaceRequired()+this.margin(),v=this.isHorizontal()?this._tickSpaceRequired()+this.margin():0;if(0===this._scale.domain().length)return{minWidth:0,minHeight:0};if(this.annotationsEnabled()){var B=this._annotationTierHeight()*this.annotationTierCount();this.isHorizontal()?v+=B:q+=B}n=this._measureTickLabels(n,r);return{minWidth:n.usedWidth+q,minHeight:n.usedHeight+v}};g.prototype._coreSize=function(){var n=this.isHorizontal()?this.height():this.width(),r=this.isHorizontal()?
this.requestedSpace(this.width(),this.height()).minHeight:this.requestedSpace(this.width(),this.height()).minWidth,q=this.margin()+this._annotationTierHeight();return Math.min(r-q,n)};g.prototype._getTickValues=function(){return this.getDownsampleInfo().domain};g.prototype._sizeFromOffer=function(n,r){return k.Component.prototype._sizeFromOffer.call(this,n,r)};g.prototype.getDownsampleInfo=function(n,r){void 0===n&&(n=this._scale);void 0===r&&(r=n.invertRange());var q=Math.ceil(g._MINIMUM_WIDTH_PER_LABEL_PX*
(0===this._tickLabelAngle?1:1/Math.cos(this._tickLabelShearAngle/180*Math.PI))/n.stepWidth());return{domain:r.filter(function(v,B){return 0===B%q}),stepWidth:q*n.stepWidth()}};g.prototype.tickLabelAngle=function(n){if(null==n)return this._tickLabelAngle;if(0!==n&&90!==n&&-90!==n)throw Error("Angle "+n+" not supported; only 0, 90, and -90 are valid values");this._tickLabelAngle=n;this.redraw();return this};g.prototype.tickLabelShearAngle=function(n){if(null==n)return this._tickLabelShearAngle;if(-80>
n||80<n)throw Error("Angle "+n+" not supported; Must be between [-80, 80]");this._tickLabelShearAngle=n;this.redraw();return this};g.prototype.tickLabelMaxWidth=function(n){if(0===arguments.length)return this._tickLabelMaxWidth;this._tickLabelMaxWidth=n;this.redraw();return this};g.prototype.tickLabelMaxLines=function(n){if(0===arguments.length)return this._tickLabelMaxLines;this._tickLabelMaxLines=n;this.redraw();return this};g.prototype._tickSpaceRequired=function(){return this._maxLabelTickLength()+
this.tickLabelPadding()};g.prototype._drawTicks=function(n,r){var q=this;switch(this.tickLabelAngle()){case 0:var v={left:"right",right:"left",top:"center",bottom:"center"};var B={left:"center",right:"center",top:"bottom",bottom:"top"};break;case 90:v={left:"center",right:"center",top:"right",bottom:"left"};B={left:"top",right:"bottom",top:"center",bottom:"center"};break;case -90:v={left:"center",right:"center",top:"left",bottom:"right"},B={left:"bottom",right:"top",top:"center",bottom:"center"}}r.each(function(K){var C=
w.select(this),y=q.isHorizontal()?n:q.width()-q._tickSpaceRequired(),L=q.isHorizontal()?q.height()-q._tickSpaceRequired():n,U={xAlign:v[q.orientation()],yAlign:B[q.orientation()],textRotation:q.tickLabelAngle(),textShear:q.tickLabelShearAngle()};if(null!=q._tickLabelMaxWidth){if("left"===q.orientation()&&y>q._tickLabelMaxWidth){var X=y-q._tickLabelMaxWidth;X=C.attr("transform")+" translate("+X+", 0)";C.attr("transform",X)}y=Math.min(y,q._tickLabelMaxWidth)}q._writer.write(q.formatter()(K),y,L,U,C.node())})};
g.prototype._measureTickLabels=function(n,r){var q=this,v=this._scale.cloneWithoutProviders().range([0,this.isHorizontal()?n:r]),B=this.getDownsampleInfo(v);v=B.domain;var K=B.stepWidth,C=n-this._tickSpaceRequired();this.isHorizontal()&&(C=K,0!==this._tickLabelAngle&&(C=r-this._tickSpaceRequired()),C=Math.max(C,0));var y=K;this.isHorizontal()&&(y=r-this._tickSpaceRequired(),0!==this._tickLabelAngle&&(y=n-this._tickSpaceRequired()),y=Math.max(y,0));null!=this._tickLabelMaxWidth&&(C=Math.min(C,this._tickLabelMaxWidth));
n=v.map(function(U){return q._wrapper.wrap(q.formatter()(U),q._measurer,C,y)});v=this.isHorizontal()&&0===this._tickLabelAngle?w.sum:e.Math.max;r=this.isHorizontal()&&0===this._tickLabelAngle?e.Math.max:w.sum;v=v(n,function(U){return q._measurer.measure(U.wrappedText).width},0);n=r(n,function(U){return q._measurer.measure(U.wrappedText).height},0);if(0!==this._tickLabelAngle){var L=[n,v];v=L[0];n=L[1]}return{usedWidth:v,usedHeight:n}};g.prototype.renderImmediately=function(){var n=this;h.prototype.renderImmediately.call(this);
var r=this._scale,q=this.getDownsampleInfo(r),v=q.domain,B=q.stepWidth,K=B;this.isHorizontal()&&null!=this._tickLabelMaxWidth&&(K=Math.min(K,this._tickLabelMaxWidth));v=this._tickLabelContainer.selectAll("."+d.Axis.TICK_LABEL_CLASS).data(v);var C=v.enter().append("g").classed(d.Axis.TICK_LABEL_CLASS,!0).merge(v);v.exit().remove();C.attr("transform",function(y,L){L=r.scale(y)-K/2;y=n.isHorizontal()?L:0;L=n.isHorizontal()?0:L;return"translate("+y+","+L+")"});C.text("");this._drawTicks(B,C);B="right"===
this.orientation()?this._tickSpaceRequired():0;v="bottom"===this.orientation()?this._tickSpaceRequired():0;this._tickLabelContainer.attr("transform","translate("+B+","+v+")");this._showAllTickMarks();this._showAllTickLabels();this._hideTickMarksWithoutLabel();return this};g.prototype.computeLayout=function(n,r,q){h.prototype.computeLayout.call(this,n,r,q);this.isHorizontal()||this._scale.range([0,this.height()]);return this};g.prototype.invalidateCache=function(){h.prototype.invalidateCache.call(this);
this._measurer.reset()};return g}(d.Axis);I._MINIMUM_WIDTH_PER_LABEL_PX=15;H.Category=I},function(I,H,D){var J=this&&this.__extends||function(h,g){function n(){this.constructor=h}for(var r in g)g.hasOwnProperty(r)&&(h[r]=g[r]);h.prototype=null===g?Object.create(g):(n.prototype=g.prototype,new n)},w=D(1),p=D(5),k=D(8),e=D(0),d=D(22);I=function(h){function g(n,r){var q=h.call(this,n,r)||this;q._tickLabelPositioning="center";q._usesTextWidthApproximation=!1;q.formatter(k.general());return q}J(g,h);g.prototype._setup=
function(){h.prototype._setup.call(this);var n=new p.SvgContext(this._tickLabelContainer.node(),d.Axis.TICK_LABEL_CLASS);this._measurer=new p.CacheMeasurer(n);this._wrapper=(new p.Wrapper).maxLines(1)};g.prototype._computeWidth=function(){var n=this._usesTextWidthApproximation?this._computeApproximateTextWidth():this._computeExactTextWidth();return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+n:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+
n)};g.prototype._computeExactTextWidth=function(){var n=this,r=this._getTickValues().map(function(q){q=n.formatter()(q);return n._measurer.measure(q).width});return e.Math.max(r,0)};g.prototype._computeApproximateTextWidth=function(){var n=this,r=this._getTickValues(),q=this._measurer.measure("M").width;r=r.map(function(v){return n.formatter()(v).length*q});return e.Math.max(r,0)};g.prototype._computeHeight=function(){var n=this._measurer.measure().height;return"center"===this._tickLabelPositioning?
this._maxLabelTickLength()+this.tickLabelPadding()+n:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+n)};g.prototype._getTickValues=function(){var n=this._scale,r=n.domain(),q=r[0]<=r[1]?r[0]:r[1],v=r[0]>=r[1]?r[0]:r[1];return n.ticks().filter(function(B){return B>=q&&B<=v})};g.prototype._rescale=function(){if(this._isSetup){if(!this.isHorizontal()){var n=this._computeWidth();if(n>this.width()||n<this.width()-this.margin()){this.redraw();return}}this.render()}};g.prototype.renderImmediately=
function(){var n=this;h.prototype.renderImmediately.call(this);var r={x:0,y:0,dx:"0em",dy:"0.3em"},q=this._maxLabelTickLength(),v=this.tickLabelPadding(),B="middle",K=0,C=0,y=0,L=0;if(this.isHorizontal())switch(this._tickLabelPositioning){case "left":B="end";K=-v;L=v;break;case "center":L=q+v;break;case "right":B="start",L=K=v}else switch(this._tickLabelPositioning){case "top":r.dy="-0.3em";y=v;C=-v;break;case "center":y=q+v;break;case "bottom":r.dy="1em",C=y=v}q=this._generateTickMarkAttrHash();
switch(this.orientation()){case "bottom":r.x=q.x1;r.dy="0.95em";C=q.y1+L;break;case "top":r.x=q.x1;r.dy="-.25em";C=q.y1-L;break;case "left":B="end";K=q.x1-y;r.y=q.y1;break;case "right":B="start",K=q.x1+y,r.y=q.y1}y=this._getTickValues();y=this._tickLabelContainer.selectAll("."+d.Axis.TICK_LABEL_CLASS).data(y);y.exit().remove();y.enter().append("text").classed(d.Axis.TICK_LABEL_CLASS,!0).merge(y).style("text-anchor",B).style("visibility","inherit").attrs(r).text(function(U){return n.formatter()(U)});
this._tickLabelContainer.attr("transform","translate("+K+", "+C+")");this._showAllTickMarks();this.showEndTickLabels()||this._hideEndTickLabels();this._hideOverflowingTickLabels();this._hideOverlappingTickLabels();"center"!==this._tickLabelPositioning&&this._hideTickMarksWithoutLabel();return this};g.prototype.tickLabelPosition=function(n){if(null==n)return this._tickLabelPositioning;n=n.toLowerCase();if(this.isHorizontal()){if("left"!==n&&"center"!==n&&"right"!==n)throw Error(n+" is not a valid tick label position for a horizontal NumericAxis");
}else if("top"!==n&&"center"!==n&&"bottom"!==n)throw Error(n+" is not a valid tick label position for a vertical NumericAxis");this._tickLabelPositioning=n;this.redraw();return this};g.prototype.usesTextWidthApproximation=function(n){if(null==n)return this._usesTextWidthApproximation;this._usesTextWidthApproximation=n;return this};g.prototype._hideEndTickLabels=function(){var n=this.element().node().getBoundingClientRect(),r=this._tickLabelContainer.selectAll("."+d.Axis.TICK_LABEL_CLASS);if(0!==r.size()){var q=
r.nodes()[0];e.DOM.clientRectInside(q.getBoundingClientRect(),n)||w.select(q).style("visibility","hidden");r=r.nodes()[r.size()-1];e.DOM.clientRectInside(r.getBoundingClientRect(),n)||w.select(r).style("visibility","hidden")}};g.prototype._hideOverlappingTickLabels=function(){for(var n=this._tickLabelContainer.selectAll("."+d.Axis.TICK_LABEL_CLASS).filter(function(v,B){v=w.select(this).style("visibility");return"inherit"===v||"visible"===v}),r=n.nodes().map(function(v){return v.getBoundingClientRect()}),
q=1;!this._hasOverlapWithInterval(q,r)&&q<r.length;)q+=1;n.each(function(v,B){v=w.select(this);0!==B%q&&v.style("visibility","hidden")})};g.prototype._hasOverlapWithInterval=function(n,r){var q="center"===this._tickLabelPositioning?this.tickLabelPadding():3*this.tickLabelPadding();r=r.map(function(B){return e.DOM.expandRect(B,q)});for(var v=0;v<r.length-n;v+=n)if(e.DOM.clientRectsOverlap(r[v],r[v+n]))return!1;return!0};g.prototype.invalidateCache=function(){h.prototype.invalidateCache.call(this);
this._measurer.reset()};return g}(d.Axis);H.Numeric=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)};I=D(42);var w=D(25),p=D(0);I=function(k){function e(d){function h(v,B){q&&(q=!1,r._dragEndCallbacks.callCallbacks(r))}function g(v,B){q&&(r._setPixelPositionWithoutChangingMode(r._isVertical()?B.x:B.y),r._dragCallbacks.callCallbacks(r))}
function n(v){if(r._isVertical()&&r.pixelPosition()-r.detectionRadius()<=v.x&&v.x<=r.pixelPosition()+r.detectionRadius()||!r._isVertical()&&r.pixelPosition()-r.detectionRadius()<=v.y&&v.y<=r.pixelPosition()+r.detectionRadius())q=!0,r._dragStartCallbacks.callCallbacks(r)}var r=k.call(this,d)||this;r._detectionRadius=3;r._enabled=!0;r.addClass("drag-line-layer");r.addClass("enabled");r._dragInteraction=new w.Drag;r._dragInteraction.attachTo(r);var q=!1;r._dragInteraction.onDragStart(n);r._dragInteraction.onDrag(g);
r._dragInteraction.onDragEnd(h);r._disconnectInteraction=function(){r._dragInteraction.offDragStart(n);r._dragInteraction.offDrag(g);r._dragInteraction.offDragEnd(h);r._dragInteraction.detach()};r._dragStartCallbacks=new p.CallbackSet;r._dragCallbacks=new p.CallbackSet;r._dragEndCallbacks=new p.CallbackSet;return r}J(e,k);e.prototype._setup=function(){k.prototype._setup.call(this);this._detectionEdge=this.content().append("line").styles({opacity:0,stroke:"pink","pointer-events":"visibleStroke"}).classed("drag-edge",
!0)};e.prototype.renderImmediately=function(){k.prototype.renderImmediately.call(this);this._detectionEdge.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition(),"stroke-width":2*this._detectionRadius});return this};e.prototype.detectionRadius=function(d){if(null==d)return this._detectionRadius;if(0>d)throw Error("detection radius cannot be negative.");
this._detectionRadius=d;this.render();return this};e.prototype.enabled=function(d){if(null==d)return this._enabled;(this._enabled=d)?this.addClass("enabled"):this.removeClass("enabled");this._dragInteraction.enabled(d);return this};e.prototype.onDragStart=function(d){this._dragStartCallbacks.add(d);return this};e.prototype.offDragStart=function(d){this._dragStartCallbacks.delete(d);return this};e.prototype.onDrag=function(d){this._dragCallbacks.add(d);return this};e.prototype.offDrag=function(d){this._dragCallbacks.delete(d);
return this};e.prototype.onDragEnd=function(d){this._dragEndCallbacks.add(d);return this};e.prototype.offDragEnd=function(d){this._dragEndCallbacks.delete(d);return this};e.prototype.destroy=function(){var d=this;k.prototype.destroy.call(this);this._dragStartCallbacks.forEach(function(h){return d._dragStartCallbacks.delete(h)});this._dragCallbacks.forEach(function(h){return d._dragCallbacks.delete(h)});this._dragEndCallbacks.forEach(function(h){return d._dragEndCallbacks.delete(h)});this._disconnectInteraction()};
return e}(I.GuideLineLayer);H.DragLineLayer=I},function(I,H,D){function J(p,k,e){var d={};if(void 0!==e)for(var h=0;h<e.length;h++)d[e[h]]=e[h-1];return function(g){var n=p.scale(g);if(!k)return n;var r;g=void 0===d[g]?void 0:p.scale(d[g]);void 0!==g&&(r=g+(n-g)/2);return r}}var w=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)};I=function(p){function k(e,d){var h=
p.call(this)||this;h.addClass("gridlines");h._xScale=e;h._yScale=d;h._renderCallback=function(g){return h.render()};if(h._xScale)h._xScale.onUpdate(h._renderCallback);if(h._yScale)h._yScale.onUpdate(h._renderCallback);return h}w(k,p);k.prototype.betweenX=function(e){if(void 0===e)return this._betweenX;e!==this._betweenX&&(this._betweenX=e,this.render());return this};k.prototype.betweenY=function(e){if(void 0===e)return this._betweenY;e!==this._betweenY&&(this._betweenY=e,this.render());return this};
k.prototype.destroy=function(){p.prototype.destroy.call(this);this._xScale&&this._xScale.offUpdate(this._renderCallback);this._yScale&&this._yScale.offUpdate(this._renderCallback);return this};k.prototype._setup=function(){p.prototype._setup.call(this);this._xLinesContainer=this.content().append("g").classed("x-gridlines",!0);this._yLinesContainer=this.content().append("g").classed("y-gridlines",!0)};k.prototype.renderImmediately=function(){p.prototype.renderImmediately.call(this);this._redrawXLines();
this._redrawYLines();return this};k.prototype.computeLayout=function(e,d,h){p.prototype.computeLayout.call(this,e,d,h);null!=this._xScale&&this._xScale.range([0,this.width()]);null!=this._yScale&&this._yScale.range([this.height(),0]);return this};k.prototype._redrawXLines=function(){if(this._xScale){var e=this.betweenX(),d=this._xScale.ticks().slice(e?1:0);d=this._xLinesContainer.selectAll("line").data(d);d.enter().append("line").merge(d).attr("x1",J(this._xScale,e,this._xScale.ticks())).attr("y1",
0).attr("x2",J(this._xScale,e,this._xScale.ticks())).attr("y2",this.height()).classed("betweenline",e).classed("zeroline",function(h){return 0===h});d.exit().remove()}};k.prototype._redrawYLines=function(){if(this._yScale){var e=this.betweenY(),d=this._yScale.ticks().slice(e?1:0);d=this._yLinesContainer.selectAll("line").data(d);d.enter().append("line").merge(d).attr("x1",0).attr("y1",J(this._yScale,e,this._yScale.ticks())).attr("x2",this.width()).attr("y2",J(this._yScale,e,this._yScale.ticks())).classed("betweenline",
e).classed("zeroline",function(h){return 0===h});d.exit().remove()}};return k}(D(4).Component);H.Gridlines=I},function(I,H,D){var J=this&&this.__extends||function(d,h){function g(){this.constructor=d}for(var n in h)h.hasOwnProperty(n)&&(d[n]=h[n]);d.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)},w=D(5),p=D(23),k=D(8),e=D(0);I=function(d){function h(g){var n=d.call(this)||this;n._textPadding=5;if(null==g)throw Error("InterpolatedColorLegend requires a interpolatedColorScale");
n._scale=g;n._redrawCallback=function(r){return n.redraw()};n._scale.onUpdate(n._redrawCallback);n._formatter=k.general();n._orientation="horizontal";n._expands=!1;n.addClass("legend");n.addClass("interpolated-color-legend");return n}J(h,d);h.prototype.destroy=function(){d.prototype.destroy.call(this);this._scale.offUpdate(this._redrawCallback)};h.prototype.formatter=function(g){if(void 0===g)return this._formatter;this._formatter=g;this.redraw();return this};h.prototype.expands=function(g){if(null==
g)return this._expands;this._expands=g;this.redraw();return this};h._ensureOrientation=function(g){g=g.toLowerCase();if("horizontal"===g||"left"===g||"right"===g)return g;throw Error('"'+g+'" is not a valid orientation for InterpolatedColorLegend');};h.prototype.orientation=function(g){if(null==g)return this._orientation;this._orientation=h._ensureOrientation(g);this.redraw();return this};h.prototype.fixedWidth=function(){return!this.expands()||this._isVertical()};h.prototype.fixedHeight=function(){return!this.expands()||
!this._isVertical()};h.prototype._generateTicks=function(g){void 0===g&&(g=h._DEFAULT_NUM_SWATCHES);var n=this._scale.domain();if(1===g)return[n[0]];for(var r=(n[1]-n[0])/(g-1),q=[],v=0;v<g;v++)q.push(n[0]+r*v);return q};h.prototype._setup=function(){d.prototype._setup.call(this);this._swatchContainer=this.content().append("g").classed("swatch-container",!0);this._swatchBoundingBox=this.content().append("rect").classed("swatch-bounding-box",!0);this._lowerLabel=this.content().append("g").classed(h.LEGEND_LABEL_CLASS,
!0);this._upperLabel=this.content().append("g").classed(h.LEGEND_LABEL_CLASS,!0);var g=new w.SvgContext(this.content().node());this._measurer=new w.Measurer(g);this._wrapper=new w.Wrapper;this._writer=new w.Writer(this._measurer,g,this._wrapper)};h.prototype.requestedSpace=function(g,n){var r=this;g=this._measurer.measure().height;var q=this._scale.domain().map(function(B){return r._measurer.measure(r._formatter(B)).width});n=h._DEFAULT_NUM_SWATCHES;if(this._isVertical()){var v=e.Math.max(q,0);q=
g+g+this._textPadding+v+this._textPadding;v=n*g}else v=g+g+g,q=this._textPadding+q[0]+n*g+q[1]+this._textPadding;return{minWidth:q,minHeight:v}};h.prototype._isVertical=function(){return"horizontal"!==this._orientation};h.prototype.renderImmediately=function(){var g=this;d.prototype.renderImmediately.call(this);var n=this._scale.domain(),r=this._formatter(n[0]),q=this._measurer.measure(r).width,v=this._formatter(n[1]);n=this._measurer.measure(v).width;var B=this._measurer.measure().height,K=this._textPadding,
C=0,y=0,L=0,U=0,X={xAlign:"center",yAlign:"center",textRotation:0},S={xAlign:"center",yAlign:"center",textRotation:0},Y={x:0,y:0,width:0,height:0};if(this._isVertical()){var ha=Math.floor(this.height());var ia=Math.max(q,n);var wa=(this.width()-ia-2*this._textPadding)/2;n=Math.max(this.width()-wa-2*K-ia,0);B=1;var Ba=function(Da,ya){return g.height()-(ya+1)};S.yAlign="top";y=0;X.yAlign="bottom";U=0;if("left"===this._orientation){var Ea=function(Da,ya){return K+ia+K};S.xAlign="right";C=-(wa+n+K);X.xAlign=
"right";L=-(wa+n+K)}else Ea=function(Da,ya){return wa},S.xAlign="left",C=wa+n+K,X.xAlign="left",L=wa+n+K;Y.width=n;Y.height=ha*B}else wa=Math.max(K,(this.height()-B)/2),ha=Math.max(Math.floor(this.width()-4*K-q-n),0),n=1,B=Math.max(this.height()-2*wa,0),Ea=function(Da,ya){return Math.floor(q+2*K)+ya},Ba=function(Da,ya){return wa},S.xAlign="right",C=-K,X.xAlign="left",L=K,Y.y=wa,Y.width=ha*n,Y.height=B;Y.x=Ea(null,0);this._upperLabel.text("");this._writer.write(v,this.width(),this.height(),S,this._upperLabel.node());
this._upperLabel.attr("transform","translate("+C+", "+y+")");this._lowerLabel.text("");this._writer.write(r,this.width(),this.height(),X,this._lowerLabel.node());this._lowerLabel.attr("transform","translate("+L+", "+U+")");this._swatchBoundingBox.attrs(Y);r=this._generateTicks(ha);r=this._swatchContainer.selectAll("rect.swatch").data(r);v=r.enter().append("rect").classed("swatch",!0);C=r.merge(v);r.exit().remove();C.attrs({fill:function(Da,ya){return g._scale.scale(Da)},width:n,height:B,x:Ea,y:Ba,
"shape-rendering":"crispEdges"});p.ADD_TITLE_ELEMENTS&&v.append("title").text(function(Da){return g._formatter(Da)});return this};return h}(D(4).Component);I._DEFAULT_NUM_SWATCHES=11;I.LEGEND_LABEL_CLASS="legend-label";H.InterpolatedColorLegend=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(5);I=function(k){function e(d,h){void 0===
d&&(d="");void 0===h&&(h=0);var g=k.call(this)||this;g.addClass("label");g.text(d);g.angle(h);g.xAlignment("center").yAlignment("center");g._padding=0;return g}J(e,k);e.prototype.requestedSpace=function(d,h){h=this._measurer.measure(this._text);d=(0===this.angle()?h.width:h.height)+2*this.padding();h=(0===this.angle()?h.height:h.width)+2*this.padding();return{minWidth:d,minHeight:h}};e.prototype._setup=function(){k.prototype._setup.call(this);this._textContainer=this.content().append("g");var d=new w.SvgContext(this._textContainer.node());
this._measurer=new w.CacheMeasurer(d);this._wrapper=new w.Wrapper;this._writer=new w.Writer(this._measurer,d,this._wrapper);this.text(this._text)};e.prototype.text=function(d){if(null==d)return this._text;if("string"!==typeof d)throw Error("Label.text() only takes strings as input");this._text=d;this.redraw();return this};e.prototype.angle=function(d){if(null==d)return this._angle;d%=360;180<d?d-=360:-180>d&&(d+=360);if(-90===d||0===d||90===d)this._angle=d;else throw Error(d+" is not a valid angle for Label");
this.redraw();return this};e.prototype.padding=function(d){if(null==d)return this._padding;d=+d;if(0>d)throw Error(d+" is not a valid padding value. Cannot be less than 0.");this._padding=d;this.redraw();return this};e.prototype.fixedWidth=function(){return!0};e.prototype.fixedHeight=function(){return!0};e.prototype.renderImmediately=function(){k.prototype.renderImmediately.call(this);this._textContainer.selectAll("g").remove();var d=this._measurer.measure(this._text),h=Math.max(Math.min((this.height()-
d.height)/2,this.padding()),0);d=Math.max(Math.min((this.width()-d.width)/2,this.padding()),0);this._textContainer.attr("transform","translate("+d+","+h+")");d=this.width()-2*d;h=this.height()-2*h;var g={xAlign:this.xAlignment(),yAlign:this.yAlignment(),textRotation:this.angle()};this._writer.write(this._text,d,h,g);return this};e.prototype.invalidateCache=function(){k.prototype.invalidateCache.call(this);this._measurer.reset()};return e}(D(4).Component);H.Label=I;var p=function(k){function e(d,h){var g=
k.call(this,d,h)||this;g.addClass(e.TITLE_LABEL_CLASS);return g}J(e,k);return e}(I);p.TITLE_LABEL_CLASS="title-label";H.TitleLabel=p;I=function(k){function e(d,h){var g=k.call(this,d,h)||this;g.addClass(e.AXIS_LABEL_CLASS);return g}J(e,k);return e}(I);I.AXIS_LABEL_CLASS="axis-label";H.AxisLabel=I},function(I,H,D){var J=this&&this.__extends||function(r,q){function v(){this.constructor=r}for(var B in q)q.hasOwnProperty(B)&&(r[B]=q[B]);r.prototype=null===q?Object.create(q):(v.prototype=q.prototype,new v)},
w=D(1),p=D(5),k=D(23),e=D(8),d=D(31),h=D(0);I=D(4);var g=function(){function r(q,v,B){void 0===q&&(q=[]);void 0===v&&(v=0);void 0===B&&(B=Infinity);this.columns=q;this.bottomPadding=v;this.maxWidth=B}r.prototype.addColumn=function(q){var v=q.width,B=this.getWidthAvailable();q.width=Math.min(B,v);this.columns.push(q)};r.prototype.getBounds=function(q){for(var v=this.columns[q],B=0,K=0;K<q;K++)B+=this.columns[K].width;return{topLeft:{x:B,y:0},bottomRight:{x:B+v.width,y:v.height}}};r.prototype.getHeight=
function(){return h.Math.max(this.columns.map(function(q){return q.height}),0)+this.bottomPadding};r.prototype.getWidth=function(){return Math.min(this.columns.reduce(function(q,v){return q+v.width},0),this.maxWidth)};r.prototype.getWidthAvailable=function(){var q=this.getWidth();return Math.max(this.maxWidth-q,0)};return r}(),n=function(){function r(q,v,B,K){void 0===q&&(q=Infinity);void 0===v&&(v=Infinity);void 0===B&&(B=0);void 0===K&&(K=[]);this.maxWidth=q;this.maxHeight=v;this.padding=B;this.rows=
K}r.prototype.addRow=function(q){q.maxWidth=this.maxWidth-2*this.padding;this.rows.push(q)};r.prototype.getColumnBounds=function(q,v){var B=this.getRowBounds(q);q=this.rows[q].getBounds(v);q.topLeft.x+=B.topLeft.x;q.bottomRight.x+=B.topLeft.x;q.topLeft.y+=B.topLeft.y;q.bottomRight.y+=B.topLeft.y;return q};r.prototype.getRowBounds=function(q){for(var v=this.padding,B=this.padding,K=0;K<q;K++)B+=this.rows[K].getHeight();return{topLeft:{x:v,y:B},bottomRight:{x:v+this.rows[q].getWidth(),y:B+this.rows[q].getHeight()}}};
r.prototype.getHeight=function(){return Math.min(this.rows.reduce(function(q,v){return q+v.getHeight()},0)+2*this.padding,this.maxHeight)};r.prototype.getWidth=function(){return Math.min(h.Math.max(this.rows.map(function(q){return q.getWidth()}),0)+2*this.padding,this.maxWidth)};return r}();I=function(r){function q(v){var B=r.call(this)||this;B._padding=5;B._rowBottomPadding=3;B.addClass("legend");B.maxEntriesPerRow(1);if(null==v)throw Error("Legend requires a colorScale");B._colorScale=v;B._redrawCallback=
function(K){return B.redraw()};B._colorScale.onUpdate(B._redrawCallback);B._formatter=e.identity();B.maxLinesPerEntry(1);B.xAlignment("right").yAlignment("top");B.comparator(function(K,C){var y=B._colorScale.domain().slice().map(function(L){return B._formatter(L)});return y.indexOf(K)-y.indexOf(C)});B._symbolFactoryAccessor=function(){return d.circle()};B._symbolOpacityAccessor=function(){return 1};return B}J(q,r);q.prototype._setup=function(){r.prototype._setup.call(this);var v=this.content().append("g").classed(q.LEGEND_ROW_CLASS,
!0);v.append("g").classed(q.LEGEND_ENTRY_CLASS,!0).append("text");v=new p.SvgContext(v.node(),null,k.ADD_TITLE_ELEMENTS);this._measurer=new p.CacheMeasurer(v);this._wrapper=(new p.Wrapper).maxLines(this.maxLinesPerEntry());this._writer=new p.Writer(this._measurer,v,this._wrapper)};q.prototype.formatter=function(v){if(null==v)return this._formatter;this._formatter=v;this.redraw();return this};q.prototype.maxEntriesPerRow=function(v){if(null==v)return this._maxEntriesPerRow;this._maxEntriesPerRow=v;
this.redraw();return this};q.prototype.maxLinesPerEntry=function(v){if(null==v)return this._maxLinesPerEntry;this._maxLinesPerEntry=v;this.redraw();return this};q.prototype.maxWidth=function(v){if(null==v)return this._maxWidth;this._maxWidth=v;this.redraw();return this};q.prototype.comparator=function(v){if(null==v)return this._comparator;this._comparator=v;this.redraw();return this};q.prototype.colorScale=function(v){return null!=v?(this._colorScale.offUpdate(this._redrawCallback),this._colorScale=
v,this._colorScale.onUpdate(this._redrawCallback),this.redraw(),this):this._colorScale};q.prototype.destroy=function(){r.prototype.destroy.call(this);this._colorScale.offUpdate(this._redrawCallback)};q.prototype._buildLegendTable=function(v,B){var K=this,C=this._measurer.measure().height,y=new n(v,B,this._padding);v=this._colorScale.domain().slice().sort(function(U,X){return K._comparator(K._formatter(U),K._formatter(X))});var L=new g;y.addRow(L);L.bottomPadding=this._rowBottomPadding;v.forEach(function(U,
X){L.columns.length/2===K.maxEntriesPerRow()&&(L=new g,L.bottomPadding=K._rowBottomPadding,y.addRow(L));var S=L.getWidthAvailable();X=K._formatter(U);var Y=K._measurer.measure(X).width;0>S-C-Y&&1<L.columns.length&&(L=new g,L.bottomPadding=K._rowBottomPadding,y.addRow(L));L.addColumn({width:C,height:C,data:{name:U,type:"symbol"}});S=L.getWidthAvailable();S=Math.min(S,Y);K._wrapper.maxLines(K.maxLinesPerEntry());X=K._wrapper.wrap(X,K._measurer,S).noLines*C;L.addColumn({width:S,height:X,data:{name:U,
type:"text"}})});return y};q.prototype.requestedSpace=function(v,B){v=this._buildLegendTable(h.Math.min([this.maxWidth(),v],v),B);return{minHeight:v.getHeight(),minWidth:v.getWidth()}};q.prototype.entitiesAt=function(v){var B=this;if(!this._isSetup)return[];var K=this._buildLegendTable(this.width(),this.height());return K.rows.reduce(function(C,y,L){if(0!==C.length)return C;var U=K.getRowBounds(L);return h.Math.within(v,U)?y.columns.reduce(function(X,S,Y){var ha=K.getColumnBounds(L,Y);if(h.Math.within(v,
ha)){X=B.content().selectAll("."+q.LEGEND_ROW_CLASS).nodes()[L];Y=w.select(X).selectAll("."+q.LEGEND_ENTRY_CLASS).nodes()[Math.floor(Y/2)];var ia=w.select(Y).select("."+q.LEGEND_SYMBOL_CLASS);ha=h.DOM.getTranslateValues(w.select(X));ia=h.DOM.getTranslateValues(ia);return[{bounds:h.DOM.elementBBox(w.select(X)),datum:S.data.name,position:{x:ha[0]+ia[0],y:ha[1]+ia[1]},selection:w.select(Y),component:B}]}return X},C):C},[])};q.prototype.renderImmediately=function(){r.prototype.renderImmediately.call(this);
var v=this._buildLegendTable(this.width(),this.height());this.content().selectAll("*").remove();var B=this.content().selectAll("g."+q.LEGEND_ROW_CLASS).data(v.rows),K=B.enter().append("g").classed(q.LEGEND_ROW_CLASS,!0).merge(B);B.exit().remove();K.attr("transform",function(y,L){y=v.getRowBounds(L);return"translate("+y.topLeft.x+", "+y.topLeft.y+")"});var C=this;K.each(function(y,L){for(var U=[],X=0;X<y.columns.length;X+=2)U.push([y.columns[X],y.columns[X+1]]);y=w.select(this).selectAll("g."+q.LEGEND_ENTRY_CLASS).data(U);
U=y.enter().append("g").classed(q.LEGEND_ENTRY_CLASS,!0).merge(y);U.append("path").attr("d",function(S,Y){S=S[0];return C.symbol()(S.data.name,L)(.6*S.height)(null)}).attr("transform",function(S,Y){S=S[0];Y=v.rows[L].columns.indexOf(S);return"translate("+(v.getColumnBounds(L,Y).topLeft.x+S.width/2)+", "+S.height/2+")"}).attr("fill",function(S){return C._colorScale.scale(S[0].data.name)}).attr("opacity",function(S,Y){return C.symbolOpacity()(S[0].data.name,L)}).classed(q.LEGEND_SYMBOL_CLASS,!0);U.append("g").classed("text-container",
!0).attr("transform",function(S,Y){S=v.rows[L].columns.indexOf(S[1]);return"translate("+v.getColumnBounds(L,S).topLeft.x+", 0)"}).each(function(S,Y,ha){Y=w.select(this);S=S[1];C._writer.write(C._formatter(S.data.name),S.width,C.height(),{xAlign:"left",yAlign:"top",textRotation:0},Y.node())});y.exit().remove()});return this};q.prototype.symbol=function(v){if(null==v)return this._symbolFactoryAccessor;this._symbolFactoryAccessor=v;this.render();return this};q.prototype.symbolOpacity=function(v){if(null==
v)return this._symbolOpacityAccessor;this._symbolOpacityAccessor="number"===typeof v?function(){return v}:v;this.render();return this};q.prototype.fixedWidth=function(){return!0};q.prototype.fixedHeight=function(){return!0};q.prototype.invalidateCache=function(){this._measurer.reset()};return q}(I.Component);I.LEGEND_ROW_CLASS="legend-row";I.LEGEND_ENTRY_CLASS="legend-entry";I.LEGEND_SYMBOL_CLASS="legend-symbol";H.Legend=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=
k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(2),p=D(0);I=function(k){function e(){return null!==k&&k.apply(this,arguments)||this}J(e,k);e.prototype.entityNearest=function(d){var h,g=Infinity;this.components().forEach(function(n){n=n.entityNearest(d);if(null!=n){var r=p.Math.distanceSquared(n.position,d);r<=g&&(g=r,h=n)}});return h};e.prototype.append=function(d){if(null!=d&&!(d instanceof w.Plot))throw Error("Plot Group only accepts plots");
k.prototype.append.call(this,d);return this};return e}(D(41).Group);H.PlotGroup=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(1),p=D(0);I=function(k){function e(d){void 0===d&&(d=[]);var h=k.call(this)||this;h._rowPadding=0;h._columnPadding=0;h._rows=[];h._rowWeights=[];h._columnWeights=[];h._nRows=0;h._nCols=0;h._calculatedLayout=
null;h.addClass("table");d.forEach(function(g,n){g.forEach(function(r,q){null!=r&&h.add(r,n,q)})});return h}J(e,k);e.prototype._forEach=function(d){for(var h=0;h<this._nRows;h++)for(var g=0;g<this._nCols;g++)null!=this._rows[h][g]&&d(this._rows[h][g])};e.prototype.has=function(d){for(var h=0;h<this._nRows;h++)for(var g=0;g<this._nCols;g++)if(this._rows[h][g]===d)return!0;return!1};e.prototype.componentAt=function(d,h){return 0>d||d>=this._nRows||0>h||h>=this._nCols?null:this._rows[d][h]};e.prototype.add=
function(d,h,g){if(null==d)throw Error("Cannot add null to a table cell");if(!this.has(d)){if(null!=(this._rows[h]&&this._rows[h][g]))throw Error("cell is occupied");d.detach();this._nRows=Math.max(h+1,this._nRows);this._nCols=Math.max(g+1,this._nCols);this._padTableToSize(this._nRows,this._nCols);this._rows[h][g]=d;this._adoptAndAnchor(d);this.redraw()}return this};e.prototype._remove=function(d){for(var h=0;h<this._nRows;h++)for(var g=0;g<this._nCols;g++)if(this._rows[h][g]===d)return this._rows[h][g]=
null,!0;return!1};e.prototype._iterateLayout=function(d,h,g){void 0===g&&(g=!1);var n=this._rows,r=w.transpose(this._rows);d-=this._columnPadding*(this._nCols-1);h-=this._rowPadding*(this._nRows-1);n=e._calcComponentWeights(this._rowWeights,n,function(ia){return null==ia||ia.fixedHeight()});r=e._calcComponentWeights(this._columnWeights,r,function(ia){return null==ia||ia.fixedWidth()});var q=r.map(function(ia){return 0===ia?.5:ia}),v=n.map(function(ia){return 0===ia?.5:ia});q=e._calcProportionalSpace(q,
d);var B=e._calcProportionalSpace(v,h),K=p.Array.createFilledArray(0,this._nCols),C=p.Array.createFilledArray(0,this._nRows);v=0;for(var y,L,U;;){C=p.Array.add(C,B);q=p.Array.add(K,q);y=this._determineGuarantees(q,C,g);K=y.guaranteedWidths;C=y.guaranteedHeights;L=y.wantsWidthArr.some(function(ia){return ia});U=y.wantsHeightArr.some(function(ia){return ia});var X=Y,S=ha;var Y=d-w.sum(y.guaranteedWidths);var ha=h-w.sum(y.guaranteedHeights);q=void 0;L?(q=y.wantsWidthArr.map(function(ia){return ia?.1:
0}),q=p.Array.add(q,r)):q=r;B=void 0;U?(B=y.wantsHeightArr.map(function(ia){return ia?.1:0}),B=p.Array.add(B,n)):B=n;q=e._calcProportionalSpace(q,Y);B=e._calcProportionalSpace(B,ha);v++;S=0<ha&&ha!==S;if(!(0<Y&&Y!==X||S))break;if(5<v)break}Y=d-w.sum(y.guaranteedWidths);ha=h-w.sum(y.guaranteedHeights);q=e._calcProportionalSpace(r,Y);B=e._calcProportionalSpace(n,ha);return{colProportionalSpace:q,rowProportionalSpace:B,guaranteedWidths:y.guaranteedWidths,guaranteedHeights:y.guaranteedHeights,wantsWidth:L,
wantsHeight:U}};e.prototype._determineGuarantees=function(d,h,g){void 0===g&&(g=!1);var n=p.Array.createFilledArray(0,this._nCols),r=p.Array.createFilledArray(0,this._nRows),q=p.Array.createFilledArray(!1,this._nCols),v=p.Array.createFilledArray(!1,this._nRows);this._rows.forEach(function(B,K){B.forEach(function(C,y){C=null!=C?C.requestedSpace(d[y],h[K]):{minWidth:0,minHeight:0};n[y]=Math.max(n[y],g?Math.min(C.minWidth,d[y]):C.minWidth);r[K]=Math.max(r[K],g?Math.min(C.minHeight,h[K]):C.minHeight);
var L=C.minWidth>d[y];q[y]=q[y]||L;y=C.minHeight>h[K];v[K]=v[K]||y})});return{guaranteedWidths:n,guaranteedHeights:r,wantsWidthArr:q,wantsHeightArr:v}};e.prototype.requestedSpace=function(d,h){this._calculatedLayout=this._iterateLayout(d,h);return{minWidth:w.sum(this._calculatedLayout.guaranteedWidths),minHeight:w.sum(this._calculatedLayout.guaranteedHeights)}};e.prototype.computeLayout=function(d,h,g){var n=this;k.prototype.computeLayout.call(this,d,h,g);d=w.sum(this._calculatedLayout.guaranteedWidths);
h=w.sum(this._calculatedLayout.guaranteedHeights);g=this._calculatedLayout;if(d>this.width()||h>this.height())g=this._iterateLayout(this.width(),this.height(),!0);var r=0,q=p.Array.add(g.rowProportionalSpace,g.guaranteedHeights),v=p.Array.add(g.colProportionalSpace,g.guaranteedWidths);this._rows.forEach(function(B,K){var C=0;B.forEach(function(y,L){null!=y&&y.computeLayout({x:C,y:r},v[L],q[K]);C+=v[L]+n._columnPadding});r+=q[K]+n._rowPadding});return this};e.prototype.rowPadding=function(d){if(null==
d)return this._rowPadding;if(!p.Math.isValidNumber(d)||0>d)throw Error("rowPadding must be a non-negative finite value");this._rowPadding=d;this.redraw();return this};e.prototype.columnPadding=function(d){if(null==d)return this._columnPadding;if(!p.Math.isValidNumber(d)||0>d)throw Error("columnPadding must be a non-negative finite value");this._columnPadding=d;this.redraw();return this};e.prototype.rowWeight=function(d,h){if(null==h)return this._rowWeights[d];if(!p.Math.isValidNumber(h)||0>h)throw Error("rowWeight must be a non-negative finite value");
this._rowWeights[d]=h;this.redraw();return this};e.prototype.columnWeight=function(d,h){if(null==h)return this._columnWeights[d];if(!p.Math.isValidNumber(h)||0>h)throw Error("columnWeight must be a non-negative finite value");this._columnWeights[d]=h;this.redraw();return this};e.prototype.fixedWidth=function(){var d=w.transpose(this._rows);return e._fixedSpace(d,function(h){return null==h||h.fixedWidth()})};e.prototype.fixedHeight=function(){return e._fixedSpace(this._rows,function(d){return null==
d||d.fixedHeight()})};e.prototype._padTableToSize=function(d,h){for(var g=0;g<d;g++){void 0===this._rows[g]&&(this._rows[g]=[],this._rowWeights[g]=null);for(var n=0;n<h;n++)void 0===this._rows[g][n]&&(this._rows[g][n]=null)}for(n=0;n<h;n++)void 0===this._columnWeights[n]&&(this._columnWeights[n]=null)};e._calcComponentWeights=function(d,h,g){return d.map(function(n,r){return null!=n?n:h[r].map(g).reduce(function(q,v){return q&&v},!0)?0:1})};e._calcProportionalSpace=function(d,h){var g=w.sum(d);return 0===
g?p.Array.createFilledArray(0,d.length):d.map(function(n){return h*n/g})};e._fixedSpace=function(d,h){function g(n){return n.reduce(function(r,q){return r&&q},!0)}return g(d.map(function(n){return g(n.map(h))}))};return e}(D(29).ComponentContainer);H.Table=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){var k=
w.call(this)||this;k.addClass("x-drag-box-layer");k._hasCorners=!1;return k}J(p,w);p.prototype.computeLayout=function(k,e,d){w.prototype.computeLayout.call(this,k,e,d);this._setBounds(this.bounds());return this};p.prototype._setBounds=function(k){w.prototype._setBounds.call(this,{topLeft:{x:k.topLeft.x,y:0},bottomRight:{x:k.bottomRight.x,y:this.height()}})};p.prototype._setResizableClasses=function(k){k&&this.enabled()?this.addClass("x-resizable"):this.removeClass("x-resizable")};p.prototype.yScale=
function(k){if(null==k)return w.prototype.yScale.call(this);throw Error("yScales cannot be set on an XDragBoxLayer");};p.prototype.yExtent=function(k){if(null==k)return w.prototype.yExtent.call(this);throw Error("XDragBoxLayer has no yExtent");};return p}(D(32).DragBoxLayer);H.XDragBoxLayer=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};
I=function(w){function p(){var k=w.call(this)||this;k.addClass("y-drag-box-layer");k._hasCorners=!1;return k}J(p,w);p.prototype.computeLayout=function(k,e,d){w.prototype.computeLayout.call(this,k,e,d);this._setBounds(this.bounds());return this};p.prototype._setBounds=function(k){w.prototype._setBounds.call(this,{topLeft:{x:0,y:k.topLeft.y},bottomRight:{x:this.width(),y:k.bottomRight.y}})};p.prototype._setResizableClasses=function(k){k&&this.enabled()?this.addClass("y-resizable"):this.removeClass("y-resizable")};
p.prototype.xScale=function(k){if(null==k)return w.prototype.xScale.call(this);throw Error("xScales cannot be set on an YDragBoxLayer");};p.prototype.xExtent=function(k){if(null==k)return w.prototype.xExtent.call(this);throw Error("YDragBoxLayer has no xExtent");};return p}(D(32).DragBoxLayer);H.YDragBoxLayer=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=
p.prototype,new k)};I=function(w){function p(){var k=w.call(this)||this;k._eventToProcessingFunction[p._KEYDOWN_EVENT_NAME]=function(e){return k._processKeydown(e)};k._eventToProcessingFunction[p._KEYUP_EVENT_NAME]=function(e){return k._processKeyup(e)};return k}J(p,w);p.getDispatcher=function(){var k=document[p._DISPATCHER_KEY];null==k&&(k=new p,document[p._DISPATCHER_KEY]=k);return k};p.prototype._processKeydown=function(k){this._callCallbacksForEvent(p._KEYDOWN_EVENT_NAME,k.keyCode,k)};p.prototype._processKeyup=
function(k){this._callCallbacksForEvent(p._KEYUP_EVENT_NAME,k.keyCode,k)};p.prototype.onKeyDown=function(k){this._addCallbackForEvent(p._KEYDOWN_EVENT_NAME,k);return this};p.prototype.offKeyDown=function(k){this._removeCallbackForEvent(p._KEYDOWN_EVENT_NAME,k);return this};p.prototype.onKeyUp=function(k){this._addCallbackForEvent(p._KEYUP_EVENT_NAME,k);return this};p.prototype.offKeyUp=function(k){this._removeCallbackForEvent(p._KEYUP_EVENT_NAME,k);return this};return p}(D(24).Dispatcher);I._DISPATCHER_KEY=
"__Plottable_Dispatcher_Key";I._KEYDOWN_EVENT_NAME="keydown";I._KEYUP_EVENT_NAME="keyup";H.Key=I},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(0);I=function(p){function k(e){function d(g){return h._measureAndDispatch(e,g,k._MOUSEMOVE_EVENT_NAME,"page")}var h=p.call(this)||this;h._lastMousePosition={x:-1,y:-1};h._translator=w.getTranslator(e);
h._eventToProcessingFunction[k._MOUSEOVER_EVENT_NAME]=d;h._eventToProcessingFunction[k._MOUSEMOVE_EVENT_NAME]=d;h._eventToProcessingFunction[k._MOUSEOUT_EVENT_NAME]=d;h._eventToProcessingFunction[k._MOUSEDOWN_EVENT_NAME]=function(g){return h._measureAndDispatch(e,g,k._MOUSEDOWN_EVENT_NAME)};h._eventToProcessingFunction[k._MOUSEUP_EVENT_NAME]=function(g){return h._measureAndDispatch(e,g,k._MOUSEUP_EVENT_NAME,"page")};h._eventToProcessingFunction[k._WHEEL_EVENT_NAME]=function(g){return h._measureAndDispatch(e,
g,k._WHEEL_EVENT_NAME)};h._eventToProcessingFunction[k._DBLCLICK_EVENT_NAME]=function(g){return h._measureAndDispatch(e,g,k._DBLCLICK_EVENT_NAME)};return h}J(k,p);k.getDispatcher=function(e){var d=e.root().rootElement(),h=d[k._DISPATCHER_KEY];null==h&&(h=new k(e),d[k._DISPATCHER_KEY]=h);return h};k.prototype.onMouseMove=function(e){this._addCallbackForEvent(k._MOUSEMOVE_EVENT_NAME,e);return this};k.prototype.offMouseMove=function(e){this._removeCallbackForEvent(k._MOUSEMOVE_EVENT_NAME,e);return this};
k.prototype.onMouseDown=function(e){this._addCallbackForEvent(k._MOUSEDOWN_EVENT_NAME,e);return this};k.prototype.offMouseDown=function(e){this._removeCallbackForEvent(k._MOUSEDOWN_EVENT_NAME,e);return this};k.prototype.onMouseUp=function(e){this._addCallbackForEvent(k._MOUSEUP_EVENT_NAME,e);return this};k.prototype.offMouseUp=function(e){this._removeCallbackForEvent(k._MOUSEUP_EVENT_NAME,e);return this};k.prototype.onWheel=function(e){this._addCallbackForEvent(k._WHEEL_EVENT_NAME,e);return this};
k.prototype.offWheel=function(e){this._removeCallbackForEvent(k._WHEEL_EVENT_NAME,e);return this};k.prototype.onDblClick=function(e){this._addCallbackForEvent(k._DBLCLICK_EVENT_NAME,e);return this};k.prototype.offDblClick=function(e){this._removeCallbackForEvent(k._DBLCLICK_EVENT_NAME,e);return this};k.prototype._measureAndDispatch=function(e,d,h,g){void 0===g&&(g="element");if("page"!==g&&"element"!==g)throw Error("Invalid scope '"+g+"', must be 'element' or 'page'");if("page"===g||this.eventInside(e,
d))this._lastMousePosition=this._translator.computePosition(d.clientX,d.clientY),this._callCallbacksForEvent(h,this.lastMousePosition(),d)};k.prototype.eventInside=function(e,d){return w.Translator.isEventInside(e,d)};k.prototype.lastMousePosition=function(){return this._lastMousePosition};return k}(D(24).Dispatcher);I._DISPATCHER_KEY="__Plottable_Dispatcher_Mouse";I._MOUSEOVER_EVENT_NAME="mouseover";I._MOUSEMOVE_EVENT_NAME="mousemove";I._MOUSEOUT_EVENT_NAME="mouseout";I._MOUSEDOWN_EVENT_NAME="mousedown";
I._MOUSEUP_EVENT_NAME="mouseup";I._WHEEL_EVENT_NAME="wheel";I._DBLCLICK_EVENT_NAME="dblclick";H.Mouse=I},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(0);I=function(p){function k(e){var d=p.call(this)||this;d._translator=w.getTranslator(e);d._eventToProcessingFunction[k._TOUCHSTART_EVENT_NAME]=function(h){return d._measureAndDispatch(e,
h,k._TOUCHSTART_EVENT_NAME,"page")};d._eventToProcessingFunction[k._TOUCHMOVE_EVENT_NAME]=function(h){return d._measureAndDispatch(e,h,k._TOUCHMOVE_EVENT_NAME,"page")};d._eventToProcessingFunction[k._TOUCHEND_EVENT_NAME]=function(h){return d._measureAndDispatch(e,h,k._TOUCHEND_EVENT_NAME,"page")};d._eventToProcessingFunction[k._TOUCHCANCEL_EVENT_NAME]=function(h){return d._measureAndDispatch(e,h,k._TOUCHCANCEL_EVENT_NAME,"page")};return d}J(k,p);k.getDispatcher=function(e){var d=e.root().rootElement(),
h=d[k._DISPATCHER_KEY];null==h&&(h=new k(e),d[k._DISPATCHER_KEY]=h);return h};k.prototype.onTouchStart=function(e){this._addCallbackForEvent(k._TOUCHSTART_EVENT_NAME,e);return this};k.prototype.offTouchStart=function(e){this._removeCallbackForEvent(k._TOUCHSTART_EVENT_NAME,e);return this};k.prototype.onTouchMove=function(e){this._addCallbackForEvent(k._TOUCHMOVE_EVENT_NAME,e);return this};k.prototype.offTouchMove=function(e){this._removeCallbackForEvent(k._TOUCHMOVE_EVENT_NAME,e);return this};k.prototype.onTouchEnd=
function(e){this._addCallbackForEvent(k._TOUCHEND_EVENT_NAME,e);return this};k.prototype.offTouchEnd=function(e){this._removeCallbackForEvent(k._TOUCHEND_EVENT_NAME,e);return this};k.prototype.onTouchCancel=function(e){this._addCallbackForEvent(k._TOUCHCANCEL_EVENT_NAME,e);return this};k.prototype.offTouchCancel=function(e){this._removeCallbackForEvent(k._TOUCHCANCEL_EVENT_NAME,e);return this};k.prototype._measureAndDispatch=function(e,d,h,g){void 0===g&&(g="element");if("page"!==g&&"element"!==g)throw Error("Invalid scope '"+
g+"', must be 'element' or 'page'");if("element"!==g||this.eventInside(e,d)){e=d.changedTouches;g={};for(var n=[],r=0;r<e.length;r++){var q=e[r],v=q.identifier;q=this._translator.computePosition(q.clientX,q.clientY);null!=q&&(g[v]=q,n.push(v))}0<n.length&&this._callCallbacksForEvent(h,n,g,d)}};k.prototype.eventInside=function(e,d){return w.Translator.isEventInside(e,d)};return k}(D(24).Dispatcher);I._DISPATCHER_KEY="__Plottable_Dispatcher_Touch";I._TOUCHSTART_EVENT_NAME="touchstart";I._TOUCHMOVE_EVENT_NAME=
"touchmove";I._TOUCHEND_EVENT_NAME="touchend";I._TOUCHCANCEL_EVENT_NAME="touchcancel";H.Touch=I},function(I,H,D){I=function(){function J(w,p,k){void 0===k&&(k=window.devicePixelRatio);this.screenWidth=w;this.screenHeight=p;this.devicePixelRatio=k;this.pixelWidth=w*k;this.pixelHeight=p*k;this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");J.sizePixels(this.ctx,w,p,k)}J.sizePixels=function(w,p,k,e){var d=w.canvas;d.width=p*e;d.height=k*e;d.style.width=p+"px";d.style.height=
k+"px";w.setTransform(1,0,0,1,0,0);w.scale(e,e)};J.prototype.blit=function(w,p,k){void 0===p&&(p=0);void 0===k&&(k=0);w.drawImage(this.canvas,p,k,this.screenWidth,this.screenHeight)};J.prototype.blitCenter=function(w,p,k){void 0===p&&(p=0);void 0===k&&(k=0);this.blit(w,Math.floor(p-this.screenWidth/2),Math.floor(k-this.screenHeight/2))};J.prototype.resize=function(w,p,k){void 0===k&&(k=!1);var e=this.devicePixelRatio;this.screenWidth=w;this.screenHeight=p;this.pixelWidth=w*e;this.pixelHeight=p*e;
J.sizePixels(this.ctx,w,p,e);k&&this.ctx.translate(w/2,w/2);return this};J.prototype.clear=function(w){var p=this.pixelWidth,k=this.pixelHeight,e=this.ctx;e.save();e.setTransform(1,0,0,1,0,0);null==w?e.clearRect(0,0,p,k):(e.fillStyle=w,e.fillRect(0,0,p,k));e.restore();return this};J.prototype.getImageData=function(){return this.ctx.getImageData(0,0,this.pixelWidth,this.pixelHeight)};return J}();H.CanvasBuffer=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=
k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(13),p=D(0);I=function(k){function e(){var d=null!==k&&k.apply(this,arguments)||this;d._clickedDown=!1;d._doubleClicking=!1;d._onClickCallbacks=new p.CallbackSet;d._onDoubleClickCallbacks=new p.CallbackSet;d._mouseDownCallback=function(h,g){return d._handleClickDown(h,g)};d._mouseUpCallback=function(h,g){return d._handleClickUp(h,g)};d._dblClickCallback=function(h,g){return d._handleDblClick(h,
g)};d._touchStartCallback=function(h,g,n){return d._handleClickDown(g[h[0]],n)};d._touchEndCallback=function(h,g,n){return d._handleClickUp(g[h[0]],n)};d._touchCancelCallback=function(h,g){return d._clickedDown=!1};return d}J(e,k);e.prototype._anchor=function(d){k.prototype._anchor.call(this,d);this._mouseDispatcher=w.Mouse.getDispatcher(d);this._mouseDispatcher.onMouseDown(this._mouseDownCallback);this._mouseDispatcher.onMouseUp(this._mouseUpCallback);this._mouseDispatcher.onDblClick(this._dblClickCallback);
this._touchDispatcher=w.Touch.getDispatcher(d);this._touchDispatcher.onTouchStart(this._touchStartCallback);this._touchDispatcher.onTouchEnd(this._touchEndCallback);this._touchDispatcher.onTouchCancel(this._touchCancelCallback)};e.prototype._unanchor=function(){k.prototype._unanchor.call(this);this._mouseDispatcher.offMouseDown(this._mouseDownCallback);this._mouseDispatcher.offMouseUp(this._mouseUpCallback);this._mouseDispatcher.offDblClick(this._dblClickCallback);this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);
this._touchDispatcher.offTouchEnd(this._touchEndCallback);this._touchDispatcher.offTouchCancel(this._touchCancelCallback);this._touchDispatcher=null};e.prototype._handleClickDown=function(d,h){d=this._translateToComponentSpace(d);this._isInsideComponent(d)&&(this._clickedDown=!0,this._clickedPoint=d)};e.prototype._handleClickUp=function(d,h){var g=this,n=this._translateToComponentSpace(d);this._clickedDown&&e._pointsEqual(n,this._clickedPoint)&&setTimeout(function(){g._doubleClicking||g._onClickCallbacks.callCallbacks(n,
h)},0);this._clickedDown=!1};e.prototype._handleDblClick=function(d,h){var g=this;d=this._translateToComponentSpace(d);this._doubleClicking=!0;this._onDoubleClickCallbacks.callCallbacks(d,h);setTimeout(function(){return g._doubleClicking=!1},0)};e._pointsEqual=function(d,h){return d.x===h.x&&d.y===h.y};e.prototype.onClick=function(d){this._onClickCallbacks.add(d);return this};e.prototype.offClick=function(d){this._onClickCallbacks.delete(d);return this};e.prototype.onDoubleClick=function(d){this._onDoubleClickCallbacks.add(d);
return this};e.prototype.offDoubleClick=function(d){this._onDoubleClickCallbacks.delete(d);return this};return e}(D(15).Interaction);H.Click=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(13),p=D(0);I=function(k){function e(){var d=null!==k&&k.apply(this,arguments)||this;d._dragging=!1;d._constrainedToComponent=!0;d._mouseFilter=e._DEFAULT_MOUSE_FILTER;
d._dragStartCallbacks=new p.CallbackSet;d._dragCallbacks=new p.CallbackSet;d._dragEndCallbacks=new p.CallbackSet;d._mouseDownCallback=function(h,g){return d._startDrag(h,g)};d._mouseMoveCallback=function(h,g){return d._doDrag(h,g)};d._mouseUpCallback=function(h,g){return d._endDrag(h,g)};d._touchStartCallback=function(h,g,n){return d._startDrag(g[h[0]],n)};d._touchMoveCallback=function(h,g,n){return d._doDrag(g[h[0]],n)};d._touchEndCallback=function(h,g,n){return d._endDrag(g[h[0]],n)};return d}J(e,
k);e.prototype._anchor=function(d){k.prototype._anchor.call(this,d);this._mouseDispatcher=w.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onMouseDown(this._mouseDownCallback);this._mouseDispatcher.onMouseMove(this._mouseMoveCallback);this._mouseDispatcher.onMouseUp(this._mouseUpCallback);this._touchDispatcher=w.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback);this._touchDispatcher.onTouchMove(this._touchMoveCallback);
this._touchDispatcher.onTouchEnd(this._touchEndCallback)};e.prototype._unanchor=function(){k.prototype._unanchor.call(this);this._mouseDispatcher.offMouseDown(this._mouseDownCallback);this._mouseDispatcher.offMouseMove(this._mouseMoveCallback);this._mouseDispatcher.offMouseUp(this._mouseUpCallback);this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher.offTouchMove(this._touchMoveCallback);this._touchDispatcher.offTouchEnd(this._touchEndCallback);
this._touchDispatcher=null};e.prototype._translateAndConstrain=function(d){d=this._translateToComponentSpace(d);return this._constrainedToComponent?{x:p.Math.clamp(d.x,0,this._componentAttachedTo.width()),y:p.Math.clamp(d.y,0,this._componentAttachedTo.height())}:d};e.prototype._startDrag=function(d,h){h instanceof MouseEvent&&!this._mouseFilter(h)||(d=this._translateToComponentSpace(d),this._isInsideComponent(d)&&(h.preventDefault(),this._dragging=!0,this._dragOrigin=d,this._dragStartCallbacks.callCallbacks(this._dragOrigin)))};
e.prototype._doDrag=function(d,h){this._dragging&&this._dragCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(d))};e.prototype._endDrag=function(d,h){h instanceof MouseEvent&&0!==h.button||!this._dragging||(this._dragging=!1,this._dragEndCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(d)))};e.prototype.constrainedToComponent=function(d){if(null==d)return this._constrainedToComponent;this._constrainedToComponent=d;return this};e.prototype.mouseFilter=function(d){if(0===
arguments.length)return this._mouseFilter;this._mouseFilter=d;return this};e.prototype.onDragStart=function(d){this._dragStartCallbacks.add(d);return this};e.prototype.offDragStart=function(d){this._dragStartCallbacks.delete(d);return this};e.prototype.onDrag=function(d){this._dragCallbacks.add(d);return this};e.prototype.offDrag=function(d){this._dragCallbacks.delete(d);return this};e.prototype.onDragEnd=function(d){this._dragEndCallbacks.add(d);return this};e.prototype.offDragEnd=function(d){this._dragEndCallbacks.delete(d);
return this};return e}(D(15).Interaction);I._DEFAULT_MOUSE_FILTER=function(k){return 0===k.button};H.Drag=I},function(I,H,D){var J=this&&this.__extends||function(g,n){function r(){this.constructor=g}for(var q in n)n.hasOwnProperty(q)&&(g[q]=n[q]);g.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},w=D(1),p=D(13),k=D(3),e=D(0),d=D(25);I=D(15);var h=D(26);I=function(g){function n(r,q){var v=g.call(this)||this;v._wheelFilter=function(B){return!0};v._wheelCallback=function(B,K){return v._handleWheelEvent(B,
K)};v._touchStartCallback=function(B,K,C){return v._handleTouchStart(B,K,C)};v._touchMoveCallback=function(B,K,C){return v._handlePinch(B,K,C)};v._touchEndCallback=function(B,K,C){return v._handleTouchEnd(B,K,C)};v._touchCancelCallback=function(B,K,C){return v._handleTouchEnd(B,K,C)};v._panEndCallbacks=new e.CallbackSet;v._zoomEndCallbacks=new e.CallbackSet;v._panZoomUpdateCallbacks=new e.CallbackSet;v._xScales=new e.Set;v._yScales=new e.Set;v._dragInteraction=new d.Drag;v._setupDragInteraction();
v._touchIds=w.map();v._minDomainExtents=new e.Map;v._maxDomainExtents=new e.Map;v._minDomainValues=new e.Map;v._maxDomainValues=new e.Map;null!=r&&v.addXScale(r);null!=q&&v.addYScale(q);return v}J(n,g);n.prototype.dragInteraction=function(){return this._dragInteraction};n.prototype.wheelFilter=function(r){if(0===arguments.length)return this._wheelFilter;this._wheelFilter=r;return this};n.prototype.pan=function(r){var q=this;this.xScales().forEach(function(v){v.pan(q._constrainedTranslation(v,r.x))});
this.yScales().forEach(function(v){v.pan(q._constrainedTranslation(v,r.y))});this._panZoomUpdateCallbacks.callCallbacks()};n.prototype.zoom=function(r,q,v){var B=this;void 0===v&&(v=!0);if(null!=q){var K=q.x;var C=q.y;v&&(this.xScales().forEach(function(y){y=B._constrainedZoom(y,r,K);K=y.centerPoint;r=y.zoomAmount}),this.yScales().forEach(function(y){y=B._constrainedZoom(y,r,C);C=y.centerPoint;r=y.zoomAmount}))}this.xScales().forEach(function(y){var L=y.range();y.zoom(r,null==K?(L[1]+L[0])/2:K)});
this.yScales().forEach(function(y){var L=y.range();y.zoom(r,null==C?(L[1]+L[0])/2:C)});this._panZoomUpdateCallbacks.callCallbacks();return{zoomAmount:r,centerValue:{centerX:K,centerY:C}}};n.prototype._anchor=function(r){g.prototype._anchor.call(this,r);this._dragInteraction.attachTo(r);this._mouseDispatcher=p.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onWheel(this._wheelCallback);this._touchDispatcher=p.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback);
this._touchDispatcher.onTouchMove(this._touchMoveCallback);this._touchDispatcher.onTouchEnd(this._touchEndCallback);this._touchDispatcher.onTouchCancel(this._touchCancelCallback)};n.prototype._unanchor=function(){g.prototype._unanchor.call(this);this._mouseDispatcher.offWheel(this._wheelCallback);this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher.offTouchMove(this._touchMoveCallback);this._touchDispatcher.offTouchEnd(this._touchEndCallback);
this._touchDispatcher.offTouchCancel(this._touchCancelCallback);this._touchDispatcher=null;this._dragInteraction.detach()};n.prototype._handleTouchStart=function(r,q,v){for(v=0;v<r.length&&2>this._touchIds.size();v++){var B=r[v];this._touchIds.set(B.toString(),this._translateToComponentSpace(q[B]))}};n.prototype._handlePinch=function(r,q,v){var B=this;if(!(2>this._touchIds.size())){var K=this._touchIds.values();if(this._isInsideComponent(this._translateToComponentSpace(K[0]))&&this._isInsideComponent(this._translateToComponentSpace(K[1]))&&
(v=n._pointDistance(K[0],K[1]),0!==v)){r.forEach(function(S){B._touchIds.has(S.toString())&&B._touchIds.set(S.toString(),B._translateToComponentSpace(q[S]))});r=this._touchIds.values();var C=n._pointDistance(r[0],r[1]);if(0!==C){var y=v/C,L=r.map(function(S,Y){return{x:(S.x-K[Y].x)/y,y:(S.y-K[Y].y)/y}});v=n.centerPoint(K[0],K[1]);var U=this.zoom(y,v);r=U.centerValue;var X=U.zoomAmount;v=r.centerX;r=r.centerY;C=K.map(function(S,Y){return{x:L[Y].x*X+S.x,y:L[Y].y*X+S.y}});this.pan({x:v-(C[0].x+C[1].x)/
2,y:r-(C[0].y+C[1].y)/2})}}}};n.centerPoint=function(r,q){return{x:(Math.min(r.x,q.x)+Math.max(r.x,q.x))/2,y:(Math.max(r.y,q.y)+Math.min(r.y,q.y))/2}};n._pointDistance=function(r,q){return Math.sqrt(Math.pow(Math.max(r.x,q.x)-Math.min(r.x,q.x),2)+Math.pow(Math.max(r.y,q.y)-Math.min(r.y,q.y),2))};n.prototype._handleTouchEnd=function(r,q,v){var B=this;r.forEach(function(K){B._touchIds.remove(K.toString())});0<this._touchIds.size()&&this._zoomEndCallbacks.callCallbacks()};n.prototype._handleWheelEvent=
function(r,q){this._wheelFilter(q)&&(r=this._translateToComponentSpace(r),this._isInsideComponent(r)&&(q.preventDefault(),this.zoom(Math.pow(2,(0!==q.deltaY?q.deltaY:q.deltaX)*(q.deltaMode?n._PIXELS_PER_LINE:1)*.002),r),this._zoomEndCallbacks.callCallbacks()))};n.prototype._constrainedZoom=function(r,q,v){return h.constrainedZoom(r,q,v,this.minDomainExtent(r),this.maxDomainExtent(r),this.minDomainValue(r),this.maxDomainValue(r))};n.prototype._constrainedTranslation=function(r,q){return h.constrainedTranslation(r,
q,this.minDomainValue(r),this.maxDomainValue(r))};n.prototype._setupDragInteraction=function(){var r=this;this._dragInteraction.constrainedToComponent(!1);var q;this._dragInteraction.onDragStart(function(){return q=null});this._dragInteraction.onDrag(function(v,B){2<=r._touchIds.size()||(r.pan({x:(null==q?v.x:q.x)-B.x,y:(null==q?v.y:q.y)-B.y}),q=B)});this._dragInteraction.onDragEnd(function(){return r._panEndCallbacks.callCallbacks()})};n.prototype._nonLinearScaleWithExtents=function(r){return null!=
this.minDomainExtent(r)&&null!=this.maxDomainExtent(r)&&!(r instanceof k.Linear)&&!(r instanceof k.Time)};n.prototype.xScales=function(r){var q=this;if(null==r){var v=[];this._xScales.forEach(function(B){v.push(B)});return v}this._xScales=new e.Set;r.forEach(function(B){q.addXScale(B)});return this};n.prototype.yScales=function(r){var q=this;if(null==r){var v=[];this._yScales.forEach(function(B){v.push(B)});return v}this._yScales=new e.Set;r.forEach(function(B){q.addYScale(B)});return this};n.prototype.addXScale=
function(r){this._xScales.add(r);return this};n.prototype.removeXScale=function(r){this._xScales.delete(r);this._minDomainExtents.delete(r);this._maxDomainExtents.delete(r);this._minDomainValues.delete(r);this._maxDomainValues.delete(r);return this};n.prototype.addYScale=function(r){this._yScales.add(r);return this};n.prototype.removeYScale=function(r){this._yScales.delete(r);this._minDomainExtents.delete(r);this._maxDomainExtents.delete(r);this._minDomainValues.delete(r);this._maxDomainValues.delete(r);
return this};n.prototype.minDomainExtent=function(r,q){if(null==q)return this._minDomainExtents.get(r);if(0>q.valueOf())throw Error("extent must be non-negative");var v=this.maxDomainExtent(r);if(null!=v&&v.valueOf()<q.valueOf())throw Error("minDomainExtent must be smaller than maxDomainExtent for the same Scale");this._nonLinearScaleWithExtents(r)&&e.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior.");this._minDomainExtents.set(r,q);return this};n.prototype.maxDomainExtent=
function(r,q){if(null==q)return this._maxDomainExtents.get(r);if(0>=q.valueOf())throw Error("extent must be positive");var v=this.minDomainExtent(r);if(null!=v&&q.valueOf()<v.valueOf())throw Error("maxDomainExtent must be larger than minDomainExtent for the same Scale");this._nonLinearScaleWithExtents(r)&&e.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior.");this._maxDomainExtents.set(r,q);return this};n.prototype.minDomainValue=function(r,q){if(null==
q)return this._minDomainValues.get(r);this._minDomainValues.set(r,q);return this};n.prototype.maxDomainValue=function(r,q){if(null==q)return this._maxDomainValues.get(r);this._maxDomainValues.set(r,q);return this};n.prototype.setMinMaxDomainValuesTo=function(r){this._minDomainValues.delete(r);this._maxDomainValues.delete(r);var q=r.getTransformationDomain(),v=q[1];this.minDomainValue(r,q[0]);this.maxDomainValue(r,v);return this};n.prototype.onPanEnd=function(r){this._panEndCallbacks.add(r);return this};
n.prototype.offPanEnd=function(r){this._panEndCallbacks.delete(r);return this};n.prototype.onZoomEnd=function(r){this._zoomEndCallbacks.add(r);return this};n.prototype.offZoomEnd=function(r){this._zoomEndCallbacks.delete(r);return this};n.prototype.onPanZoomUpdate=function(r){this._panZoomUpdateCallbacks.add(r);return this};n.prototype.offPanZoomUpdate=function(r){this._panZoomUpdateCallbacks.delete(r);return this};return n}(I.Interaction);I._PIXELS_PER_LINE=120;H.PanZoom=I},function(I,H,D){var J=
this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(13),p=D(0);I=function(k){function e(){var d=null!==k&&k.apply(this,arguments)||this;d._overComponent=!1;d._pointerEnterCallbacks=new p.CallbackSet;d._pointerMoveCallbacks=new p.CallbackSet;d._pointerExitCallbacks=new p.CallbackSet;d._mouseMoveCallback=function(h,g){return d._handleMouseEvent(h,g)};d._touchStartCallback=
function(h,g,n){return d._handleTouchEvent(g[h[0]],n)};return d}J(e,k);e.prototype._anchor=function(d){k.prototype._anchor.call(this,d);this._mouseDispatcher=w.Mouse.getDispatcher(this._componentAttachedTo);this._mouseDispatcher.onMouseMove(this._mouseMoveCallback);this._touchDispatcher=w.Touch.getDispatcher(this._componentAttachedTo);this._touchDispatcher.onTouchStart(this._touchStartCallback)};e.prototype._unanchor=function(){k.prototype._unanchor.call(this);this._mouseDispatcher.offMouseMove(this._mouseMoveCallback);
this._mouseDispatcher=null;this._touchDispatcher.offTouchStart(this._touchStartCallback);this._touchDispatcher=null};e.prototype._handleMouseEvent=function(d,h){h=this._mouseDispatcher.eventInside(this._componentAttachedTo,h);this._handlePointerEvent(d,h)};e.prototype._handleTouchEvent=function(d,h){h=this._touchDispatcher.eventInside(this._componentAttachedTo,h);this._handlePointerEvent(d,h)};e.prototype._handlePointerEvent=function(d,h){d=this._translateToComponentSpace(d);var g=this._isInsideComponent(d);
g&&h?(this._overComponent||this._pointerEnterCallbacks.callCallbacks(d),this._pointerMoveCallbacks.callCallbacks(d)):this._overComponent&&this._pointerExitCallbacks.callCallbacks(d);this._overComponent=g&&h};e.prototype.onPointerEnter=function(d){this._pointerEnterCallbacks.add(d);return this};e.prototype.offPointerEnter=function(d){this._pointerEnterCallbacks.delete(d);return this};e.prototype.onPointerMove=function(d){this._pointerMoveCallbacks.add(d);return this};e.prototype.offPointerMove=function(d){this._pointerMoveCallbacks.delete(d);
return this};e.prototype.onPointerExit=function(d){this._pointerExitCallbacks.add(d);return this};e.prototype.offPointerExit=function(d){this._pointerExitCallbacks.delete(d);return this};return e}(D(15).Interaction);H.Pointer=I},function(I,H,D){var J=D(20);H.memThunk=function(){for(var w=[],p=0;p<arguments.length;p++)w[p]=arguments[p];var k=w.slice(0,-1),e=J.memoize(w[w.length-1]);return function(){var d=this,h=k.map(function(g){return g.apply(d)});return e.apply(void 0,h)}}},function(I,H,D){var J=
D(49);H.memoize=function(w){function p(){for(var g=[],n=0;n<arguments.length;n++)g[n]=arguments[n];if(d)return e;var r=J.signArray(g);void 0===k||k.isDifferent(r)?(h&&console.log("cache miss! computing"),k=r,e=w.apply(this,g)):h&&console.log("cache hit!");return e}var k=void 0,e,d=!1,h=!1;p.doLocked=function(g){if(d)throw Error("Locking an already locked memoize function!");d=!0;g=g.apply(this);d=!1;return g};p.logPerformance=function(g){void 0===g&&(g=!0);h=g;return this};return p}},function(I,H,
D){var J=this&&this.__extends||function(d,h){function g(){this.constructor=d}for(var n in h)h.hasOwnProperty(n)&&(d[n]=h[n]);d.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)},w=D(3),p=D(0),k=D(27),e=D(2);I=function(d){function h(g){void 0===g&&(g="vertical");var n=d.call(this,g)||this;n._clusterOffsets=new p.Map;return n}J(h,d);h.prototype._generateAttrToProjector=function(){function g(K,C){return q.rangeBand()}var n=this,r=d.prototype._generateAttrToProjector.call(this),q=this._makeInnerScale();
r.width=this._isVertical?g:r.width;r.height=this._isVertical?r.height:g;var v=r.x,B=r.y;r.x=this._isVertical?function(K,C,y){return v(K,C,y)+n._clusterOffsets.get(y)}:function(K,C,y){return v(K,C,y)};r.y=this._isVertical?function(K,C,y){return B(K,C,y)}:function(K,C,y){return B(K,C,y)+n._clusterOffsets.get(y)};return r};h.prototype._updateClusterPosition=function(){var g=this,n=this._makeInnerScale();this.datasets().forEach(function(r,q){return g._clusterOffsets.set(r,n.scale(String(q))-n.rangeBand()/
2)})};h.prototype._makeInnerScale=function(){var g=new w.Category;g.domain(this.datasets().map(function(r,q){return String(q)}));var n=e.Plot._scaledAccessor(this.attr(k.Bar._BAR_THICKNESS_KEY));g.range([0,n(null,0,null)]);return g};h.prototype._getDataToDraw=function(){this._updateClusterPosition();return d.prototype._getDataToDraw.call(this)};return h}(k.Bar);H.ClusteredBar=I},function(I,H,D){var J=this&&this.__extends||function(B,K){function C(){this.constructor=B}for(var y in K)K.hasOwnProperty(y)&&
(B[y]=K[y]);B.prototype=null===K?Object.create(K):(C.prototype=K.prototype,new C)},w=D(1),p=D(5),k=D(7),e=D(8),d=D(3),h=D(0),g=D(44),n=D(45),r=D(6),q=D(35),v=D(2);I=function(B){function K(){var C=B.call(this)||this;C._startAngle=0;C._endAngle=2*Math.PI;C._labelFormatter=e.identity();C._labelsEnabled=!1;C.innerRadius(0);C.outerRadius(function(){var y=C._pieCenter();return Math.min(Math.max(C.width()-y.x,y.x),Math.max(C.height()-y.y,y.y))});C.addClass("pie-plot");C.attr("fill",function(y,L){return String(L)},
new d.Color);C._strokeDrawers=new h.Map;return C}J(K,B);K.prototype._setup=function(){var C=this;B.prototype._setup.call(this);this._strokeDrawers.forEach(function(y){return y.attachTo(C._renderArea)})};K.prototype.computeLayout=function(C,y,L){B.prototype.computeLayout.call(this,C,y,L);C=this._pieCenter();this._renderArea.attr("transform","translate("+C.x+","+C.y+")");C=Math.min(Math.max(this.width()-C.x,C.x),Math.max(this.height()-C.y,C.y));null!=this.innerRadius().scale&&this.innerRadius().scale.range([0,
C]);null!=this.outerRadius().scale&&this.outerRadius().scale.range([0,C]);return this};K.prototype.addDataset=function(C){B.prototype.addDataset.call(this,C);return this};K.prototype._addDataset=function(C){if(1===this.datasets().length)return h.Window.warn("Only one dataset is supported in Pie plots"),this;this._updatePieAngles();var y=new n.ArcOutlineSVGDrawer;this._isSetup&&y.attachTo(this._renderArea);this._strokeDrawers.set(C,y);B.prototype._addDataset.call(this,C);return this};K.prototype.removeDataset=
function(C){B.prototype.removeDataset.call(this,C);return this};K.prototype._removeDatasetNodes=function(C){B.prototype._removeDatasetNodes.call(this,C);this._strokeDrawers.get(C).remove()};K.prototype._removeDataset=function(C){B.prototype._removeDataset.call(this,C);this._startAngles=[];this._endAngles=[];return this};K.prototype.selections=function(C){var y=this;void 0===C&&(C=this.datasets());var L=B.prototype.selections.call(this,C).nodes();C.forEach(function(U){U=y._strokeDrawers.get(U);null!=
U&&L.push.apply(L,U.getVisualPrimitives())});return w.selectAll(L)};K.prototype._onDatasetUpdate=function(){B.prototype._onDatasetUpdate.call(this);this._updatePieAngles();this.render()};K.prototype._createDrawer=function(){return new r.ProxyDrawer(function(){return new g.ArcSVGDrawer},function(){q.warn("canvas renderer is not supported on Pie Plot!");return null})};K.prototype.entities=function(C){var y=this;void 0===C&&(C=this.datasets());return B.prototype.entities.call(this,C).map(function(L){L.position.x+=
y.width()/2;L.position.y+=y.height()/2;var U=w.select(y._strokeDrawers.get(L.dataset).getVisualPrimitiveAtIndex(L.index));L.strokeSelection=U;return L})};K.prototype.sectorValue=function(C,y){if(null==C)return this._propertyBindings.get(K._SECTOR_VALUE_KEY);this._bindProperty(K._SECTOR_VALUE_KEY,C,y);this._updatePieAngles();this.render();return this};K.prototype.innerRadius=function(C,y){if(null==C)return this._propertyBindings.get(K._INNER_RADIUS_KEY);this._bindProperty(K._INNER_RADIUS_KEY,C,y);
this.render();return this};K.prototype.outerRadius=function(C,y){if(null==C)return this._propertyBindings.get(K._OUTER_RADIUS_KEY);this._bindProperty(K._OUTER_RADIUS_KEY,C,y);this.render();return this};K.prototype.startAngle=function(C){if(null==C)return this._startAngle;this._startAngle=C;this._updatePieAngles();this.render();return this};K.prototype.endAngle=function(C){if(null==C)return this._endAngle;this._endAngle=C;this._updatePieAngles();this.render();return this};K.prototype.labelsEnabled=
function(C){if(null==C)return this._labelsEnabled;this._labelsEnabled=C;this.render();return this};K.prototype.labelFormatter=function(C){if(null==C)return this._labelFormatter;this._labelFormatter=C;this.render();return this};K.prototype.entitiesAt=function(C){var y=this.width()/2,L=this.height()/2;C=this._sliceIndexForPoint({x:C.x-y,y:C.y-L});return null==C?[]:[this.entities()[C]]};K.prototype._propertyProjectors=function(){var C=this,y=B.prototype._propertyProjectors.call(this),L=v.Plot._scaledAccessor(this.innerRadius()),
U=v.Plot._scaledAccessor(this.outerRadius());y.d=function(X,S,Y){return w.arc().innerRadius(L(X,S,Y)).outerRadius(U(X,S,Y)).startAngle(C._startAngles[S]).endAngle(C._endAngles[S])(X,S)};return y};K.prototype._updatePieAngles=function(){if(null!=this.sectorValue()&&0!==this.datasets().length){var C=v.Plot._scaledAccessor(this.sectorValue()),y=this.datasets()[0],L=this._getDataToDraw().get(y);L=w.pie().sort(null).startAngle(this._startAngle).endAngle(this._endAngle).value(function(U,X){return C(U,X,
y)})(L);this._startAngles=L.map(function(U){return U.startAngle});this._endAngles=L.map(function(U){return U.endAngle})}};K.prototype._pieCenter=function(){var C=this._startAngle<this._endAngle?this._startAngle:this._endAngle,y=this._startAngle<this._endAngle?this._endAngle:this._startAngle,L=Math.sin(C);C=Math.cos(C);var U=Math.sin(y);y=Math.cos(y);var X;if(0<=L&&0<=U)if(0<=C&&0<=y){var S=C;var Y=X=0;var ha=U}else 0>C&&0>y?(S=0,X=-y,Y=0,ha=L):0<=C&&0>y?(S=C,X=-y,Y=0,ha=L):0>C&&0<=y&&(Y=X=S=1,ha=
Math.max(L,U));else 0<=L&&0>U?0<=C&&0<=y?(S=Math.max(C,y),ha=Y=X=1):0>C&&0>y?(S=0,X=1,Y=-U,ha=L):0<=C&&0>y?(S=C,X=1,Y=-U,ha=1):0>C&&0<=y&&(S=y,Y=X=1,ha=L):0>L&&0<=U?0<=C&&0<=y?(S=1,X=0,Y=-L,ha=U):0>C&&0>y?(S=1,X=Math.max(-C,-y),ha=Y=1):0<=C&&0>y?(S=1,X=-y,Y=-L,ha=1):0>C&&0<=y&&(S=1,X=-C,Y=1,ha=U):0>L&&0>U&&(0<=C&&0<=y?(S=y,X=0,Y=-L,ha=0):0>C&&0>y?(S=0,X=-C,Y=-U,ha=0):0<=C&&0>y?(X=S=1,Y=Math.max(C,-y),ha=1):0>C&&0<=y&&(S=y,X=-C,Y=1,ha=0));return{x:0==Y+ha?0:Y/(Y+ha)*this.width(),y:0==S+X?0:S/(S+X)*
this.height()}};K.prototype._getDataToDraw=function(){var C=B.prototype._getDataToDraw.call(this);if(0===this.datasets().length)return C;var y=v.Plot._scaledAccessor(this.sectorValue()),L=this.datasets()[0],U=C.get(L).filter(function(X,S){return K._isValidData(y(X,S,L))});C.set(L,U);return C};K._isValidData=function(C){return h.Math.isValidNumber(C)&&0<=C};K.prototype._pixelPoint=function(C,y,L){var U=v.Plot._scaledAccessor(this.sectorValue());if(!K._isValidData(U(C,y,L)))return{x:NaN,y:NaN};var X=
v.Plot._scaledAccessor(this.innerRadius())(C,y,L);C=v.Plot._scaledAccessor(this.outerRadius())(C,y,L);X=(X+C)/2;C=w.pie().sort(null).value(function(S,Y){S=U(S,Y,L);return K._isValidData(S)?S:0}).startAngle(this._startAngle).endAngle(this._endAngle)(L.data());y=(C[y].startAngle+C[y].endAngle)/2;return{x:X*Math.sin(y),y:-X*Math.cos(y)}};K.prototype._additionalPaint=function(C){var y=this;this._renderArea.select(".label-area").remove();this._labelsEnabled&&h.Window.setTimeout(function(){return y._drawLabels()},
C);var L=this._generateStrokeDrawSteps(),U=this._getDataToDraw();this.datasets().forEach(function(X){var S=v.Plot.applyDrawSteps(L,X);y._strokeDrawers.get(X).draw(U.get(X),S)})};K.prototype._generateStrokeDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:new k.Null}]};K.prototype._sliceIndexForPoint=function(C){var y=Math.sqrt(Math.pow(C.x,2)+Math.pow(C.y,2)),L=Math.acos(-C.y/y);0>C.x&&(L=2*Math.PI-L);for(C=0;C<this._startAngles.length;C++)if(this._startAngles[C]<L&&
this._endAngles[C]>L){var U=C;break}if(void 0!==U){C=this.datasets()[0];var X=C.data()[U];L=this.innerRadius().accessor(X,U,C);C=this.outerRadius().accessor(X,U,C);if(y>L&&y<C)return U}return null};K.prototype._drawLabels=function(){var C=this,y=this._getAttrToProjector(),L=this._renderArea.append("g").classed("label-area",!0),U=new p.SvgContext(L.node()),X=new p.CacheMeasurer(U),S=new p.Writer(X,U),Y=this.datasets()[0];this._getDataToDraw().get(Y).forEach(function(ha,ia){var wa=C.sectorValue().accessor(ha,
ia,Y);if(h.Math.isValidNumber(wa)){wa=C._labelFormatter(wa,ha,ia,Y);var Ba=X.measure(wa),Ea=(C._endAngles[ia]+C._startAngles[ia])/2,Da=C.outerRadius().accessor(ha,ia,Y);C.outerRadius().scale&&(Da=C.outerRadius().scale.scale(Da));var ya=C.innerRadius().accessor(ha,ia,Y);C.innerRadius().scale&&(ya=C.innerRadius().scale.scale(ya));ya=(Da+ya)/2;Da=Math.sin(Ea)*ya-Ba.width/2;ya=-Math.cos(Ea)*ya-Ba.height/2;var Ja=[{x:Da,y:ya},{x:Da,y:ya+Ba.height},{x:Da+Ba.width,y:ya},{x:Da+Ba.width,y:ya+Ba.height}];(Ea=
Ja.every(function(La){return Math.abs(La.x)<=C.width()/2&&Math.abs(La.y)<=C.height()/2}))&&(Ea=Ja.map(function(La){return C._sliceIndexForPoint(La)}).every(function(La){return La===ia}));ha=y.fill(ha,ia,Y);ha=1.6*h.Color.contrast("white",ha)<h.Color.contrast("black",ha);Da=L.append("g").attr("transform","translate("+Da+","+ya+")");Da.classed(ha?"dark-label":"light-label",!0);Da.style("visibility",Ea?"inherit":"hidden");S.write(wa,Ba.width,Ba.height,{xAlign:"center",yAlign:"center"},Da.node())}})};
return K}(v.Plot);I._INNER_RADIUS_KEY="inner-radius";I._OUTER_RADIUS_KEY="outer-radius";I._SECTOR_VALUE_KEY="sector-value";H.Pie=I},function(I,H,D){var J=this&&this.__extends||function(q,v){function B(){this.constructor=q}for(var K in v)v.hasOwnProperty(K)&&(q[K]=v[K]);q.prototype=null===v?Object.create(v):(B.prototype=v.prototype,new B)},w=D(1),p=D(5),k=D(7),e=D(14),d=D(6),h=D(34),g=D(3),n=D(0),r=D(2);I=function(q){function v(){var B=q.call(this)||this;B._labelsEnabled=!1;B._label=null;B.animator("rectangles",
new k.Null);B.addClass("rectangle-plot");B.attr("fill",(new g.Color).range()[0]);return B}J(v,q);v.prototype._createDrawer=function(){return new d.ProxyDrawer(function(){return new h.RectangleSVGDrawer},function(B){return new e.RectangleCanvasDrawer(B)})};v.prototype._generateAttrToProjector=function(){var B=this,K=q.prototype._generateAttrToProjector.call(this),C=r.Plot._scaledAccessor(this.x()),y=K[v._X2_KEY],L=r.Plot._scaledAccessor(this.y()),U=K[v._Y2_KEY],X=this.x().scale,S=this.y().scale;null!=
y?(K.width=function(Y,ha,ia){return Math.abs(y(Y,ha,ia)-C(Y,ha,ia))},K.x=function(Y,ha,ia){return Math.min(y(Y,ha,ia),C(Y,ha,ia))}):(K.width=function(Y,ha,ia){return B._rectangleWidth(X)},K.x=function(Y,ha,ia){return C(Y,ha,ia)-.5*K.width(Y,ha,ia)});null!=U?(K.height=function(Y,ha,ia){return Math.abs(U(Y,ha,ia)-L(Y,ha,ia))},K.y=function(Y,ha,ia){return Math.max(U(Y,ha,ia),L(Y,ha,ia))-K.height(Y,ha,ia)}):(K.height=function(Y,ha,ia){return B._rectangleWidth(S)},K.y=function(Y,ha,ia){return L(Y,ha,ia)-
.5*K.height(Y,ha,ia)});delete K[v._X2_KEY];delete K[v._Y2_KEY];return K};v.prototype._generateDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:this._getAnimator("rectangles")}]};v.prototype._filterForProperty=function(B){return"x2"===B?q.prototype._filterForProperty.call(this,"x"):"y2"===B?q.prototype._filterForProperty.call(this,"y"):q.prototype._filterForProperty.call(this,B)};v.prototype.x=function(B,K,C){if(null==B)return q.prototype.x.call(this);null==K?q.prototype.x.call(this,
B):q.prototype.x.call(this,B,K,C);null!=K&&(C=(B=this.x2())&&B.accessor,null!=C&&this._bindProperty(v._X2_KEY,C,K,B.postScale));K instanceof g.Category&&K.innerPadding(0).outerPadding(0);return this};v.prototype.x2=function(B,K){if(null==B)return this._propertyBindings.get(v._X2_KEY);var C=this.x();this._bindProperty(v._X2_KEY,B,C&&C.scale,K);this.render();return this};v.prototype.y=function(B,K,C){if(null==B)return q.prototype.y.call(this);null==K?q.prototype.y.call(this,B):q.prototype.y.call(this,
B,K,C);null!=K&&(C=(B=this.y2())&&B.accessor,null!=C&&this._bindProperty(v._Y2_KEY,C,K,B.postScale));K instanceof g.Category&&K.innerPadding(0).outerPadding(0);return this};v.prototype.y2=function(B,K){if(null==B)return this._propertyBindings.get(v._Y2_KEY);var C=this.y();this._bindProperty(v._Y2_KEY,B,C&&C.scale,K);this.render();return this};v.prototype.entitiesAt=function(B){var K=this._getAttrToProjector();return this.entities().filter(function(C){var y=C.datum,L=C.index,U=C.dataset;C=K.x(y,L,
U);var X=K.y(y,L,U),S=K.width(y,L,U);y=K.height(y,L,U);return C<=B.x&&B.x<=C+S&&X<=B.y&&B.y<=X+y})};v.prototype._entityBounds=function(B){return this._entityBBox(B.datum,B.index,B.dataset,this._getAttrToProjector())};v.prototype._entityBBox=function(B,K,C,y){return{x:y.x(B,K,C),y:y.y(B,K,C),width:y.width(B,K,C),height:y.height(B,K,C)}};v.prototype.label=function(B){if(null==B)return this._label;this._label=B;this.render();return this};v.prototype.labelsEnabled=function(B){if(null==B)return this._labelsEnabled;
this._labelsEnabled=B;this.render();return this};v.prototype._propertyProjectors=function(){var B=q.prototype._propertyProjectors.call(this);null!=this.x2()&&(B.x2=r.Plot._scaledAccessor(this.x2()));null!=this.y2()&&(B.y2=r.Plot._scaledAccessor(this.y2()));return B};v.prototype._pixelPoint=function(B,K,C){var y=this._getAttrToProjector(),L=y.x(B,K,C),U=y.y(B,K,C),X=y.width(B,K,C);B=y.height(B,K,C);return{x:L+X/2,y:U+B/2}};v.prototype._rectangleWidth=function(B){if(B instanceof g.Category)return B.rangeBand();
var K=B===this.x().scale?this.x().accessor:this.y().accessor,C=w.set(n.Array.flatten(this.datasets().map(function(U){return U.data().map(function(X,S){return K(X,S,U).valueOf()})}))).values().map(function(U){return+U}),y=n.Math.min(C,0);C=n.Math.max(C,0);var L=B.scale(y);return(B.scale(C)-L)/Math.abs(C-y)};v.prototype._getDataToDraw=function(){var B=new n.Map,K=this._getAttrToProjector();this.datasets().forEach(function(C){var y=C.data().map(function(L,U){return n.Math.isValidNumber(K.x(L,U,C))&&
n.Math.isValidNumber(K.y(L,U,C))&&n.Math.isValidNumber(K.width(L,U,C))&&n.Math.isValidNumber(K.height(L,U,C))?L:null});B.set(C,y)});return B};v.prototype._additionalPaint=function(B){var K=this;this._renderArea.selectAll(".label-area").remove();this._labelsEnabled&&null!=this.label()&&n.Window.setTimeout(function(){return K._drawLabels()},B)};v.prototype._drawLabels=function(){var B=this,K=this._getDataToDraw();this.datasets().forEach(function(C,y){return B._drawLabel(K,C,y)})};v.prototype._drawLabel=
function(B,K,C){var y=this,L=this._getAttrToProjector(),U=this._renderArea.append("g").classed("label-area",!0),X=new p.SvgContext(U.node()),S=new p.CacheMeasurer(X),Y=new p.Writer(S,X);X=this.x().scale.range();var ha=this.y().scale.range(),ia=Math.min.apply(null,X),wa=Math.max.apply(null,X),Ba=Math.min.apply(null,ha),Ea=Math.max.apply(null,ha);B.get(K).forEach(function(Da,ya){if(null!=Da){var Ja=""+y.label()(Da,ya,K),La=S.measure(Ja),Ra=L.x(Da,ya,K),Pa=L.y(Da,ya,K),Ma=L.width(Da,ya,K),fb=L.height(Da,
ya,K);La.height<=fb&&La.width<=Ma&&(fb=(fb-La.height)/2,Ra+=(Ma-La.width)/2,Pa+=fb,Ma={min:Ra,max:Ra+La.width},fb={min:Pa,max:Pa+La.height},Ma.min<ia||Ma.max>wa||fb.min<Ba||fb.max>Ea||y._overlayLabel(Ma,fb,ya,C,B)||(Da=L.fill(Da,ya,K),Da=1.6*n.Color.contrast("white",Da)<n.Color.contrast("black",Da),Ra=U.append("g").attr("transform","translate("+Ra+","+Pa+")"),Ra.classed(Da?"dark-label":"light-label",!0),Y.write(Ja,La.width,La.height,{xAlign:"center",yAlign:"center"},Ra.node())))}})};v.prototype._overlayLabel=
function(B,K,C,y,L){for(var U=this._getAttrToProjector(),X=this.datasets(),S=y;S<X.length;S++)for(var Y=X[S],ha=L.get(Y),ia=S===y?C+1:0;ia<ha.length;ia++)if(n.DOM.intersectsBBox(B,K,this._entityBBox(ha[ia],ia,Y,U)))return!0;return!1};return v}(D(16).XYPlot);I._X2_KEY="x2";I._Y2_KEY="y2";H.Rectangle=I},function(I,H,D){var J=this&&this.__extends||function(q,v){function B(){this.constructor=q}for(var K in v)v.hasOwnProperty(K)&&(q[K]=v[K]);q.prototype=null===v?Object.create(v):(B.prototype=v.prototype,
new B)},w=D(31),p=D(6),k=D(48),e=D(7),d=D(14),h=D(3),g=D(0),n=D(19),r=D(2);I=function(q){function v(){var B=q.call(this)||this;B.addClass("scatter-plot");var K=new e.Easing;K.startDelay(5);K.stepDuration(250);K.maxTotalDuration(r.Plot._ANIMATION_MAX_DURATION);B.animator(n.Animator.MAIN,K);B.attr("opacity",.6);B.attr("fill",(new h.Color).range()[0]);B.size(6);var C=w.circle();B.symbol(function(){return C});return B}J(v,q);v.prototype._buildLightweightPlotEntities=function(B){var K=this;return q.prototype._buildLightweightPlotEntities.call(this,
B).map(function(C){var y=r.Plot._scaledAccessor(K.size())(C.datum,C.index,C.dataset);C.diameter=y;return C})};v.prototype._createDrawer=function(B){var K=this;return new p.ProxyDrawer(function(){return new k.SymbolSVGDrawer},function(C){return new d.CanvasDrawer(C,k.makeSymbolCanvasDrawStep(B,function(){return r.Plot._scaledAccessor(K.symbol())},function(){return r.Plot._scaledAccessor(K.size())}))})};v.prototype.size=function(B,K){if(null==B)return this._propertyBindings.get(v._SIZE_KEY);this._bindProperty(v._SIZE_KEY,
B,K);this.render();return this};v.prototype.symbol=function(B){if(null==B)return this._propertyBindings.get(v._SYMBOL_KEY);this._propertyBindings.set(v._SYMBOL_KEY,{accessor:B});this.render();return this};v.prototype._generateDrawSteps=function(){var B=[];if(this._animateOnNextRender()){var K=this._getAttrToProjector(),C=r.Plot._scaledAccessor(this.symbol());K.d=function(y,L,U){return C(y,L,U)(0)(null)};B.push({attrToProjector:K,animator:this._getAnimator(n.Animator.RESET)})}B.push({attrToProjector:this._getAttrToProjector(),
animator:this._getAnimator(n.Animator.MAIN)});return B};v.prototype._propertyProjectors=function(){var B=q.prototype._propertyProjectors.call(this),K=r.Plot._scaledAccessor(this.x()),C=r.Plot._scaledAccessor(this.y());B.x=K;B.y=C;B.transform=function(y,L,U){return"translate("+K(y,L,U)+","+C(y,L,U)+")"};B.d=this._constructSymbolGenerator();return B};v.prototype._constructSymbolGenerator=function(){var B=r.Plot._scaledAccessor(this.symbol()),K=r.Plot._scaledAccessor(this.size());return function(C,y,
L){return B(C,y,L)(K(C,y,L))(null)}};v.prototype._entityBounds=function(B){return{x:B.position.x-B.diameter/2,y:B.position.y-B.diameter/2,width:B.diameter,height:B.diameter}};v.prototype._entityVisibleOnPlot=function(B,K){var C={min:K.topLeft.x,max:K.bottomRight.x};K={min:K.topLeft.y,max:K.bottomRight.y};B=this._entityBounds(B);return g.DOM.intersectsBBox(C,K,B)};v.prototype.entitiesAt=function(B){var K=r.Plot._scaledAccessor(this.x()),C=r.Plot._scaledAccessor(this.y()),y=r.Plot._scaledAccessor(this.size());
return this.entities().filter(function(L){var U=L.datum,X=L.index,S=L.dataset;L=K(U,X,S);var Y=C(U,X,S);U=y(U,X,S);return L-U/2<=B.x&&B.x<=L+U/2&&Y-U/2<=B.y&&B.y<=Y+U/2})};return v}(D(16).XYPlot);I._SIZE_KEY="size";I._SYMBOL_KEY="symbol";H.Scatter=I},function(I,H,D){var J=this&&this.__extends||function(g,n){function r(){this.constructor=g}for(var q in n)n.hasOwnProperty(q)&&(g[q]=n[q]);g.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},w=D(7),p=D(6),k=D(47),e=D(3),d=D(35),h=D(2);
I=function(g){function n(){var r=g.call(this)||this;r.addClass("segment-plot");r.attr("stroke",(new e.Color).range()[0]);r.attr("stroke-width","2px");return r}J(n,g);n.prototype._createDrawer=function(){return new p.ProxyDrawer(function(){return new k.SegmentSVGDrawer},function(){d.warn("canvas renderer is not supported on Segment Plot!");return null})};n.prototype._generateDrawSteps=function(){return[{attrToProjector:this._getAttrToProjector(),animator:new w.Null}]};n.prototype._filterForProperty=
function(r){return"x2"===r?g.prototype._filterForProperty.call(this,"x"):"y2"===r?g.prototype._filterForProperty.call(this,"y"):g.prototype._filterForProperty.call(this,r)};n.prototype.x=function(r,q){if(null==r)return g.prototype.x.call(this);null==q?g.prototype.x.call(this,r):(g.prototype.x.call(this,r,q),r=(r=this.x2())&&r.accessor,null!=r&&this._bindProperty(n._X2_KEY,r,q));return this};n.prototype.x2=function(r){if(null==r)return this._propertyBindings.get(n._X2_KEY);var q=this.x();this._bindProperty(n._X2_KEY,
r,q&&q.scale);this.render();return this};n.prototype.y=function(r,q){if(null==r)return g.prototype.y.call(this);null==q?g.prototype.y.call(this,r):(g.prototype.y.call(this,r,q),r=(r=this.y2())&&r.accessor,null!=r&&this._bindProperty(n._Y2_KEY,r,q));return this};n.prototype.y2=function(r){if(null==r)return this._propertyBindings.get(n._Y2_KEY);var q=this.y();this._bindProperty(n._Y2_KEY,r,q&&q.scale);this.render();return this};n.prototype._propertyProjectors=function(){var r=g.prototype._propertyProjectors.call(this);
r.x1=h.Plot._scaledAccessor(this.x());r.x2=null==this.x2()?h.Plot._scaledAccessor(this.x()):h.Plot._scaledAccessor(this.x2());r.y1=h.Plot._scaledAccessor(this.y());r.y2=null==this.y2()?h.Plot._scaledAccessor(this.y()):h.Plot._scaledAccessor(this.y2());return r};n.prototype.entitiesAt=function(r){r=this.entityNearest(r);return null!=r?[r]:[]};n.prototype.entitiesIn=function(r,q){if(null==q){var v={min:r.topLeft.x,max:r.bottomRight.x};r={min:r.topLeft.y,max:r.bottomRight.y}}else v=r,r=q;return this._entitiesIntersecting(v,
r)};n.prototype._entitiesIntersecting=function(r,q){var v=this,B=[],K=this._getAttrToProjector();this.entities().forEach(function(C){v._lineIntersectsBox(C,r,q,K)&&B.push(C)});return B};n.prototype._lineIntersectsBox=function(r,q,v,B){var K=this,C=B.x1(r.datum,r.index,r.dataset),y=B.x2(r.datum,r.index,r.dataset),L=B.y1(r.datum,r.index,r.dataset);r=B.y2(r.datum,r.index,r.dataset);if(q.min<=C&&C<=q.max&&v.min<=L&&L<=v.max||q.min<=y&&y<=q.max&&v.min<=r&&r<=v.max)return!0;var U={x:C,y:L},X={x:y,y:r},
S=[{x:q.min,y:v.min},{x:q.min,y:v.max},{x:q.max,y:v.max},{x:q.max,y:v.min}];return 0<S.filter(function(Y,ha){return 0!==ha?K._lineIntersectsSegment(U,X,Y,S[ha-1])&&K._lineIntersectsSegment(Y,S[ha-1],U,X):!1}).length};n.prototype._lineIntersectsSegment=function(r,q,v,B){return 0>((q.x-r.x)*(v.y-q.y)-(q.y-r.y)*(v.x-q.x))*((q.x-r.x)*(B.y-q.y)-(q.y-r.y)*(B.x-q.x))};return n}(D(16).XYPlot);I._X2_KEY="x2";I._Y2_KEY="y2";H.Segment=I},function(I,H,D){var J=this&&this.__extends||function(h,g){function n(){this.constructor=
h}for(var r in g)g.hasOwnProperty(r)&&(h[r]=g[r]);h.prototype=null===g?Object.create(g):(n.prototype=g.prototype,new n)},w=D(1),p=D(7),k=D(20),e=D(0);I=D(50);var d=D(2);I=function(h){function g(){var n=h.call(this)||this;n._stackingResult=k.memThunk(function(){return n.datasets()},function(){return n.x().accessor},function(){return n.y().accessor},function(){return n._stackingOrder},function(r,q,v,B){return e.Stacking.stack(r,q,v,B)});n._stackedExtent=k.memThunk(n._stackingResult,function(){return n.x().accessor},
function(){return n._filterForProperty("y")},function(r,q,v){return e.Stacking.stackedExtent(r,q,v)});n._baselineValue=0;n._stackingOrder="bottomup";n.addClass("stacked-area-plot");n.attr("fill-opacity",1);n._baselineValueProvider=function(){return[n._baselineValue]};n.croppedRenderingEnabled(!1);return n}J(g,h);g.prototype.croppedRenderingEnabled=function(n){return null==n?h.prototype.croppedRenderingEnabled.call(this):n?(e.Window.warn("Warning: Stacked Area Plot does not support cropped rendering."),
this):h.prototype.croppedRenderingEnabled.call(this,n)};g.prototype._getAnimator=function(n){return new p.Null};g.prototype._setup=function(){h.prototype._setup.call(this);this._baseline=this._renderArea.append("line").classed("baseline",!0)};g.prototype.x=function(n,r){if(null==n)return h.prototype.x.call(this);null==r?h.prototype.x.call(this,n):h.prototype.x.call(this,n,r);this._checkSameDomain();return this};g.prototype.y=function(n,r){if(null==n)return h.prototype.y.call(this);null==r?h.prototype.y.call(this,
n):h.prototype.y.call(this,n,r);this._checkSameDomain();return this};g.prototype.stackingOrder=function(n){if(null==n)return this._stackingOrder;this._stackingOrder=n;this._onDatasetUpdate();return this};g.prototype.downsamplingEnabled=function(n){if(null==n)return h.prototype.downsamplingEnabled.call(this);e.Window.warn("Warning: Stacked Area Plot does not support downsampling");return this};g.prototype._additionalPaint=function(){var n=this.y().scale.scale(this._baselineValue);n={x1:0,y1:n,x2:this.width(),
y2:n};this._getAnimator("baseline").animate(this._baseline,n)};g.prototype._updateYScale=function(){var n=this.y();n=n&&n.scale;null!=n&&(n.addPaddingExceptionsProvider(this._baselineValueProvider),n.addIncludedValuesProvider(this._baselineValueProvider))};g.prototype._onDatasetUpdate=function(){this._checkSameDomain();h.prototype._onDatasetUpdate.call(this);return this};g.prototype.getExtentsForProperty=function(n){return"y"===n?[this._stackedExtent()]:h.prototype.getExtentsForProperty.call(this,
n)};g.prototype._checkSameDomain=function(){if(this._projectorsReady()){var n=this.datasets(),r=this.x().accessor,q=n.map(function(B){return w.set(B.data().map(function(K,C){return r(K,C,B).toString()})).values()}),v=g._domainKeys(n,r);q.some(function(B){return B.length!==v.length})&&e.Window.warn("the domains across the datasets are not the same. Plot may produce unintended behavior.")}};g._domainKeys=function(n,r){var q=w.set();n.forEach(function(v){v.data().forEach(function(B,K){q.add(r(B,K,v))})});
return q.values()};g.prototype._propertyProjectors=function(){var n=this,r=h.prototype._propertyProjectors.call(this),q=this.y().accessor,v=this.x().accessor,B=this._stackingResult();r.d=this._constructAreaProjector(d.Plot._scaledAccessor(this.x()),function(K,C,y){return n.y().scale.scale(+q(K,C,y)+B.get(y).get(e.Stacking.normalizeKey(v(K,C,y))).offset)},function(K,C,y){return n.y().scale.scale(B.get(y).get(e.Stacking.normalizeKey(v(K,C,y))).offset)});return r};g.prototype._pixelPoint=function(n,
r,q){var v=h.prototype._pixelPoint.call(this,n,r,q),B=this.x().accessor(n,r,q);n=this.y().accessor(n,r,q);q=this.y().scale.scale(+n+this._stackingResult().get(q).get(e.Stacking.normalizeKey(B)).offset);return{x:v.x,y:q}};return g}(I.Area);H.StackedArea=I},function(I,H,D){var J=this&&this.__extends||function(g,n){function r(){this.constructor=g}for(var q in n)n.hasOwnProperty(q)&&(g[q]=n[q]);g.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},w=D(5),p=D(8),k=D(20),e=D(0),d=D(27),
h=D(2);I=function(g){function n(r){void 0===r&&(r="vertical");var q=g.call(this,r)||this;q._extremaFormatter=p.identity();q._stackingResult=k.memThunk(function(){return q.datasets()},function(){return q.position().accessor},function(){return q.length().accessor},function(){return q._stackingOrder},function(v,B,K,C){return e.Stacking.stack(v,B,K,C)});q._stackedExtent=k.memThunk(q._stackingResult,function(){return q.position().accessor},function(){return q._filterForProperty(q._isVertical?"y":"x")},
function(v,B,K){return e.Stacking.stackedExtent(v,B,K)});q.addClass("stacked-bar-plot");q._stackingOrder="bottomup";return q}J(n,g);n.prototype.stackingOrder=function(r){if(null==r)return this._stackingOrder;this._stackingOrder=r;this._onDatasetUpdate();return this};n.prototype.extremaFormatter=function(r){if(0===arguments.length)return this._extremaFormatter;this._extremaFormatter=r;this.render();return this};n.prototype._setup=function(){g.prototype._setup.call(this);this._labelArea=this._renderArea.append("g").classed(d.Bar._LABEL_AREA_CLASS,
!0);var r=new w.SvgContext(this._labelArea.node());this._measurer=new w.CacheMeasurer(r);this._writer=new w.Writer(this._measurer,r)};n.prototype._drawLabels=function(){function r(U,X){var S=q._generateAttrToProjector(),Y=q.width(),ha=q.height();U.forEach(function(ia){if(ia.extent!==v){var wa=q.extremaFormatter()(ia.extent),Ba=q._measurer.measure(wa),Ea=ia.stackedDatum,Da=Ea.originalDatum,ya=Ea.originalIndex;Ea=Ea.originalDataset;if(q._isDatumOnScreen(S,Y,ha,Da,ya,Ea)){Da=h.Plot._scaledAccessor(q.attr(d.Bar._BAR_THICKNESS_KEY))(Da,
ya,Ea);ya=K.scale(ia.extent);ia=q._getPositionAttr(B.scale(ia.axisValue),Da)+Da/2;var Ja=X(q._isVertical?{x:ia,y:ya}:{x:ya,y:ia},Ba,Da);ya=Ja.x;Ea=Ja.y;ia=Ja.x+Ba.width-Ja.x;Ba=Ja.y+Ba.height-Ja.y;Da=q._isVertical?ia>Da:Ba>Da;Da||(ya=q._labelArea.append("g").attr("transform","translate("+ya+", "+Ea+")"),ya.classed("stacked-bar-label",!0),q._writer.write(wa,ia,Ba,{xAlign:"center",yAlign:"center"},ya.node()));L.push(Da)}}})}var q=this;g.prototype._drawLabels.call(this);this._labelArea.selectAll("g").remove();
var v=+this.baselineValue(),B=this.position().scale,K=this.length().scale,C=e.Stacking.stackedExtents(this._stackingResult()),y=C.minimumExtents,L=[];r(C.maximumExtents,function(U,X,S){S=q._isVertical?X.width:X.height;X=q._isVertical?X.height:X.width;return{x:q._isVertical?U.x-S/2:U.x+n._EXTREMA_LABEL_MARGIN_FROM_BAR,y:q._isVertical?U.y-X:U.y-S/2}});r(y,function(U,X,S){S=q._isVertical?X.width:X.height;X=q._isVertical?X.height:X.width;return{x:q._isVertical?U.x-S/2:U.x-X,y:q._isVertical?U.y+n._EXTREMA_LABEL_MARGIN_FROM_BAR:
U.y-S/2}});L.some(function(U){return U})&&this._labelArea.selectAll("g").remove()};n.prototype._generateAttrToProjector=function(){function r(Y,ha,ia){return 0>+U(Y,ha,ia)?B(Y,ha,ia):v(Y,ha,ia)}function q(Y,ha,ia){return Math.abs(v(Y,ha,ia)-B(Y,ha,ia))}function v(Y,ha,ia){return L.scale(+U(Y,ha,ia)+S.get(ia).get(e.Stacking.normalizeKey(X(Y,ha,ia))).offset)}function B(Y,ha,ia){return L.scale(S.get(ia).get(e.Stacking.normalizeKey(X(Y,ha,ia))).offset)}var K=this,C=g.prototype._generateAttrToProjector.call(this),
y=this._isVertical?"y":"x",L=this.length().scale,U=this.length().accessor,X=this.position().accessor,S=this._stackingResult();C[this._isVertical?"height":"width"]=q;C[y]=function(Y,ha,ia){return K._isVertical?r(Y,ha,ia):r(Y,ha,ia)-q(Y,ha,ia)};return C};n.prototype.getExtentsForProperty=function(r){return r===(this._isVertical?"y":"x")?[this._stackedExtent()]:g.prototype.getExtentsForProperty.call(this,r)};n.prototype.invalidateCache=function(){g.prototype.invalidateCache.call(this);this._measurer.reset()};
return n}(d.Bar);I._EXTREMA_LABEL_MARGIN_FROM_BAR=5;H.StackedBar=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(0);I=D(27);var p=D(2);I=function(k){function e(){var d=k.call(this)||this;d._connectorsEnabled=!1;d.addClass("waterfall-plot");return d}J(e,k);e.prototype.connectorsEnabled=function(d){if(null==d)return this._connectorsEnabled;
this._connectorsEnabled=d;return this};e.prototype.total=function(d){if(null==d)return this._propertyBindings.get(e._TOTAL_KEY);this._bindProperty(e._TOTAL_KEY,d,null);return this};e.prototype._additionalPaint=function(d){var h=this;this._connectorArea.selectAll("line").remove();this._connectorsEnabled&&w.Window.setTimeout(function(){return h._drawConnectors()},d)};e.prototype._createNodesForDataset=function(d){d=k.prototype._createNodesForDataset.call(this,d);this._connectorArea=this._renderArea.append("g").classed(e._CONNECTOR_AREA_CLASS,
!0);return d};e.prototype.getExtentsForProperty=function(d){return"y"===d?[this._extent]:k.prototype.getExtentsForProperty.call(this,d)};e.prototype._generateAttrToProjector=function(){var d=this,h=k.prototype._generateAttrToProjector.call(this),g=this.y().scale,n=p.Plot._scaledAccessor(this.total());null==this.attr("y")&&(h.y=function(r,q,v){var B=d.y().accessor(r,q,v);if(n(r,q,v))return Math.min(g.scale(B),g.scale(0));r=d._subtotals[q];if(0===q)return 0>B?g.scale(r-B):g.scale(r);q=d._subtotals[q-
1];return r>q?g.scale(r):g.scale(q)});null==this.attr("height")&&(h.height=function(r,q,v){var B=n(r,q,v);r=d.y().accessor(r,q,v);if(B)return Math.abs(g.scale(r)-g.scale(0));B=d._subtotals[q];if(0===q)return Math.abs(g.scale(B)-g.scale(B-r));q=d._subtotals[q-1];return Math.abs(g.scale(B)-g.scale(q))});h["class"]=function(r,q,v){var B="";null!=d.attr("class")&&(B=d.attr("class").accessor(r,q,v)+" ");if(n(r,q,v))return B+e._BAR_TOTAL_CLASS;r=d.y().accessor(r,q,v);return B+(0<r?e._BAR_GROWTH_CLASS:e._BAR_DECLINE_CLASS)};
return h};e.prototype._onDatasetUpdate=function(){this._updateSubtotals();k.prototype._onDatasetUpdate.call(this);return this};e.prototype._calculateSubtotalsAndExtent=function(d){var h=this,g=Number.MAX_VALUE,n=Number.MIN_VALUE,r=0,q=!1;d.data().forEach(function(v,B){var K=h.y().accessor(v,B,d);(v=h.total().accessor(v,B,d))&&0!==B||(r+=K);h._subtotals.push(r);r<g&&(g=r);r>n&&(n=r);v&&(K<g&&(g=K),K>n&&(n=K));if(!q&&v){B=K-r;for(K=0;K<h._subtotals.length;K++)h._subtotals[K]+=B;q=!0;r+=B;g+=B;n+=B}});
this._extent=[g,n]};e.prototype._drawConnectors=function(){for(var d=this._getAttrToProjector(),h=this.datasets()[0],g=1;g<h.data().length;g++){var n=g-1,r=h.data()[g],q=h.data()[n];q=d.x(q,n,h);var v=d.x(r,g,h)+d.width(r,g,h),B=d.y(r,g,h);if(0<this._subtotals[g]&&this._subtotals[g]>this._subtotals[n]||0>this._subtotals[g]&&this._subtotals[g]>=this._subtotals[n])B=d.y(r,g,h)+d.height(r,g,h);this._connectorArea.append("line").classed(e._CONNECTOR_CLASS,!0).attr("x1",q).attr("x2",v).attr("y1",B).attr("y2",
B)}};e.prototype._updateSubtotals=function(){var d=this.datasets();0<d.length&&(d=d[d.length-1],this._subtotals=[],this._calculateSubtotalsAndExtent(d))};return e}(I.Bar);I._BAR_DECLINE_CLASS="waterfall-decline";I._BAR_GROWTH_CLASS="waterfall-growth";I._BAR_TOTAL_CLASS="waterfall-total";I._CONNECTOR_CLASS="connector";I._CONNECTOR_AREA_CLASS="connector-area";I._TOTAL_KEY="total";H.Waterfall=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&
(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(1),p=D(0);I=function(k){function e(d){var h=k.call(this)||this;switch(d){case null:case void 0:null==e._plottableColorCache&&(e._plottableColorCache=e._getPlottableColors());d=w.scaleOrdinal().range(e._plottableColorCache);break;case "Category10":case "category10":case "10":d=w.scaleOrdinal(w.schemeCategory10);break;case "Category20":case "category20":case "20":d=w.scaleOrdinal(w.schemeCategory20);break;case "Category20b":case "category20b":case "20b":d=
w.scaleOrdinal(w.schemeCategory20b);break;case "Category20c":case "category20c":case "20c":d=w.scaleOrdinal(w.schemeCategory20c);break;default:throw Error("Unsupported ColorScale type");}h._d3Scale=d;return h}J(e,k);e.prototype.extentOfValues=function(d){return p.Array.uniq(d)};e.prototype._getExtent=function(){return p.Array.uniq(this._getAllIncludedValues())};e.invalidateColorCache=function(){e._plottableColorCache=null};e._getPlottableColors=function(){for(var d=[],h=w.select("body").append("plottable-color-tester"),
g=p.Color.colorTest(h,""),n=0,r=p.Color.colorTest(h,"plottable-colors-0");null!=r&&n<this._MAXIMUM_COLORS_FROM_CSS&&(r!==g||r!==d[d.length-1]);)d.push(r),n++,r=p.Color.colorTest(h,"plottable-colors-"+n);h.remove();return d};e.prototype.scale=function(d){var h=this._d3Scale(d);d=this.domain().indexOf(d);d=Math.floor(d/this.range().length);return p.Color.lightenColor(h,Math.log(d*e._LOOP_LIGHTEN_FACTOR+1))};e.prototype._getDomain=function(){return this._backingScaleDomain()};e.prototype._backingScaleDomain=
function(d){if(null==d)return this._d3Scale.domain();this._d3Scale.domain(d);return this};e.prototype._getRange=function(){return this._d3Scale.range()};e.prototype._setRange=function(d){this._d3Scale.range(d)};return e}(D(17).Scale);I._LOOP_LIGHTEN_FACTOR=1.6;I._MAXIMUM_COLORS_FROM_CSS=256;H.Color=I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,
new d)},w=D(1),p=D(0);I=function(k){function e(d){void 0===d&&(d="linear");var h=k.call(this)||this;switch(d){case "linear":h._colorScale=w.scaleLinear();break;case "log":h._colorScale=w.scaleLog();break;case "sqrt":h._colorScale=w.scaleSqrt();break;case "pow":h._colorScale=w.scalePow()}if(null==h._colorScale)throw Error("unknown QuantitativeScale scale type "+d);h.range(e.REDS);return h}J(e,k);e.prototype.extentOfValues=function(d){d=w.extent(d);return null==d[0]||null==d[1]?[]:d};e.prototype._d3InterpolatedScale=
function(){return this._colorScale.range([0,1]).interpolate(this._interpolateColors())};e.prototype._interpolateColors=function(){var d=this._colorRange;if(2>d.length)throw Error("Color scale arrays must have at least two elements.");return function(h,g){return function(n){n=Math.max(0,Math.min(1,n));n*=d.length-1;var r=Math.floor(n),q=n-r;return w.interpolateLab(d[r],d[Math.ceil(n)])(q)}}};e.prototype._resetScale=function(){this._d3Scale=this._d3InterpolatedScale();this._autoDomainIfAutomaticMode();
this._dispatchUpdate()};e.prototype.autoDomain=function(){var d=this._getAllIncludedValues();0<d.length&&this._setDomain([p.Math.min(d,0),p.Math.max(d,0)]);return this};e.prototype.scale=function(d){return this._d3Scale(d)};e.prototype._getDomain=function(){return this._backingScaleDomain()};e.prototype._backingScaleDomain=function(d){if(null==d)return this._d3Scale.domain();this._d3Scale.domain(d);return this};e.prototype._getRange=function(){return this._colorRange};e.prototype._setRange=function(d){this._colorRange=
d;this._resetScale()};return e}(D(17).Scale);I.REDS="#FFFFFF #FFF6E1 #FEF4C0 #FED976 #FEB24C #FD8D3C #FC4E2A #E31A1C #B10026".split(" ");I.BLUES="#FFFFFF #CCFFFF #A5FFFD #85F7FB #6ED3EF #55A7E0 #417FD0 #2545D3 #0B02E1".split(" ");I.POSNEG="#0B02E1 #2545D3 #417FD0 #55A7E0 #6ED3EF #85F7FB #A5FFFD #CCFFFF #FFFFFF #FFF6E1 #FEF4C0 #FED976 #FEB24C #FD8D3C #FC4E2A #E31A1C #B10026".split(" ");H.InterpolatedColor=I},function(I,H,D){var J=this&&this.__extends||function(p,k){function e(){this.constructor=p}
for(var d in k)k.hasOwnProperty(d)&&(p[d]=k[d]);p.prototype=null===k?Object.create(k):(e.prototype=k.prototype,new e)},w=D(1);I=function(p){function k(){var e=p.call(this)||this;e._d3Scale=w.scaleLinear();return e}J(k,p);k.prototype._defaultExtent=function(){return[0,1]};k.prototype._expandSingleValueDomain=function(e){return e[0]===e[1]?[e[0]-1,e[1]+1]:e};k.prototype.scale=function(e){return this._d3Scale(e)};k.prototype.scaleTransformation=function(e){return this.scale(e)};k.prototype.invertedTransformation=
function(e){return this.invert(e)};k.prototype.getTransformationExtent=function(){return this._getUnboundedExtent(!0)};k.prototype.getTransformationDomain=function(){return this.domain()};k.prototype.setTransformationDomain=function(e){this.domain(e)};k.prototype._getDomain=function(){return this._backingScaleDomain()};k.prototype._backingScaleDomain=function(e){if(null==e)return this._d3Scale.domain();this._d3Scale.domain(e);return this};k.prototype._getRange=function(){return this._d3Scale.range()};
k.prototype._setRange=function(e){this._d3Scale.range(e)};k.prototype.invert=function(e){return this._d3Scale.invert(e)};k.prototype.defaultTicks=function(){return this._d3Scale.ticks(k._DEFAULT_NUM_TICKS)};k.prototype._niceDomain=function(e,d){return this._d3Scale.copy().domain(e).nice(d).domain()};return k}(D(11).QuantitativeScale);H.Linear=I},function(I,H,D){var J=this&&this.__extends||function(e,d){function h(){this.constructor=e}for(var g in d)d.hasOwnProperty(g)&&(e[g]=d[g]);e.prototype=null===
d?Object.create(d):(h.prototype=d.prototype,new h)},w=D(1),p=D(0),k=D(3);I=function(e){function d(h){void 0===h&&(h=10);var g=e.call(this)||this;g._d3Scale=w.scaleLinear();g._base=h;g._pivot=g._base;g._setDomain(g._defaultExtent());if(1>=h)throw Error("ModifiedLogScale: The base must be > 1");return g}J(d,e);d.prototype._adjustedLog=function(h){var g=0>h?-1:1;h*=g;h<this._pivot&&(h+=(this._pivot-h)/this._pivot);h=Math.log(h)/Math.log(this._base);return h*=g};d.prototype._invertedAdjustedLog=function(h){var g=
0>h?-1:1;h*=g;h=Math.pow(this._base,h);h<this._pivot&&(h=this._pivot*(h-1)/(this._pivot-1));return h*=g};d.prototype.scale=function(h){return this._d3Scale(this._adjustedLog(h))};d.prototype.invert=function(h){return this._invertedAdjustedLog(this._d3Scale.invert(h))};d.prototype.scaleTransformation=function(h){return this.scale(h)};d.prototype.invertedTransformation=function(h){return this.invert(h)};d.prototype.getTransformationExtent=function(){return this._getUnboundedExtent(!0)};d.prototype.getTransformationDomain=
function(){return this.domain()};d.prototype.setTransformationDomain=function(h){this.domain(h)};d.prototype._getDomain=function(){return this._untransformedDomain};d.prototype._setDomain=function(h){this._untransformedDomain=h;h=[this._adjustedLog(h[0]),this._adjustedLog(h[1])];e.prototype._setDomain.call(this,h)};d.prototype._backingScaleDomain=function(h){if(null==h)return this._d3Scale.domain();this._d3Scale.domain(h);return this};d.prototype.ticks=function(){function h(K,C,y){return[K,C,y].sort(function(L,
U){return L-U})[1]}var g=p.Math.min(this._untransformedDomain,0),n=p.Math.max(this._untransformedDomain,0),r=h(g,n,-this._pivot),q=h(g,n,this._pivot);r=this._logTicks(-r,-g).map(function(K){return-K}).reverse();q=this._logTicks(q,n);var v=Math.max(g,-this._pivot),B=Math.min(n,this._pivot);v=w.scaleLinear().domain([v,B]).ticks(this._howManyTicks(v,B));r=r.concat(v).concat(q);1>=r.length&&(r=w.scaleLinear().domain([g,n]).ticks(k.ModifiedLog._DEFAULT_NUM_TICKS));return r};d.prototype._logTicks=function(h,
g){var n=this,r=this._howManyTicks(h,g);if(0===r)return[];var q=Math.floor(Math.log(h)/Math.log(this._base)),v=Math.ceil(Math.log(g)/Math.log(this._base));r=w.range(v,q,-Math.ceil((v-q)/r));q=w.range(this._base,1,-(this._base-1)).map(Math.floor);var B=p.Array.uniq(q);r=r.map(function(K){return B.map(function(C){return Math.pow(n._base,K-1)*C})});return p.Array.flatten(r).filter(function(K){return h<=K&&K<=g}).sort(function(K,C){return K-C})};d.prototype._howManyTicks=function(h,g){var n=this._adjustedLog(p.Math.min(this._untransformedDomain,
0)),r=this._adjustedLog(p.Math.max(this._untransformedDomain,0));h=this._adjustedLog(h);g=this._adjustedLog(g);return Math.ceil((g-h)/(r-n)*k.ModifiedLog._DEFAULT_NUM_TICKS)};d.prototype._niceDomain=function(h,g){return h};d.prototype._defaultExtent=function(){return[0,this._base]};d.prototype._expandSingleValueDomain=function(h){return h[0]===h[1]?(h=h[0],0<h?[h/this._base,h*this._base]:0===h?[-this._base,this._base]:[h*this._base,h/this._base]):h};d.prototype._getRange=function(){return this._d3Scale.range()};
d.prototype._setRange=function(h){this._d3Scale.range(h)};d.prototype.defaultTicks=function(){return this._d3Scale.ticks(k.ModifiedLog._DEFAULT_NUM_TICKS)};return d}(D(11).QuantitativeScale);H.ModifiedLog=I},function(I,H,D){var J=D(0);H.intervalTickGenerator=function(w){if(0>=w)throw Error("interval must be positive number");return function(p){p=p.domain();var k=Math.min(p[0],p[1]);p=Math.max(p[0],p[1]);var e=Math.ceil(k/w)*w;k=0===k%w?[]:[k];var d=J.Math.range(0,Math.floor((p-e)/w)+1).map(function(h){return e+
h*w});p=0===p%w?[]:[p];return k.concat(d).concat(p)}};H.integerTickGenerator=function(){return function(w){var p=w.defaultTicks();return p.filter(function(k,e){return 0===k%1||0===e||e===p.length-1})}}},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(1),p=D(28);I=function(k){function e(){var d=k.call(this)||this;d._d3Scale=w.scaleTime();
d.autoDomain();return d}J(e,k);e.prototype.tickInterval=function(d,h){void 0===h&&(h=1);var g=w.scaleTime();d=e.timeIntervalToD3Time(d).every(h);g.domain(this.domain());g.range(this.range());return g.ticks(d)};e.prototype._setDomain=function(d){if(d[1]<d[0])throw Error("Scale.Time domain values must be in chronological order");return k.prototype._setDomain.call(this,d)};e.prototype._defaultExtent=function(){return[new Date("1970-01-01"),new Date("1970-01-02")]};e.prototype._expandSingleValueDomain=
function(d){var h=d[0].getTime(),g=d[1].getTime();return h===g?(d=new Date(h),d.setDate(d.getDate()-1),g=new Date(g),g.setDate(g.getDate()+1),[d,g]):d};e.prototype.scale=function(d){return this._d3Scale(d)};e.prototype.scaleTransformation=function(d){return this.scale(new Date(d))};e.prototype.invertedTransformation=function(d){return this.invert(d).getTime()};e.prototype.getTransformationExtent=function(){var d=this._getUnboundedExtent(!0);return[d[0].valueOf(),d[1].valueOf()]};e.prototype.getTransformationDomain=
function(){var d=this.domain();return[d[0].valueOf(),d[1].valueOf()]};e.prototype.setTransformationDomain=function(d){this.domain([new Date(d[0]),new Date(d[1])])};e.prototype._getDomain=function(){return this._backingScaleDomain()};e.prototype._backingScaleDomain=function(d){if(null==d)return this._d3Scale.domain();this._d3Scale.domain(d);return this};e.prototype._getRange=function(){return this._d3Scale.range()};e.prototype._setRange=function(d){this._d3Scale.range(d)};e.prototype.invert=function(d){return this._d3Scale.invert(d)};
e.prototype.defaultTicks=function(){return this._d3Scale.ticks(e._DEFAULT_NUM_TICKS)};e.prototype._niceDomain=function(d){return this._d3Scale.copy().domain(d).nice().domain()};e.timeIntervalToD3Time=function(d){switch(d){case p.TimeInterval.second:return w.timeSecond;case p.TimeInterval.minute:return w.timeMinute;case p.TimeInterval.hour:return w.timeHour;case p.TimeInterval.day:return w.timeDay;case p.TimeInterval.week:return w.timeWeek;case p.TimeInterval.month:return w.timeMonth;case p.TimeInterval.year:return w.timeYear;
default:throw Error("TimeInterval specified does not exist: "+d);}};return e}(D(11).QuantitativeScale);H.Time=I},function(I,H,D){var J=D(1),w=Array;H.add=function(p,k){if(p.length!==k.length)throw Error("attempted to add arrays of unequal length");return p.map(function(e,d){return p[d]+k[d]})};H.uniq=function(p){var k=J.set(),e=[];p.forEach(function(d){k.has(String(d))||(k.add(String(d)),e.push(d))});return e};H.flatten=function(p){return w.prototype.concat.apply([],p)};H.createFilledArray=function(p,
k){for(var e=[],d=0;d<k;d++)e[d]="function"===typeof p?p(d):p;return e}},function(I,H,D){I=function(){function J(w,p,k){this.maxIndex=this.minIndex=this.exitIndex=this.entryIndex=w;this.bucketValue=p;this.maxValue=this.minValue=k}J.prototype.isInBucket=function(w){return w==this.bucketValue};J.prototype.addToBucket=function(w,p){w<this.minValue&&(this.minValue=w,this.minIndex=p);w>this.maxValue&&(this.maxValue=w,this.maxIndex=p);this.exitIndex=p};J.prototype.getUniqueIndices=function(){var w=[this.entryIndex,
this.maxIndex,this.minIndex,this.exitIndex];return w.filter(function(p,k){return 0==k||p!=w[k-1]})};return J}();H.Bucket=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return null!==w&&w.apply(this,arguments)||this}J(p,w);p.prototype.callCallbacks=function(){for(var k=this,e=[],d=0;d<arguments.length;d++)e[d]=
arguments[d];this.forEach(function(h){h.apply(k,e)});return this};return p}(D(58).Set);H.CallbackSet=I},function(I,H,D){function J(k){function e(g){g/=255;return.03928>=g?g/12.92:p.pow((g+.055)/1.055,2.4)}var d=w.rgb(k);k=e(d.r);var h=e(d.g);d=e(d.b);return.2126*k+.7152*h+.0722*d}var w=D(1),p=Math;H.contrast=function(k,e){k=J(k)+.05;e=J(e)+.05;return k>e?k/e:e/k};H.lightenColor=function(k,e){return w.color(k).brighter(e).rgb().toString()};H.colorTest=function(k,e){k.classed(e,!0);var d=k.style("background-color");
if("transparent"===d)return null;d=/\((.+)\)/.exec(d);if(!d)return null;d=d[1].split(",").map(function(h){h=+h;var g=h.toString(16);return 16>h?"0"+g:g});if(4===d.length&&"00"===d[3])return null;d="#"+d.join("");k.classed(e,!1);return d}},function(I,H,D){var J=D(1),w=D(57);I=function(){function p(){this._entities=[];this._rtree=new w.RTree;this._tree=J.quadtree().x(function(k){return Math.floor(k.position.x)}).y(function(k){return Math.floor(k.position.y)})}p.prototype.addAll=function(k,e,d){(r=this._entities).push.apply(r,
k);if(void 0!==d){d=w.RTreeBounds.bounds(d);for(var h=0;h<k.length;h++){var g=k[h],n=w.RTreeBounds.entityBounds(e(g));w.RTreeBounds.isBoundsOverlapBounds(d,n)&&(this._tree.add(g),this._rtree.insert(n,g))}}else for(this._tree.addAll(k),h=0;h<k.length;h++)g=k[h],n=w.RTreeBounds.entityBounds(e(g)),this._rtree.insert(n,g);var r};p.prototype.entityNearest=function(k){return this._tree.find(k.x,k.y)};p.prototype.entitiesInBounds=function(k){return this._rtree.intersect(w.RTreeBounds.entityBounds(k))};p.prototype.entitiesInXBounds=
function(k){return this._rtree.intersectX(w.RTreeBounds.entityBounds(k))};p.prototype.entitiesInYBounds=function(k){return this._rtree.intersectY(w.RTreeBounds.entityBounds(k))};p.prototype.entities=function(){return this._entities};return p}();H.EntityStore=I},function(I,H,D){var J=D(56);I=function(){function w(){"function"===typeof window.Map?this._es6Map=new window.Map:this._keyValuePairs=[]}w.prototype.set=function(p,k){if(J.isNaN(p))throw Error("NaN may not be used as a key to the Map");if(null!=
this._es6Map)return this._es6Map.set(p,k),this;for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===p)return this._keyValuePairs[e].value=k,this;this._keyValuePairs.push({key:p,value:k});return this};w.prototype.get=function(p){if(null!=this._es6Map)return this._es6Map.get(p);for(var k=0;k<this._keyValuePairs.length;k++)if(this._keyValuePairs[k].key===p)return this._keyValuePairs[k].value};w.prototype.has=function(p){if(null!=this._es6Map)return this._es6Map.has(p);for(var k=
0;k<this._keyValuePairs.length;k++)if(this._keyValuePairs[k].key===p)return!0;return!1};w.prototype.forEach=function(p,k){var e=this;null!=this._es6Map?this._es6Map.forEach(function(d,h){return p.call(k,d,h,e)},k):this._keyValuePairs.forEach(function(d){p.call(k,d.value,d.key,e)})};w.prototype.delete=function(p){if(null!=this._es6Map)return this._es6Map.delete(p);for(var k=0;k<this._keyValuePairs.length;k++)if(this._keyValuePairs[k].key===p)return this._keyValuePairs.splice(k,1),!0;return!1};return w}();
H.Map=I},function(I,H,D){H.assign=function(){for(var J=[],w=0;w<arguments.length;w++)J[w]=arguments[w];for(var p={},k=0;k<J.length;k++)for(var e=J[k],d=0,h=Object.keys(e);d<h.length;d++){var g=h[d];p[g]=e[g]}return p}},function(I,H,D){I=function(){function J(){}J.prototype.split=function(w,p){for(var k=Math.ceil(w.length/2),e=0;e<k;e++)p[0].insert(w[e]);for(e=k;e<w.length;e++)p[1].insert(w[e])};return J}();H.SplitStrategyTrivial=I;I=function(){function J(){}J.prototype.split=function(w,p){w=w.slice();
for(this.chooseFirstSplit(w,p);0<w.length;)this.addNext(w,p)};J.prototype.chooseFirstSplit=function(w,p){for(var k=0,e=0,d=w.length-1,h=w.length-1,g=1;g<w.length-1;g++){var n=w[g];n.bounds.xl>w[d].bounds.xl?d=g:n.bounds.xh<w[k].bounds.xh&&(k=g);n.bounds.yl>w[h].bounds.yl?h=g:n.bounds.yh<w[e].bounds.yh&&(e=g)}var r=Math.abs(w[k].bounds.xh-w[d].bounds.xl)>Math.abs(w[e].bounds.yh-w[h].bounds.yl)?[k,d]:[e,h];k=r[0];e=r[1];k===e&&(k=0,e=w.length-1);p[0].insert(w.splice(Math.max(k,e),1)[0]);p[1].insert(w.splice(Math.min(k,
e),1)[0])};J.prototype.addNext=function(w,p){for(var k=null,e=null,d=null,h=0;h<w.length;h++){var g=w[h],n=p[0].unionAreaDifference(g.bounds);g=p[1].unionAreaDifference(g.bounds);if(n<e||null==k)k=h,e=n,d=p[0];g<e&&(k=h,e=g,d=p[1])}d.insert(w.splice(k,1)[0])};return J}();H.SplitStrategyLinear=I},function(I,H,D){var J=D(1),w=D(0);I=D(10);H.IStackingOrder=I.makeEnum(["topdown","bottomup"]);var p=Math;H.stack=function(k,e,d,h){void 0===h&&(h="bottomup");var g=J.map(),n=J.map(),r=new w.Map;"topdown"===
h&&(k=k.slice(),k.reverse());k.forEach(function(q){var v=new w.Map;q.data().forEach(function(B,K){var C=String(e(B,K,q)),y=+d(B,K,q),L=0<=y?g:n;if(L.has(C)){var U=L.get(C);L.set(C,U+y)}else U=0,L.set(C,y);v.set(C,{offset:U,value:y,axisValue:e(B,K,q),originalDatum:B,originalDataset:q,originalIndex:K})});r.set(q,v)});return r};H.stackedExtents=function(k){var e=new w.Map,d=new w.Map;k.forEach(function(h){h.forEach(function(g,n){var r=w.Math.max([g.offset+g.value,g.offset],g.offset),q=w.Math.min([g.offset+
g.value,g.offset],g.offset),v=g.axisValue;e.has(n)?e.get(n).extent<r&&e.set(n,{extent:r,axisValue:v,stackedDatum:g}):e.set(n,{extent:r,axisValue:v,stackedDatum:g});d.has(n)?d.get(n).extent>q&&d.set(n,{extent:q,axisValue:v,stackedDatum:g}):d.set(n,{extent:q,axisValue:v,stackedDatum:g})})});return{maximumExtents:e,minimumExtents:d}};H.stackedExtent=function(k,e,d){var h=[];k.forEach(function(n,r){r.data().forEach(function(q,v){if(null==d||d(q,v,r))q=n.get(String(e(q,v,r))),h.push(q.value+q.offset)})});
k=w.Math.max(h,0);var g=w.Math.min(h,0);return[p.min(g,0),p.max(0,k)]};H.normalizeKey=function(k){return String(k)}},function(I,H,D){var J=D(0);H.getTranslator=function(p){p=p.root().rootElement().node();var k=p.__Plottable_ClientTranslator;null==k&&(k=new w(p),p.__Plottable_ClientTranslator=k);return k};var w=function(){function p(k){this._rootElement=k}p.prototype.computePosition=function(k,e){k={x:k,y:e};e=J.Math.getCumulativeTransform(this._rootElement);return null==e?k:J.Math.applyTransform(e,
k)};p.isEventInside=function(k,e){return J.DOM.contains(k.root().rootElement().node(),e.target)};return p}();H.Translator=w},function(I,H,D){Object.defineProperty(H,"__esModule",{value:!0});var J=D(124);D.d(H,"easeLinear",function(){return J.a});var w=D(126);D.d(H,"easeQuad",function(){return w.a});D.d(H,"easeQuadIn",function(){return w.b});D.d(H,"easeQuadOut",function(){return w.c});D.d(H,"easeQuadInOut",function(){return w.a});var p=D(121);D.d(H,"easeCubic",function(){return p.a});D.d(H,"easeCubicIn",
function(){return p.b});D.d(H,"easeCubicOut",function(){return p.c});D.d(H,"easeCubicInOut",function(){return p.a});var k=D(125);D.d(H,"easePoly",function(){return k.a});D.d(H,"easePolyIn",function(){return k.b});D.d(H,"easePolyOut",function(){return k.c});D.d(H,"easePolyInOut",function(){return k.a});var e=D(127);D.d(H,"easeSin",function(){return e.a});D.d(H,"easeSinIn",function(){return e.b});D.d(H,"easeSinOut",function(){return e.c});D.d(H,"easeSinInOut",function(){return e.a});var d=D(123);D.d(H,
"easeExp",function(){return d.a});D.d(H,"easeExpIn",function(){return d.b});D.d(H,"easeExpOut",function(){return d.c});D.d(H,"easeExpInOut",function(){return d.a});var h=D(120);D.d(H,"easeCircle",function(){return h.a});D.d(H,"easeCircleIn",function(){return h.b});D.d(H,"easeCircleOut",function(){return h.c});D.d(H,"easeCircleInOut",function(){return h.a});var g=D(119);D.d(H,"easeBounce",function(){return g.a});D.d(H,"easeBounceIn",function(){return g.b});D.d(H,"easeBounceOut",function(){return g.a});
D.d(H,"easeBounceInOut",function(){return g.c});var n=D(118);D.d(H,"easeBack",function(){return n.a});D.d(H,"easeBackIn",function(){return n.b});D.d(H,"easeBackOut",function(){return n.c});D.d(H,"easeBackInOut",function(){return n.a});var r=D(122);D.d(H,"easeElastic",function(){return r.a});D.d(H,"easeElasticIn",function(){return r.b});D.d(H,"easeElasticOut",function(){return r.a});D.d(H,"easeElasticInOut",function(){return r.c})},function(I,H,D){D.d(H,"b",function(){return J});D.d(H,"c",function(){return w});
D.d(H,"a",function(){return p});var J=function d(e){function h(g){return g*g*((e+1)*g-e)}e=+e;h.overshoot=d;return h}(1.70158),w=function h(d){function g(n){return--n*n*((d+1)*n+d)+1}d=+d;g.overshoot=h;return g}(1.70158),p=function g(h){function n(r){return(1>(r*=2)?r*r*((h+1)*r-h):(r-=2)*r*((h+1)*r+h)+2)/2}h=+h;n.overshoot=g;return n}(1.70158)},function(I,H,D){function J(v){return(v=+v)<w?q*v*v:v<k?q*(v-=p)*v+e:v<h?q*(v-=d)*v+g:q*(v-=n)*v+r}H.b=function(v){return 1-J(1-v)};H.a=J;H.c=function(v){return(1>=
(v*=2)?1-J(1-v):J(v-1)+1)/2};var w=4/11,p=6/11,k=8/11,e=.75,d=9/11,h=10/11,g=.9375,n=21/22,r=.984375,q=1/w/w},function(I,H,D){H.b=function(J){return 1-Math.sqrt(1-J*J)};H.c=function(J){return Math.sqrt(1- --J*J)};H.a=function(J){return(1>=(J*=2)?1-Math.sqrt(1-J*J):Math.sqrt(1-(J-=2)*J)+1)/2}},function(I,H,D){H.b=function(J){return J*J*J};H.c=function(J){return--J*J*J+1};H.a=function(J){return(1>=(J*=2)?J*J*J:(J-=2)*J*J+2)/2}},function(I,H,D){D.d(H,"b",function(){return w});D.d(H,"a",function(){return p});
D.d(H,"c",function(){return k});var J=2*Math.PI,w=function g(d,h){function n(q){return d*Math.pow(2,10*--q)*Math.sin((r-q)/h)}var r=Math.asin(1/(d=Math.max(1,d)))*(h/=J);n.amplitude=function(q){return g(q,h*J)};n.period=function(q){return g(d,q)};return n}(1,.3),p=function n(h,g){function r(v){return 1-h*Math.pow(2,-10*(v=+v))*Math.sin((v+q)/g)}var q=Math.asin(1/(h=Math.max(1,h)))*(g/=J);r.amplitude=function(v){return n(v,g*J)};r.period=function(v){return n(h,v)};return r}(1,.3),k=function r(g,n){function q(B){return(0>
(B=2*B-1)?g*Math.pow(2,10*B)*Math.sin((v-B)/n):2-g*Math.pow(2,-10*B)*Math.sin((v+B)/n))/2}var v=Math.asin(1/(g=Math.max(1,g)))*(n/=J);q.amplitude=function(B){return r(B,n*J)};q.period=function(B){return r(g,B)};return q}(1,.3)},function(I,H,D){H.b=function(J){return Math.pow(2,10*J-10)};H.c=function(J){return 1-Math.pow(2,-10*J)};H.a=function(J){return(1>=(J*=2)?Math.pow(2,10*J-10):2-Math.pow(2,10-10*J))/2}},function(I,H,D){H.a=function(J){return+J}},function(I,H,D){D.d(H,"b",function(){return J});
D.d(H,"c",function(){return w});D.d(H,"a",function(){return p});var J=function d(e){function h(g){return Math.pow(g,e)}e=+e;h.exponent=d;return h}(3),w=function h(d){function g(n){return 1-Math.pow(1-n,d)}d=+d;g.exponent=h;return g}(3),p=function g(h){function n(r){return(1>=(r*=2)?Math.pow(r,h):2-Math.pow(2-r,h))/2}h=+h;n.exponent=g;return n}(3)},function(I,H,D){H.b=function(J){return J*J};H.c=function(J){return J*(2-J)};H.a=function(J){return(1>=(J*=2)?J*J:--J*(2-J)+1)/2}},function(I,H,D){H.b=function(p){return 1-
Math.cos(p*w)};H.c=function(p){return Math.sin(p*w)};H.a=function(p){return(1-Math.cos(J*p))/2};var J=Math.PI,w=J/2},function(I,H,D){function J(p){return!0===w(p)&&"[object Object]"===Object.prototype.toString.call(p)}var w=D(129);I.exports=function(p){if(!1===J(p))return!1;p=p.constructor;if("function"!==typeof p)return!1;p=p.prototype;return!1===J(p)||!1===p.hasOwnProperty("isPrototypeOf")?!1:!0}},function(I,H,D){I.exports=function(J){return null!=J&&"object"===typeof J&&!1===Array.isArray(J)}},
function(I,H,D){I=function(){function J(w,p,k){void 0===p&&(p=10);void 0===k&&(k={});var e=this;this.ctx=w;this.lineHeight=p;this.style=k;this.createRuler=function(){return function(d){e.ctx.font=e.style.font;return{width:e.ctx.measureText(d).width,height:e.lineHeight}}};this.createPen=function(d,h,g){null==g&&(g=e.ctx);g.save();g.translate(h.translate[0],h.translate[1]);g.rotate(h.rotate*Math.PI/180);return e.createCanvasPen(g)};void 0===this.style.fill&&(this.style.fill="#444")}J.prototype.createCanvasPen=
function(w){var p=this;return{destroy:function(){w.restore()},write:function(k,e,d,h){w.textAlign=e;null!=p.style.font&&(w.font=p.style.font);null!=p.style.fill&&(w.fillStyle=p.style.fill,w.fillText(k,d,h));null!=p.style.stroke&&(w.strokeStyle=p.style.fill,w.strokeText(k,d,h))}}};return J}();H.CanvasContext=I},function(I,H,D){var J=function(){function w(){}w.append=function(p,k){for(var e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];e=w.create.apply(w,[k].concat(e));p.appendChild(e);return e};
w.create=function(p){for(var k=[],e=1;e<arguments.length;e++)k[e-1]=arguments[e];var d=document.createElementNS(w.SVG_NS,p);w.addClasses.apply(w,[d].concat(k));return d};w.addClasses=function(p){for(var k=[],e=1;e<arguments.length;e++)k[e-1]=arguments[e];k=k.filter(function(d){return null!=d});null!=p.classList?k.forEach(function(d){p.classList.add(d)}):p.setAttribute("class",k.join(" "))};w.getDimensions=function(p){if(p.getBBox)try{var k=p.getBBox();return{width:k.width,height:k.height}}catch(e){}return{height:0,
width:0}};return w}();J.SVG_NS="http://www.w3.org/2000/svg";H.SvgUtils=J;I=function(){function w(p,k,e){void 0===e&&(e=!1);var d=this;this.element=p;this.className=k;this.addTitleElement=e;this.createRuler=function(){var h=d.getTextElements(d.element),g=h.parentElement,n=h.containerElement,r=h.textElement;return function(q){g.appendChild(n);r.textContent=q;q=J.getDimensions(r);g.removeChild(n);return q}};this.createPen=function(h,g,n){null==n&&(n=d.element);n=J.append(n,"g","text-container",d.className);
d.addTitleElement&&(J.append(n,"title").textContent=h,n.setAttribute("title",h));h=J.append(n,"g","text-area");h.setAttribute("transform","translate("+g.translate[0]+","+g.translate[1]+")rotate("+(g.rotate+")"));return d.createSvgLinePen(h)}}w.prototype.setAddTitleElement=function(p){this.addTitleElement=p};w.prototype.createSvgLinePen=function(p){return{write:function(k,e,d,h){var g=J.append(p,"text","text-line");g.textContent=k;g.setAttribute("text-anchor",e);g.setAttribute("transform","translate("+
d+","+h+")");g.setAttribute("y","-0.25em")}}};w.prototype.getTextElements=function(p){if("text"===p.tagName){var k=p.parentElement;null==k&&(k=p.parentNode);k.removeChild(p);return{containerElement:p,parentElement:k,textElement:p}}var e=p.querySelector("text");if(null!=e)return k=p.parentElement,null==k&&(k=p.parentNode),k.removeChild(p),{containerElement:p,parentElement:k,textElement:e};k=J.create("text",this.className);return{containerElement:k,parentElement:p,textElement:k}};return w}();H.SvgContext=
I},function(I,H,D){var J=this&&this.__extends||function(k,e){function d(){this.constructor=k}for(var h in e)e.hasOwnProperty(h)&&(k[h]=e[h]);k.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)},w=D(21),p=D(36);I=function(k){function e(d){var h=k.call(this,d)||this;h.dimCache=new w.Cache(function(g){return h._measureNotFromCache(g)});return h}J(e,k);e.prototype._measureNotFromCache=function(d){return k.prototype.measure.call(this,d)};e.prototype.measure=function(d){void 0===d&&(d=
p.AbstractMeasurer.HEIGHT_TEXT);return this.dimCache.get(d)};e.prototype.reset=function(){this.dimCache.clear();k.prototype.reset.call(this)};return e}(D(60).CacheCharacterMeasurer);H.CacheMeasurer=I},function(I,H,D){var J=D(59),w=D(62),p=D(64),k=D(66);I=function(){function e(d){this.context=d;this.measurer=new w.CacheMeasurer(this.context);this.wrapper=new p.Wrapper;this.writer=new k.Writer(this.measurer,this.context,this.wrapper)}e.svg=function(d,h,g){return new e(new J.SvgContext(d,h,g))};e.canvas=
function(d,h,g){return new e(new J.CanvasContext(d,h,g))};e.prototype.write=function(d,h,g,n,r){this.writer.write(d,h,g,n,r)};e.prototype.clearMeasurerCache=function(){this.measurer.reset()};return e}();H.Typesetter=I},function(I,H,D){I=function(){function J(w){this.cache={};this.compute=w}J.prototype.get=function(w){this.cache.hasOwnProperty(w)||(this.cache[w]=this.compute(w));return this.cache[w]};J.prototype.clear=function(){this.cache={};return this};return J}();H.Cache=I},function(I,H,D){I=function(){function J(){}
J.arrayEq=function(w,p){if(null==w||null==p)return w===p;if(w.length!==p.length)return!1;for(var k=0;k<w.length;k++)if(w[k]!==p[k])return!1;return!0};J.objEq=function(w,p){if(null==w||null==p)return w===p;var k=Object.keys(w).sort(),e=Object.keys(p).sort(),d=k.map(function(g){return w[g]}),h=e.map(function(g){return p[g]});return J.arrayEq(k,e)&&J.arrayEq(d,h)};J.strictEq=function(w,p){return w===p};J.defaults=function(w){for(var p=[],k=1;k<arguments.length;k++)p[k-1]=arguments[k];if(null==w)throw new TypeError("Cannot convert undefined or null to object");
var e=Object(w);p.forEach(function(d){if(null!=d)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(e[h]=d[h])});return e};return J}();H.Methods=I},function(I,H,D){I=function(){function J(){}J.combineWhitespace=function(w){return w.replace(/[ \t]+/g," ")};J.isNotEmptyString=function(w){return w&&""!==w.trim()};J.trimStart=function(w,p){if(!w)return w;w=w.split("");var k=p?function(e){return e.split(p).some(J.isNotEmptyString)}:J.isNotEmptyString;return w.reduce(function(e,d){return k(e+d)?
e+d:e},"")};J.trimEnd=function(w,p){if(!w)return w;w=w.split("");w.reverse();w=J.trimStart(w.join(""),p).split("");w.reverse();return w.join("")};return J}();H.StringMethods=I},function(I,H,D){I=function(){function J(){this.WordDividerRegExp=RegExp("\\W");this.WhitespaceRegExp=RegExp("\\s")}J.prototype.tokenize=function(w){var p=this;return w.split("").reduce(function(k,e){return k.slice(0,-1).concat(p.shouldCreateNewToken(k[k.length-1],e))},[""])};J.prototype.shouldCreateNewToken=function(w,p){if(!w)return[p];
var k=w[w.length-1];return this.WhitespaceRegExp.test(k)&&this.WhitespaceRegExp.test(p)?[w+p]:this.WhitespaceRegExp.test(k)||this.WhitespaceRegExp.test(p)?[w,p]:this.WordDividerRegExp.test(k)||this.WordDividerRegExp.test(p)?k===p?[w+p]:[w,p]:[w+p]};return J}();H.Tokenizer=I},function(I,H,D){var J=this&&this.__extends||function(w,p){function k(){this.constructor=w}for(var e in p)p.hasOwnProperty(e)&&(w[e]=p[e]);w.prototype=null===p?Object.create(p):(k.prototype=p.prototype,new k)};I=function(w){function p(){return w.apply(this,
arguments)||this}J(p,w);p.prototype.wrap=function(k,e,d,h){void 0===h&&(h=Infinity);if(1<k.split("\n").length)throw Error("SingleLineWrapper is designed to work only on single line");var g=w.prototype.wrap.call(this,k,e,d,h);if(2>g.noLines)return g;for(var n=0,r=0;r<p.NO_WRAP_ITERATIONS&&d>n;++r){var q=(d+n)/2,v=w.prototype.wrap.call(this,k,e,q,h);this.areSameResults(g,v)?(d=q,g=v):n=q}return g};p.prototype.areSameResults=function(k,e){return k.noLines===e.noLines&&k.truncatedText===e.truncatedText};
return p}(D(65).Wrapper);I.NO_WRAP_ITERATIONS=5;H.SingleLineWrapper=I},function(I,H,D){var J=D(21),w={textRotation:0,textShear:0,xAlign:"left",yAlign:"top"};I=function(){function p(k,e,d){this._measurer=k;this._penFactory=e;this._wrapper=d}p.prototype.measurer=function(k){this._measurer=k;return this};p.prototype.wrapper=function(k){this._wrapper=k;return this};p.prototype.penFactory=function(k){this._penFactory=k;return this};p.prototype.write=function(k,e,d,h,g){void 0===h&&(h={});h=J.Methods.defaults({},
w,h);if(-1===p.SupportedRotation.indexOf(h.textRotation))throw Error("unsupported rotation - "+h.textRotation+". Supported rotations are "+p.SupportedRotation.join(", "));if(null!=h.textShear&&-80>h.textShear||80<h.textShear)throw Error("unsupported shear angle - "+h.textShear+". Must be between -80 and 80");var n=45<Math.abs(Math.abs(h.textRotation)-90),r=n?e:d,q=n?d:e,v=h.textShear,B=v*Math.PI/180;n=this._measurer.measure().height;var K=n*Math.tan(B);r=r/Math.cos(B)-Math.abs(K);var C=q*Math.cos(B);
q=J.StringMethods.combineWhitespace(k);q=(this._wrapper?this._wrapper.wrap(q,this._measurer,r,C).wrappedText:q).split("\n");B=p.XOffsetFactor[h.xAlign]*r*Math.sin(B)-p.YOffsetFactor[h.yAlign]*(C-q.length*n);v=h.textRotation+v;switch(h.textRotation){case 90:e=[e+B,0];break;case -90:e=[-B,d];break;case 180:e=[e,d+B];break;default:e=[0,-B]}k=this._penFactory.createPen(k,{translate:e,rotate:v},g);this.writeLines(q,k,r,n,K,h.xAlign);null!=k.destroy&&k.destroy()};p.prototype.writeLines=function(k,e,d,h,
g,n){k.forEach(function(r,q){e.write(r,p.AnchorConverter[n],(0<g?(q+1)*g:q*g)+d*p.XOffsetFactor[n],(q+1)*h)})};return p}();I.SupportedRotation=[-90,0,180,90];I.AnchorConverter={center:"middle",left:"start",right:"end"};I.XOffsetFactor={center:.5,left:0,right:1};I.YOffsetFactor={bottom:1,center:.5,top:0};H.Writer=I},function(I,H,D){function J(w){for(var p in w)H.hasOwnProperty(p)||(H[p]=w[p])}D(69);I=D(7);H.Animators=I;I=D(67);H.Axes=I;I=D(37);H.Components=I;I=D(23);H.Configs=I;I=D(8);H.Formatters=
I;I=D(30);H.RenderController=I;I=D(39);H.RenderPolicies=I;I=D(31);H.SymbolFactories=I;I=D(13);H.Dispatchers=I;I=D(14);H.Drawers=I;I=D(25);H.Interactions=I;I=D(19);H.Plots=I;I=D(3);H.Scales=I;I=D(0);H.Utils=I;J(D(22));I=D(28);H.TimeInterval=I.TimeInterval;J(D(4));J(D(29));J(D(38));I=D(68);H.version=I.version;J(D(24));J(D(6));J(D(15));J(D(40));J(D(16));J(D(2));J(D(11));J(D(17))}])}(d3);
